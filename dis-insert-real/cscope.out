cscope 15 /home/dcslab/charlie/skiplist-nvstore/dis-insert               0000473676
	@bitmap.h

1 #iâdeà
BITMAP_H


2 
	#BITMAP_H


	)

3 
	~<c¡ršg
>

4 
	~<io¡»am
>

6 
	#__cÚ¡_hweight8
(
w
) \

8 ((!!((
w
) & (1ULL << 0))) + \

9 (!!((
w
) & (1ULL << 1))) + \

10 (!!((
w
) & (1ULL << 2))) + \

11 (!!((
w
) & (1ULL << 3))) + \

12 (!!((
w
) & (1ULL << 4))) + \

13 (!!((
w
) & (1ULL << 5))) + \

14 (!!((
w
) & (1ULL << 6))) + \

15 (!!((
w
è& (1ULL << 7)))))

	)

17 
	#__cÚ¡_hweight16
(
w
è(
	`__cÚ¡_hweight8
(wè+ __cÚ¡_hweight8((wè>> 8 ))

	)

18 
	#__cÚ¡_hweight32
(
w
è(
	`__cÚ¡_hweight16
(wè+ __cÚ¡_hweight16((wè>> 16))

	)

19 
	#__cÚ¡_hweight64
(
w
è(
	`__cÚ¡_hweight32
(wè+ __cÚ¡_hweight32((wè>> 32))

	)

21 
	#BITS_PER_BYTE
 8

	)

22 
	#BITS_PER_LONG
 64

	)

23 
	#_BITOPS_LONG_SHIFT
 6

	)

24 
	#DIV_ROUND_UP
(
n
,
d
è((Òè+ (dè-1è/ (d))

	)

25 
	#BITS_TO_LONGS
(
Ä
è
	`DIV_ROUND_UP
Òr, 
BITS_PER_BYTE
 * ())

	)

27 
	#DECLARE_BITMAP
(
Çme
, 
b™s
) \

28 
Çme
[
	`BITS_TO_LONGS
(
b™s
)]

	)

30 
	#BITOP_ADDR
(
x
è"+m" (*(vŞ©*è(x))

	)

31 
	#ADDR
 
	`BITOP_ADDR
(
addr
)

	)

34 
šlše
 
	$__£t_b™
(
Ä
, vŞ©*
addr
)

36 
asm
 vŞ©e("bt %1,%0": 
ADDR
 : "Ir" (
Ä
) : "memory");

37 
	}
}

39 
šlše
 
	$__ş—r_b™
(
Ä
, vŞ©*
addr
)

41 
asm
 vŞ©e("bŒ %1,%0" : 
ADDR
 : "Ir" (
Ä
));

42 
	}
}

44 
šlše
 
boŞ
 
	$cÚ¡_‹¡_b™
(
Ä
, cÚ¡ vŞ©*
addr
)

46  ((1UL << (
Ä
 & (
BITS_PER_LONG
-1))è& (
addr
[Ä >> 
_BITOPS_LONG_SHIFT
])) != 0;

47 
	}
}

52 
šlše
 
	$__ffs
(
wÜd
)

54 
	`asm
("rep; bsf %1,%0"

55 : "ô" (
wÜd
)

56 : "rm" (
wÜd
));

57  
wÜd
;

58 
	}
}

63 
šlše
 
	$__æs
(
wÜd
)

65 
	`asm
("bsr %1,%0"

66 : "ô" (
wÜd
)

67 : "rm" (
wÜd
));

68  
wÜd
;

69 
	}
}

73 
šlše
 
	$__ffz
(
wÜd
)

75 
	`asm
("rep; bsf %1,%0"

76 : "ô" (
wÜd
)

77 : "r" (~
wÜd
));

78  
wÜd
;

79 
	}
}

81 
šlše
 
	$hweight_lÚg
(
w
)

83  (
w
è=ğ4 ? 
	`__cÚ¡_hweight32
(wè: 
	`__cÚ¡_hweight64
(w);

84 
	}
}

87 
šlše
 
boŞ
 
	$v¬ŸbË_‹¡_b™
(, vŞ©cÚ¡ *
addr
)

89 
boŞ
 
Şdb™
;

90 
asm
 volatile("bt %2,%1\n\t"

91 
	`CC_SET
(
c
)

92 :
	`CC_OUT
(
c
è(
Şdb™
)

93 : "m" (*(*)
addr
), "Ir" (
Ä
));

94  
Şdb™
;

95 
	}
}

	@btree.h

32 #iâdeà
STX_STX_BTREE_H_HEADER


33 
	#STX_STX_BTREE_H_HEADER


	)

42 
	~<c¡ršg
>

43 
	~<®gÜ™hm
>

44 
	~<funùiÚ®
>

45 
	~<i¡»am
>

46 
	~<o¡»am
>

47 
	~<memÜy
>

48 
	~<c¡ddef
>

49 
	~<ÿs£¹
>

50 
	~<b™£t
>

51 
	~<veùÜ
>

52 
	~"nv_back’d.h
"

53 
	~"b™m­.h
"

55 
	#NVRAM_LEN
 1.999 * 1024 * 1024 * 1024

56 

	)

60 #ifdeà
BTREE_DEBUG


62 
	~<io¡»am
>

65 
	#BTREE_PRINT
(
x
èdØ{ ià(
debug
è(
¡d
::
cout
 << x << std::
’dl
); } 0)

	)

68 
	#BTREE_ASSERT
(
x
èdØ{ 
	`as£¹
(x); } 0)

	)

73 
	#BTREE_PRINT
(
x
èdØ{ } 0)

	)

76 
	#BTREE_ASSERT
(
x
èdØ{ } 0)

	)

81 
	#BTREE_MAX
(
a
, 
b
è(×è< (bè? (bè: (a))

	)

83 #iâdeà
BTREE_FRIENDS


87 
	#BTREE_FRIENDS
 
ä›nd
 
şass
 
bŒ“_ä›nd
;

	)

92 
Çme¥aû
 
	g¡x
 {

96 
	g‹m¶©e
 <
ty³Çme
 
	g_Key
>

97 şas 
	cbŒ“_deçuÉ_£t_Œa™s


99 
	gpublic
:

102 cÚ¡ 
boŞ
 
£lfv”ify
 = 
çl£
;

108 cÚ¡ 
boŞ
 
	gdebug
 = 
çl£
;

112 cÚ¡ 
	gËaf¦Ùs
 = 
BTREE_MAX
(8, 256 / ((
_Key
)));

116 cÚ¡ 
	gšÃr¦Ùs
 = 
BTREE_MAX
(8, 256 / ((
_Key
) + (*)));

122 cÚ¡ 
size_t
 
	gbš£¬ch_th»shŞd
 = 64;

127 
	g‹m¶©e
 <
ty³Çme
 
	g_Key
,y³Çm
	g_D©a
>

128 şas 
	cbŒ“_deçuÉ_m­_Œa™s


130 
	gpublic
:

133 cÚ¡ 
boŞ
 
£lfv”ify
 = 
çl£
;

139 cÚ¡ 
boŞ
 
	gdebug
 = 
çl£
;

143 cÚ¡ 
	gËaf¦Ùs
 = 
BTREE_MAX
(8, 256 / ((
_Key
è+ (
_D©a
)));

147 cÚ¡ 
	gšÃr¦Ùs
 = 
BTREE_MAX
(8, 256 / ((
_Key
) + (*)));

153 cÚ¡ 
size_t
 
	gbš£¬ch_th»shŞd
 = 256;

169 
	g‹m¶©e
 <
ty³Çme
 
	g_Key
,y³Çm
	g_D©a
,

170 
ty³Çme
 
	g_V®ue
 = 
¡d
::
·œ
<
_Key
, 
	g_D©a
>,

171 
ty³Çme
 
	g_Com·»
 = 
¡d
::
Ëss
<
_Key
>,

172 
ty³Çme
 
	g_T¿™s
 = 
bŒ“_deçuÉ_m­_Œa™s
<
_Key
, 
	g_D©a
>,

173 
boŞ
 
	g_Du¶iÿ‹s
 = 
çl£
,

174 
ty³Çme
 
	g_AÎoc
 = 
¡d
::
®loÿtÜ
<
_V®ue
>,

175 
boŞ
 
	g_U£dAsS‘
 = 
çl£
>

176 şas 
	cbŒ“


178 
public
:

183 
_Key
 
	tkey_ty³
;

187 
_D©a
 
	td©a_ty³
;

193 
_V®ue
 
	tv®ue_ty³
;

196 
_Com·»
 
	tkey_com·»
;

200 
_T¿™s
 
	tŒa™s
;

204 cÚ¡ 
boŞ
 
	g®low_du¶iÿ‹s
 = 
_Du¶iÿ‹s
;

207 
_AÎoc
 
	t®loÿtÜ_ty³
;

214 cÚ¡ 
boŞ
 
	gu£d_as_£t
 = 
_U£dAsS‘
;

220 
	gnv’Œy_couÁ
;

221 
	gnvb™m­_couÁ
;

222 
	gnvnode_couÁ
;

223 
BTREE_FRIENDS


225 
	gpublic
:

229 
bŒ“
<
	tkey_ty³
, 
	td©a_ty³
, 
	tv®ue_ty³
, 
	tkey_com·»
,

230 
	tŒa™s
, 
	t®low_du¶iÿ‹s
, 
	t®loÿtÜ_ty³
, 
	tu£d_as_£t
> 
	t£lf_ty³
;

233 
size_t
 
	tsize_ty³
;

237 
	g¡d
::
	t·œ
<
	tkey_ty³
, 
	td©a_ty³
> 
	t·œ_ty³
;

239 
	gpublic
:

243 cÚ¡ 
Ëaf¦Ùmax
 = 
Œa™s
::
Ëaf¦Ùs
;

247 cÚ¡ 
	gšÃr¦Ùmax
 = 
Œa™s
::
šÃr¦Ùs
;

252 cÚ¡ 
	gmšËaf¦Ùs
 = (
Ëaf¦Ùmax
 / 2);

257 cÚ¡ 
	gmššÃr¦Ùs
 = (
šÃr¦Ùmax
 / 2);

261 cÚ¡ 
boŞ
 
	g£lfv”ify
 = 
Œa™s
::
£lfv”ify
;

266 cÚ¡ 
boŞ
 
	gdebug
 = 
Œa™s
::
debug
;

268 
	g´iv©e
:

273 
	snode


276 
Ëv–
;

280 
	g¦Ùu£
;

283 
šlše
 
node
(cÚ¡ 
l
, cÚ¡ 
s
 = 0)

284 : 
Ëv–
(
l
), 
¦Ùu£
(
s
)

288 
šlše
 
boŞ
 
i¦—âode
() const

290  (
	gËv–
 == 0);

296 
	gšÃr_node
 : 
public
 
node


299 
ty³Çme
 
	t_AÎoc
::
	t‹m¶©e
 
	t»bšd
<
	tšÃr_node
>::
	tÙh”
 
	t®loc_ty³
;

302 
key_ty³
 
	g¦Ùkey
[
šÃr¦Ùmax
];

305 
node
 * 
	gchdid
[
šÃr¦Ùmax
 + 1];

308 
šlše
 
šÃr_node
(cÚ¡ 
l
)

309 : 
node
(
l
)

311 
mem£t
(
¦Ùkey
, 0x0, (
key_ty³
è* 
šÃr¦Ùmax
);

312 
mem£t
(
chdid
, 0x0, (
node
 *è* (
šÃr¦Ùmax
 + 1));

316 
šlše
 
šÃr_node
(cÚ¡ 
node
& 
tİ
)

317 : 
node
(
tİ
.
Ëv–
,İ.
¦Ùu£
)

321 
šlše
 
boŞ
 
isfuÎ
() const

323  (
	gnode
::
¦Ùu£
 =ğ
šÃr¦Ùmax
);

327 
šlše
 
boŞ
 
isãw
() const

329  (
	gnode
::
¦Ùu£
 <ğ
mššÃr¦Ùs
);

333 
šlše
 
boŞ
 
isund”æow
() const

335  (
	gnode
::
¦Ùu£
 < 
mššÃr¦Ùs
);

342 
	gËaf_node
 : 
public
 
node


345 
ty³Çme
 
	t_AÎoc
::
	t‹m¶©e
 
	t»bšd
<
	tËaf_node
>::
	tÙh”
 
	t®loc_ty³
;

348 
Ëaf_node
 * 
	g´evËaf
;

351 
Ëaf_node
 * 
	gÃx—f
;

354 
key_ty³
 
	g¦Ùkey
[
Ëaf¦Ùmax
];

357 
d©a_ty³
 
	g¦Ùd©a
[
u£d_as_£t
 ? 1 : 
Ëaf¦Ùmax
];

360 
	gbs
[
BITS_TO_LONGS
(
Ëaf¦Ùmax
)];

363 
šlše
 
Ëaf_node
()

364 : 
node
(0), 
´evËaf
(
NULL
), 
Ãx—f
(NULL)

370 
šlše
 
Ëaf_node
(cÚ¡ 
node
& 
tİ
)

371 : 
node
(
tİ
.
Ëv–
,İ.
¦Ùu£
), 
´evËaf
(
NULL
), 
Ãx—f
(NULL)

374 
šlše
 
couÁ
() const

376  
hweight_lÚg
(*
bs
);

380 
šlše
 
boŞ
 
isfuÎ
() const

382  (
	gËaf_node
::
couÁ
(è=ğ
Ëaf¦Ùmax
);

386 
šlše
 
boŞ
 
isãw
() const

388  (
	gnode
::
¦Ùu£
 <ğ
mšËaf¦Ùs
);

392 
šlše
 
boŞ
 
isund”æow
() const

394  (
	gnode
::
¦Ùu£
 < 
mšËaf¦Ùs
);

398 
b™m­_£t
(
šdex
)

400 
__£t_b™
(
šdex
, 
bs
);

404 
b™m­_g‘
(
šdex
) const

406  
cÚ¡_‹¡_b™
(
šdex
, 
bs
);

410 
b™m­_ş—r
(
šdex
)

412 
__ş—r_b™
(
šdex
, 
bs
);

416 
g‘_fœ¡_£t_b™
()

418  
__ffs
(*
bs
);

422 
g‘_Ï¡_£t_b™
()

424  
__æs
(*
bs
);

429 
g‘_fœ¡_ä“_b™
()

431  
__ffz
(*
bs
);

436 
šlše
 
£t_¦Ù
(
¦Ù
, cÚ¡ 
·œ_ty³
& 
v®ue
)

438 
BTREE_ASSERT
(
u£d_as_£t
 =ğ
çl£
);

439 
BTREE_ASSERT
(
¦Ù
 < 
node
::
¦Ùu£
);

440 
	g¦Ùkey
[
¦Ù
] = 
v®ue
.
fœ¡
;

441 
	g¦Ùd©a
[
¦Ù
] = 
v®ue
.
£cÚd
;

446 
šlše
 
£t_¦Ù
(
¦Ù
, cÚ¡ 
key_ty³
& 
key
)

448 
BTREE_ASSERT
(
u£d_as_£t
 =ğ
Œue
);

449 
BTREE_ASSERT
(
¦Ù
 < 
node
::
¦Ùu£
);

450 
	g¦Ùkey
[
¦Ù
] = 
key
;

454 
	g´iv©e
:

459 
‹m¶©e
 <
ty³Çme
 
v®ue_ty³
,y³Çm
	g·œ_ty³
>

460 
	sbŒ“_·œ_to_v®ue


463 
šlše
 
v®ue_ty³
 
İ”©Ü
 (è(
	g·œ_ty³
& 
	gp
) const

465  
	gp
.
	gfœ¡
;

468 
šlše
 
v®ue_ty³
 
İ”©Ü
 (è(cÚ¡ 
	g·œ_ty³
& 
	gp
) const

470  
	gp
.
	gfœ¡
;

475 
	g‹m¶©e
 <
ty³Çme
 
	gv®ue_ty³
>

476 
	gbŒ“_·œ_to_v®ue
<
	gv®ue_ty³
, value_type>

479 
šlše
 
v®ue_ty³
 
İ”©Ü
 (è(
	g·œ_ty³
& 
	gp
) const

481  
	gp
;

484 
šlše
 
v®ue_ty³
 
İ”©Ü
 (è(cÚ¡ 
	g·œ_ty³
& 
	gp
) const

486  
	gp
;

492 
	gbŒ“_·œ_to_v®ue
<
	tv®ue_ty³
, 
	t·œ_ty³
> 
	t·œ_to_v®ue_ty³
;

494 
	gpublic
:

497 
şass
 
™”©Ü
;

498 
şass
 
	gcÚ¡_™”©Ü
;

499 
şass
 
	g»v”£_™”©Ü
;

500 
şass
 
	gcÚ¡_»v”£_™”©Ü
;

504 şas 
	c™”©Ü


506 
	gpublic
:

510 
ty³Çme
 
	tbŒ“
::
	tkey_ty³
 key_type;

513 
ty³Çme
 
	tbŒ“
::
	td©a_ty³
 data_type;

516 
ty³Çme
 
	tbŒ“
::
	tv®ue_ty³
 value_type;

519 
ty³Çme
 
	tbŒ“
::
	t·œ_ty³
…air_type;

522 
	gv®ue_ty³
& 
	t»ã»nû
;

525 
v®ue_ty³
* 
	tpoš‹r
;

528 
	g¡d
::
	tbidœeùiÚ®_™”©Ü_g
 
	t™”©Ü_ÿ‹gÜy
;

531 
±rdiff_t
 
	tdifã»nû_ty³
;

533 
	g´iv©e
:

537 
ty³Çme
 
bŒ“
::
Ëaf_node
 * 
cu¼node
;

540 
	gcu¼¦Ù
;

544 
ä›nd
 
şass
 
	gcÚ¡_™”©Ü
;

548 
ä›nd
 
şass
 
	g»v”£_™”©Ü
;

552 
ä›nd
 
şass
 
	gcÚ¡_»v”£_™”©Ü
;

556 
ä›nd
 
şass
 
	gbŒ“
<
	gkey_ty³
, 
	gd©a_ty³
, 
	gv®ue_ty³
, 
	gkey_com·»
,

557 
	gŒa™s
, 
	g®low_du¶iÿ‹s
, 
	g®loÿtÜ_ty³
, 
	gu£d_as_£t
>;

561 
mubË
 
v®ue_ty³
 
	g‹mp_v®ue
;

566 
BTREE_FRIENDS


568 
	gpublic
:

572 
šlše
 
™”©Ü
()

573 : 
cu¼node
(
NULL
), 
cu¼¦Ù
(0)

577 
šlše
 
™”©Ü
(
ty³Çme
 
bŒ“
::
Ëaf_node
* 
l
, 
s
)

578 : 
cu¼node
(
l
), 
cu¼¦Ù
(
s
)

582 
šlše
 
™”©Ü
(cÚ¡ 
»v”£_™”©Ü
& 
™
)

583 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

588 
šlše
 
»ã»nû
 
	gİ”©Ü
 * () const

590 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

591  
	g‹mp_v®ue
;

597 
šlše
 
poš‹r
 
	gİ”©Ü
 -> () const

599 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

600  &
	g‹mp_v®ue
;

604 
šlše
 cÚ¡ 
	gkey_ty³
 & 
key
() const

606  
	gcu¼node
->
	g¦Ùkey
[
cu¼¦Ù
];

610 
šlše
 
	gd©a_ty³
 & 
d©a
() const

612  
	gcu¼node
->
	g¦Ùd©a
[
u£d_as_£t
 ? 0 : 
cu¼¦Ù
];

616 
šlše
 
	g™”©Ü
& 
	gİ”©Ü
 ++ ()

618 ià(
	gcu¼¦Ù
 + 1 < 
	gcu¼node
->
	g¦Ùu£
) {

619 ++
	gcu¼¦Ù
;

621 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

622 
cu¼node
 = cu¼node->
Ãx—f
;

623 
	gcu¼¦Ù
 = 0;

627 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

630  *
	gthis
;

634 
šlše
 
™”©Ü
 
	gİ”©Ü
 ++ ()

636 
™”©Ü
 
	gtmp
 = *
this
;

638 ià(
	gcu¼¦Ù
 + 1 < 
	gcu¼node
->
	g¦Ùu£
) {

639 ++
	gcu¼¦Ù
;

641 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

642 
cu¼node
 = cu¼node->
Ãx—f
;

643 
	gcu¼¦Ù
 = 0;

647 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

650  
	gtmp
;

654 
šlše
 
	g™”©Ü
& 
	gİ”©Ü
 -- ()

656 ià(
	gcu¼¦Ù
 > 0) {

657 --
	gcu¼¦Ù
;

659 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

660 
cu¼node
 = cu¼node->
´evËaf
;

661 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
 - 1;

665 
	gcu¼¦Ù
 = 0;

668  *
	gthis
;

672 
šlše
 
™”©Ü
 
	gİ”©Ü
 -- ()

674 
™”©Ü
 
	gtmp
 = *
this
;

676 ià(
	gcu¼¦Ù
 > 0) {

677 --
	gcu¼¦Ù
;

679 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

680 
cu¼node
 = cu¼node->
´evËaf
;

681 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
 - 1;

685 
	gcu¼¦Ù
 = 0;

688  
	gtmp
;

692 
šlše
 
boŞ
 
	gİ”©Ü
 =ğ(cÚ¡ 
™”©Ü
& 
x
) const

694  (
x
.
cu¼node
 =ğcu¼nodeè&& (x.
cu¼¦Ù
 == currslot);

698 
šlše
 
boŞ
 
	gİ”©Ü
 !ğ(cÚ¡ 
™”©Ü
& 
x
) const

700  (
x
.
cu¼node
 !ğcu¼nodeè|| (x.
cu¼¦Ù
 != currslot);

706 şas 
	ccÚ¡_™”©Ü


708 
	gpublic
:

712 
ty³Çme
 
	tbŒ“
::
	tkey_ty³
 key_type;

715 
ty³Çme
 
	tbŒ“
::
	td©a_ty³
 data_type;

718 
ty³Çme
 
	tbŒ“
::
	tv®ue_ty³
 value_type;

721 
ty³Çme
 
	tbŒ“
::
	t·œ_ty³
…air_type;

724 cÚ¡ 
	tv®ue_ty³
& 
	t»ã»nû
;

727 cÚ¡ 
	tv®ue_ty³
* 
	tpoš‹r
;

730 
	g¡d
::
	tbidœeùiÚ®_™”©Ü_g
 
	t™”©Ü_ÿ‹gÜy
;

733 
±rdiff_t
 
	tdifã»nû_ty³
;

735 
	g´iv©e
:

739 cÚ¡ 
ty³Çme
 
bŒ“
::
Ëaf_node
 * 
cu¼node
;

742 
	gcu¼¦Ù
;

746 
ä›nd
 
şass
 
	gcÚ¡_»v”£_™”©Ü
;

750 
mubË
 
v®ue_ty³
 
	g‹mp_v®ue
;

755 
BTREE_FRIENDS


757 
	gpublic
:

761 
šlše
 
cÚ¡_™”©Ü
()

762 : 
cu¼node
(
NULL
), 
cu¼¦Ù
(0)

766 
šlše
 
cÚ¡_™”©Ü
(cÚ¡ 
ty³Çme
 
bŒ“
::
Ëaf_node
* 
l
, 
s
)

767 : 
cu¼node
(
l
), 
cu¼¦Ù
(
s
)

771 
šlše
 
cÚ¡_™”©Ü
(cÚ¡ 
™”©Ü
& 
™
)

772 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

776 
šlše
 
cÚ¡_™”©Ü
(cÚ¡ 
»v”£_™”©Ü
& 
™
)

777 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

781 
šlše
 
cÚ¡_™”©Ü
(cÚ¡ 
cÚ¡_»v”£_™”©Ü
& 
™
)

782 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

788 
šlše
 
»ã»nû
 
	gİ”©Ü
 * () const

790 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

791  
	g‹mp_v®ue
;

797 
šlše
 
poš‹r
 
	gİ”©Ü
 -> () const

799 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

800  &
	g‹mp_v®ue
;

804 
šlše
 cÚ¡ 
	gkey_ty³
 & 
key
() const

806  
	gcu¼node
->
	g¦Ùkey
[
cu¼¦Ù
];

810 
šlše
 cÚ¡ 
	gd©a_ty³
 & 
d©a
() const

812  
	gcu¼node
->
	g¦Ùd©a
[
u£d_as_£t
 ? 0 : 
cu¼¦Ù
];

816 
šlše
 
	gcÚ¡_™”©Ü
& 
	gİ”©Ü
 ++ ()

818 ià(
	gcu¼¦Ù
 + 1 < 
	gcu¼node
->
	g¦Ùu£
) {

819 ++
	gcu¼¦Ù
;

821 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

822 
cu¼node
 = cu¼node->
Ãx—f
;

823 
	gcu¼¦Ù
 = 0;

827 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

830  *
	gthis
;

834 
šlše
 
cÚ¡_™”©Ü
 
	gİ”©Ü
 ++ ()

836 
cÚ¡_™”©Ü
 
	gtmp
 = *
this
;

838 ià(
	gcu¼¦Ù
 + 1 < 
	gcu¼node
->
	g¦Ùu£
) {

839 ++
	gcu¼¦Ù
;

841 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

842 
cu¼node
 = cu¼node->
Ãx—f
;

843 
	gcu¼¦Ù
 = 0;

847 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

850  
	gtmp
;

854 
šlše
 
	gcÚ¡_™”©Ü
& 
	gİ”©Ü
 -- ()

856 ià(
	gcu¼¦Ù
 > 0) {

857 --
	gcu¼¦Ù
;

859 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

860 
cu¼node
 = cu¼node->
´evËaf
;

861 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
 - 1;

865 
	gcu¼¦Ù
 = 0;

868  *
	gthis
;

872 
šlše
 
cÚ¡_™”©Ü
 
	gİ”©Ü
 -- ()

874 
cÚ¡_™”©Ü
 
	gtmp
 = *
this
;

876 ià(
	gcu¼¦Ù
 > 0) {

877 --
	gcu¼¦Ù
;

879 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

880 
cu¼node
 = cu¼node->
´evËaf
;

881 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
 - 1;

885 
	gcu¼¦Ù
 = 0;

888  
	gtmp
;

892 
šlše
 
boŞ
 
	gİ”©Ü
 =ğ(cÚ¡ 
cÚ¡_™”©Ü
& 
x
) const

894  (
x
.
cu¼node
 =ğcu¼nodeè&& (x.
cu¼¦Ù
 == currslot);

898 
šlše
 
boŞ
 
	gİ”©Ü
 !ğ(cÚ¡ 
cÚ¡_™”©Ü
& 
x
) const

900  (
x
.
cu¼node
 !ğcu¼nodeè|| (x.
cu¼¦Ù
 != currslot);

906 şas 
	c»v”£_™”©Ü


908 
	gpublic
:

912 
ty³Çme
 
	tbŒ“
::
	tkey_ty³
 key_type;

915 
ty³Çme
 
	tbŒ“
::
	td©a_ty³
 data_type;

918 
ty³Çme
 
	tbŒ“
::
	tv®ue_ty³
 value_type;

921 
ty³Çme
 
	tbŒ“
::
	t·œ_ty³
…air_type;

924 
	gv®ue_ty³
& 
	t»ã»nû
;

927 
v®ue_ty³
* 
	tpoš‹r
;

930 
	g¡d
::
	tbidœeùiÚ®_™”©Ü_g
 
	t™”©Ü_ÿ‹gÜy
;

933 
±rdiff_t
 
	tdifã»nû_ty³
;

935 
	g´iv©e
:

939 
ty³Çme
 
bŒ“
::
Ëaf_node
 * 
cu¼node
;

942 
	gcu¼¦Ù
;

946 
ä›nd
 
şass
 
	g™”©Ü
;

950 
ä›nd
 
şass
 
	gcÚ¡_™”©Ü
;

954 
ä›nd
 
şass
 
	gcÚ¡_»v”£_™”©Ü
;

958 
mubË
 
v®ue_ty³
 
	g‹mp_v®ue
;

963 
BTREE_FRIENDS


965 
	gpublic
:

969 
šlše
 
»v”£_™”©Ü
()

970 : 
cu¼node
(
NULL
), 
cu¼¦Ù
(0)

974 
šlše
 
»v”£_™”©Ü
(
ty³Çme
 
bŒ“
::
Ëaf_node
* 
l
, 
s
)

975 : 
cu¼node
(
l
), 
cu¼¦Ù
(
s
)

979 
šlše
 
»v”£_™”©Ü
(cÚ¡ 
™”©Ü
& 
™
)

980 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

985 
šlše
 
»ã»nû
 
	gİ”©Ü
 * () const

987 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

988 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

989  
	g‹mp_v®ue
;

995 
šlše
 
poš‹r
 
	gİ”©Ü
 -> () const

997 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

998 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

999  &
	g‹mp_v®ue
;

1003 
šlše
 cÚ¡ 
	gkey_ty³
 & 
key
() const

1005 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1006  
	gcu¼node
->
	g¦Ùkey
[
cu¼¦Ù
 - 1];

1010 
šlše
 
	gd©a_ty³
 & 
d©a
() const

1012 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1013  
	gcu¼node
->
	g¦Ùd©a
[
u£d_as_£t
 ? 0 : 
cu¼¦Ù
 - 1];

1017 
šlše
 
	g»v”£_™”©Ü
& 
	gİ”©Ü
 ++ ()

1019 ià(
	gcu¼¦Ù
 > 1) {

1020 --
	gcu¼¦Ù
;

1022 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

1023 
cu¼node
 = cu¼node->
´evËaf
;

1024 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1028 
	gcu¼¦Ù
 = 0;

1031  *
	gthis
;

1035 
šlše
 
»v”£_™”©Ü
 
	gİ”©Ü
 ++ ()

1037 
»v”£_™”©Ü
 
	gtmp
 = *
this
;

1039 ià(
	gcu¼¦Ù
 > 1) {

1040 --
	gcu¼¦Ù
;

1042 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

1043 
cu¼node
 = cu¼node->
´evËaf
;

1044 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1048 
	gcu¼¦Ù
 = 0;

1051  
	gtmp
;

1055 
šlše
 
	g»v”£_™”©Ü
& 
	gİ”©Ü
 -- ()

1057 ià(
	gcu¼¦Ù
 < 
	gcu¼node
->
	g¦Ùu£
) {

1058 ++
	gcu¼¦Ù
;

1060 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

1061 
cu¼node
 = cu¼node->
Ãx—f
;

1062 
	gcu¼¦Ù
 = 1;

1066 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1069  *
	gthis
;

1073 
šlše
 
»v”£_™”©Ü
 
	gİ”©Ü
 -- ()

1075 
»v”£_™”©Ü
 
	gtmp
 = *
this
;

1077 ià(
	gcu¼¦Ù
 < 
	gcu¼node
->
	g¦Ùu£
) {

1078 ++
	gcu¼¦Ù
;

1080 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

1081 
cu¼node
 = cu¼node->
Ãx—f
;

1082 
	gcu¼¦Ù
 = 1;

1086 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1089  
	gtmp
;

1093 
šlše
 
boŞ
 
	gİ”©Ü
 =ğ(cÚ¡ 
»v”£_™”©Ü
& 
x
) const

1095  (
x
.
cu¼node
 =ğcu¼nodeè&& (x.
cu¼¦Ù
 == currslot);

1099 
šlše
 
boŞ
 
	gİ”©Ü
 !ğ(cÚ¡ 
»v”£_™”©Ü
& 
x
) const

1101  (
x
.
cu¼node
 !ğcu¼nodeè|| (x.
cu¼¦Ù
 != currslot);

1107 şas 
	ccÚ¡_»v”£_™”©Ü


1109 
	gpublic
:

1113 
ty³Çme
 
	tbŒ“
::
	tkey_ty³
 key_type;

1116 
ty³Çme
 
	tbŒ“
::
	td©a_ty³
 data_type;

1119 
ty³Çme
 
	tbŒ“
::
	tv®ue_ty³
 value_type;

1122 
ty³Çme
 
	tbŒ“
::
	t·œ_ty³
…air_type;

1125 cÚ¡ 
	tv®ue_ty³
& 
	t»ã»nû
;

1128 cÚ¡ 
	tv®ue_ty³
* 
	tpoš‹r
;

1131 
	g¡d
::
	tbidœeùiÚ®_™”©Ü_g
 
	t™”©Ü_ÿ‹gÜy
;

1134 
±rdiff_t
 
	tdifã»nû_ty³
;

1136 
	g´iv©e
:

1140 cÚ¡ 
ty³Çme
 
bŒ“
::
Ëaf_node
 * 
cu¼node
;

1143 
	gcu¼¦Ù
;

1147 
ä›nd
 
şass
 
	g»v”£_™”©Ü
;

1151 
mubË
 
v®ue_ty³
 
	g‹mp_v®ue
;

1156 
BTREE_FRIENDS


1158 
	gpublic
:

1162 
šlše
 
cÚ¡_»v”£_™”©Ü
()

1163 : 
cu¼node
(
NULL
), 
cu¼¦Ù
(0)

1167 
šlše
 
cÚ¡_»v”£_™”©Ü
(cÚ¡ 
ty³Çme
 
bŒ“
::
Ëaf_node
* 
l
, 
s
)

1168 : 
cu¼node
(
l
), 
cu¼¦Ù
(
s
)

1172 
šlše
 
cÚ¡_»v”£_™”©Ü
(cÚ¡ 
™”©Ü
& 
™
)

1173 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

1177 
šlše
 
cÚ¡_»v”£_™”©Ü
(cÚ¡ 
cÚ¡_™”©Ü
& 
™
)

1178 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

1182 
šlše
 
cÚ¡_»v”£_™”©Ü
(cÚ¡ 
»v”£_™”©Ü
& 
™
)

1183 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

1189 
šlše
 
»ã»nû
 
	gİ”©Ü
 * () const

1191 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1192 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

1193  
	g‹mp_v®ue
;

1199 
šlše
 
poš‹r
 
	gİ”©Ü
 -> () const

1201 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1202 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

1203  &
	g‹mp_v®ue
;

1207 
šlše
 cÚ¡ 
	gkey_ty³
 & 
key
() const

1209 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1210  
	gcu¼node
->
	g¦Ùkey
[
cu¼¦Ù
 - 1];

1214 
šlše
 cÚ¡ 
	gd©a_ty³
 & 
d©a
() const

1216 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1217  
	gcu¼node
->
	g¦Ùd©a
[
u£d_as_£t
 ? 0 : 
cu¼¦Ù
 - 1];

1221 
šlše
 
	gcÚ¡_»v”£_™”©Ü
& 
	gİ”©Ü
 ++ ()

1223 ià(
	gcu¼¦Ù
 > 1) {

1224 --
	gcu¼¦Ù
;

1226 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

1227 
cu¼node
 = cu¼node->
´evËaf
;

1228 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1232 
	gcu¼¦Ù
 = 0;

1235  *
	gthis
;

1239 
šlše
 
cÚ¡_»v”£_™”©Ü
 
	gİ”©Ü
 ++ ()

1241 
cÚ¡_»v”£_™”©Ü
 
	gtmp
 = *
this
;

1243 ià(
	gcu¼¦Ù
 > 1) {

1244 --
	gcu¼¦Ù
;

1246 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

1247 
cu¼node
 = cu¼node->
´evËaf
;

1248 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1252 
	gcu¼¦Ù
 = 0;

1255  
	gtmp
;

1259 
šlše
 
	gcÚ¡_»v”£_™”©Ü
& 
	gİ”©Ü
 -- ()

1261 ià(
	gcu¼¦Ù
 < 
	gcu¼node
->
	g¦Ùu£
) {

1262 ++
	gcu¼¦Ù
;

1264 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

1265 
cu¼node
 = cu¼node->
Ãx—f
;

1266 
	gcu¼¦Ù
 = 1;

1270 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1273  *
	gthis
;

1277 
šlše
 
cÚ¡_»v”£_™”©Ü
 
	gİ”©Ü
 -- ()

1279 
cÚ¡_»v”£_™”©Ü
 
	gtmp
 = *
this
;

1281 ià(
	gcu¼¦Ù
 < 
	gcu¼node
->
	g¦Ùu£
) {

1282 ++
	gcu¼¦Ù
;

1284 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

1285 
cu¼node
 = cu¼node->
Ãx—f
;

1286 
	gcu¼¦Ù
 = 1;

1290 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1293  
	gtmp
;

1297 
šlše
 
boŞ
 
	gİ”©Ü
 =ğ(cÚ¡ 
cÚ¡_»v”£_™”©Ü
& 
x
) const

1299  (
x
.
cu¼node
 =ğcu¼nodeè&& (x.
cu¼¦Ù
 == currslot);

1303 
šlše
 
boŞ
 
	gİ”©Ü
 !ğ(cÚ¡ 
cÚ¡_»v”£_™”©Ü
& 
x
) const

1305  (
x
.
cu¼node
 !ğcu¼nodeè|| (x.
cu¼¦Ù
 != currslot);

1309 
	gpublic
:

1314 
	sŒ“_¡©s


1317 
size_ty³
 
™emcouÁ
;

1320 
size_ty³
 
	gËaves
;

1323 
size_ty³
 
	gšÃºodes
;

1326 cÚ¡ 
	gËaf¦Ùs
 = 
£lf_ty³
::
Ëaf¦Ùmax
;

1329 cÚ¡ 
	gšÃr¦Ùs
 = 
£lf_ty³
::
šÃr¦Ùmax
;

1332 
šlše
 
Œ“_¡©s
()

1333 : 
™emcouÁ
(0),

1334 
Ëaves
(0), 
šÃºodes
(0)

1338 
šlše
 
size_ty³
 
nodes
() const

1340  
	gšÃºodes
 + 
	gËaves
;

1344 
šlše
 
avgfl_Ëaves
() const

1346  
	g¡©ic_ÿ¡
<>(
	g™emcouÁ
è/ (
Ëaves
 * 
	gËaf¦Ùs
);

1350 
	g´iv©e
:

1354 
node
* 
m_roÙ
;

1357 
Ëaf_node
* 
	gm_h—dËaf
;

1360 
Ëaf_node
* 
	gm_Ëaf
;

1363 
Œ“_¡©s
 
	gm_¡©s
;

1367 
key_com·»
 
	gm_key_Ëss
;

1370 
®loÿtÜ_ty³
 
	gm_®loÿtÜ
;

1373 
VMEM
 *
	gvmp
;

1375 
	gpublic
:

1380 
ex¶ic™
 
šlše
 
bŒ“
(cÚ¡ 
®loÿtÜ_ty³
& 
®loc
 =‡llocator_type())

1381 : 
m_roÙ
(
NULL
), 
m_h—dËaf
(NULL), 
m_Ëaf
(NULL), 
m_®loÿtÜ
(
®loc
)

1383 
	gvmp
 = 
nv_ü—‹
("/mÁ/nv¿m0", 
NVRAM_LEN
);

1384 if(
	gvmp
 =ğ
NULL
)

1385 
cout
 << "‚v_ü—‹ faed " << 
’dl
;

1386 
	gnv’Œy_couÁ
 = 0;

1387 
	gnvb™m­_couÁ
 = 0;

1388 
	gnvnode_couÁ
 = 0;

1393 
ex¶ic™
 
šlše
 
bŒ“
(cÚ¡ 
key_com·»
& 
kcf
,

1394 cÚ¡ 
®loÿtÜ_ty³
& 
®loc
 =‡llocator_type())

1395 : 
m_roÙ
(
NULL
), 
m_h—dËaf
(NULL), 
m_Ëaf
(NULL),

1396 
m_key_Ëss
(
kcf
), 
m_®loÿtÜ
(
®loc
)

1402 
	g‹m¶©e
 <
şass
 
	gIÅutI‹¿tÜ
>

1403 
šlše
 
bŒ“
(
IÅutI‹¿tÜ
 
fœ¡
, IÅutI‹¿tÜ 
Ï¡
,

1404 cÚ¡ 
®loÿtÜ_ty³
& 
®loc
 =‡llocator_type())

1405 : 
m_roÙ
(
NULL
), 
m_h—dËaf
(NULL), 
m_Ëaf
(NULL), 
m_®loÿtÜ
(
®loc
)

1407 
š£¹
(
fœ¡
, 
Ï¡
);

1413 
	g‹m¶©e
 <
şass
 
	gIÅutI‹¿tÜ
>

1414 
šlše
 
bŒ“
(
IÅutI‹¿tÜ
 
fœ¡
, IÅutI‹¿tÜ 
Ï¡
, cÚ¡ 
key_com·»
& 
kcf
,

1415 cÚ¡ 
®loÿtÜ_ty³
& 
®loc
 =‡llocator_type())

1416 : 
m_roÙ
(
NULL
), 
m_h—dËaf
(NULL), 
m_Ëaf
(NULL),

1417 
m_key_Ëss
(
kcf
), 
m_®loÿtÜ
(
®loc
)

1419 
š£¹
(
fœ¡
, 
Ï¡
);

1423 
	gšlše
 ~
bŒ“
()

1425 
ş—r
();

1427 
nv_de¡roy
(
vmp
);

1431 
sw­
(
£lf_ty³
& 
äom
)

1433 
	g¡d
::
sw­
(
m_roÙ
, 
äom
.m_root);

1434 
	g¡d
::
sw­
(
m_h—dËaf
, 
äom
.m_headleaf);

1435 
	g¡d
::
sw­
(
m_Ëaf
, 
äom
.m_tailleaf);

1436 
	g¡d
::
sw­
(
m_¡©s
, 
äom
.m_stats);

1437 
	g¡d
::
sw­
(
m_key_Ëss
, 
äom
.m_key_less);

1438 
	g¡d
::
sw­
(
m_®loÿtÜ
, 
äom
.m_allocator);

1441 
	gpublic
:

1445 şas 
	cv®ue_com·»


1447 
´Ùeùed
:

1449 
key_com·»
 
key_comp
;

1452 
šlše
 
ex¶ic™
 
v®ue_com·»
(
key_com·»
 
kc
)

1453 : 
key_comp
(
kc
)

1457 
ä›nd
 
şass
 
bŒ“
<
key_ty³
, 
	gd©a_ty³
, 
	gv®ue_ty³
, 
	gkey_com·»
,

1458 
	gŒa™s
, 
	g®low_du¶iÿ‹s
, 
	g®loÿtÜ_ty³
, 
	gu£d_as_£t
>;

1460 
	gpublic
:

1462 
šlše
 
boŞ
 
İ”©Ü
 (è(cÚ¡ 
v®ue_ty³
& 
x
, cÚ¡ 
	gv®ue_ty³
& 
	gy
) const

1464  
key_comp
(
x
.
fœ¡
, 
y
.first);

1469 
šlše
 
key_com·»
 
key_comp
() const

1471  
	gm_key_Ëss
;

1476 
šlše
 
v®ue_com·»
 
v®ue_comp
() const

1478  
v®ue_com·»
(
m_key_Ëss
);

1481 
	g´iv©e
:

1485 
šlše
 
boŞ
 
key_Ëss
(cÚ¡ 
key_ty³
& 
a
, cÚ¡ key_ty³ 
b
) const

1487  
m_key_Ëss
(
a
, 
b
);

1491 
šlše
 
boŞ
 
key_Ës£qu®
(cÚ¡ 
key_ty³
& 
a
, cÚ¡ key_ty³ 
b
) const

1493  !
m_key_Ëss
(
b
, 
a
);

1497 
šlše
 
boŞ
 
key_g»©”
(cÚ¡ 
key_ty³
& 
a
, cÚ¡ key_ty³& 
b
) const

1499  
m_key_Ëss
(
b
, 
a
);

1503 
šlše
 
boŞ
 
key_g»©”equ®
(cÚ¡ 
key_ty³
& 
a
, cÚ¡ key_ty³ 
b
) const

1505  !
m_key_Ëss
(
a
, 
b
);

1510 
šlše
 
boŞ
 
key_equ®
(cÚ¡ 
key_ty³
& 
a
, cÚ¡ key_ty³& 
b
) const

1512  !
m_key_Ëss
(
a
, 
b
) && !m_key_less(b,‡);

1515 
	gpublic
:

1519 
®loÿtÜ_ty³
 
g‘_®loÿtÜ
() const

1521  
m_®loÿtÜ
;

1524 
	g´iv©e
:

1528 
šlše
 
Ëaf_node
 *
nvËaf_®loc
(
VMEM
 *
vmp
)

1530 
Ëaf_node
 * 
n
 = (Ëaf_nod*)
nv_m®loc
(Ö—f_node), 
vmp
);

1531 if(
	gn
 =ğ
NULL
) {

1532 
cout
 << "‚vËaà®loøçed " << 
’dl
;

1535  
	gn
;

1540 
ty³Çme
 
	gËaf_node
::
®loc_ty³
 
Ëaf_node_®loÿtÜ
()

1542  
ty³Çme
 
Ëaf_node
::
®loc_ty³
(
m_®loÿtÜ
);

1546 
ty³Çme
 
	gšÃr_node
::
®loc_ty³
 
šÃr_node_®loÿtÜ
()

1548  
ty³Çme
 
šÃr_node
::
®loc_ty³
(
m_®loÿtÜ
);

1552 
šlše
 
Ëaf_node
 * 
®loÿ‹_Ëaf
()

1555 
Ëaf_node
* 
	gn
 = 
Ãw
 (
Ëaf_node_®loÿtÜ
().
®loÿ‹
(1))

1556 
Ëaf_node
();

1558 
Ëaf_node
 *
	gn
 = 
nvËaf_®loc
(
vmp
);

1559 
mem£t
(
n
, 0x0, (
Ëaf_node
));

1560 
	gn
->
	g´evËaf
 = 
NULL
;

1561 
	gn
->
	gÃx—f
 = 
NULL
;

1562 
	gn
->
	gËv–
 = 0;

1563 
	gn
->
	g¦Ùu£
 = 0;

1564 
	gm_¡©s
.
	gËaves
++;

1565  
	gn
;

1569 
šlše
 
šÃr_node
 * 
®loÿ‹_šÃr
(
Ëv–
)

1571 
šÃr_node
* 
	gn
 = 
Ãw
 (
šÃr_node_®loÿtÜ
().
®loÿ‹
(1))

1572 
šÃr_node
(
Ëv–
);

1573 
	gm_¡©s
.
	gšÃºodes
++;

1574  
	gn
;

1579 
šlše
 
ä“_node
(
node
* 
n
)

1581 ià(
	gn
->
i¦—âode
()) {

1582 
Ëaf_node
* 
	gÊ
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
n
);

1583 
ty³Çme
 
	gËaf_node
::
®loc_ty³
 
a
(
Ëaf_node_®loÿtÜ
());

1584 
nv_ä“
(
vmp
, (*)
Ê
);

1589 
	gm_¡©s
.
	gËaves
--;

1592 
šÃr_node
* 
	gš
 = 
¡©ic_ÿ¡
<šÃr_node*>(
n
);

1593 
ty³Çme
 
	gšÃr_node
::
®loc_ty³
 
a
(
šÃr_node_®loÿtÜ
());

1594 
	ga
.
de¡roy
(
š
);

1595 
	ga
.
d—Îoÿ‹
(
š
, 1);

1596 
	gm_¡©s
.
	gšÃºodes
--;

1602 
	g‹m¶©e
 <
şass
 
	gIÅutI‹¿tÜ
, cÏs 
	gOuutI‹¿tÜ
>

1603 
OuutI‹¿tÜ
 
d©a_cİy
(
IÅutI‹¿tÜ
 
fœ¡
, IÅutI‹¿tÜ 
Ï¡
,

1604 
OuutI‹¿tÜ
 
»suÉ
)

1606 ià(
	gu£d_as_£t
è 
	g»suÉ
;

1607  
	g¡d
::
cİy
(
fœ¡
, 
Ï¡
, 
»suÉ
);

1612 
	g‹m¶©e
 <
şass
 
	gIÅutI‹¿tÜ
, cÏs 
	gOuutI‹¿tÜ
>

1613 
OuutI‹¿tÜ
 
d©a_cİy_backw¬d
(
IÅutI‹¿tÜ
 
fœ¡
, IÅutI‹¿tÜ 
Ï¡
,

1614 
OuutI‹¿tÜ
 
»suÉ
)

1616 ià(
	gu£d_as_£t
è 
	g»suÉ
;

1617  
	g¡d
::
cİy_backw¬d
(
fœ¡
, 
Ï¡
, 
»suÉ
);

1620 
	gpublic
:

1624 
ş—r
()

1627 ià(
m_roÙ
)

1629 
ş—r_»cursive
(
m_roÙ
);

1630 
ä“_node
(
m_roÙ
);

1632 
	gm_roÙ
 = 
NULL
;

1633 
	gm_h—dËaf
 = 
m_Ëaf
 = 
NULL
;

1635 
	gm_¡©s
 = 
Œ“_¡©s
();

1637 
BTREE_ASSERT
(
m_¡©s
.
™emcouÁ
 == 0);

1640 
	g´iv©e
:

1642 
ş—r_»cursive
(
node
* 
n
)

1644 ià(
n
->
i¦—âode
())

1646 
Ëaf_node
* 
Ëaâode
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
n
);

1648 
	g¦Ù
 = 0; slÙ < 
	gËaâode
->
	g¦Ùu£
; ++slot)

1655 
šÃr_node
* 
	gšÃºode
 = 
¡©ic_ÿ¡
<šÃr_node*>(
n
);

1657 
	g¦Ù
 = 0; slÙ < 
	gšÃºode
->
	g¦Ùu£
 + 1; ++slot)

1659 
ş—r_»cursive
(
šÃºode
->
chdid
[
¦Ù
]);

1660 
ä“_node
(
šÃºode
->
chdid
[
¦Ù
]);

1665 
	gpublic
:

1670 
šlše
 
™”©Ü
 
begš
()

1672  
™”©Ü
(
m_h—dËaf
, 0);

1677 
šlše
 
™”©Ü
 
’d
()

1679  
™”©Ü
(
m_Ëaf
, m_Ëaà? m_Ëaf->
¦Ùu£
 : 0);

1684 
šlše
 
cÚ¡_™”©Ü
 
begš
() const

1686  
cÚ¡_™”©Ü
(
m_h—dËaf
, 0);

1691 
šlše
 
cÚ¡_™”©Ü
 
’d
() const

1693  
cÚ¡_™”©Ü
(
m_Ëaf
, m_Ëaà? m_Ëaf->
¦Ùu£
 : 0);

1698 
šlše
 
»v”£_™”©Ü
 
rbegš
()

1700  
»v”£_™”©Ü
(
’d
());

1705 
šlše
 
»v”£_™”©Ü
 
»nd
()

1707  
»v”£_™”©Ü
(
begš
());

1712 
šlše
 
cÚ¡_»v”£_™”©Ü
 
rbegš
() const

1714  
cÚ¡_»v”£_™”©Ü
(
’d
());

1719 
šlše
 
cÚ¡_»v”£_™”©Ü
 
»nd
() const

1721  
cÚ¡_»v”£_™”©Ü
(
begš
());

1724 
	g´iv©e
:

1731 
‹m¶©e
 <
ty³Çme
 
node_ty³
>

1732 
šlše
 
fšd_low”
(cÚ¡ 
node_ty³
* 
n
, cÚ¡ 
key_ty³
& 
key
) const

1734 ià(1 && (
	gn
->
	g¦Ùkey
è> 
	gŒa™s
::
bš£¬ch_th»shŞd
)

1736 ià(
n
->
¦Ùu£
 == 0)  0;

1738 
	glo
 = 0, 
	ghi
 = 
n
->
¦Ùu£
;

1740 
	glo
 < 
	ghi
)

1742 
	gmid
 = (
lo
 + 
hi
) >> 1;

1744 ià(
key_Ës£qu®
(
key
, 
n
->
¦Ùkey
[
mid
])) {

1745 
	ghi
 = 
mid
;

1748 
	glo
 = 
mid
 + 1;

1752 
BTREE_PRINT
("bŒ“::fšd_low”: oÀ" << 
n
 << " key " << 
key
 << " -> " << 
lo
 << " / " << 
hi
);

1755 ià(
	g£lfv”ify
)

1757 
	gi
 = 0;

1758 
	gi
 < 
	gn
->
	g¦Ùu£
 && 
key_Ëss
(
n
->
¦Ùkey
[
i
], 
key
)) ++i;

1760 
BTREE_PRINT
("bŒ“::fšd_low”:e¡fšd: " << 
i
);

1761 
BTREE_ASSERT
(
i
 =ğ
lo
);

1764  
	glo
;

1768 
	glo
 = 0;

1769 
	glo
 < 
	gn
->
	g¦Ùu£
 && 
key_Ëss
(
n
->
¦Ùkey
[
lo
], 
key
)) ++lo;

1770  
	glo
;

1774 
šlše
 
fšd_low”_Üg
(cÚ¡ 
Ëaf_node
* 
n
, cÚ¡ 
key_ty³
& 
key
) const

1779 ià(
	gn
->
	g¦Ùu£
 == 0)  0;

1781 
	glo
 = 0, 
	ghi
 = 
n
->
¦Ùu£
;

1783 
	glo
 < 
	ghi
)

1785 
	gmid
 = (
lo
 + 
hi
) >> 1;

1787 ià(
key_Ës£qu®
(
key
, 
n
->
¦Ùkey
[
mid
])) {

1788 
	ghi
 = 
mid
;

1791 
	glo
 = 
mid
 + 1;

1795 
BTREE_PRINT
("bŒ“::fšd_low”: oÀ" << 
n
 << " key " << 
key
 << " -> " << 
lo
 << " / " << 
hi
);

1798 ià(
	g£lfv”ify
)

1800 
	gi
 = 0;

1801 
	gi
 < 
	gn
->
	g¦Ùu£
 && 
key_Ëss
(
n
->
¦Ùkey
[
i
], 
key
)) ++i;

1803 
BTREE_PRINT
("bŒ“::fšd_low”:e¡fšd: " << 
i
);

1804 
BTREE_ASSERT
(
i
 =ğ
lo
);

1807  
	glo
;

1811 
	glo
 = 0;

1812 
	glo
 < 
	gn
->
	g¦Ùu£
 && 
key_Ëss
(
n
->
¦Ùkey
[
lo
], 
key
)) ++lo;

1813  
	glo
;

1817 
šlše
 
Ëaf_fšd_low”
(cÚ¡ 
Ëaf_node
* 
n
, cÚ¡ 
key_ty³
& 
key
) const

1819  
	gn
->
couÁ
();

1823 
šlše
 
Ëaf_fšd_v®ue
(cÚ¡ 
Ëaf_node
 *
n
, cÚ¡ 
key_ty³
& 
key
)const

1826 
	gËaf¦Ùsu£d
 = 
n
->
couÁ
();

1827 
	gi
 = 
Ëaf¦Ùsu£d
 - 1; i >= 0; i--)

1829 if(
	gn
->
b™m­_g‘
(
i
)) {

1830 if(
	gn
->
	g¦Ùkey
[
i
] =ğ
key
)

1831  
i
;

1841 
	g‹m¶©e
 <
ty³Çme
 
	gnode_ty³
>

1842 
šlše
 
fšd_uµ”
(cÚ¡ 
node_ty³
* 
n
, cÚ¡ 
key_ty³
& 
key
) const

1844 ià(0 && (
	gn
->
	g¦Ùkey
è> 
	gŒa™s
::
bš£¬ch_th»shŞd
)

1846 ià(
n
->
¦Ùu£
 == 0)  0;

1848 
	glo
 = 0, 
	ghi
 = 
n
->
¦Ùu£
;

1850 
	glo
 < 
	ghi
)

1852 
	gmid
 = (
lo
 + 
hi
) >> 1;

1854 ià(
key_Ëss
(
key
, 
n
->
¦Ùkey
[
mid
])) {

1855 
	ghi
 = 
mid
;

1858 
	glo
 = 
mid
 + 1;

1862 
BTREE_PRINT
("bŒ“::fšd_uµ”: oÀ" << 
n
 << " key " << 
key
 << " -> " << 
lo
 << " / " << 
hi
);

1865 ià(
	g£lfv”ify
)

1867 
	gi
 = 0;

1868 
	gi
 < 
	gn
->
	g¦Ùu£
 && 
key_Ës£qu®
(
n
->
¦Ùkey
[
i
], 
key
)) ++i;

1870 
BTREE_PRINT
("bŒ“::fšd_uµ”e¡fšd: " << 
i
);

1871 
BTREE_ASSERT
(
i
 =ğ
hi
);

1874  
	glo
;

1878 
	glo
 = 0;

1879 
	glo
 < 
	gn
->
	g¦Ùu£
 && 
key_Ës£qu®
(
n
->
¦Ùkey
[
lo
], 
key
)) ++lo;

1880  
	glo
;

1884 
	gpublic
:

1888 
šlše
 
size_ty³
 
size
() const

1890  
m_¡©s
.
™emcouÁ
;

1894 
šlše
 
boŞ
 
em±y
() const

1896  (
size
(è=ğ
size_ty³
(0));

1901 
šlše
 
size_ty³
 
max_size
() const

1903  
size_ty³
(-1);

1907 
šlše
 cÚ¡ 
	gŒ“_¡©s
 & 
g‘_¡©s
() const

1909  
	gm_¡©s
;

1912 
	gpublic
:

1917 
boŞ
 
exi¡s
(cÚ¡ 
key_ty³
& 
key
) const

1919 cÚ¡ 
node
* 
n
 = 
m_roÙ
;

1920 ià(!
	gn
è 
	gçl£
;

1922 !
	gn
->
i¦—âode
())

1924 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

1925 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

1927 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

1930 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

1932 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

1933  (
	g¦Ù
 < 
	gËaf
->
	g¦Ùu£
 && 
key_equ®
(
key
, 
Ëaf
->
¦Ùkey
[
¦Ù
]));

1938 
™”©Ü
 
fšd
(cÚ¡ 
key_ty³
& 
key
)

1940 
node
* 
	gn
 = 
m_roÙ
;

1941 ià(!
	gn
è 
’d
();

1943 !
	gn
->
i¦—âode
())

1945 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

1946 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

1948 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

1951 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
n
);

1953 
	g¦Ù
 = 
Ëaf_fšd_v®ue
(
Ëaf
, 
key
);

1954 if(
	g¦Ù
 == -1) {

1955  
’d
();

1958  (
	g¦Ù
 < 
	gËaf
->
couÁ
(è&& 
key_equ®
(
key
, 
Ëaf
->
¦Ùkey
[
¦Ù
]))

1959 ? 
™”©Ü
(
Ëaf
, 
¦Ù
è: 
’d
();

1966 
cÚ¡_™”©Ü
 
fšd
(cÚ¡ 
key_ty³
& 
key
) const

1968 cÚ¡ 
node
* 
	gn
 = 
m_roÙ
;

1969 ià(!
	gn
è 
’d
();

1971 !
	gn
->
i¦—âode
())

1973 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

1974 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

1976 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

1979 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

1981 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

1982  (
	g¦Ù
 < 
	gËaf
->
	g¦Ùu£
 && 
key_equ®
(
key
, 
Ëaf
->
¦Ùkey
[
¦Ù
]))

1983 ? 
cÚ¡_™”©Ü
(
Ëaf
, 
¦Ù
è: 
’d
();

1988 
size_ty³
 
couÁ
(cÚ¡ 
key_ty³
& 
key
) const

1990 cÚ¡ 
node
* 
	gn
 = 
m_roÙ
;

1991 ià(!
	gn
)  0;

1993 !
	gn
->
i¦—âode
())

1995 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

1996 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

1998 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

2001 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

2003 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

2004 
size_ty³
 
	gnum
 = 0;

2006 
	gËaf
 && 
	g¦Ù
 <†—f->
	g¦Ùu£
 && 
key_equ®
(
key
, 
Ëaf
->
¦Ùkey
[
¦Ù
]))

2008 ++
	gnum
;

2009 ià(++
	g¦Ù
 >ğ
Ëaf
->
¦Ùu£
)

2011 
Ëaf
 =†—f->
Ãx—f
;

2012 
	g¦Ù
 = 0;

2016  
	gnum
;

2021 
™”©Ü
 
low”_bound
(cÚ¡ 
key_ty³
& 
key
)

2023 
node
* 
	gn
 = 
m_roÙ
;

2024 ià(!
	gn
è 
’d
();

2026 !
	gn
->
i¦—âode
())

2028 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

2029 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

2031 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

2034 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
n
);

2036 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

2037  
™”©Ü
(
Ëaf
, 
¦Ù
);

2043 
cÚ¡_™”©Ü
 
low”_bound
(cÚ¡ 
key_ty³
& 
key
) const

2045 cÚ¡ 
node
* 
	gn
 = 
m_roÙ
;

2046 ià(!
	gn
è 
’d
();

2048 !
	gn
->
i¦—âode
())

2050 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

2051 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

2053 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

2056 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

2058 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

2059  
cÚ¡_™”©Ü
(
Ëaf
, 
¦Ù
);

2064 
™”©Ü
 
uµ”_bound
(cÚ¡ 
key_ty³
& 
key
)

2066 
node
* 
	gn
 = 
m_roÙ
;

2067 ià(!
	gn
è 
’d
();

2069 !
	gn
->
i¦—âode
())

2071 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

2072 
	g¦Ù
 = 
fšd_uµ”
(
šÃr
, 
key
);

2074 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

2077 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
n
);

2079 
	g¦Ù
 = 
fšd_uµ”
(
Ëaf
, 
key
);

2080  
™”©Ü
(
Ëaf
, 
¦Ù
);

2086 
cÚ¡_™”©Ü
 
uµ”_bound
(cÚ¡ 
key_ty³
& 
key
) const

2088 cÚ¡ 
node
* 
	gn
 = 
m_roÙ
;

2089 ià(!
	gn
è 
’d
();

2091 !
	gn
->
i¦—âode
())

2093 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

2094 
	g¦Ù
 = 
fšd_uµ”
(
šÃr
, 
key
);

2096 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

2099 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

2101 
	g¦Ù
 = 
fšd_uµ”
(
Ëaf
, 
key
);

2102  
cÚ¡_™”©Ü
(
Ëaf
, 
¦Ù
);

2106 
šlše
 
	g¡d
::
·œ
<
™”©Ü
, 
	g™”©Ü
> 
equ®_¿nge
(cÚ¡ 
key_ty³
& 
key
)

2108  
	g¡d
::
·œ
<
™”©Ü
, 
	g™”©Ü
>(
low”_bound
(
key
), 
uµ”_bound
(key));

2112 
šlše
 
	g¡d
::
·œ
<
cÚ¡_™”©Ü
, 
	gcÚ¡_™”©Ü
> 
equ®_¿nge
(cÚ¡ 
key_ty³
& 
key
) const

2114  
	g¡d
::
·œ
<
cÚ¡_™”©Ü
, 
	gcÚ¡_™”©Ü
>(
low”_bound
(
key
), 
uµ”_bound
(key));

2117 
	gpublic
:

2123 
šlše
 
boŞ
 
İ”©Ü
 =ğ(cÚ¡ 
£lf_ty³
& 
Ùh”
) const

2125  (
size
(è=ğ
Ùh”
.size()è&& 
¡d
::
equ®
(
begš
(), 
’d
(), other.begin());

2129 
šlše
 
boŞ
 
	gİ”©Ü
 !ğ(cÚ¡ 
£lf_ty³
& 
Ùh”
) const

2131  !(*
this
 =ğ
Ùh”
);

2136 
šlše
 
boŞ
 
	gİ”©Ü
 < (cÚ¡ 
	g£lf_ty³
& 
	gÙh”
) const

2138  
	g¡d
::
Ëxicog¿phiÿl_com·»
(
begš
(), 
’d
(), 
Ùh”
.begin(), other.end());

2142 
šlše
 
boŞ
 
	gİ”©Ü
 > (cÚ¡ 
	g£lf_ty³
& 
	gÙh”
) const

2144  
	gÙh”
 < *
	gthis
;

2148 
šlše
 
boŞ
 
	gİ”©Ü
 <ğ(cÚ¡ 
£lf_ty³
& 
Ùh”
) const

2150  !(
Ùh”
 < *
this
);

2154 
šlše
 
boŞ
 
	gİ”©Ü
 >ğ(cÚ¡ 
£lf_ty³
& 
Ùh”
) const

2156  !(*
this
 < 
Ùh”
);

2159 
	gpublic
:

2163 
šlše
 
£lf_ty³
& 
İ”©Ü
 = (cÚ¡ s–f_ty³& 
Ùh”
)

2165 ià(
this
 !ğ&
Ùh”
)

2167 
ş—r
();

2169 
	gm_key_Ëss
 = 
Ùh”
.
key_comp
();

2170 
	gm_®loÿtÜ
 = 
Ùh”
.
g‘_®loÿtÜ
();

2172 ià(
	gÙh”
.
size
() != 0)

2174 
m_¡©s
.
Ëaves
 = m_¡©s.
šÃºodes
 = 0;

2175 ià(
	gÙh”
.
	gm_roÙ
) {

2176 
	gm_roÙ
 = 
cİy_»cursive
(
Ùh”
.
m_roÙ
);

2178 
	gm_¡©s
 = 
Ùh”
.
m_¡©s
;

2181 ià(
	g£lfv”ify
è
v”ify
();

2183  *
	gthis
;

2188 
šlše
 
bŒ“
(cÚ¡ bŒ“& 
Ùh”
)

2189 : 
m_roÙ
(
NULL
), 
m_h—dËaf
(NULL), 
m_Ëaf
(NULL),

2190 
m_¡©s
(
Ùh”
.m_stats),

2191 
m_key_Ëss
(
Ùh”
.
key_comp
()),

2192 
m_®loÿtÜ
(
Ùh”
.
g‘_®loÿtÜ
())

2194 ià(
size
() > 0)

2196 
	gm_¡©s
.
	gËaves
 = 
m_¡©s
.
šÃºodes
 = 0;

2197 ià(
	gÙh”
.
	gm_roÙ
) {

2198 
	gm_roÙ
 = 
cİy_»cursive
(
Ùh”
.
m_roÙ
);

2200 ià(
	g£lfv”ify
è
v”ify
();

2204 
	g´iv©e
:

2206 
node
 * 
cİy_»cursive
(cÚ¡‚ode* 
n
)

2208 ià(
n
->
i¦—âode
())

2210 cÚ¡ 
Ëaf_node
* 
Ëaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

2211 
Ëaf_node
* 
	gÃwËaf
 = 
®loÿ‹_Ëaf
();

2213 
	gÃwËaf
->
	g¦Ùu£
 = 
Ëaf
->
¦Ùu£
;

2214 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
,†—f->¦Ùkey +†—f->
¦Ùu£
, 
ÃwËaf
->slotkey);

2215 
d©a_cİy
(
Ëaf
->
¦Ùd©a
,†—f->¦Ùd©¨+†—f->
¦Ùu£
, 
ÃwËaf
->slotdata);

2217 ià(
	gm_h—dËaf
 =ğ
NULL
)

2219 
m_h—dËaf
 = 
m_Ëaf
 = 
ÃwËaf
;

2220 
	gÃwËaf
->
	g´evËaf
 = 
ÃwËaf
->
Ãx—f
 = 
NULL
;

2224 
	gÃwËaf
->
	g´evËaf
 = 
m_Ëaf
;

2225 
	gm_Ëaf
->
	gÃx—f
 = 
ÃwËaf
;

2226 
	gm_Ëaf
 = 
ÃwËaf
;

2229  
	gÃwËaf
;

2233 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

2234 
šÃr_node
* 
	gÃwšÃr
 = 
®loÿ‹_šÃr
(
šÃr
->
Ëv–
);

2236 
	gÃwšÃr
->
	g¦Ùu£
 = 
šÃr
->
¦Ùu£
;

2237 
	g¡d
::
cİy
(
šÃr
->
¦Ùkey
, iÂ”->¦Ùkey + iÂ”->
¦Ùu£
, 
ÃwšÃr
->slotkey);

2239 
	g¦Ù
 = 0; slÙ <ğ
šÃr
->
¦Ùu£
; ++slot)

2241 
	gÃwšÃr
->
	gchdid
[
¦Ù
] = 
cİy_»cursive
(
šÃr
->
chdid
[slot]);

2244  
	gÃwšÃr
;

2248 
	gpublic
:

2254 
šlše
 
¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
š£¹
(cÚ¡ 
·œ_ty³
& 
x
)

2256  
š£¹_¡¬t
(
x
.
fœ¡
, x.
£cÚd
);

2263 
šlše
 
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
š£¹
(cÚ¡ 
key_ty³
& 
key
, cÚ¡ 
d©a_ty³
& 
d©a
)

2265  
š£¹_¡¬t
(
key
, 
d©a
);

2272 
šlše
 
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
š£¹2
(cÚ¡ 
key_ty³
& 
key
, cÚ¡ 
d©a_ty³
& 
d©a
)

2274  
š£¹_¡¬t
(
key
, 
d©a
);

2279 
šlše
 
™”©Ü
 
š£¹
(™”©Ü , cÚ¡ 
·œ_ty³
& 
x
)

2281  
š£¹_¡¬t
(
x
.
fœ¡
, x.
£cÚd
).
	gfœ¡
;

2286 
šlše
 
™”©Ü
 
š£¹2
(™”©Ü , cÚ¡ 
key_ty³
& 
key
, cÚ¡ 
d©a_ty³
& 
d©a
)

2288  
š£¹_¡¬t
(
key
, 
d©a
).
	gfœ¡
;

2294 
	g‹m¶©e
 <
ty³Çme
 
	gIÅutI‹¿tÜ
>

2295 
šlše
 
š£¹
(
IÅutI‹¿tÜ
 
fœ¡
, IÅutI‹¿tÜ 
Ï¡
)

2297 
IÅutI‹¿tÜ
 
	g™”
 = 
fœ¡
;

2298 
	g™”
 !ğ
Ï¡
)

2300 
š£¹
(*
™”
);

2301 ++
	g™”
;

2305 
	g´iv©e
:

2310 
¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
š£¹_¡¬t
(cÚ¡ 
key_ty³
& 
key
, cÚ¡ 
d©a_ty³
& 
v®ue
)

2312 
node
* 
	gÃwchd
 = 
NULL
;

2313 
key_ty³
 
	gÃwkey
 = key_type();

2315 ià(
	gm_roÙ
 =ğ
NULL
) {

2316 
m_roÙ
 = 
m_h—dËaf
 = 
m_Ëaf
 = 
®loÿ‹_Ëaf
();

2319 
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
	gr
 = 
š£¹_desûnd
(
m_roÙ
, 
key
, 
v®ue
, &
Ãwkey
, &
Ãwchd
);

2321 ià(
	gÃwchd
)

2323 
šÃr_node
* 
	gÃwroÙ
 = 
®loÿ‹_šÃr
(
m_roÙ
->
Ëv–
 + 1);

2324 
	gÃwroÙ
->
	g¦Ùkey
[0] = 
Ãwkey
;

2326 
	gÃwroÙ
->
	gchdid
[0] = 
m_roÙ
;

2327 
	gÃwroÙ
->
	gchdid
[1] = 
Ãwchd
;

2329 
	gÃwroÙ
->
	g¦Ùu£
 = 1;

2331 
	gm_roÙ
 = 
ÃwroÙ
;

2335 ià(
	gr
.
	g£cÚd
è++
	gm_¡©s
.
	g™emcouÁ
;

2337 #ifdeà
BTREE_DEBUh


2338 ià(
	gdebug
è
´št
(
¡d
::
cout
);

2341 ià(
	g£lfv”ify
) {

2342 
v”ify
();

2343 
BTREE_ASSERT
(
exi¡s
(
key
));

2346  
	gr
;

2356 
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
š£¹_desûnd
(
node
* 
n
,

2357 cÚ¡ 
key_ty³
& 
key
, cÚ¡ 
d©a_ty³
& 
v®ue
,

2358 
key_ty³
* 
¥l™key
, 
node
** 
¥l™node
)

2360 ià(!
	gn
->
i¦—âode
())

2362 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
n
);

2364 
key_ty³
 
	gÃwkey
 = key_type();

2365 
node
* 
	gÃwchd
 = 
NULL
;

2367 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

2369 
BTREE_PRINT
("bŒ“::š£¹_desûnd iÁØ" << 
šÃr
->
chdid
[
¦Ù
]);

2370 
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
	gr
 = 
š£¹_desûnd
(
šÃr
->
chdid
[
¦Ù
],

2371 
key
, 
v®ue
, &
Ãwkey
, &
Ãwchd
);

2373 ià(
	gÃwchd
)

2375 
BTREE_PRINT
("bŒ“::š£¹_desûnd‚ewchd w™h key " << 
Ãwkey
 << "‚od" << 
Ãwchd
 << "‡ˆ¦Ù " << 
¦Ù
);

2377 ià(
	gšÃr
->
isfuÎ
())

2379 
¥l™_šÃr_node
(
šÃr
, 
¥l™key
, 
¥l™node
, 
¦Ù
);

2381 
BTREE_PRINT
("bŒ“::š£¹_desûnd dÚ¥l™_šÃr:…ut¦Ù: " << 
¦Ù
 << "…utkey: " << 
Ãwkey
 << " upkey: " << *
¥l™key
);

2383 #ifdeà
BTREE_DEBUG


2384 ià(
	gdebug
)

2386 
´št_node
(
¡d
::
cout
, 
šÃr
);

2387 
´št_node
(
¡d
::
cout
, *
¥l™node
);

2392 
BTREE_PRINT
("bŒ“::š£¹_desûnd sw™ch: " << 
¦Ù
 << " > " << 
šÃr
->
¦Ùu£
 + 1);

2394 ià(
	g¦Ù
 =ğ
šÃr
->
¦Ùu£
 + 1 && iÂ”->¦Ùu£ < (*
¥l™node
)->slotuse)

2400 
BTREE_ASSERT
(
šÃr
->
¦Ùu£
 + 1 < 
šÃr¦Ùmax
);

2402 
šÃr_node
* 
	g¥l™šÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(*
¥l™node
);

2405 
	gšÃr
->
	g¦Ùkey
[
šÃr
->
¦Ùu£
] = *
¥l™key
;

2406 
	gšÃr
->
	gchdid
[
šÃr
->
¦Ùu£
 + 1] = 
¥l™šÃr
->
chdid
[0];

2407 
	gšÃr
->
	g¦Ùu£
++;

2410 
	g¥l™šÃr
->
	gchdid
[0] = 
Ãwchd
;

2411 *
	g¥l™key
 = 
Ãwkey
;

2413  
	gr
;

2415 ià(
	g¦Ù
 >ğ
šÃr
->
¦Ùu£
 + 1)

2420 
¦Ù
 -ğ
šÃr
->
¦Ùu£
 + 1;

2421 
	gšÃr
 = 
¡©ic_ÿ¡
<
šÃr_node
*>(*
¥l™node
);

2422 
BTREE_PRINT
("bŒ“::š£¹_desûnd sw™chšgØ¥l™‹d‚od" << 
šÃr
 << " slÙ " << 
¦Ù
);

2427 
BTREE_ASSERT
(
¦Ù
 >ğ0 && slÙ <ğ
šÃr
->
¦Ùu£
);

2429 
	g¡d
::
cİy_backw¬d
(
šÃr
->
¦Ùkey
 + 
¦Ù
, iÂ”->¦Ùkey + iÂ”->
¦Ùu£
,

2430 
šÃr
->
¦Ùkey
 + iÂ”->
¦Ùu£
 + 1);

2431 
	g¡d
::
cİy_backw¬d
(
šÃr
->
chdid
 + 
¦Ù
, iÂ”->chdid + iÂ”->
¦Ùu£
 + 1,

2432 
šÃr
->
chdid
 + iÂ”->
¦Ùu£
 + 2);

2434 
	gšÃr
->
	g¦Ùkey
[
¦Ù
] = 
Ãwkey
;

2435 
	gšÃr
->
	gchdid
[
¦Ù
 + 1] = 
Ãwchd
;

2436 
	gšÃr
->
	g¦Ùu£
++;

2439  
	gr
;

2444 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
n
);

2445 
	gÜig_¦Ùu£d
 = 
Ëaf
->
couÁ
();

2446 
	g¦Ù
 = 
Ëaf_fšd_low”
(
Ëaf
, 
key
);

2448 ià(!
	g®low_du¶iÿ‹s
 && 
	g¦Ù
 < 
	gÜig_¦Ùu£d
 && 
key_equ®
(
key
, 
Ëaf
->
¦Ùkey
[
¦Ù
])) {

2449  
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
>(™”©Ü(
Ëaf
, 
¦Ù
), 
	gçl£
);

2452 ià(
	gËaf
->
isfuÎ
())

2454 
¥l™_Ëaf_node
(
Ëaf
, 
¥l™key
, 
¥l™node
);

2463 
Ëaf_node
 *
	gÃwËaf
 = 
¡©ic_ÿ¡
<Ëaf_nod*>(*
¥l™node
);

2464 if(
	gkey
 >ğ*
¥l™key
) {

2465 
Ëaf
 = 
ÃwËaf
;

2467 
	g¦Ù
 = 
Ëaf
->
couÁ
();

2472 
BTREE_ASSERT
(
¦Ù
 >ğ0 && slÙ <ğ
Üig_¦Ùu£d
);

2474 
	gËaf
->
	g¦Ùkey
[
¦Ù
] = 
key
;

2475 ià(!
	gu£d_as_£t
)

2476 
	gËaf
->
	g¦Ùd©a
[
¦Ù
] = 
v®ue
;

2478 
nv_æush
((*)(
Ëaf
->
¦Ùkey
+
¦Ù
), (
key_ty³
));

2479 ià(!
	gu£d_as_£t
)

2480 
nv_æush
((*)(
Ëaf
->
¦Ùd©a
+
¦Ù
), (
d©a_ty³
));

2482 
	gËaf
->
b™m­_£t
(
¦Ù
);

2483 
nv_æush
((*)
Ëaf
->
bs
, 
BITS_TO_LONGS
(
Ëaf¦Ùmax
) * ());

2487 ià(
	g¥l™node
 && 
	gËaf
 !ğ*
¥l™node
 && 
key
 > 
Ëaf
->
¦Ùkey
[Ëaf->
couÁ
() - 1])

2492 *
¥l™key
 = 
key
;

2495  
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
>(™”©Ü(
Ëaf
, 
¦Ù
), 
	gŒue
);

2499 
¥l™_Ëaf_node_Üg
(
Ëaf_node
* 
Ëaf
, 
key_ty³
* 
_Ãwkey
, 
node
** 
_ÃwËaf
)

2501 
BTREE_ASSERT
(
Ëaf
->
isfuÎ
());

2503 
	gmid
 = (
Ëaf
->
¦Ùu£
 >> 1);

2505 
BTREE_PRINT
("bŒ“::¥l™_Ëaf_nodÚ " << 
Ëaf
);

2508 
Ëaf_node
* 
	gÃwËaf
 = 
®loÿ‹_Ëaf
();

2510 
	gÃwËaf
->
	g¦Ùu£
 = 
Ëaf
->
¦Ùu£
 - 
mid
;

2512 
	gÃwËaf
->
	gÃx—f
 = 
Ëaf
->
Ãx—f
;

2513 ià(
	gÃwËaf
->
	gÃx—f
 =ğ
NULL
) {

2514 
BTREE_ASSERT
(
Ëaf
 =ğ
m_Ëaf
);

2515 
	gm_Ëaf
 = 
ÃwËaf
;

2518 
	gÃwËaf
->
	gÃx—f
->
	g´evËaf
 = 
ÃwËaf
;

2521 
Ëaf_node
 *
	gshadow_Ëaf
 = 
®loÿ‹_Ëaf
();

2522 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
,†—f->¦Ùkey +†—f->
¦Ùu£
,

2523 
shadow_Ëaf
->
¦Ùkey
);

2524 
d©a_cİy
(
Ëaf
->
¦Ùd©a
,†—f->¦Ùd©¨+†—f->
¦Ùu£
,

2525 
shadow_Ëaf
->
¦Ùd©a
);

2526 
d©a_cİy
(
Ëaf
->
bs
,†—f->b +†—f->
¦Ùu£
,

2527 
shadow_Ëaf
->
bs
);

2528 
nv_æush
((*)
shadow_Ëaf
, (
Ëaf_node
));

2529 
	gnvnode_couÁ
++;

2533 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
 + 
mid
,†—f->¦Ùkey +†—f->
¦Ùu£
,

2534 
ÃwËaf
->
¦Ùkey
);

2535 
d©a_cİy
(
Ëaf
->
¦Ùd©a
 + 
mid
,†—f->¦Ùd©¨+†—f->
¦Ùu£
,

2536 
ÃwËaf
->
¦Ùd©a
);

2537 
	g¡d
::
cİy
(
Ëaf
->
bs
 + 
mid
,†—f->b +†—f->
¦Ùu£
,

2538 
ÃwËaf
->
bs
);

2540 
	gËaf
->
	g¦Ùu£
 = 
mid
;

2541 
	gËaf
->
	gÃx—f
 = 
ÃwËaf
;

2542 
	gÃwËaf
->
	g´evËaf
 = 
Ëaf
;

2544 *
	g_Ãwkey
 = 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1];

2545 *
	g_ÃwËaf
 = 
ÃwËaf
;

2547 
nv_æush
((*)
ÃwËaf
, (
Ëaf_node
));

2548 
	gnvnode_couÁ
++;

2549 
nv_æush
((*)
Ëaf
, (
Ëaf_node
));

2550 
	gnvnode_couÁ
++;

2551 
nv_ä“
(
vmp
, (*)
shadow_Ëaf
);

2556 
¥l™_Ëaf_node
(
Ëaf_node
* 
Ëaf
, 
key_ty³
* 
_Ãwkey
, 
node
** 
_ÃwËaf
)

2558 
BTREE_ASSERT
(
Ëaf
->
isfuÎ
());

2560 
	gÜig_¦Ùu£d
 = 
Ëaf
->
couÁ
();

2561 
	gmid
 = (
Üig_¦Ùu£d
 >> 1);

2562 
	g¡d
::
veùÜ
<
·œ
<, > >
	gvec
;

2564 
	gi
 = 0; i < 
	gÜig_¦Ùu£d
; i++) {

2565 
	gvec
.
push_back
(
¡d
::
make_·œ
<, >(
Ëaf
->
¦Ùkey
[
i
], i));

2567 
sÜt
(
vec
.
begš
(), vec.
’d
());

2569 
BTREE_PRINT
("bŒ“::¥l™_Ëaf_nodÚ " << 
Ëaf
);

2572 
Ëaf_node
* 
	gÃwËaf
 = 
®loÿ‹_Ëaf
();

2573 
	gÃw_¦Ùu£d
 = 
Üig_¦Ùu£d
 - 
mid
;

2575 
	gÃwËaf
->
	gÃx—f
 = 
Ëaf
->
Ãx—f
;

2576 ià(
	gÃwËaf
->
	gÃx—f
 =ğ
NULL
) {

2577 
BTREE_ASSERT
(
Ëaf
 =ğ
m_Ëaf
);

2578 
	gm_Ëaf
 = 
ÃwËaf
;

2581 
	gÃwËaf
->
	gÃx—f
->
	g´evËaf
 = 
ÃwËaf
;

2584 
Ëaf_node
 *
	gshadow_Ëaf
 = 
®loÿ‹_Ëaf
();

2585 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
,†—f->¦Ùkey + 
Üig_¦Ùu£d
,

2586 
shadow_Ëaf
->
¦Ùkey
);

2587 
d©a_cİy
(
Ëaf
->
¦Ùd©a
,†—f->¦Ùd©¨+ 
Üig_¦Ùu£d
,

2588 
shadow_Ëaf
->
¦Ùd©a
);

2589 
	g¡d
::
cİy
(
Ëaf
->
bs
,†—f->b + 
BITS_TO_LONGS
(
Ëaf¦Ùmax
è* (), 
shadow_Ëaf
->bs);

2590 
nv_æush
((*)
shadow_Ëaf
, (
Ëaf_node
));

2594 
mem£t
(
Ëaf
, 0x0, (
Ëaf_node
));

2597 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
 + 
mid
,†—f->¦Ùkey +†—f->
¦Ùu£
,

2598 
ÃwËaf
->
¦Ùkey
);

2599 
d©a_cİy
(
Ëaf
->
¦Ùd©a
 + 
mid
,†—f->¦Ùd©¨+†—f->
¦Ùu£
,

2600 
ÃwËaf
->
¦Ùd©a
);

2603 
	g¡d
::
veùÜ
<
·œ
<, > >::
™”©Ü
 
™
;

2604 
	gËaf_šdex
 = 0, 
	gÃwËaf_šdex
 = 0;

2605 
	gcouÁ
 = 0;

2606 
	g™
 = 
vec
.
begš
(); iˆ!ğvec.
’d
(); ++™, ++
	gcouÁ
) {

2607 if(
	gcouÁ
 < 
	gmid
) {

2608 
	gËaf
->
	g¦Ùkey
[
Ëaf_šdex
] = 
shadow_Ëaf
->
¦Ùkey
[
™
->
£cÚd
];

2609 
	gËaf
->
	g¦Ùd©a
[
Ëaf_šdex
] = 
shadow_Ëaf
->
¦Ùd©a
[
™
->
£cÚd
];

2610 
	gËaf
->
b™m­_£t
(
Ëaf_šdex
);

2611 
	gËaf_šdex
++;

2613 
	gÃwËaf
->
	g¦Ùkey
[
ÃwËaf_šdex
] = 
shadow_Ëaf
->
¦Ùkey
[
™
->
£cÚd
];

2614 
	gÃwËaf
->
	g¦Ùd©a
[
ÃwËaf_šdex
] = 
shadow_Ëaf
->
¦Ùd©a
[
™
->
£cÚd
];

2615 
	gÃwËaf
->
b™m­_£t
(
ÃwËaf_šdex
);

2616 
	gÃwËaf_šdex
++;

2619 
	gi
 = 
mid
; i < 
	gÜig_¦Ùu£d
; i++) {

2620 
	gËaf
->
b™m­_ş—r
(
i
);

2623 
	gËaf
->
	gÃx—f
 = 
ÃwËaf
;

2624 
	gÃwËaf
->
	g´evËaf
 = 
Ëaf
;

2626 *
	g_Ãwkey
 = 
Ëaf
->
¦Ùkey
[Ëaf->
couÁ
() - 1];

2627 *
	g_ÃwËaf
 = 
ÃwËaf
;

2629 
nv_æush
((*)
ÃwËaf
, (
Ëaf_node
));

2631 
nv_æush
((*)
Ëaf
, (
Ëaf_node
));

2633 
nv_ä“
(
vmp
, (*)
shadow_Ëaf
);

2640 
¥l™_šÃr_node
(
šÃr_node
* 
šÃr
, 
key_ty³
* 
_Ãwkey
, 
node
** 
_ÃwšÃr
, 
add¦Ù
)

2642 
BTREE_ASSERT
(
šÃr
->
isfuÎ
());

2644 
	gmid
 = (
šÃr
->
¦Ùu£
 >> 1);

2646 
BTREE_PRINT
("bŒ“::¥l™_šÃr: mid " << 
mid
 << "‡dd¦Ù " << 
add¦Ù
);

2650 ià(
	gadd¦Ù
 <ğ
mid
 && mid > 
šÃr
->
¦Ùu£
 - (mid + 1))

2651 
mid
--;

2653 
BTREE_PRINT
("bŒ“::¥l™_šÃr: mid " << 
mid
 << "‡dd¦Ù " << 
add¦Ù
);

2655 
BTREE_PRINT
("bŒ“::¥l™_šÃr_nodÚ " << 
šÃr
 << " iÁØtwØnode " << 
mid
 << "‡nd " << iÂ”->
¦Ùu£
 - (mid + 1) << " sized");

2657 
šÃr_node
* 
	gÃwšÃr
 = 
®loÿ‹_šÃr
(
šÃr
->
Ëv–
);

2659 
	gÃwšÃr
->
	g¦Ùu£
 = 
šÃr
->
¦Ùu£
 - (
mid
 + 1);

2661 
	g¡d
::
cİy
(
šÃr
->
¦Ùkey
 + 
mid
 + 1, iÂ”->¦Ùkey + iÂ”->
¦Ùu£
,

2662 
ÃwšÃr
->
¦Ùkey
);

2663 
	g¡d
::
cİy
(
šÃr
->
chdid
 + 
mid
 + 1, iÂ”->chdid + iÂ”->
¦Ùu£
 + 1,

2664 
ÃwšÃr
->
chdid
);

2666 
	gšÃr
->
	g¦Ùu£
 = 
mid
;

2668 *
	g_Ãwkey
 = 
šÃr
->
¦Ùkey
[
mid
];

2669 *
	g_ÃwšÃr
 = 
ÃwšÃr
;

2672 
	gpublic
:

2677 
‹m¶©e
 <
ty³Çme
 
I‹¿tÜ
>

2678 
bulk_lßd
(
I‹¿tÜ
 
ibegš
, I‹¿tÜ 
›nd
)

2680 
BTREE_ASSERT
(
em±y
());

2682 
	gm_¡©s
.
	g™emcouÁ
 = 
›nd
 - 
ibegš
;

2685 
size_t
 
	gnum_™ems
 = 
›nd
 - 
ibegš
;

2686 
size_t
 
	gnum_Ëaves
 = (
num_™ems
 + 
Ëaf¦Ùmax
 - 1) /†eafslotmax;

2688 
BTREE_PRINT
("bŒ“::bulk_lßd,†ev– 0: " << 
m_¡©s
.
™emcouÁ
 << " i‹m štØ" << 
num_Ëaves
 << "†—ve w™h u°tØ" << ((
›nd
 - 
ibegš
 +‚um_leaves - 1) /‚um_leaves) << " items…er†eaf.");

2690 
I‹¿tÜ
 
	g™
 = 
ibegš
;

2691 
size_t
 
	gi
 = 0; i < 
	gnum_Ëaves
; ++i)

2694 
Ëaf_node
* 
	gËaf
 = 
®loÿ‹_Ëaf
();

2698 
	gËaf
->
	g¦Ùu£
 = 
¡©ic_ÿ¡
<>(
num_™ems
 / (
num_Ëaves
 - 
i
));

2699 
size_t
 
	gs
 = 0; s < 
	gËaf
->
	g¦Ùu£
; ++s, ++
	g™
)

2700 
	gËaf
->
£t_¦Ù
(
s
, *
™
);

2702 ià(
	gm_Ëaf
 !ğ
NULL
) {

2703 
m_Ëaf
->
Ãx—f
 = 
Ëaf
;

2704 
	gËaf
->
	g´evËaf
 = 
m_Ëaf
;

2707 
	gm_h—dËaf
 = 
Ëaf
;

2709 
	gm_Ëaf
 = 
Ëaf
;

2711 
	gnum_™ems
 -ğ
Ëaf
->
¦Ùu£
;

2714 
BTREE_ASSERT
(
™
 =ğ
›nd
 && 
num_™ems
 == 0);

2717 ià(
	gm_h—dËaf
 =ğ
m_Ëaf
) {

2718 
m_roÙ
 = 
m_h—dËaf
;

2722 
BTREE_ASSERT
(
m_¡©s
.
Ëaves
 =ğ
num_Ëaves
);

2725 
size_t
 
	gnum_·»Ás
 = (
num_Ëaves
 + (
šÃr¦Ùmax
 + 1) - 1) / (innerslotmax + 1);

2727 
BTREE_PRINT
("bŒ“::bulk_lßd,†ev– 1: " << 
num_Ëaves
 << "†—ve š " << 
num_·»Ás
 << " inner‚odes with upo " << ((num_leaves +‚um_parents - 1) /‚um_parents) << "†eaves…er inner‚ode.");

2730 
	g¡d
::
	t·œ
<
	tšÃr_node
*, cÚ¡ 
	tkey_ty³
*> 
	tÃxev–_ty³
;

2731 
Ãxev–_ty³
* 
	gÃxev–
 = 
Ãw
‚exev–_ty³[
num_·»Ás
];

2733 
Ëaf_node
* 
	gËaf
 = 
m_h—dËaf
;

2734 
size_t
 
	gi
 = 0; i < 
	gnum_·»Ás
; ++i)

2737 
šÃr_node
* 
	gn
 = 
®loÿ‹_šÃr
(1);

2739 
	gn
->
	g¦Ùu£
 = 
¡©ic_ÿ¡
<>(
num_Ëaves
 / (
num_·»Ás
 - 
i
));

2740 
BTREE_ASSERT
(
n
->
¦Ùu£
 > 0);

2741 --
	gn
->
	g¦Ùu£
;

2744 
	gs
 = 0; s < 
	gn
->
	g¦Ùu£
; ++s)

2746 
	gn
->
	g¦Ùkey
[
s
] = 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1];

2747 
	gn
->
	gchdid
[
s
] = 
Ëaf
;

2748 
	gËaf
 = 
Ëaf
->
Ãx—f
;

2750 
	gn
->
	gchdid
[
n
->
¦Ùu£
] = 
Ëaf
;

2753 
	gÃxev–
[
i
].
	gfœ¡
 = 
n
;

2754 
	gÃxev–
[
i
].
	g£cÚd
 = &
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1];

2756 
	gËaf
 = 
Ëaf
->
Ãx—f
;

2757 
	gnum_Ëaves
 -ğ
n
->
¦Ùu£
 + 1;

2760 
BTREE_ASSERT
(
Ëaf
 =ğ
NULL
 && 
num_Ëaves
 == 0);

2763 
	gËv–
 = 2; 
	gnum_·»Ás
 != 1; ++level)

2765 
size_t
 
	gnum_chd»n
 = 
num_·»Ás
;

2766 
	gnum_·»Ás
 = (
num_chd»n
 + (
šÃr¦Ùmax
 + 1) - 1) / (innerslotmax + 1);

2768 
BTREE_PRINT
("bŒ“::bulk_lßd,†ev– " << 
Ëv–
 << ": " << 
num_chd»n
 << " chd»Àš " << 
num_·»Ás
 << " inner‚odes with upo " << ((num_children +‚um_parents - 1) /‚um_parents) << " children…er inner‚ode.");

2770 
size_t
 
	gšÃr_šdex
 = 0;

2771 
size_t
 
	gi
 = 0; i < 
	gnum_·»Ás
; ++i)

2774 
šÃr_node
* 
	gn
 = 
®loÿ‹_šÃr
(
Ëv–
);

2776 
	gn
->
	g¦Ùu£
 = 
¡©ic_ÿ¡
<>(
num_chd»n
 / (
num_·»Ás
 - 
i
));

2777 
BTREE_ASSERT
(
n
->
¦Ùu£
 > 0);

2778 --
	gn
->
	g¦Ùu£
;

2781 
	gs
 = 0; s < 
	gn
->
	g¦Ùu£
; ++s)

2783 
	gn
->
	g¦Ùkey
[
s
] = *
Ãxev–
[
šÃr_šdex
].
£cÚd
;

2784 
	gn
->
	gchdid
[
s
] = 
Ãxev–
[
šÃr_šdex
].
fœ¡
;

2785 ++
	gšÃr_šdex
;

2787 
	gn
->
	gchdid
[
n
->
¦Ùu£
] = 
Ãxev–
[
šÃr_šdex
].
fœ¡
;

2791 
	gÃxev–
[
i
].
	gfœ¡
 = 
n
;

2792 
	gÃxev–
[
i
].
	g£cÚd
 = 
Ãxev–
[
šÃr_šdex
].
£cÚd
;

2794 ++
	gšÃr_šdex
;

2795 
	gnum_chd»n
 -ğ
n
->
¦Ùu£
 + 1;

2798 
BTREE_ASSERT
(
num_chd»n
 == 0);

2801 
	gm_roÙ
 = 
Ãxev–
[0].
fœ¡
;

2802 
	gd–‘e
[] 
	gÃxev–
;

2804 ià(
	g£lfv”ify
è
v”ify
();

2807 
	g´iv©e
:

2811 
	e»suÉ_æags_t


2814 
bŒ“_ok
 = 0,

2817 
	gbŒ“_nÙ_found
 = 1,

2821 
	gbŒ“_upd©e_Ï¡key
 = 2,

2825 
	gbŒ“_fixm”ge
 = 4

2830 
	s»suÉ_t


2833 
»suÉ_æags_t
 
	gæags
;

2836 
key_ty³
 
	gÏ¡key
;

2840 
šlše
 
ex¶ic™
 
»suÉ_t
(
»suÉ_æags_t
 
f
 = 
bŒ“_ok
)

2841 : 
æags
(
f
), 
Ï¡key
()

2845 
šlše
 
»suÉ_t
(
»suÉ_æags_t
 
f
, cÚ¡ 
key_ty³
& 
k
)

2846 : 
æags
(
f
), 
Ï¡key
(
k
)

2850 
šlše
 
boŞ
 
has
(
»suÉ_æags_t
 
f
) const

2852  (
	gæags
 & 
	gf
) != 0;

2856 
šlše
 
	g»suÉ_t
& 
	gİ”©Ü
 |ğ(cÚ¡ 
»suÉ_t
& 
Ùh”
)

2858 
æags
 = 
»suÉ_æags_t
(æag | 
Ùh”
.flags);

2861 ià(
	gÙh”
.
has
(
bŒ“_upd©e_Ï¡key
))

2862 
	gÏ¡key
 = 
Ùh”
.
Ï¡key
;

2864  *
	gthis
;

2868 
	gpublic
:

2873 
boŞ
 
”a£_Úe
(cÚ¡ 
key_ty³
& 
key
)

2875 
BTREE_PRINT
("bŒ“::”a£_Úe(" << 
key
 << "èÚ bŒ“ siz" << 
size
());

2877 ià(
	g£lfv”ify
è
v”ify
();

2879 ià(!
	gm_roÙ
è 
	gçl£
;

2881 
»suÉ_t
 
	g»suÉ
 = 
”a£_Úe_desûnd
(
key
, 
m_roÙ
, 
NULL
, NULL, NULL, NULL, NULL, 0);

2883 ià(!
	g»suÉ
.
has
(
bŒ“_nÙ_found
))

2884 --
	gm_¡©s
.
	g™emcouÁ
;

2886 #ifdeà
BTREE_DEBUG


2887 ià(
	gdebug
è
´št
(
¡d
::
cout
);

2889 ià(
	g£lfv”ify
è
v”ify
();

2891  !
	g»suÉ
.
has
(
bŒ“_nÙ_found
);

2896 
size_ty³
 
”a£
(cÚ¡ 
key_ty³
& 
key
)

2898 
size_ty³
 
	gc
 = 0;

2900 
”a£_Úe
(
key
))

2902 ++
	gc
;

2903 ià(!
	g®low_du¶iÿ‹s
) ;

2906  
	gc
;

2910 
”a£
(
™”©Ü
 
™”
)

2912 
BTREE_PRINT
("bŒ“::”a£_™”(" << 
™”
.
cu¼node
 << "," << i‹r.
cu¼¦Ù
 << "èÚ bŒ“ siz" << 
size
());

2914 ià(
	g£lfv”ify
è
v”ify
();

2916 ià(!
	gm_roÙ
) ;

2918 
»suÉ_t
 
	g»suÉ
 = 
”a£_™”_desûnd
(
™”
, 
m_roÙ
, 
NULL
, NULL, NULL, NULL, NULL, 0);

2920 ià(!
	g»suÉ
.
has
(
bŒ“_nÙ_found
))

2921 --
	gm_¡©s
.
	g™emcouÁ
;

2923 #ifdeà
BTREE_DEBUG


2924 ià(
	gdebug
è
´št
(
¡d
::
cout
);

2926 ià(
	g£lfv”ify
è
v”ify
();

2929 #ifdeà
BTREE_TODO


2932 
”a£
(
™”©Ü
 , iterator )

2934 
abÜt
();

2938 
	g´iv©e
:

2950 
»suÉ_t
 
”a£_Úe_desûnd
(cÚ¡ 
key_ty³
& 
key
,

2951 
node
* 
cu¼
,

2952 
node
* 
Ëá
,‚ode* 
right
,

2953 
šÃr_node
* 
Ëá·»Á
, iÂ”_node* 
righ¬’t
,

2954 
šÃr_node
* 
·»Á
, 
·»Á¦Ù
)

2956 ià(
	gcu¼
->
i¦—âode
())

2958 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
cu¼
);

2959 
Ëaf_node
* 
	gËáËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
Ëá
);

2960 
Ëaf_node
* 
	grigh—f
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
right
);

2962 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

2964 ià(
	g¦Ù
 >ğ
Ëaf
->
¦Ùu£
 || !
key_equ®
(
key
,†—f->
¦Ùkey
[
¦Ù
]))

2966 
BTREE_PRINT
("Could‚Ù fšd key " << 
key
 << "oƒrase.");

2968  
»suÉ_t
(
bŒ“_nÙ_found
);

2971 
BTREE_PRINT
("Found key iÀËaà" << 
cu¼
 << "‡ˆ¦Ù " << 
¦Ù
);

2973 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
 + 
¦Ù
 + 1,†—f->¦Ùkey +†—f->
¦Ùu£
,

2974 
Ëaf
->
¦Ùkey
 + 
¦Ù
);

2975 
d©a_cİy
(
Ëaf
->
¦Ùd©a
 + 
¦Ù
 + 1,†—f->¦Ùd©¨+†—f->
¦Ùu£
,

2976 
Ëaf
->
¦Ùd©a
 + 
¦Ù
);

2978 
	gËaf
->
	g¦Ùu£
--;

2980 
»suÉ_t
 
	gmy»s
 =„esuÉ_t(
bŒ“_ok
);

2984 ià(
	g¦Ù
 =ğ
Ëaf
->
¦Ùu£
)

2986 ià(
·»Á
 && 
·»Á¦Ù
 <…¬’t->
¦Ùu£
)

2988 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
cu¼
);

2989 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1];

2993 ià(
	gËaf
->
	g¦Ùu£
 >= 1)

2995 
BTREE_PRINT
("Schedulšg†a¡keyupd©e: key " << 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1]);

2996 
	gmy»s
 |ğ
»suÉ_t
(
bŒ“_upd©e_Ï¡key
, 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1]);

3000 
BTREE_ASSERT
(
Ëaf
 =ğ
m_roÙ
);

3005 ià(
	gËaf
->
isund”æow
(è&& !Ö—à=ğ
m_roÙ
 && 
Ëaf
->
¦Ùu£
 >= 1))

3011 ià(
ËáËaf
 =ğ
NULL
 && 
righ—f
 == NULL)

3013 
BTREE_ASSERT
(
Ëaf
 =ğ
m_roÙ
);

3014 
BTREE_ASSERT
(
Ëaf
->
¦Ùu£
 == 0);

3016 
ä“_node
(
m_roÙ
);

3018 
	gm_roÙ
 = 
Ëaf
 = 
NULL
;

3019 
	gm_h—dËaf
 = 
m_Ëaf
 = 
NULL
;

3022 
BTREE_ASSERT
(
m_¡©s
.
™emcouÁ
 == 1);

3023 
BTREE_ASSERT
(
m_¡©s
.
Ëaves
 == 0);

3024 
BTREE_ASSERT
(
m_¡©s
.
šÃºodes
 == 0);

3026  
»suÉ_t
(
bŒ“_ok
);

3031 ià((
	gËáËaf
 =ğ
NULL
 || 
ËáËaf
->
isãw
()è&& (
righ—f
 == NULL ||„ightleaf->isfew()))

3033 ià(
Ëá·»Á
 =ğ
·»Á
)

3034 
my»s
 |ğ
m”ge_Ëaves
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
);

3036 
	gmy»s
 |ğ
m”ge_Ëaves
(
Ëaf
, 
righ—f
, 
righ¬’t
);

3039 ià((
	gËáËaf
 !ğ
NULL
 && 
ËáËaf
->
isãw
()è&& (
righ—f
 != NULL && !rightleaf->isfew()))

3041 ià(
righ¬’t
 =ğ
·»Á
)

3042 
my»s
 |ğ
shiá_Ëá_Ëaf
(
Ëaf
, 
righ—f
, 
righ¬’t
, 
·»Á¦Ù
);

3044 
	gmy»s
 |ğ
m”ge_Ëaves
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
);

3047 ià((
	gËáËaf
 !ğ
NULL
 && !
ËáËaf
->
isãw
()è&& (
righ—f
 != NULL &&„ightleaf->isfew()))

3049 ià(
Ëá·»Á
 =ğ
·»Á
)

3050 
shiá_right_Ëaf
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3052 
	gmy»s
 |ğ
m”ge_Ëaves
(
Ëaf
, 
righ—f
, 
righ¬’t
);

3056 ià(
	gËá·»Á
 =ğ
righ¬’t
)

3058 ià(
ËáËaf
->
¦Ùu£
 <ğ
righ—f
->slotuse)

3059 
my»s
 |ğ
shiá_Ëá_Ëaf
(
Ëaf
, 
righ—f
, 
righ¬’t
, 
·»Á¦Ù
);

3061 
shiá_right_Ëaf
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3065 ià(
	gËá·»Á
 =ğ
·»Á
)

3066 
shiá_right_Ëaf
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3068 
	gmy»s
 |ğ
shiá_Ëá_Ëaf
(
Ëaf
, 
righ—f
, 
righ¬’t
, 
·»Á¦Ù
);

3072  
»suÉ_t
(
my»s
);

3076 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
cu¼
);

3077 
šÃr_node
* 
	gËášÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
Ëá
);

3078 
šÃr_node
* 
	grightšÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
right
);

3080 
node
* 
	gmyËá
, * 
	gmyright
;

3081 
šÃr_node
* 
	gmyËá·»Á
, * 
	gmyrigh¬’t
;

3083 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

3085 ià(
	g¦Ù
 == 0) {

3086 
myËá
 = (
Ëá
 =ğ
NULL
è? NULL : (
¡©ic_ÿ¡
<
šÃr_node
*>Öeá))->
chdid
[Ëá->
¦Ùu£
 - 1];

3087 
	gmyËá·»Á
 = 
Ëá·»Á
;

3090 
	gmyËá
 = 
šÃr
->
chdid
[
¦Ù
 - 1];

3091 
	gmyËá·»Á
 = 
šÃr
;

3094 ià(
	g¦Ù
 =ğ
šÃr
->
¦Ùu£
) {

3095 
myright
 = (
right
 =ğ
NULL
è? NULL : (
¡©ic_ÿ¡
<
šÃr_node
*>Ôight))->
chdid
[0];

3096 
	gmyrigh¬’t
 = 
righ¬’t
;

3099 
	gmyright
 = 
šÃr
->
chdid
[
¦Ù
 + 1];

3100 
	gmyrigh¬’t
 = 
šÃr
;

3103 
BTREE_PRINT
("”a£_Úe_desûnd iÁØ" << 
šÃr
->
chdid
[
¦Ù
]);

3105 
»suÉ_t
 
	g»suÉ
 = 
”a£_Úe_desûnd
(
key
,

3106 
šÃr
->
chdid
[
¦Ù
],

3107 
myËá
, 
myright
,

3108 
myËá·»Á
, 
myrigh¬’t
,

3109 
šÃr
, 
¦Ù
);

3111 
»suÉ_t
 
	gmy»s
 =„esuÉ_t(
bŒ“_ok
);

3113 ià(
	g»suÉ
.
has
(
bŒ“_nÙ_found
))

3115  
»suÉ_t
(
»suÉ
);

3118 ià(
	g»suÉ
.
has
(
bŒ“_upd©e_Ï¡key
))

3120 ià(
	g·»Á
 && 
	g·»Á¦Ù
 <…¬’t->
	g¦Ùu£
)

3122 
BTREE_PRINT
("Fixšg†a¡keyupd©e: key " << 
»suÉ
.
Ï¡key
 << " iÁØ·»Á " << 
·»Á
 << "‡ˆ·»Á¦Ù " << 
·»Á¦Ù
);

3124 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
cu¼
);

3125 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
»suÉ
.
Ï¡key
;

3129 
BTREE_PRINT
("FÜw¬dšg†a¡keyupd©e: key " << 
»suÉ
.
Ï¡key
);

3130 
	gmy»s
 |ğ
»suÉ_t
(
bŒ“_upd©e_Ï¡key
, 
»suÉ
.
Ï¡key
);

3134 ià(
	g»suÉ
.
has
(
bŒ“_fixm”ge
))

3137 ià(
	gšÃr
->
	gchdid
[
¦Ù
]->
	g¦Ùu£
 != 0)

3138 
¦Ù
++;

3141 
BTREE_ASSERT
(
šÃr
->
chdid
[
¦Ù
]->
¦Ùu£
 == 0);

3143 
ä“_node
(
šÃr
->
chdid
[
¦Ù
]);

3145 
	g¡d
::
cİy
(
šÃr
->
¦Ùkey
 + 
¦Ù
, iÂ”->¦Ùkey + iÂ”->
¦Ùu£
,

3146 
šÃr
->
¦Ùkey
 + 
¦Ù
 - 1);

3147 
	g¡d
::
cİy
(
šÃr
->
chdid
 + 
¦Ù
 + 1, iÂ”->chdid + iÂ”->
¦Ùu£
 + 1,

3148 
šÃr
->
chdid
 + 
¦Ù
);

3150 
	gšÃr
->
	g¦Ùu£
--;

3152 ià(
	gšÃr
->
	gËv–
 == 1)

3155 
¦Ù
--;

3156 
Ëaf_node
* 
	gchd
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
šÃr
->
chdid
[
¦Ù
]);

3157 
	gšÃr
->
	g¦Ùkey
[
¦Ù
] = 
chd
->
¦Ùkey
[chd->
¦Ùu£
 - 1];

3161 ià(
	gšÃr
->
isund”æow
(è&& !(šÃ¸=ğ
m_roÙ
 && 
šÃr
->
¦Ùu£
 >= 1))

3164 ià(
ËášÃr
 =ğ
NULL
 && 
rightšÃr
 == NULL)

3166 
BTREE_ASSERT
(
šÃr
 =ğ
m_roÙ
);

3167 
BTREE_ASSERT
(
šÃr
->
¦Ùu£
 == 0);

3169 
	gm_roÙ
 = 
šÃr
->
chdid
[0];

3171 
	gšÃr
->
	g¦Ùu£
 = 0;

3172 
ä“_node
(
šÃr
);

3174  
»suÉ_t
(
bŒ“_ok
);

3179 ià((
	gËášÃr
 =ğ
NULL
 || 
ËášÃr
->
isãw
()è&& (
rightšÃr
 == NULL ||„ightinner->isfew()))

3181 ià(
Ëá·»Á
 =ğ
·»Á
)

3182 
my»s
 |ğ
m”ge_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3184 
	gmy»s
 |ğ
m”ge_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3187 ià((
	gËášÃr
 !ğ
NULL
 && 
ËášÃr
->
isãw
()è&& (
rightšÃr
 != NULL && !rightinner->isfew()))

3189 ià(
righ¬’t
 =ğ
·»Á
)

3190 
shiá_Ëá_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3192 
	gmy»s
 |ğ
m”ge_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3195 ià((
	gËášÃr
 !ğ
NULL
 && !
ËášÃr
->
isãw
()è&& (
rightšÃr
 != NULL &&„ightinner->isfew()))

3197 ià(
Ëá·»Á
 =ğ
·»Á
)

3198 
shiá_right_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3200 
	gmy»s
 |ğ
m”ge_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3204 ià(
	gËá·»Á
 =ğ
righ¬’t
)

3206 ià(
ËášÃr
->
¦Ùu£
 <ğ
rightšÃr
->slotuse)

3207 
shiá_Ëá_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3209 
shiá_right_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3213 ià(
	gËá·»Á
 =ğ
·»Á
)

3214 
shiá_right_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3216 
shiá_Ëá_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3220  
»suÉ_t
(
my»s
);

3239 
»suÉ_t
 
”a£_™”_desûnd
(cÚ¡ 
™”©Ü
& 
™”
,

3240 
node
* 
cu¼
,

3241 
node
* 
Ëá
,‚ode* 
right
,

3242 
šÃr_node
* 
Ëá·»Á
, iÂ”_node* 
righ¬’t
,

3243 
šÃr_node
* 
·»Á
, 
·»Á¦Ù
)

3245 ià(
	gcu¼
->
i¦—âode
())

3247 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
cu¼
);

3248 
Ëaf_node
* 
	gËáËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
Ëá
);

3249 
Ëaf_node
* 
	grigh—f
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
right
);

3253 ià(
	gËaf
 !ğ
™”
.
cu¼node
)

3255  
»suÉ_t
(
bŒ“_nÙ_found
);

3258 ià(
	g™”
.
	gcu¼¦Ù
 >ğ
Ëaf
->
¦Ùu£
)

3260 
BTREE_PRINT
("Could‚Ù fšd i‹¿tÜ (" << 
™”
.
cu¼node
 << "," << i‹r.
cu¼¦Ù
 << ")oƒrase. Invalid†eaf‚ode?");

3262  
»suÉ_t
(
bŒ“_nÙ_found
);

3265 
	g¦Ù
 = 
™”
.
cu¼¦Ù
;

3267 
BTREE_PRINT
("Found i‹¿tÜ iÀËaà" << 
cu¼
 << "‡ˆ¦Ù " << 
¦Ù
);

3269 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
 + 
¦Ù
 + 1,†—f->¦Ùkey +†—f->
¦Ùu£
,

3270 
Ëaf
->
¦Ùkey
 + 
¦Ù
);

3271 
d©a_cİy
(
Ëaf
->
¦Ùd©a
 + 
¦Ù
 + 1,†—f->¦Ùd©¨+†—f->
¦Ùu£
,

3272 
Ëaf
->
¦Ùd©a
 + 
¦Ù
);

3274 
	gËaf
->
	g¦Ùu£
--;

3276 
»suÉ_t
 
	gmy»s
 =„esuÉ_t(
bŒ“_ok
);

3280 ià(
	g¦Ù
 =ğ
Ëaf
->
¦Ùu£
)

3282 ià(
·»Á
 && 
·»Á¦Ù
 <…¬’t->
¦Ùu£
)

3284 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
cu¼
);

3285 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1];

3289 ià(
	gËaf
->
	g¦Ùu£
 >= 1)

3291 
BTREE_PRINT
("Schedulšg†a¡keyupd©e: key " << 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1]);

3292 
	gmy»s
 |ğ
»suÉ_t
(
bŒ“_upd©e_Ï¡key
, 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1]);

3296 
BTREE_ASSERT
(
Ëaf
 =ğ
m_roÙ
);

3301 ià(
	gËaf
->
isund”æow
(è&& !Ö—à=ğ
m_roÙ
 && 
Ëaf
->
¦Ùu£
 >= 1))

3307 ià(
ËáËaf
 =ğ
NULL
 && 
righ—f
 == NULL)

3309 
BTREE_ASSERT
(
Ëaf
 =ğ
m_roÙ
);

3310 
BTREE_ASSERT
(
Ëaf
->
¦Ùu£
 == 0);

3312 
ä“_node
(
m_roÙ
);

3314 
	gm_roÙ
 = 
Ëaf
 = 
NULL
;

3315 
	gm_h—dËaf
 = 
m_Ëaf
 = 
NULL
;

3318 
BTREE_ASSERT
(
m_¡©s
.
™emcouÁ
 == 1);

3319 
BTREE_ASSERT
(
m_¡©s
.
Ëaves
 == 0);

3320 
BTREE_ASSERT
(
m_¡©s
.
šÃºodes
 == 0);

3322  
»suÉ_t
(
bŒ“_ok
);

3327 ià((
	gËáËaf
 =ğ
NULL
 || 
ËáËaf
->
isãw
()è&& (
righ—f
 == NULL ||„ightleaf->isfew()))

3329 ià(
Ëá·»Á
 =ğ
·»Á
)

3330 
my»s
 |ğ
m”ge_Ëaves
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
);

3332 
	gmy»s
 |ğ
m”ge_Ëaves
(
Ëaf
, 
righ—f
, 
righ¬’t
);

3335 ià((
	gËáËaf
 !ğ
NULL
 && 
ËáËaf
->
isãw
()è&& (
righ—f
 != NULL && !rightleaf->isfew()))

3337 ià(
righ¬’t
 =ğ
·»Á
)

3338 
my»s
 |ğ
shiá_Ëá_Ëaf
(
Ëaf
, 
righ—f
, 
righ¬’t
, 
·»Á¦Ù
);

3340 
	gmy»s
 |ğ
m”ge_Ëaves
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
);

3343 ià((
	gËáËaf
 !ğ
NULL
 && !
ËáËaf
->
isãw
()è&& (
righ—f
 != NULL &&„ightleaf->isfew()))

3345 ià(
Ëá·»Á
 =ğ
·»Á
)

3346 
shiá_right_Ëaf
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3348 
	gmy»s
 |ğ
m”ge_Ëaves
(
Ëaf
, 
righ—f
, 
righ¬’t
);

3352 ià(
	gËá·»Á
 =ğ
righ¬’t
)

3354 ià(
ËáËaf
->
¦Ùu£
 <ğ
righ—f
->slotuse)

3355 
my»s
 |ğ
shiá_Ëá_Ëaf
(
Ëaf
, 
righ—f
, 
righ¬’t
, 
·»Á¦Ù
);

3357 
shiá_right_Ëaf
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3361 ià(
	gËá·»Á
 =ğ
·»Á
)

3362 
shiá_right_Ëaf
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3364 
	gmy»s
 |ğ
shiá_Ëá_Ëaf
(
Ëaf
, 
righ—f
, 
righ¬’t
, 
·»Á¦Ù
);

3368  
	gmy»s
;

3372 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
cu¼
);

3373 
šÃr_node
* 
	gËášÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
Ëá
);

3374 
šÃr_node
* 
	grightšÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
right
);

3379 
»suÉ_t
 
	g»suÉ
;

3380 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
™”
.
key
());

3382 
	g¦Ù
 <ğ
šÃr
->
¦Ùu£
)

3384 
node
* 
myËá
, * 
myright
;

3385 
šÃr_node
* 
	gmyËá·»Á
, * 
	gmyrigh¬’t
;

3387 ià(
	g¦Ù
 == 0) {

3388 
myËá
 = (
Ëá
 =ğ
NULL
è? NULL : (
¡©ic_ÿ¡
<
šÃr_node
*>Öeá))->
chdid
[Ëá->
¦Ùu£
 - 1];

3389 
	gmyËá·»Á
 = 
Ëá·»Á
;

3392 
	gmyËá
 = 
šÃr
->
chdid
[
¦Ù
 - 1];

3393 
	gmyËá·»Á
 = 
šÃr
;

3396 ià(
	g¦Ù
 =ğ
šÃr
->
¦Ùu£
) {

3397 
myright
 = (
right
 =ğ
NULL
è? NULL : (
¡©ic_ÿ¡
<
šÃr_node
*>Ôight))->
chdid
[0];

3398 
	gmyrigh¬’t
 = 
righ¬’t
;

3401 
	gmyright
 = 
šÃr
->
chdid
[
¦Ù
 + 1];

3402 
	gmyrigh¬’t
 = 
šÃr
;

3405 
BTREE_PRINT
("”a£_™”_desûnd iÁØ" << 
šÃr
->
chdid
[
¦Ù
]);

3407 
	g»suÉ
 = 
”a£_™”_desûnd
(
™”
,

3408 
šÃr
->
chdid
[
¦Ù
],

3409 
myËá
, 
myright
,

3410 
myËá·»Á
, 
myrigh¬’t
,

3411 
šÃr
, 
¦Ù
);

3413 ià(!
	g»suÉ
.
has
(
bŒ“_nÙ_found
))

3418 ià(
	g¦Ù
 < 
	gšÃr
->
	g¦Ùu£
 && 
key_Ëss
(
šÃr
->
¦Ùkey
[
¦Ù
], 
™”
.
key
()))

3419  
»suÉ_t
(
bŒ“_nÙ_found
);

3421 ++
	g¦Ù
;

3424 ià(
	g¦Ù
 > 
	gšÃr
->
	g¦Ùu£
)

3425  
»suÉ_t
(
bŒ“_nÙ_found
);

3427 
»suÉ_t
 
	gmy»s
 =„esuÉ_t(
bŒ“_ok
);

3429 ià(
	g»suÉ
.
has
(
bŒ“_upd©e_Ï¡key
))

3431 ià(
	g·»Á
 && 
	g·»Á¦Ù
 <…¬’t->
	g¦Ùu£
)

3433 
BTREE_PRINT
("Fixšg†a¡keyupd©e: key " << 
»suÉ
.
Ï¡key
 << " iÁØ·»Á " << 
·»Á
 << "‡ˆ·»Á¦Ù " << 
·»Á¦Ù
);

3435 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
cu¼
);

3436 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
»suÉ
.
Ï¡key
;

3440 
BTREE_PRINT
("FÜw¬dšg†a¡keyupd©e: key " << 
»suÉ
.
Ï¡key
);

3441 
	gmy»s
 |ğ
»suÉ_t
(
bŒ“_upd©e_Ï¡key
, 
»suÉ
.
Ï¡key
);

3445 ià(
	g»suÉ
.
has
(
bŒ“_fixm”ge
))

3448 ià(
	gšÃr
->
	gchdid
[
¦Ù
]->
	g¦Ùu£
 != 0)

3449 
¦Ù
++;

3452 
BTREE_ASSERT
(
šÃr
->
chdid
[
¦Ù
]->
¦Ùu£
 == 0);

3454 
ä“_node
(
šÃr
->
chdid
[
¦Ù
]);

3456 
	g¡d
::
cİy
(
šÃr
->
¦Ùkey
 + 
¦Ù
, iÂ”->¦Ùkey + iÂ”->
¦Ùu£
,

3457 
šÃr
->
¦Ùkey
 + 
¦Ù
 - 1);

3458 
	g¡d
::
cİy
(
šÃr
->
chdid
 + 
¦Ù
 + 1, iÂ”->chdid + iÂ”->
¦Ùu£
 + 1,

3459 
šÃr
->
chdid
 + 
¦Ù
);

3461 
	gšÃr
->
	g¦Ùu£
--;

3463 ià(
	gšÃr
->
	gËv–
 == 1)

3466 
¦Ù
--;

3467 
Ëaf_node
* 
	gchd
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
šÃr
->
chdid
[
¦Ù
]);

3468 
	gšÃr
->
	g¦Ùkey
[
¦Ù
] = 
chd
->
¦Ùkey
[chd->
¦Ùu£
 - 1];

3472 ià(
	gšÃr
->
isund”æow
(è&& !(šÃ¸=ğ
m_roÙ
 && 
šÃr
->
¦Ùu£
 >= 1))

3476 ià(
ËášÃr
 =ğ
NULL
 && 
rightšÃr
 == NULL)

3478 
BTREE_ASSERT
(
šÃr
 =ğ
m_roÙ
);

3479 
BTREE_ASSERT
(
šÃr
->
¦Ùu£
 == 0);

3481 
	gm_roÙ
 = 
šÃr
->
chdid
[0];

3483 
	gšÃr
->
	g¦Ùu£
 = 0;

3484 
ä“_node
(
šÃr
);

3486  
»suÉ_t
(
bŒ“_ok
);

3491 ià((
	gËášÃr
 =ğ
NULL
 || 
ËášÃr
->
isãw
()è&& (
rightšÃr
 == NULL ||„ightinner->isfew()))

3493 ià(
Ëá·»Á
 =ğ
·»Á
)

3494 
my»s
 |ğ
m”ge_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3496 
	gmy»s
 |ğ
m”ge_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3499 ià((
	gËášÃr
 !ğ
NULL
 && 
ËášÃr
->
isãw
()è&& (
rightšÃr
 != NULL && !rightinner->isfew()))

3501 ià(
righ¬’t
 =ğ
·»Á
)

3502 
shiá_Ëá_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3504 
	gmy»s
 |ğ
m”ge_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3507 ià((
	gËášÃr
 !ğ
NULL
 && !
ËášÃr
->
isãw
()è&& (
rightšÃr
 != NULL &&„ightinner->isfew()))

3509 ià(
Ëá·»Á
 =ğ
·»Á
)

3510 
shiá_right_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3512 
	gmy»s
 |ğ
m”ge_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3516 ià(
	gËá·»Á
 =ğ
righ¬’t
)

3518 ià(
ËášÃr
->
¦Ùu£
 <ğ
rightšÃr
->slotuse)

3519 
shiá_Ëá_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3521 
shiá_right_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3525 ià(
	gËá·»Á
 =ğ
·»Á
)

3526 
shiá_right_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3528 
shiá_Ëá_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3532  
»suÉ_t
(
my»s
);

3539 
»suÉ_t
 
m”ge_Ëaves
(
Ëaf_node
* 
Ëá
,†—f_node* 
right
, 
šÃr_node
* 
·»Á
)

3541 
BTREE_PRINT
("M”gËaànode " << 
Ëá
 << "‡nd " << 
right
 << " w™h commÚ…¬’ˆ" << 
·»Á
 << ".");

3542 ()
	g·»Á
;

3544 
BTREE_ASSERT
(
Ëá
->
i¦—âode
(è&& 
right
->isleafnode());

3545 
BTREE_ASSERT
(
·»Á
->
Ëv–
 == 1);

3547 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 + 
right
->¦Ùu£ < 
Ëaf¦Ùmax
);

3549 
	g¡d
::
cİy
(
right
->
¦Ùkey
,„ight->¦Ùkey +„ight->
¦Ùu£
,

3550 
Ëá
->
¦Ùkey
 +†eá->
¦Ùu£
);

3551 
d©a_cİy
(
right
->
¦Ùd©a
,„ight->¦Ùd©¨+„ight->
¦Ùu£
,

3552 
Ëá
->
¦Ùd©a
 +†eá->
¦Ùu£
);

3554 
	gËá
->
	g¦Ùu£
 +ğ
right
->
¦Ùu£
;

3556 
	gËá
->
	gÃx—f
 = 
right
->
Ãx—f
;

3557 ià(
	gËá
->
	gÃx—f
)

3558 
	gËá
->
	gÃx—f
->
	g´evËaf
 = 
Ëá
;

3560 
	gm_Ëaf
 = 
Ëá
;

3562 
	gright
->
	g¦Ùu£
 = 0;

3564  
»suÉ_t
(
bŒ“_fixm”ge
);

3570 
»suÉ_t
 
m”ge_šÃr
(
šÃr_node
* 
Ëá
, iÂ”_node* 
right
, iÂ”_node* 
·»Á
, 
·»Á¦Ù
)

3572 
BTREE_PRINT
("M”gšÃ¸node " << 
Ëá
 << "‡nd " << 
right
 << " w™h commÚ…¬’ˆ" << 
·»Á
 << ".");

3574 
BTREE_ASSERT
(
Ëá
->
Ëv–
 =ğ
right
->level);

3575 
BTREE_ASSERT
(
·»Á
->
Ëv–
 =ğ
Ëá
->level + 1);

3577 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
Ëá
);

3579 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 + 
right
->¦Ùu£ < 
šÃr¦Ùmax
);

3581 ià(
	g£lfv”ify
)

3584 
	gËá¦Ù
 = 0;

3585 
	gËá¦Ù
 <ğ
·»Á
->
¦Ùu£
 &&…¬’t->
chdid
[
Ëá¦Ù
] !ğ
Ëá
)

3586 ++
Ëá¦Ù
;

3588 
BTREE_ASSERT
(
Ëá¦Ù
 < 
·»Á
->
¦Ùu£
);

3589 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
] =ğ
Ëá
);

3590 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
 + 1] =ğ
right
);

3592 
BTREE_ASSERT
(
·»Á¦Ù
 =ğ
Ëá¦Ù
);

3596 
	gËá
->
	g¦Ùkey
[
Ëá
->
¦Ùu£
] = 
·»Á
->
¦Ùkey
[
·»Á¦Ù
];

3597 
	gËá
->
	g¦Ùu£
++;

3600 
	g¡d
::
cİy
(
right
->
¦Ùkey
,„ight->¦Ùkey +„ight->
¦Ùu£
,

3601 
Ëá
->
¦Ùkey
 +†eá->
¦Ùu£
);

3602 
	g¡d
::
cİy
(
right
->
chdid
,„ight->chdid +„ight->
¦Ùu£
 + 1,

3603 
Ëá
->
chdid
 +†eá->
¦Ùu£
);

3605 
	gËá
->
	g¦Ùu£
 +ğ
right
->
¦Ùu£
;

3606 
	gright
->
	g¦Ùu£
 = 0;

3608  
»suÉ_t
(
bŒ“_fixm”ge
);

3614 
»suÉ_t
 
shiá_Ëá_Ëaf
(
Ëaf_node
* 
Ëá
,†—f_node* 
right
, 
šÃr_node
* 
·»Á
, 
·»Á¦Ù
)

3616 
BTREE_ASSERT
(
Ëá
->
i¦—âode
(è&& 
right
->isleafnode());

3617 
BTREE_ASSERT
(
·»Á
->
Ëv–
 == 1);

3619 
BTREE_ASSERT
(
Ëá
->
Ãx—f
 =ğ
right
);

3620 
BTREE_ASSERT
(
Ëá
 =ğ
right
->
´evËaf
);

3622 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 < 
right
->slotuse);

3623 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
Ëá
);

3625 
	gshiánum
 = (
right
->
¦Ùu£
 - 
Ëá
->slotuse) >> 1;

3627 
BTREE_PRINT
("Shiášg (Ëafè" << 
shiánum
 << "ƒÁr› tØËá " << 
Ëá
 << " from„ighˆ" << 
right
 << " w™h commÚ…¬’ˆ" << 
·»Á
 << ".");

3629 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 + 
shiánum
 < 
Ëaf¦Ùmax
);

3633 
	g¡d
::
cİy
(
right
->
¦Ùkey
,„ight->¦Ùkey + 
shiánum
,

3634 
Ëá
->
¦Ùkey
 +†eá->
¦Ùu£
);

3635 
d©a_cİy
(
right
->
¦Ùd©a
,„ight->¦Ùd©¨+ 
shiánum
,

3636 
Ëá
->
¦Ùd©a
 +†eá->
¦Ùu£
);

3638 
	gËá
->
	g¦Ùu£
 +ğ
shiánum
;

3642 
	g¡d
::
cİy
(
right
->
¦Ùkey
 + 
shiánum
,„ight->¦Ùkey +„ight->
¦Ùu£
,

3643 
right
->
¦Ùkey
);

3644 
d©a_cİy
(
right
->
¦Ùd©a
 + 
shiánum
,„ight->¦Ùd©¨+„ight->
¦Ùu£
,

3645 
right
->
¦Ùd©a
);

3647 
	gright
->
	g¦Ùu£
 -ğ
shiánum
;

3650 ià(
	g·»Á¦Ù
 < 
	g·»Á
->
	g¦Ùu£
) {

3651 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
Ëá
->
¦Ùkey
[Ëá->
¦Ùu£
 - 1];

3652  
»suÉ_t
(
bŒ“_ok
);

3655  
»suÉ_t
(
bŒ“_upd©e_Ï¡key
, 
Ëá
->
¦Ùkey
[Ëá->
¦Ùu£
 - 1]);

3662 
shiá_Ëá_šÃr
(
šÃr_node
* 
Ëá
, iÂ”_node* 
right
, iÂ”_node* 
·»Á
, 
·»Á¦Ù
)

3664 
BTREE_ASSERT
(
Ëá
->
Ëv–
 =ğ
right
->level);

3665 
BTREE_ASSERT
(
·»Á
->
Ëv–
 =ğ
Ëá
->level + 1);

3667 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 < 
right
->slotuse);

3668 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
Ëá
);

3670 
	gshiánum
 = (
right
->
¦Ùu£
 - 
Ëá
->slotuse) >> 1;

3672 
BTREE_PRINT
("Shiášg (šÃrè" << 
shiánum
 << "ƒÁr› tØËá " << 
Ëá
 << " from„ighˆ" << 
right
 << " w™h commÚ…¬’ˆ" << 
·»Á
 << ".");

3674 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 + 
shiánum
 < 
šÃr¦Ùmax
);

3676 ià(
	g£lfv”ify
)

3680 
	gËá¦Ù
 = 0;

3681 
	gËá¦Ù
 <ğ
·»Á
->
¦Ùu£
 &&…¬’t->
chdid
[
Ëá¦Ù
] !ğ
Ëá
)

3682 ++
Ëá¦Ù
;

3684 
BTREE_ASSERT
(
Ëá¦Ù
 < 
·»Á
->
¦Ùu£
);

3685 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
] =ğ
Ëá
);

3686 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
 + 1] =ğ
right
);

3688 
BTREE_ASSERT
(
Ëá¦Ù
 =ğ
·»Á¦Ù
);

3692 
	gËá
->
	g¦Ùkey
[
Ëá
->
¦Ùu£
] = 
·»Á
->
¦Ùkey
[
·»Á¦Ù
];

3693 
	gËá
->
	g¦Ùu£
++;

3697 
	g¡d
::
cİy
(
right
->
¦Ùkey
,„ight->¦Ùkey + 
shiánum
 - 1,

3698 
Ëá
->
¦Ùkey
 +†eá->
¦Ùu£
);

3699 
	g¡d
::
cİy
(
right
->
chdid
,„ight->chdid + 
shiánum
,

3700 
Ëá
->
chdid
 +†eá->
¦Ùu£
);

3702 
	gËá
->
	g¦Ùu£
 +ğ
shiánum
 - 1;

3705 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
right
->
¦Ùkey
[
shiánum
 - 1];

3709 
	g¡d
::
cİy
(
right
->
¦Ùkey
 + 
shiánum
,„ight->¦Ùkey +„ight->
¦Ùu£
,

3710 
right
->
¦Ùkey
);

3711 
	g¡d
::
cİy
(
right
->
chdid
 + 
shiánum
,„ight->chdid +„ight->
¦Ùu£
 + 1,

3712 
right
->
chdid
);

3714 
	gright
->
	g¦Ùu£
 -ğ
shiánum
;

3720 
shiá_right_Ëaf
(
Ëaf_node
* 
Ëá
,†—f_node* 
right
, 
šÃr_node
* 
·»Á
, 
·»Á¦Ù
)

3722 
BTREE_ASSERT
(
Ëá
->
i¦—âode
(è&& 
right
->isleafnode());

3723 
BTREE_ASSERT
(
·»Á
->
Ëv–
 == 1);

3725 
BTREE_ASSERT
(
Ëá
->
Ãx—f
 =ğ
right
);

3726 
BTREE_ASSERT
(
Ëá
 =ğ
right
->
´evËaf
);

3727 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
Ëá
);

3729 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 > 
right
->slotuse);

3731 
	gshiánum
 = (
Ëá
->
¦Ùu£
 - 
right
->slotuse) >> 1;

3733 
BTREE_PRINT
("Shiášg (Ëafè" << 
shiánum
 << "ƒÁr› tØrighˆ" << 
right
 << " from†eá " << 
Ëá
 << " w™h commÚ…¬’ˆ" << 
·»Á
 << ".");

3735 ià(
	g£lfv”ify
)

3738 
	gËá¦Ù
 = 0;

3739 
	gËá¦Ù
 <ğ
·»Á
->
¦Ùu£
 &&…¬’t->
chdid
[
Ëá¦Ù
] !ğ
Ëá
)

3740 ++
Ëá¦Ù
;

3742 
BTREE_ASSERT
(
Ëá¦Ù
 < 
·»Á
->
¦Ùu£
);

3743 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
] =ğ
Ëá
);

3744 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
 + 1] =ğ
right
);

3746 
BTREE_ASSERT
(
Ëá¦Ù
 =ğ
·»Á¦Ù
);

3751 
BTREE_ASSERT
(
right
->
¦Ùu£
 + 
shiánum
 < 
Ëaf¦Ùmax
);

3753 
	g¡d
::
cİy_backw¬d
(
right
->
¦Ùkey
,„ight->¦Ùkey +„ight->
¦Ùu£
,

3754 
right
->
¦Ùkey
 +„ight->
¦Ùu£
 + 
shiánum
);

3755 
d©a_cİy_backw¬d
(
right
->
¦Ùd©a
,„ight->¦Ùd©¨+„ight->
¦Ùu£
,

3756 
right
->
¦Ùd©a
 +„ight->
¦Ùu£
 + 
shiánum
);

3758 
	gright
->
	g¦Ùu£
 +ğ
shiánum
;

3761 
	g¡d
::
cİy
(
Ëá
->
¦Ùkey
 +†eá->
¦Ùu£
 - 
shiánum
,†eft->slotkey +†eft->slotuse,

3762 
right
->
¦Ùkey
);

3763 
d©a_cİy
(
Ëá
->
¦Ùd©a
 +†eá->
¦Ùu£
 - 
shiánum
,†eft->slotdata +†eft->slotuse,

3764 
right
->
¦Ùd©a
);

3766 
	gËá
->
	g¦Ùu£
 -ğ
shiánum
;

3768 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
Ëá
->
¦Ùkey
[Ëá->
¦Ùu£
 - 1];

3774 
shiá_right_šÃr
(
šÃr_node
* 
Ëá
, iÂ”_node* 
right
, iÂ”_node* 
·»Á
, 
·»Á¦Ù
)

3776 
BTREE_ASSERT
(
Ëá
->
Ëv–
 =ğ
right
->level);

3777 
BTREE_ASSERT
(
·»Á
->
Ëv–
 =ğ
Ëá
->level + 1);

3779 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 > 
right
->slotuse);

3780 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
Ëá
);

3782 
	gshiánum
 = (
Ëá
->
¦Ùu£
 - 
right
->slotuse) >> 1;

3784 
BTREE_PRINT
("Shiášg (Ëafè" << 
shiánum
 << "ƒÁr› tØrighˆ" << 
right
 << " from†eá " << 
Ëá
 << " w™h commÚ…¬’ˆ" << 
·»Á
 << ".");

3786 ià(
	g£lfv”ify
)

3789 
	gËá¦Ù
 = 0;

3790 
	gËá¦Ù
 <ğ
·»Á
->
¦Ùu£
 &&…¬’t->
chdid
[
Ëá¦Ù
] !ğ
Ëá
)

3791 ++
Ëá¦Ù
;

3793 
BTREE_ASSERT
(
Ëá¦Ù
 < 
·»Á
->
¦Ùu£
);

3794 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
] =ğ
Ëá
);

3795 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
 + 1] =ğ
right
);

3797 
BTREE_ASSERT
(
Ëá¦Ù
 =ğ
·»Á¦Ù
);

3802 
BTREE_ASSERT
(
right
->
¦Ùu£
 + 
shiánum
 < 
šÃr¦Ùmax
);

3804 
	g¡d
::
cİy_backw¬d
(
right
->
¦Ùkey
,„ight->¦Ùkey +„ight->
¦Ùu£
,

3805 
right
->
¦Ùkey
 +„ight->
¦Ùu£
 + 
shiánum
);

3806 
	g¡d
::
cİy_backw¬d
(
right
->
chdid
,„ight->chdid +„ight->
¦Ùu£
 + 1,

3807 
right
->
chdid
 +„ight->
¦Ùu£
 + 1 + 
shiánum
);

3809 
	gright
->
	g¦Ùu£
 +ğ
shiánum
;

3812 
	gright
->
	g¦Ùkey
[
shiánum
 - 1] = 
·»Á
->
¦Ùkey
[
·»Á¦Ù
];

3815 
	g¡d
::
cİy
(
Ëá
->
¦Ùkey
 +†eá->
¦Ùu£
 - 
shiánum
 + 1,†eft->slotkey +†eft->slotuse,

3816 
right
->
¦Ùkey
);

3817 
	g¡d
::
cİy
(
Ëá
->
chdid
 +†eá->
¦Ùu£
 - 
shiánum
 + 1,†eft->childid +†eft->slotuse + 1,

3818 
right
->
chdid
);

3821 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
Ëá
->
¦Ùkey
[Ëá->
¦Ùu£
 - 
shiánum
];

3823 
	gËá
->
	g¦Ùu£
 -ğ
shiánum
;

3826 #ifdeà
BTREE_DEBUG


3828 
	gpublic
:

3834 
´št
(
¡d
::
o¡»am
& 
os
) const

3836 ià(
m_roÙ
) {

3837 
´št_node
(
os
, 
m_roÙ
, 0, 
Œue
);

3842 
´št_Ëaves
(
¡d
::
o¡»am
& 
os
) const

3844 
os
 << "Ëaves:" << 
¡d
::
’dl
;

3846 cÚ¡ 
Ëaf_node
* 
	gn
 = 
m_h—dËaf
;

3848 
	gn
)

3850 
	gos
 << " " << 
	gn
 << 
	g¡d
::
’dl
;

3852 
	gn
 = 
n
->
Ãx—f
;

3856 
	g´iv©e
:

3858 
´št_node
(
¡d
::
o¡»am
& 
os
, cÚ¡ 
node
*‚ode, 
d•th
 = 0, 
boŞ
 
»cursive
 = 
çl£
)

3860 
i
 = 0; 
	gi
 < 
	gd•th
; i++è
	gos
 << " ";

3862 
	gos
 << "nod" << 
	gnode
 << "†ev– " <<‚ode->
	gËv–
 << " slÙu£ " <<‚ode->
	g¦Ùu£
 << 
	g¡d
::
’dl
;

3864 ià(
	gnode
->
i¦—âode
())

3866 cÚ¡ 
Ëaf_node
* 
	gËaâode
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
node
);

3868 
	gi
 = 0; i < 
	gd•th
; i++è
	gos
 << " ";

3869 
	gos
 << "†—à´ev " << 
	gËaâode
->
	g´evËaf
 << "‚exˆ" <<†—âode->
	gÃx—f
 << 
	g¡d
::
’dl
;

3871 
	gi
 = 0; i < 
	gd•th
; i++è
	gos
 << " ";

3873 
	g¦Ù
 = 0; slÙ < 
	gËaâode
->
	g¦Ùu£
; ++slot)

3875 
	gos
 << 
	gËaâode
->
	g¦Ùkey
[
¦Ù
] << " ";

3877 
	gos
 << 
	g¡d
::
’dl
;

3881 cÚ¡ 
šÃr_node
* 
	gšÃºode
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
node
);

3883 
	gi
 = 0; i < 
	gd•th
; i++è
	gos
 << " ";

3885 
	g¦Ù
 = 0; slÙ < 
	gšÃºode
->
	g¦Ùu£
; ++slot)

3887 
	gos
 << "(" << 
	gšÃºode
->
	gchdid
[
¦Ù
] << "è" << iÂ”node->
	g¦Ùkey
[slot] << " ";

3889 
	gos
 << "(" << 
	gšÃºode
->
	gchdid
[
šÃºode
->
¦Ùu£
] << ")" << 
	g¡d
::
’dl
;

3891 ià(
	g»cursive
)

3893 
	g¦Ù
 = 0; slÙ < 
	gšÃºode
->
	g¦Ùu£
 + 1; ++slot)

3895 
´št_node
(
os
, 
šÃºode
->
chdid
[
¦Ù
], 
d•th
 + 1, 
»cursive
);

3902 
	gpublic
:

3907 
v”ify
() const

3909 
key_ty³
 
mškey
, 
	gmaxkey
;

3910 
Œ“_¡©s
 
	gv¡©s
;

3912 ià(
	gm_roÙ
)

3914 
v”ify_node
(
m_roÙ
, &
mškey
, &
maxkey
, 
v¡©s
);

3916 
as£¹
(
v¡©s
.
™emcouÁ
 =ğ
m_¡©s
.itemcount);

3917 
as£¹
(
v¡©s
.
Ëaves
 =ğ
m_¡©s
.leaves);

3918 
as£¹
(
v¡©s
.
šÃºodes
 =ğ
m_¡©s
.innernodes);

3920 
v”ify_Ëaæšks
();

3924 
	g´iv©e
:

3926 
v”ify_node
(cÚ¡ 
node
* 
n
, 
key_ty³
* 
mškey
, key_ty³* 
maxkey
, 
Œ“_¡©s
& 
v¡©s
) const

3928 
BTREE_PRINT
("v”ifynod" << 
n
);

3930 ià(
	gn
->
i¦—âode
())

3932 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

3934 
as£¹
(
Ëaf
 =ğ
m_roÙ
 || !Ëaf->
isund”æow
());

3935 
as£¹
(
Ëaf
->
¦Ùu£
 > 0);

3937 
	g¦Ù
 = 0; slÙ < 
	gËaf
->
	g¦Ùu£
 - 1; ++slot)

3939 
as£¹
(
key_Ës£qu®
(
Ëaf
->
¦Ùkey
[
¦Ù
],†eaf->slotkey[slot + 1]));

3942 *
	gmškey
 = 
Ëaf
->
¦Ùkey
[0];

3943 *
	gmaxkey
 = 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1];

3945 
	gv¡©s
.
	gËaves
++;

3946 
	gv¡©s
.
	g™emcouÁ
 +ğ
Ëaf
->
¦Ùu£
;

3950 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

3951 
	gv¡©s
.
	gšÃºodes
++;

3953 
as£¹
(
šÃr
 =ğ
m_roÙ
 || !šÃr->
isund”æow
());

3954 
as£¹
(
šÃr
->
¦Ùu£
 > 0);

3956 
	g¦Ù
 = 0; slÙ < 
	gšÃr
->
	g¦Ùu£
 - 1; ++slot)

3958 
as£¹
(
key_Ës£qu®
(
šÃr
->
¦Ùkey
[
¦Ù
], inner->slotkey[slot + 1]));

3961 
	g¦Ù
 = 0; slÙ <ğ
šÃr
->
¦Ùu£
; ++slot)

3963 cÚ¡ 
node
* 
	gsubnode
 = 
šÃr
->
chdid
[
¦Ù
];

3964 
key_ty³
 
	gsubmškey
 = key_type();

3965 
key_ty³
 
	gsubmaxkey
 = key_type();

3967 
as£¹
(
subnode
->
Ëv–
 + 1 =ğ
šÃr
->level);

3968 
v”ify_node
(
subnode
, &
submškey
, &
submaxkey
, 
v¡©s
);

3970 
BTREE_PRINT
("v”ify subnod" << 
subnode
 << ": " << 
submškey
 << " - " << 
submaxkey
);

3972 ià(
	g¦Ù
 == 0)

3973 *
mškey
 = 
submškey
;

3975 
as£¹
(
key_g»©”equ®
(
submškey
, 
šÃr
->
¦Ùkey
[
¦Ù
 - 1]));

3977 ià(
	g¦Ù
 =ğ
šÃr
->
¦Ùu£
)

3978 *
maxkey
 = 
submaxkey
;

3980 
as£¹
(
key_equ®
(
šÃr
->
¦Ùkey
[
¦Ù
], 
submaxkey
));

3982 ià(
	gšÃr
->
	gËv–
 =ğ1 && 
¦Ù
 < 
šÃr
->
¦Ùu£
)

3986 cÚ¡ 
Ëaf_node
* 
Ëaç
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
šÃr
->
chdid
[
¦Ù
]);

3987 cÚ¡ 
Ëaf_node
* 
	gËafb
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
šÃr
->
chdid
[
¦Ù
 + 1]);

3989 
as£¹
(
Ëaç
->
Ãx—f
 =ğ
Ëafb
);

3990 
as£¹
(
Ëaç
 =ğ
Ëafb
->
´evËaf
);

3991 ()
	gËaç
;

3992 ()
	gËafb
;

3994 ià(
	gšÃr
->
	gËv–
 =ğ2 && 
¦Ù
 < 
šÃr
->
¦Ùu£
)

3997 cÚ¡ 
šÃr_node
* 
·»Áa
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
šÃr
->
chdid
[
¦Ù
]);

3998 cÚ¡ 
šÃr_node
* 
	g·»Áb
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
šÃr
->
chdid
[
¦Ù
 + 1]);

4000 cÚ¡ 
Ëaf_node
* 
	gËaç
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
·»Áa
->
chdid
[·»Áa->
¦Ùu£
]);

4001 cÚ¡ 
Ëaf_node
* 
	gËafb
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
·»Áb
->
chdid
[0]);

4003 
as£¹
(
Ëaç
->
Ãx—f
 =ğ
Ëafb
);

4004 
as£¹
(
Ëaç
 =ğ
Ëafb
->
´evËaf
);

4005 ()
	gËaç
;

4006 ()
	gËafb
;

4013 
v”ify_Ëaæšks
() const

4015 cÚ¡ 
Ëaf_node
* 
	gn
 = 
m_h—dËaf
;

4017 
as£¹
(
n
->
Ëv–
 == 0);

4018 
as£¹
(!
n
 ||‚->
´evËaf
 =ğ
NULL
);

4020 
	g‹¡couÁ
 = 0;

4022 
	gn
)

4024 
as£¹
(
n
->
Ëv–
 == 0);

4025 
as£¹
(
n
->
¦Ùu£
 > 0);

4027 
	g¦Ù
 = 0; slÙ < 
	gn
->
	g¦Ùu£
 - 1; ++slot)

4029 
as£¹
(
key_Ës£qu®
(
n
->
¦Ùkey
[
¦Ù
],‚->slotkey[slot + 1]));

4032 
	g‹¡couÁ
 +ğ
n
->
¦Ùu£
;

4034 ià(
	gn
->
	gÃx—f
)

4036 
as£¹
(
key_Ës£qu®
(
n
->
¦Ùkey
[n->
¦Ùu£
 - 1],‚->
Ãx—f
->slotkey[0]));

4038 
as£¹
(
n
 =ğn->
Ãx—f
->
´evËaf
);

4042 
as£¹
(
m_Ëaf
 =ğ
n
);

4045 
	gn
 = 
n
->
Ãx—f
;

4048 
as£¹
(
‹¡couÁ
 =ğ
size
());

4051 
	g´iv©e
:

4057 
	sdump_h—d”


4060 
sigÇtu»
[12];

4063 
	gv”siÚ
;

4066 
	gkey_ty³_size
;

4069 
	gd©a_ty³_size
;

4072 
	gËaf¦Ùs
;

4075 
	gšÃr¦Ùs
;

4078 
boŞ
 
	g®low_du¶iÿ‹s
;

4081 
size_ty³
 
	g™emcouÁ
;

4085 
šlše
 
fl
()

4088 
	gsigÇtu»
[0] = 's';

4089 
	gsigÇtu»
[1] = 't';

4090 
	gsigÇtu»
[2] = 'x';

4091 
	gsigÇtu»
[3] = '-';

4092 
	gsigÇtu»
[4] = 'b';

4093 
	gsigÇtu»
[5] = 't';

4094 
	gsigÇtu»
[6] = 'r';

4095 
	gsigÇtu»
[7] = 'e';

4096 
	gsigÇtu»
[8] = 'e';

4097 
	gsigÇtu»
[9] = 0;

4098 
	gsigÇtu»
[10] = 0;

4099 
	gsigÇtu»
[11] = 0;

4101 
	gv”siÚ
 = 0;

4102 
	gkey_ty³_size
 = (
ty³Çme
 
£lf_ty³
::
key_ty³
);

4103 
	gd©a_ty³_size
 = (
ty³Çme
 
£lf_ty³
::
d©a_ty³
);

4104 
	gËaf¦Ùs
 = 
£lf_ty³
::
Ëaf¦Ùmax
;

4105 
	gšÃr¦Ùs
 = 
£lf_ty³
::
šÃr¦Ùmax
;

4106 
	g®low_du¶iÿ‹s
 = 
£lf_ty³
::
®low_du¶iÿ‹s
;

4110 
šlše
 
boŞ
 
§me
(cÚ¡ 
dump_h—d”
& 
o
) const

4112  (
	gsigÇtu»
[0] =ğ's' && 
sigÇtu»
[1] == 't' &&

4113 
sigÇtu»
[2] == 'x' && signature[3] == '-' &&

4114 
sigÇtu»
[4] == 'b' && signature[5] == 't' &&

4115 
sigÇtu»
[6] == 'r' && signature[7] == 'e' &&

4116 
sigÇtu»
[8] == 'e' && signature[9] == 0 &&

4117 
sigÇtu»
[10] == 0 && signature[11] == 0)

4118 && (
v”siÚ
 =ğ
o
.version)

4119 && (
key_ty³_size
 =ğ
o
.key_type_size)

4120 && (
d©a_ty³_size
 =ğ
o
.data_type_size)

4121 && (
Ëaf¦Ùs
 =ğ
o
.leafslots)

4122 && (
šÃr¦Ùs
 =ğ
o
.innerslots)

4123 && (
®low_du¶iÿ‹s
 =ğ
o
.allow_duplicates);

4127 
	gpublic
:

4132 
dump
(
¡d
::
o¡»am
& 
os
) const

4134 
dump_h—d”
 
h—d”
;

4135 
	gh—d”
.
fl
();

4136 
	gh—d”
.
	g™emcouÁ
 = 
size
();

4138 
	gos
.
wr™e
(
»š‹½»t_ÿ¡
<*>(&
h—d”
), (header));

4140 ià(
	gm_roÙ
) {

4141 
dump_node
(
os
, 
m_roÙ
);

4149 
boŞ
 
»¡Üe
(
¡d
::
i¡»am
& 
is
)

4151 
dump_h—d”
 
feh—d”
;

4152 
	gis
.
»ad
(
»š‹½»t_ÿ¡
<*>(&
feh—d”
), (fileheader));

4153 ià(!
	gis
.
good
()è 
	gçl£
;

4155 
dump_h—d”
 
	gmyh—d”
;

4156 
	gmyh—d”
.
fl
();

4157 
	gmyh—d”
.
	g™emcouÁ
 = 
feh—d”
.
™emcouÁ
;

4159 ià(!
	gmyh—d”
.
§me
(
feh—d”
))

4161 
BTREE_PRINT
("btree::restore: file header does‚ot match instantiation signature.");

4162  
	gçl£
;

4165 
ş—r
();

4167 ià(
	gfeh—d”
.
	g™emcouÁ
 > 0)

4169 
	gm_roÙ
 = 
»¡Üe_node
(
is
);

4170 ià(
	gm_roÙ
 =ğ
NULL
è 
çl£
;

4172 
	gm_¡©s
.
	g™emcouÁ
 = 
feh—d”
.
™emcouÁ
;

4175 #ifdeà
BTREE_DEBUG


4176 ià(
	gdebug
è
´št
(
¡d
::
cout
);

4178 ià(
	g£lfv”ify
è
v”ify
();

4180  
	gŒue
;

4183 
	g´iv©e
:

4185 
dump_node
(
¡d
::
o¡»am
& 
os
, cÚ¡ 
node
* 
n
) const

4187 
BTREE_PRINT
("dump_nod" << 
n
 << 
¡d
::
’dl
);

4189 ià(
	gn
->
i¦—âode
())

4191 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

4193 
	gos
.
wr™e
(
»š‹½»t_ÿ¡
<cÚ¡ *>(
Ëaf
), (*leaf));

4197 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

4199 
	gos
.
wr™e
(
»š‹½»t_ÿ¡
<cÚ¡ *>(
šÃr
), (*inner));

4201 
	g¦Ù
 = 0; slÙ <ğ
šÃr
->
¦Ùu£
; ++slot)

4203 cÚ¡ 
node
* 
	gsubnode
 = 
šÃr
->
chdid
[
¦Ù
];

4205 
dump_node
(
os
, 
subnode
);

4212 
node
 * 
»¡Üe_node
(
¡d
::
i¡»am
& 
is
)

4214 
node
 
tİ
(0);

4217 
	gis
.
»ad
(
»š‹½»t_ÿ¡
<*>(&
tİ
), (top));

4218 ià(!
	gis
.
good
()è 
	gNULL
;

4220 ià(
	gtİ
.
i¦—âode
())

4222 
Ëaf_node
 
Ëaf
(
tİ
);

4225 
	gis
.
»ad
(
»š‹½»t_ÿ¡
<*>(&
Ëaf
è+ (
tİ
), (leaf) - (top));

4226 ià(!
	gis
.
good
()è 
	gNULL
;

4228 
Ëaf_node
* 
	gÃwËaf
 = 
®loÿ‹_Ëaf
();

4231 *
	gÃwËaf
 = 
Ëaf
;

4234 ià(
	gm_h—dËaf
 =ğ
NULL
) {

4235 
BTREE_ASSERT
(
ÃwËaf
->
´evËaf
 =ğ
NULL
);

4236 
	gm_h—dËaf
 = 
m_Ëaf
 = 
ÃwËaf
;

4239 
	gÃwËaf
->
	g´evËaf
 = 
m_Ëaf
;

4240 
	gm_Ëaf
->
	gÃx—f
 = 
ÃwËaf
;

4241 
	gm_Ëaf
 = 
ÃwËaf
;

4244  
	gÃwËaf
;

4248 
šÃr_node
 
šÃr
(
tİ
);

4251 
	gis
.
»ad
(
»š‹½»t_ÿ¡
<*>(&
šÃr
è+ (
tİ
), (inner) - (top));

4252 ià(!
	gis
.
good
()è 
	gNULL
;

4254 
šÃr_node
* 
	gÃwšÃr
 = 
®loÿ‹_šÃr
(0);

4257 *
	gÃwšÃr
 = 
šÃr
;

4259 
	g¦Ù
 = 0; slÙ <ğ
ÃwšÃr
->
¦Ùu£
; ++slot)

4261 
	gÃwšÃr
->
	gchdid
[
¦Ù
] = 
»¡Üe_node
(
is
);

4264  
	gÃwšÃr
;

	@btree_bitmap.h

32 #iâdeà
STX_STX_BTREE_H_HEADER


33 
	#STX_STX_BTREE_H_HEADER


	)

42 
	~<c¡ršg
>

43 
	~<®gÜ™hm
>

44 
	~<funùiÚ®
>

45 
	~<i¡»am
>

46 
	~<o¡»am
>

47 
	~<memÜy
>

48 
	~<c¡ddef
>

49 
	~<ÿs£¹
>

50 
	~<b™£t
>

51 
	~"nv_back’d.h
"

52 
	~"b™m­.h
"

54 
	#NVRAM_LEN
 4 * 1024 * 1024 * 1024

55 

	)

59 #ifdeà
BTREE_DEBUG


61 
	~<io¡»am
>

64 
	#BTREE_PRINT
(
x
èdØ{ ià(
debug
è(
¡d
::
cout
 << x << std::
’dl
); } 0)

	)

67 
	#BTREE_ASSERT
(
x
èdØ{ 
	`as£¹
(x); } 0)

	)

72 
	#BTREE_PRINT
(
x
èdØ{ } 0)

	)

75 
	#BTREE_ASSERT
(
x
èdØ{ } 0)

	)

80 
	#BTREE_MAX
(
a
, 
b
è(×è< (bè? (bè: (a))

	)

82 #iâdeà
BTREE_FRIENDS


86 
	#BTREE_FRIENDS
 
ä›nd
 
şass
 
bŒ“_ä›nd
;

	)

90 
Çme¥aû
 
	g¡x
 {

94 
	g‹m¶©e
 <
ty³Çme
 
	g_Key
>

95 şas 
	cbŒ“_deçuÉ_£t_Œa™s


97 
	gpublic
:

100 cÚ¡ 
boŞ
 
£lfv”ify
 = 
çl£
;

106 cÚ¡ 
boŞ
 
	gdebug
 = 
çl£
;

110 cÚ¡ 
	gËaf¦Ùs
 = 
BTREE_MAX
(8, 256 / ((
_Key
)));

114 cÚ¡ 
	gšÃr¦Ùs
 = 
BTREE_MAX
(8, 256 / ((
_Key
) + (*)));

120 cÚ¡ 
size_t
 
	gbš£¬ch_th»shŞd
 = 256;

125 
	g‹m¶©e
 <
ty³Çme
 
	g_Key
,y³Çm
	g_D©a
>

126 şas 
	cbŒ“_deçuÉ_m­_Œa™s


128 
	gpublic
:

131 cÚ¡ 
boŞ
 
£lfv”ify
 = 
çl£
;

137 cÚ¡ 
boŞ
 
	gdebug
 = 
çl£
;

141 cÚ¡ 
	gËaf¦Ùs
 = 
BTREE_MAX
(8, 256 / ((
_Key
è+ (
_D©a
)));

145 cÚ¡ 
	gšÃr¦Ùs
 = 
BTREE_MAX
(8, 256 / ((
_Key
) + (*)));

151 cÚ¡ 
size_t
 
	gbš£¬ch_th»shŞd
 = 256;

167 
	g‹m¶©e
 <
ty³Çme
 
	g_Key
,y³Çm
	g_D©a
,

168 
ty³Çme
 
	g_V®ue
 = 
¡d
::
·œ
<
_Key
, 
	g_D©a
>,

169 
ty³Çme
 
	g_Com·»
 = 
¡d
::
Ëss
<
_Key
>,

170 
ty³Çme
 
	g_T¿™s
 = 
bŒ“_deçuÉ_m­_Œa™s
<
_Key
, 
	g_D©a
>,

171 
boŞ
 
	g_Du¶iÿ‹s
 = 
çl£
,

172 
ty³Çme
 
	g_AÎoc
 = 
¡d
::
®loÿtÜ
<
_V®ue
>,

173 
boŞ
 
	g_U£dAsS‘
 = 
çl£
>

174 şas 
	cbŒ“


176 
public
:

181 
_Key
 
	tkey_ty³
;

185 
_D©a
 
	td©a_ty³
;

191 
_V®ue
 
	tv®ue_ty³
;

194 
_Com·»
 
	tkey_com·»
;

198 
_T¿™s
 
	tŒa™s
;

202 cÚ¡ 
boŞ
 
	g®low_du¶iÿ‹s
 = 
_Du¶iÿ‹s
;

205 
_AÎoc
 
	t®loÿtÜ_ty³
;

212 cÚ¡ 
boŞ
 
	gu£d_as_£t
 = 
_U£dAsS‘
;

217 
BTREE_FRIENDS


219 
	gpublic
:

223 
bŒ“
<
	tkey_ty³
, 
	td©a_ty³
, 
	tv®ue_ty³
, 
	tkey_com·»
,

224 
	tŒa™s
, 
	t®low_du¶iÿ‹s
, 
	t®loÿtÜ_ty³
, 
	tu£d_as_£t
> 
	t£lf_ty³
;

227 
size_t
 
	tsize_ty³
;

231 
	g¡d
::
	t·œ
<
	tkey_ty³
, 
	td©a_ty³
> 
	t·œ_ty³
;

233 
	gpublic
:

237 cÚ¡ 
Ëaf¦Ùmax
 = 
Œa™s
::
Ëaf¦Ùs
;

241 cÚ¡ 
	gšÃr¦Ùmax
 = 
Œa™s
::
šÃr¦Ùs
;

246 cÚ¡ 
	gmšËaf¦Ùs
 = (
Ëaf¦Ùmax
 / 2);

251 cÚ¡ 
	gmššÃr¦Ùs
 = (
šÃr¦Ùmax
 / 2);

255 cÚ¡ 
boŞ
 
	g£lfv”ify
 = 
Œa™s
::
£lfv”ify
;

260 cÚ¡ 
boŞ
 
	gdebug
 = 
Œa™s
::
debug
;

262 
	g´iv©e
:

267 
	snode


270 
Ëv–
;

274 
	g¦Ùu£
;

277 
šlše
 
node
(cÚ¡ 
l
, cÚ¡ 
s
 = 0)

278 : 
Ëv–
(
l
), 
¦Ùu£
(
s
)

282 
šlše
 
boŞ
 
i¦—âode
() const

284  (
	gËv–
 == 0);

290 
	gšÃr_node
 : 
public
 
node


293 
ty³Çme
 
	t_AÎoc
::
	t‹m¶©e
 
	t»bšd
<
	tšÃr_node
>::
	tÙh”
 
	t®loc_ty³
;

296 
key_ty³
 
	g¦Ùkey
[
šÃr¦Ùmax
];

299 
node
 * 
	gchdid
[
šÃr¦Ùmax
 + 1];

302 
šlše
 
šÃr_node
(cÚ¡ 
l
)

303 : 
node
(
l
)

307 
šlše
 
šÃr_node
(cÚ¡ 
node
& 
tİ
)

308 : 
node
(
tİ
.
Ëv–
,İ.
¦Ùu£
)

312 
šlše
 
boŞ
 
isfuÎ
() const

314  (
	gnode
::
¦Ùu£
 =ğ
šÃr¦Ùmax
);

318 
šlše
 
boŞ
 
isãw
() const

320  (
	gnode
::
¦Ùu£
 <ğ
mššÃr¦Ùs
);

324 
šlše
 
boŞ
 
isund”æow
() const

326  (
	gnode
::
¦Ùu£
 < 
mššÃr¦Ùs
);

333 
	gËaf_node
 : 
public
 
node


336 
ty³Çme
 
	t_AÎoc
::
	t‹m¶©e
 
	t»bšd
<
	tËaf_node
>::
	tÙh”
 
	t®loc_ty³
;

339 
Ëaf_node
 * 
	g´evËaf
;

342 
Ëaf_node
 * 
	gÃx—f
;

345 
key_ty³
 
	g¦Ùkey
[
Ëaf¦Ùmax
];

348 
d©a_ty³
 
	g¦Ùd©a
[
u£d_as_£t
 ? 1 : 
Ëaf¦Ùmax
];

351 
	gbs
[
BITS_TO_LONGS
(
Ëaf¦Ùmax
)];

355 
šlše
 
Ëaf_node
()

356 : 
node
(0), 
´evËaf
(
NULL
), 
Ãx—f
(NULL)

362 
šlše
 
Ëaf_node
(cÚ¡ 
node
& 
tİ
)

363 : 
node
(
tİ
.
Ëv–
,İ.
¦Ùu£
), 
´evËaf
(
NULL
), 
Ãx—f
(NULL)

365 
»£t
()

367 
mem£t
(
bs
, 0x0, 
BITS_TO_LONGS
(
Ëaf¦Ùmax
) * ());

370 
šlše
 
couÁ
()

372  
hweight_lÚg
(*
bs
);

376 
šlše
 
boŞ
 
isfuÎ
() const

379  (
	gnode
::
¦Ùu£
 =ğ
Ëaf¦Ùmax
);

381  (
couÁ
(è=ğ
Ëaf¦Ùmax
)? 
Œue
: 
çl£
;

385 
šlše
 
boŞ
 
isãw
() const

388  (
	gnode
::
¦Ùu£
 <ğ
mšËaf¦Ùs
);

390  (
couÁ
(è<ğ
Ëaf¦Ùmax
)? 
Œue
: 
çl£
;

394 
šlše
 
boŞ
 
isund”æow
() const

397  (
	gnode
::
¦Ùu£
 < 
mšËaf¦Ùs
);

399  (
couÁ
(è< 
	gmšËaf¦Ùs
)? 
	gŒue
: 
çl£
;

403 
b™m­_£t
(
šdex
)

405 
__£t_b™
(
šdex
, 
bs
);

409 
b™m­_g‘
(
šdex
)

411  
cÚ¡_‹¡_b™
(
šdex
, 
bs
);

415 
b™m­_ş—r
(
šdex
)

417 
__ş—r_b™
(
šdex
, 
bs
);

421 
g‘_fœ¡_£t_b™
()

423  
__ffs
(*
bs
);

427 
g‘_Ï¡_£t_b™
()

429  
__æs
(*
bs
);

434 
g‘_fœ¡_ä“_b™
()

436  
__ffz
(*
bs
);

441 
šlše
 
£t_¦Ù
(
¦Ù
, cÚ¡ 
·œ_ty³
& 
v®ue
)

443 
BTREE_ASSERT
(
u£d_as_£t
 =ğ
çl£
);

444 
BTREE_ASSERT
(
¦Ù
 < 
node
::
¦Ùu£
);

445 
	g¦Ùkey
[
¦Ù
] = 
v®ue
.
fœ¡
;

446 
	g¦Ùd©a
[
¦Ù
] = 
v®ue
.
£cÚd
;

451 
šlše
 
£t_¦Ù
(
¦Ù
, cÚ¡ 
key_ty³
& 
key
)

453 
BTREE_ASSERT
(
u£d_as_£t
 =ğ
Œue
);

454 
BTREE_ASSERT
(
¦Ù
 < 
node
::
¦Ùu£
);

455 
	g¦Ùkey
[
¦Ù
] = 
key
;

459 
	g´iv©e
:

464 
‹m¶©e
 <
ty³Çme
 
v®ue_ty³
,y³Çm
	g·œ_ty³
>

465 
	sbŒ“_·œ_to_v®ue


468 
šlše
 
v®ue_ty³
 
İ”©Ü
 (è(
	g·œ_ty³
& 
	gp
) const

470  
	gp
.
	gfœ¡
;

473 
šlše
 
v®ue_ty³
 
İ”©Ü
 (è(cÚ¡ 
	g·œ_ty³
& 
	gp
) const

475  
	gp
.
	gfœ¡
;

480 
	g‹m¶©e
 <
ty³Çme
 
	gv®ue_ty³
>

481 
	gbŒ“_·œ_to_v®ue
<
	gv®ue_ty³
, value_type>

484 
šlše
 
v®ue_ty³
 
İ”©Ü
 (è(
	g·œ_ty³
& 
	gp
) const

486  
	gp
;

489 
šlše
 
v®ue_ty³
 
İ”©Ü
 (è(cÚ¡ 
	g·œ_ty³
& 
	gp
) const

491  
	gp
;

497 
	gbŒ“_·œ_to_v®ue
<
	tv®ue_ty³
, 
	t·œ_ty³
> 
	t·œ_to_v®ue_ty³
;

499 
	gpublic
:

502 
şass
 
™”©Ü
;

503 
şass
 
	gcÚ¡_™”©Ü
;

504 
şass
 
	g»v”£_™”©Ü
;

505 
şass
 
	gcÚ¡_»v”£_™”©Ü
;

509 şas 
	c™”©Ü


511 
	gpublic
:

515 
ty³Çme
 
	tbŒ“
::
	tkey_ty³
 key_type;

518 
ty³Çme
 
	tbŒ“
::
	td©a_ty³
 data_type;

521 
ty³Çme
 
	tbŒ“
::
	tv®ue_ty³
 value_type;

524 
ty³Çme
 
	tbŒ“
::
	t·œ_ty³
…air_type;

527 
	gv®ue_ty³
& 
	t»ã»nû
;

530 
v®ue_ty³
* 
	tpoš‹r
;

533 
	g¡d
::
	tbidœeùiÚ®_™”©Ü_g
 
	t™”©Ü_ÿ‹gÜy
;

536 
±rdiff_t
 
	tdifã»nû_ty³
;

538 
	g´iv©e
:

542 
ty³Çme
 
bŒ“
::
Ëaf_node
 * 
cu¼node
;

545 
	gcu¼¦Ù
;

549 
ä›nd
 
şass
 
	gcÚ¡_™”©Ü
;

553 
ä›nd
 
şass
 
	g»v”£_™”©Ü
;

557 
ä›nd
 
şass
 
	gcÚ¡_»v”£_™”©Ü
;

561 
ä›nd
 
şass
 
	gbŒ“
<
	gkey_ty³
, 
	gd©a_ty³
, 
	gv®ue_ty³
, 
	gkey_com·»
,

562 
	gŒa™s
, 
	g®low_du¶iÿ‹s
, 
	g®loÿtÜ_ty³
, 
	gu£d_as_£t
>;

566 
mubË
 
v®ue_ty³
 
	g‹mp_v®ue
;

571 
BTREE_FRIENDS


573 
	gpublic
:

577 
šlše
 
™”©Ü
()

578 : 
cu¼node
(
NULL
), 
cu¼¦Ù
(0)

582 
šlše
 
™”©Ü
(
ty³Çme
 
bŒ“
::
Ëaf_node
* 
l
, 
s
)

583 : 
cu¼node
(
l
), 
cu¼¦Ù
(
s
)

587 
šlše
 
™”©Ü
(cÚ¡ 
»v”£_™”©Ü
& 
™
)

588 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

593 
šlše
 
»ã»nû
 
	gİ”©Ü
 * () const

595 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

596  
	g‹mp_v®ue
;

602 
šlše
 
poš‹r
 
	gİ”©Ü
 -> () const

604 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

605  &
	g‹mp_v®ue
;

609 
šlše
 cÚ¡ 
	gkey_ty³
 & 
key
() const

611  
	gcu¼node
->
	g¦Ùkey
[
cu¼¦Ù
];

615 
šlše
 
	gd©a_ty³
 & 
d©a
() const

617  
	gcu¼node
->
	g¦Ùd©a
[
u£d_as_£t
 ? 0 : 
cu¼¦Ù
];

621 
šlše
 
	g™”©Ü
& 
	gİ”©Ü
 ++ ()

623 ià(
	gcu¼¦Ù
 + 1 < 
	gcu¼node
->
	g¦Ùu£
) {

624 ++
	gcu¼¦Ù
;

626 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

627 
cu¼node
 = cu¼node->
Ãx—f
;

628 
	gcu¼¦Ù
 = 0;

632 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

635  *
	gthis
;

639 
šlše
 
™”©Ü
 
	gİ”©Ü
 ++ ()

641 
™”©Ü
 
	gtmp
 = *
this
;

643 ià(
	gcu¼¦Ù
 + 1 < 
	gcu¼node
->
	g¦Ùu£
) {

644 ++
	gcu¼¦Ù
;

646 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

647 
cu¼node
 = cu¼node->
Ãx—f
;

648 
	gcu¼¦Ù
 = 0;

652 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

655  
	gtmp
;

659 
šlše
 
	g™”©Ü
& 
	gİ”©Ü
 -- ()

661 ià(
	gcu¼¦Ù
 > 0) {

662 --
	gcu¼¦Ù
;

664 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

665 
cu¼node
 = cu¼node->
´evËaf
;

666 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
 - 1;

670 
	gcu¼¦Ù
 = 0;

673  *
	gthis
;

677 
šlše
 
™”©Ü
 
	gİ”©Ü
 -- ()

679 
™”©Ü
 
	gtmp
 = *
this
;

681 ià(
	gcu¼¦Ù
 > 0) {

682 --
	gcu¼¦Ù
;

684 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

685 
cu¼node
 = cu¼node->
´evËaf
;

686 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
 - 1;

690 
	gcu¼¦Ù
 = 0;

693  
	gtmp
;

697 
šlše
 
boŞ
 
	gİ”©Ü
 =ğ(cÚ¡ 
™”©Ü
& 
x
) const

699  (
x
.
cu¼node
 =ğcu¼nodeè&& (x.
cu¼¦Ù
 == currslot);

703 
šlše
 
boŞ
 
	gİ”©Ü
 !ğ(cÚ¡ 
™”©Ü
& 
x
) const

705  (
x
.
cu¼node
 !ğcu¼nodeè|| (x.
cu¼¦Ù
 != currslot);

711 şas 
	ccÚ¡_™”©Ü


713 
	gpublic
:

717 
ty³Çme
 
	tbŒ“
::
	tkey_ty³
 key_type;

720 
ty³Çme
 
	tbŒ“
::
	td©a_ty³
 data_type;

723 
ty³Çme
 
	tbŒ“
::
	tv®ue_ty³
 value_type;

726 
ty³Çme
 
	tbŒ“
::
	t·œ_ty³
…air_type;

729 cÚ¡ 
	tv®ue_ty³
& 
	t»ã»nû
;

732 cÚ¡ 
	tv®ue_ty³
* 
	tpoš‹r
;

735 
	g¡d
::
	tbidœeùiÚ®_™”©Ü_g
 
	t™”©Ü_ÿ‹gÜy
;

738 
±rdiff_t
 
	tdifã»nû_ty³
;

740 
	g´iv©e
:

744 cÚ¡ 
ty³Çme
 
bŒ“
::
Ëaf_node
 * 
cu¼node
;

747 
	gcu¼¦Ù
;

751 
ä›nd
 
şass
 
	gcÚ¡_»v”£_™”©Ü
;

755 
mubË
 
v®ue_ty³
 
	g‹mp_v®ue
;

760 
BTREE_FRIENDS


762 
	gpublic
:

766 
šlše
 
cÚ¡_™”©Ü
()

767 : 
cu¼node
(
NULL
), 
cu¼¦Ù
(0)

771 
šlše
 
cÚ¡_™”©Ü
(cÚ¡ 
ty³Çme
 
bŒ“
::
Ëaf_node
* 
l
, 
s
)

772 : 
cu¼node
(
l
), 
cu¼¦Ù
(
s
)

776 
šlše
 
cÚ¡_™”©Ü
(cÚ¡ 
™”©Ü
& 
™
)

777 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

781 
šlše
 
cÚ¡_™”©Ü
(cÚ¡ 
»v”£_™”©Ü
& 
™
)

782 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

786 
šlše
 
cÚ¡_™”©Ü
(cÚ¡ 
cÚ¡_»v”£_™”©Ü
& 
™
)

787 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

793 
šlše
 
»ã»nû
 
	gİ”©Ü
 * () const

795 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

796  
	g‹mp_v®ue
;

802 
šlše
 
poš‹r
 
	gİ”©Ü
 -> () const

804 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

805  &
	g‹mp_v®ue
;

809 
šlše
 cÚ¡ 
	gkey_ty³
 & 
key
() const

811  
	gcu¼node
->
	g¦Ùkey
[
cu¼¦Ù
];

815 
šlše
 cÚ¡ 
	gd©a_ty³
 & 
d©a
() const

817  
	gcu¼node
->
	g¦Ùd©a
[
u£d_as_£t
 ? 0 : 
cu¼¦Ù
];

821 
šlše
 
	gcÚ¡_™”©Ü
& 
	gİ”©Ü
 ++ ()

823 ià(
	gcu¼¦Ù
 + 1 < 
	gcu¼node
->
	g¦Ùu£
) {

824 ++
	gcu¼¦Ù
;

826 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

827 
cu¼node
 = cu¼node->
Ãx—f
;

828 
	gcu¼¦Ù
 = 0;

832 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

835  *
	gthis
;

839 
šlše
 
cÚ¡_™”©Ü
 
	gİ”©Ü
 ++ ()

841 
cÚ¡_™”©Ü
 
	gtmp
 = *
this
;

843 ià(
	gcu¼¦Ù
 + 1 < 
	gcu¼node
->
	g¦Ùu£
) {

844 ++
	gcu¼¦Ù
;

846 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

847 
cu¼node
 = cu¼node->
Ãx—f
;

848 
	gcu¼¦Ù
 = 0;

852 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

855  
	gtmp
;

859 
šlše
 
	gcÚ¡_™”©Ü
& 
	gİ”©Ü
 -- ()

861 ià(
	gcu¼¦Ù
 > 0) {

862 --
	gcu¼¦Ù
;

864 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

865 
cu¼node
 = cu¼node->
´evËaf
;

866 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
 - 1;

870 
	gcu¼¦Ù
 = 0;

873  *
	gthis
;

877 
šlše
 
cÚ¡_™”©Ü
 
	gİ”©Ü
 -- ()

879 
cÚ¡_™”©Ü
 
	gtmp
 = *
this
;

881 ià(
	gcu¼¦Ù
 > 0) {

882 --
	gcu¼¦Ù
;

884 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

885 
cu¼node
 = cu¼node->
´evËaf
;

886 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
 - 1;

890 
	gcu¼¦Ù
 = 0;

893  
	gtmp
;

897 
šlše
 
boŞ
 
	gİ”©Ü
 =ğ(cÚ¡ 
cÚ¡_™”©Ü
& 
x
) const

899  (
x
.
cu¼node
 =ğcu¼nodeè&& (x.
cu¼¦Ù
 == currslot);

903 
šlše
 
boŞ
 
	gİ”©Ü
 !ğ(cÚ¡ 
cÚ¡_™”©Ü
& 
x
) const

905  (
x
.
cu¼node
 !ğcu¼nodeè|| (x.
cu¼¦Ù
 != currslot);

911 şas 
	c»v”£_™”©Ü


913 
	gpublic
:

917 
ty³Çme
 
	tbŒ“
::
	tkey_ty³
 key_type;

920 
ty³Çme
 
	tbŒ“
::
	td©a_ty³
 data_type;

923 
ty³Çme
 
	tbŒ“
::
	tv®ue_ty³
 value_type;

926 
ty³Çme
 
	tbŒ“
::
	t·œ_ty³
…air_type;

929 
	gv®ue_ty³
& 
	t»ã»nû
;

932 
v®ue_ty³
* 
	tpoš‹r
;

935 
	g¡d
::
	tbidœeùiÚ®_™”©Ü_g
 
	t™”©Ü_ÿ‹gÜy
;

938 
±rdiff_t
 
	tdifã»nû_ty³
;

940 
	g´iv©e
:

944 
ty³Çme
 
bŒ“
::
Ëaf_node
 * 
cu¼node
;

947 
	gcu¼¦Ù
;

951 
ä›nd
 
şass
 
	g™”©Ü
;

955 
ä›nd
 
şass
 
	gcÚ¡_™”©Ü
;

959 
ä›nd
 
şass
 
	gcÚ¡_»v”£_™”©Ü
;

963 
mubË
 
v®ue_ty³
 
	g‹mp_v®ue
;

968 
BTREE_FRIENDS


970 
	gpublic
:

974 
šlše
 
»v”£_™”©Ü
()

975 : 
cu¼node
(
NULL
), 
cu¼¦Ù
(0)

979 
šlše
 
»v”£_™”©Ü
(
ty³Çme
 
bŒ“
::
Ëaf_node
* 
l
, 
s
)

980 : 
cu¼node
(
l
), 
cu¼¦Ù
(
s
)

984 
šlše
 
»v”£_™”©Ü
(cÚ¡ 
™”©Ü
& 
™
)

985 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

990 
šlše
 
»ã»nû
 
	gİ”©Ü
 * () const

992 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

993 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

994  
	g‹mp_v®ue
;

1000 
šlše
 
poš‹r
 
	gİ”©Ü
 -> () const

1002 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1003 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

1004  &
	g‹mp_v®ue
;

1008 
šlše
 cÚ¡ 
	gkey_ty³
 & 
key
() const

1010 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1011  
	gcu¼node
->
	g¦Ùkey
[
cu¼¦Ù
 - 1];

1015 
šlše
 
	gd©a_ty³
 & 
d©a
() const

1017 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1018  
	gcu¼node
->
	g¦Ùd©a
[
u£d_as_£t
 ? 0 : 
cu¼¦Ù
 - 1];

1022 
šlše
 
	g»v”£_™”©Ü
& 
	gİ”©Ü
 ++ ()

1024 ià(
	gcu¼¦Ù
 > 1) {

1025 --
	gcu¼¦Ù
;

1027 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

1028 
cu¼node
 = cu¼node->
´evËaf
;

1029 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1033 
	gcu¼¦Ù
 = 0;

1036  *
	gthis
;

1040 
šlše
 
»v”£_™”©Ü
 
	gİ”©Ü
 ++ ()

1042 
»v”£_™”©Ü
 
	gtmp
 = *
this
;

1044 ià(
	gcu¼¦Ù
 > 1) {

1045 --
	gcu¼¦Ù
;

1047 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

1048 
cu¼node
 = cu¼node->
´evËaf
;

1049 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1053 
	gcu¼¦Ù
 = 0;

1056  
	gtmp
;

1060 
šlše
 
	g»v”£_™”©Ü
& 
	gİ”©Ü
 -- ()

1062 ià(
	gcu¼¦Ù
 < 
	gcu¼node
->
	g¦Ùu£
) {

1063 ++
	gcu¼¦Ù
;

1065 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

1066 
cu¼node
 = cu¼node->
Ãx—f
;

1067 
	gcu¼¦Ù
 = 1;

1071 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1074  *
	gthis
;

1078 
šlše
 
»v”£_™”©Ü
 
	gİ”©Ü
 -- ()

1080 
»v”£_™”©Ü
 
	gtmp
 = *
this
;

1082 ià(
	gcu¼¦Ù
 < 
	gcu¼node
->
	g¦Ùu£
) {

1083 ++
	gcu¼¦Ù
;

1085 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

1086 
cu¼node
 = cu¼node->
Ãx—f
;

1087 
	gcu¼¦Ù
 = 1;

1091 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1094  
	gtmp
;

1098 
šlše
 
boŞ
 
	gİ”©Ü
 =ğ(cÚ¡ 
»v”£_™”©Ü
& 
x
) const

1100  (
x
.
cu¼node
 =ğcu¼nodeè&& (x.
cu¼¦Ù
 == currslot);

1104 
šlše
 
boŞ
 
	gİ”©Ü
 !ğ(cÚ¡ 
»v”£_™”©Ü
& 
x
) const

1106  (
x
.
cu¼node
 !ğcu¼nodeè|| (x.
cu¼¦Ù
 != currslot);

1112 şas 
	ccÚ¡_»v”£_™”©Ü


1114 
	gpublic
:

1118 
ty³Çme
 
	tbŒ“
::
	tkey_ty³
 key_type;

1121 
ty³Çme
 
	tbŒ“
::
	td©a_ty³
 data_type;

1124 
ty³Çme
 
	tbŒ“
::
	tv®ue_ty³
 value_type;

1127 
ty³Çme
 
	tbŒ“
::
	t·œ_ty³
…air_type;

1130 cÚ¡ 
	tv®ue_ty³
& 
	t»ã»nû
;

1133 cÚ¡ 
	tv®ue_ty³
* 
	tpoš‹r
;

1136 
	g¡d
::
	tbidœeùiÚ®_™”©Ü_g
 
	t™”©Ü_ÿ‹gÜy
;

1139 
±rdiff_t
 
	tdifã»nû_ty³
;

1141 
	g´iv©e
:

1145 cÚ¡ 
ty³Çme
 
bŒ“
::
Ëaf_node
 * 
cu¼node
;

1148 
	gcu¼¦Ù
;

1152 
ä›nd
 
şass
 
	g»v”£_™”©Ü
;

1156 
mubË
 
v®ue_ty³
 
	g‹mp_v®ue
;

1161 
BTREE_FRIENDS


1163 
	gpublic
:

1167 
šlše
 
cÚ¡_»v”£_™”©Ü
()

1168 : 
cu¼node
(
NULL
), 
cu¼¦Ù
(0)

1172 
šlše
 
cÚ¡_»v”£_™”©Ü
(cÚ¡ 
ty³Çme
 
bŒ“
::
Ëaf_node
* 
l
, 
s
)

1173 : 
cu¼node
(
l
), 
cu¼¦Ù
(
s
)

1177 
šlše
 
cÚ¡_»v”£_™”©Ü
(cÚ¡ 
™”©Ü
& 
™
)

1178 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

1182 
šlše
 
cÚ¡_»v”£_™”©Ü
(cÚ¡ 
cÚ¡_™”©Ü
& 
™
)

1183 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

1187 
šlše
 
cÚ¡_»v”£_™”©Ü
(cÚ¡ 
»v”£_™”©Ü
& 
™
)

1188 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

1194 
šlše
 
»ã»nû
 
	gİ”©Ü
 * () const

1196 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1197 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

1198  
	g‹mp_v®ue
;

1204 
šlše
 
poš‹r
 
	gİ”©Ü
 -> () const

1206 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1207 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

1208  &
	g‹mp_v®ue
;

1212 
šlše
 cÚ¡ 
	gkey_ty³
 & 
key
() const

1214 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1215  
	gcu¼node
->
	g¦Ùkey
[
cu¼¦Ù
 - 1];

1219 
šlše
 cÚ¡ 
	gd©a_ty³
 & 
d©a
() const

1221 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1222  
	gcu¼node
->
	g¦Ùd©a
[
u£d_as_£t
 ? 0 : 
cu¼¦Ù
 - 1];

1226 
šlše
 
	gcÚ¡_»v”£_™”©Ü
& 
	gİ”©Ü
 ++ ()

1228 ià(
	gcu¼¦Ù
 > 1) {

1229 --
	gcu¼¦Ù
;

1231 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

1232 
cu¼node
 = cu¼node->
´evËaf
;

1233 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1237 
	gcu¼¦Ù
 = 0;

1240  *
	gthis
;

1244 
šlše
 
cÚ¡_»v”£_™”©Ü
 
	gİ”©Ü
 ++ ()

1246 
cÚ¡_»v”£_™”©Ü
 
	gtmp
 = *
this
;

1248 ià(
	gcu¼¦Ù
 > 1) {

1249 --
	gcu¼¦Ù
;

1251 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

1252 
cu¼node
 = cu¼node->
´evËaf
;

1253 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1257 
	gcu¼¦Ù
 = 0;

1260  
	gtmp
;

1264 
šlše
 
	gcÚ¡_»v”£_™”©Ü
& 
	gİ”©Ü
 -- ()

1266 ià(
	gcu¼¦Ù
 < 
	gcu¼node
->
	g¦Ùu£
) {

1267 ++
	gcu¼¦Ù
;

1269 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

1270 
cu¼node
 = cu¼node->
Ãx—f
;

1271 
	gcu¼¦Ù
 = 1;

1275 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1278  *
	gthis
;

1282 
šlše
 
cÚ¡_»v”£_™”©Ü
 
	gİ”©Ü
 -- ()

1284 
cÚ¡_»v”£_™”©Ü
 
	gtmp
 = *
this
;

1286 ià(
	gcu¼¦Ù
 < 
	gcu¼node
->
	g¦Ùu£
) {

1287 ++
	gcu¼¦Ù
;

1289 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

1290 
cu¼node
 = cu¼node->
Ãx—f
;

1291 
	gcu¼¦Ù
 = 1;

1295 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1298  
	gtmp
;

1302 
šlše
 
boŞ
 
	gİ”©Ü
 =ğ(cÚ¡ 
cÚ¡_»v”£_™”©Ü
& 
x
) const

1304  (
x
.
cu¼node
 =ğcu¼nodeè&& (x.
cu¼¦Ù
 == currslot);

1308 
šlše
 
boŞ
 
	gİ”©Ü
 !ğ(cÚ¡ 
cÚ¡_»v”£_™”©Ü
& 
x
) const

1310  (
x
.
cu¼node
 !ğcu¼nodeè|| (x.
cu¼¦Ù
 != currslot);

1314 
	gpublic
:

1319 
	sŒ“_¡©s


1322 
size_ty³
 
™emcouÁ
;

1325 
size_ty³
 
	gËaves
;

1328 
size_ty³
 
	gšÃºodes
;

1331 cÚ¡ 
	gËaf¦Ùs
 = 
£lf_ty³
::
Ëaf¦Ùmax
;

1334 cÚ¡ 
	gšÃr¦Ùs
 = 
£lf_ty³
::
šÃr¦Ùmax
;

1337 
šlše
 
Œ“_¡©s
()

1338 : 
™emcouÁ
(0),

1339 
Ëaves
(0), 
šÃºodes
(0)

1343 
šlše
 
size_ty³
 
nodes
() const

1345  
	gšÃºodes
 + 
	gËaves
;

1349 
šlše
 
avgfl_Ëaves
() const

1351  
	g¡©ic_ÿ¡
<>(
	g™emcouÁ
è/ (
Ëaves
 * 
	gËaf¦Ùs
);

1355 
	g´iv©e
:

1359 
node
* 
m_roÙ
;

1362 
Ëaf_node
* 
	gm_h—dËaf
;

1365 
Ëaf_node
* 
	gm_Ëaf
;

1368 
Œ“_¡©s
 
	gm_¡©s
;

1372 
key_com·»
 
	gm_key_Ëss
;

1375 
®loÿtÜ_ty³
 
	gm_®loÿtÜ
;

1378 
VMEM
 *
	gvmp
;

1380 
	gpublic
:

1385 
ex¶ic™
 
šlše
 
bŒ“
(cÚ¡ 
®loÿtÜ_ty³
& 
®loc
 =‡llocator_type())

1386 : 
m_roÙ
(
NULL
), 
m_h—dËaf
(NULL), 
m_Ëaf
(NULL), 
m_®loÿtÜ
(
®loc
)

1388 
	gvmp
 = 
nv_ü—‹
("/mÁ/nv¿m", 
NVRAM_LEN
);

1389 if(
	gvmp
 =ğ
NULL
)

1390 
cout
 << "‚v_ü—‹ faed " << 
’dl
;

1395 
ex¶ic™
 
šlše
 
bŒ“
(cÚ¡ 
key_com·»
& 
kcf
,

1396 cÚ¡ 
®loÿtÜ_ty³
& 
®loc
 =‡llocator_type())

1397 : 
m_roÙ
(
NULL
), 
m_h—dËaf
(NULL), 
m_Ëaf
(NULL),

1398 
m_key_Ëss
(
kcf
), 
m_®loÿtÜ
(
®loc
)

1404 
	g‹m¶©e
 <
şass
 
	gIÅutI‹¿tÜ
>

1405 
šlše
 
bŒ“
(
IÅutI‹¿tÜ
 
fœ¡
, IÅutI‹¿tÜ 
Ï¡
,

1406 cÚ¡ 
®loÿtÜ_ty³
& 
®loc
 =‡llocator_type())

1407 : 
m_roÙ
(
NULL
), 
m_h—dËaf
(NULL), 
m_Ëaf
(NULL), 
m_®loÿtÜ
(
®loc
)

1409 
š£¹
(
fœ¡
, 
Ï¡
);

1415 
	g‹m¶©e
 <
şass
 
	gIÅutI‹¿tÜ
>

1416 
šlše
 
bŒ“
(
IÅutI‹¿tÜ
 
fœ¡
, IÅutI‹¿tÜ 
Ï¡
, cÚ¡ 
key_com·»
& 
kcf
,

1417 cÚ¡ 
®loÿtÜ_ty³
& 
®loc
 =‡llocator_type())

1418 : 
m_roÙ
(
NULL
), 
m_h—dËaf
(NULL), 
m_Ëaf
(NULL),

1419 
m_key_Ëss
(
kcf
), 
m_®loÿtÜ
(
®loc
)

1421 
š£¹
(
fœ¡
, 
Ï¡
);

1425 
	gšlše
 ~
bŒ“
()

1427 
ş—r
();

1428 
nv_de¡roy
(
vmp
);

1432 
sw­
(
£lf_ty³
& 
äom
)

1434 
	g¡d
::
sw­
(
m_roÙ
, 
äom
.m_root);

1435 
	g¡d
::
sw­
(
m_h—dËaf
, 
äom
.m_headleaf);

1436 
	g¡d
::
sw­
(
m_Ëaf
, 
äom
.m_tailleaf);

1437 
	g¡d
::
sw­
(
m_¡©s
, 
äom
.m_stats);

1438 
	g¡d
::
sw­
(
m_key_Ëss
, 
äom
.m_key_less);

1439 
	g¡d
::
sw­
(
m_®loÿtÜ
, 
äom
.m_allocator);

1442 
	gpublic
:

1446 şas 
	cv®ue_com·»


1448 
´Ùeùed
:

1450 
key_com·»
 
key_comp
;

1453 
šlše
 
ex¶ic™
 
v®ue_com·»
(
key_com·»
 
kc
)

1454 : 
key_comp
(
kc
)

1458 
ä›nd
 
şass
 
bŒ“
<
key_ty³
, 
	gd©a_ty³
, 
	gv®ue_ty³
, 
	gkey_com·»
,

1459 
	gŒa™s
, 
	g®low_du¶iÿ‹s
, 
	g®loÿtÜ_ty³
, 
	gu£d_as_£t
>;

1461 
	gpublic
:

1463 
šlše
 
boŞ
 
İ”©Ü
 (è(cÚ¡ 
v®ue_ty³
& 
x
, cÚ¡ 
	gv®ue_ty³
& 
	gy
) const

1465  
key_comp
(
x
.
fœ¡
, 
y
.first);

1470 
šlše
 
key_com·»
 
key_comp
() const

1472  
	gm_key_Ëss
;

1477 
šlše
 
v®ue_com·»
 
v®ue_comp
() const

1479  
v®ue_com·»
(
m_key_Ëss
);

1482 
	g´iv©e
:

1486 
šlše
 
boŞ
 
key_Ëss
(cÚ¡ 
key_ty³
& 
a
, cÚ¡ key_ty³ 
b
) const

1488  
m_key_Ëss
(
a
, 
b
);

1492 
šlše
 
boŞ
 
key_Ës£qu®
(cÚ¡ 
key_ty³
& 
a
, cÚ¡ key_ty³ 
b
) const

1494  !
m_key_Ëss
(
b
, 
a
);

1498 
šlše
 
boŞ
 
key_g»©”
(cÚ¡ 
key_ty³
& 
a
, cÚ¡ key_ty³& 
b
) const

1500  
m_key_Ëss
(
b
, 
a
);

1504 
šlše
 
boŞ
 
key_g»©”equ®
(cÚ¡ 
key_ty³
& 
a
, cÚ¡ key_ty³ 
b
) const

1506  !
m_key_Ëss
(
a
, 
b
);

1511 
šlše
 
boŞ
 
key_equ®
(cÚ¡ 
key_ty³
& 
a
, cÚ¡ key_ty³& 
b
) const

1513  !
m_key_Ëss
(
a
, 
b
) && !m_key_less(b,‡);

1516 
	gpublic
:

1520 
®loÿtÜ_ty³
 
g‘_®loÿtÜ
() const

1522  
m_®loÿtÜ
;

1525 
	g´iv©e
:

1529 
šlše
 
Ëaf_node
 *
nvËaf_®loc
(
VMEM
 *
vmp
)

1531 
Ëaf_node
 * 
n
 = (Ëaf_nod*)
nv_m®loc
(Ö—f_node), 
vmp
);

1532 if(
	gn
 =ğ
NULL
) {

1533 
cout
 << "‚vËaà®loøçed " << 
’dl
;

1535  
	gn
;

1540 
ty³Çme
 
	gËaf_node
::
®loc_ty³
 
Ëaf_node_®loÿtÜ
()

1542  
ty³Çme
 
Ëaf_node
::
®loc_ty³
(
m_®loÿtÜ
);

1546 
ty³Çme
 
	gšÃr_node
::
®loc_ty³
 
šÃr_node_®loÿtÜ
()

1548  
ty³Çme
 
šÃr_node
::
®loc_ty³
(
m_®loÿtÜ
);

1552 
šlše
 
Ëaf_node
 * 
®loÿ‹_Ëaf
()

1555 
Ëaf_node
* 
	gn
 = 
Ãw
 (
Ëaf_node_®loÿtÜ
().
®loÿ‹
(1))

1556 
Ëaf_node
();

1558 
Ëaf_node
 *
	gn
 = 
nvËaf_®loc
(
vmp
);

1559 
	gn
->
	g´evËaf
 = 
NULL
;

1560 
	gn
->
	gÃx—f
 = 
NULL
;

1561 
	gn
->
	gËv–
 = 0;

1562 
	gn
->
	g¦Ùu£
 = 0;

1563 
	gm_¡©s
.
	gËaves
++;

1564  
	gn
;

1568 
šlše
 
šÃr_node
 * 
®loÿ‹_šÃr
(
Ëv–
)

1570 
šÃr_node
* 
	gn
 = 
Ãw
 (
šÃr_node_®loÿtÜ
().
®loÿ‹
(1))

1571 
šÃr_node
(
Ëv–
);

1572 
	gm_¡©s
.
	gšÃºodes
++;

1573  
	gn
;

1578 
šlše
 
ä“_node
(
node
* 
n
)

1580 ià(
	gn
->
i¦—âode
()) {

1581 
Ëaf_node
* 
	gÊ
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
n
);

1582 
ty³Çme
 
	gËaf_node
::
®loc_ty³
 
a
(
Ëaf_node_®loÿtÜ
());

1583 
nv_ä“
(
vmp
, (*)
Ê
);

1588 
	gm_¡©s
.
	gËaves
--;

1591 
šÃr_node
* 
	gš
 = 
¡©ic_ÿ¡
<šÃr_node*>(
n
);

1592 
ty³Çme
 
	gšÃr_node
::
®loc_ty³
 
a
(
šÃr_node_®loÿtÜ
());

1593 
	ga
.
de¡roy
(
š
);

1594 
	ga
.
d—Îoÿ‹
(
š
, 1);

1595 
	gm_¡©s
.
	gšÃºodes
--;

1601 
	g‹m¶©e
 <
şass
 
	gIÅutI‹¿tÜ
, cÏs 
	gOuutI‹¿tÜ
>

1602 
OuutI‹¿tÜ
 
d©a_cİy
(
IÅutI‹¿tÜ
 
fœ¡
, IÅutI‹¿tÜ 
Ï¡
,

1603 
OuutI‹¿tÜ
 
»suÉ
)

1605 ià(
	gu£d_as_£t
è 
	g»suÉ
;

1606  
	g¡d
::
cİy
(
fœ¡
, 
Ï¡
, 
»suÉ
);

1611 
	g‹m¶©e
 <
şass
 
	gIÅutI‹¿tÜ
, cÏs 
	gOuutI‹¿tÜ
>

1612 
OuutI‹¿tÜ
 
d©a_cİy_backw¬d
(
IÅutI‹¿tÜ
 
fœ¡
, IÅutI‹¿tÜ 
Ï¡
,

1613 
OuutI‹¿tÜ
 
»suÉ
)

1615 ià(
	gu£d_as_£t
è 
	g»suÉ
;

1616  
	g¡d
::
cİy_backw¬d
(
fœ¡
, 
Ï¡
, 
»suÉ
);

1619 
	gpublic
:

1623 
ş—r
()

1625 ià(
m_roÙ
)

1627 
ş—r_»cursive
(
m_roÙ
);

1628 
ä“_node
(
m_roÙ
);

1630 
	gm_roÙ
 = 
NULL
;

1631 
	gm_h—dËaf
 = 
m_Ëaf
 = 
NULL
;

1633 
	gm_¡©s
 = 
Œ“_¡©s
();

1635 
BTREE_ASSERT
(
m_¡©s
.
™emcouÁ
 == 0);

1638 
	g´iv©e
:

1640 
ş—r_»cursive
(
node
* 
n
)

1642 ià(
n
->
i¦—âode
())

1644 
Ëaf_node
* 
Ëaâode
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
n
);

1646 
	g¦Ù
 = 0; slÙ < 
	gËaâode
->
	g¦Ùu£
; ++slot)

1653 
šÃr_node
* 
	gšÃºode
 = 
¡©ic_ÿ¡
<šÃr_node*>(
n
);

1655 
	g¦Ù
 = 0; slÙ < 
	gšÃºode
->
	g¦Ùu£
 + 1; ++slot)

1657 
ş—r_»cursive
(
šÃºode
->
chdid
[
¦Ù
]);

1658 
ä“_node
(
šÃºode
->
chdid
[
¦Ù
]);

1663 
	gpublic
:

1668 
šlše
 
™”©Ü
 
begš
()

1670  
™”©Ü
(
m_h—dËaf
, 0);

1675 
šlše
 
™”©Ü
 
’d
()

1677  
™”©Ü
(
m_Ëaf
, m_Ëaà? m_Ëaf->
¦Ùu£
 : 0);

1682 
šlše
 
cÚ¡_™”©Ü
 
begš
() const

1684  
cÚ¡_™”©Ü
(
m_h—dËaf
, 0);

1689 
šlše
 
cÚ¡_™”©Ü
 
’d
() const

1691  
cÚ¡_™”©Ü
(
m_Ëaf
, m_Ëaà? m_Ëaf->
¦Ùu£
 : 0);

1696 
šlše
 
»v”£_™”©Ü
 
rbegš
()

1698  
»v”£_™”©Ü
(
’d
());

1703 
šlše
 
»v”£_™”©Ü
 
»nd
()

1705  
»v”£_™”©Ü
(
begš
());

1710 
šlše
 
cÚ¡_»v”£_™”©Ü
 
rbegš
() const

1712  
cÚ¡_»v”£_™”©Ü
(
’d
());

1717 
šlše
 
cÚ¡_»v”£_™”©Ü
 
»nd
() const

1719  
cÚ¡_»v”£_™”©Ü
(
begš
());

1722 
	g´iv©e
:

1723 
šlše
 
Ëaf_fšd_low”
(cÚ¡ 
Ëaf_node
 *
n
, cÚ¡ 
key_ty³
& 
key
) const

1725 ià(0 && (
	gn
->
	g¦Ùkey
è> 
	gŒa™s
::
bš£¬ch_th»shŞd
)

1728 
couÁ
 = 
n
->count();

1729 if(
	gcouÁ
 == 0)  0;

1731 
	glo
 = 0, 
	ghi
 = 
couÁ
;

1733 
	glo
 < 
	ghi
)

1735 
	gmid
 = (
lo
 + 
hi
) >> 1;

1737 ià(
key_Ës£qu®
(
key
, 
n
->
¦Ùkey
[
mid
])) {

1738 
	ghi
 = 
mid
;

1741 
	glo
 = 
mid
 + 1;

1745 
BTREE_PRINT
("bŒ“::fšd_low”: oÀ" << 
n
 << " key " << 
key
 << " -> " << 
lo
 << " / " << 
hi
);

1748 ià(
	g£lfv”ify
)

1750 
	gi
 = 0;

1751 
	gi
 < 
	gcouÁ
 && 
key_Ëss
(
n
->
¦Ùkey
[
i
], 
key
)) ++i;

1753 
BTREE_PRINT
("bŒ“::fšd_low”:e¡fšd: " << 
i
);

1754 
BTREE_ASSERT
(
i
 =ğ
lo
);

1757  
	glo
;

1761 
	glo
 = 0;

1762 
	glo
 < 
	gn
->
	g¦Ùu£
 && 
key_Ëss
(
n
->
¦Ùkey
[
lo
], 
key
)) ++lo;

1763  
	glo
;

1772 
	g‹m¶©e
 <
ty³Çme
 
	gnode_ty³
>

1773 
šlše
 
fšd_low”
(cÚ¡ 
node_ty³
* 
n
, cÚ¡ 
key_ty³
& 
key
) const

1775 ià(0 && (
	gn
->
	g¦Ùkey
è> 
	gŒa™s
::
bš£¬ch_th»shŞd
)

1777 ià(
n
->
¦Ùu£
 == 0)  0;

1779 
	glo
 = 0, 
	ghi
 = 
n
->
¦Ùu£
;

1781 
	glo
 < 
	ghi
)

1783 
	gmid
 = (
lo
 + 
hi
) >> 1;

1785 ià(
key_Ës£qu®
(
key
, 
n
->
¦Ùkey
[
mid
])) {

1786 
	ghi
 = 
mid
;

1789 
	glo
 = 
mid
 + 1;

1793 
BTREE_PRINT
("bŒ“::fšd_low”: oÀ" << 
n
 << " key " << 
key
 << " -> " << 
lo
 << " / " << 
hi
);

1796 ià(
	g£lfv”ify
)

1798 
	gi
 = 0;

1799 
	gi
 < 
	gn
->
	g¦Ùu£
 && 
key_Ëss
(
n
->
¦Ùkey
[
i
], 
key
)) ++i;

1801 
BTREE_PRINT
("bŒ“::fšd_low”:e¡fšd: " << 
i
);

1802 
BTREE_ASSERT
(
i
 =ğ
lo
);

1805  
	glo
;

1809 
	glo
 = 0;

1810 
	glo
 < 
	gn
->
	g¦Ùu£
 && 
key_Ëss
(
n
->
¦Ùkey
[
lo
], 
key
)) ++lo;

1811  
	glo
;

1819 
	g‹m¶©e
 <
ty³Çme
 
	gnode_ty³
>

1820 
šlše
 
fšd_uµ”
(cÚ¡ 
node_ty³
* 
n
, cÚ¡ 
key_ty³
& 
key
) const

1822 ià(0 && (
	gn
->
	g¦Ùkey
è> 
	gŒa™s
::
bš£¬ch_th»shŞd
)

1824 ià(
n
->
¦Ùu£
 == 0)  0;

1826 
	glo
 = 0, 
	ghi
 = 
n
->
¦Ùu£
;

1828 
	glo
 < 
	ghi
)

1830 
	gmid
 = (
lo
 + 
hi
) >> 1;

1832 ià(
key_Ëss
(
key
, 
n
->
¦Ùkey
[
mid
])) {

1833 
	ghi
 = 
mid
;

1836 
	glo
 = 
mid
 + 1;

1840 
BTREE_PRINT
("bŒ“::fšd_uµ”: oÀ" << 
n
 << " key " << 
key
 << " -> " << 
lo
 << " / " << 
hi
);

1843 ià(
	g£lfv”ify
)

1845 
	gi
 = 0;

1846 
	gi
 < 
	gn
->
	g¦Ùu£
 && 
key_Ës£qu®
(
n
->
¦Ùkey
[
i
], 
key
)) ++i;

1848 
BTREE_PRINT
("bŒ“::fšd_uµ”e¡fšd: " << 
i
);

1849 
BTREE_ASSERT
(
i
 =ğ
hi
);

1852  
	glo
;

1856 
	glo
 = 0;

1857 
	glo
 < 
	gn
->
	g¦Ùu£
 && 
key_Ës£qu®
(
n
->
¦Ùkey
[
lo
], 
key
)) ++lo;

1858  
	glo
;

1862 
	gpublic
:

1866 
šlše
 
size_ty³
 
size
() const

1868  
m_¡©s
.
™emcouÁ
;

1872 
šlše
 
boŞ
 
em±y
() const

1874  (
size
(è=ğ
size_ty³
(0));

1879 
šlše
 
size_ty³
 
max_size
() const

1881  
size_ty³
(-1);

1885 
šlše
 cÚ¡ 
	gŒ“_¡©s
 & 
g‘_¡©s
() const

1887  
	gm_¡©s
;

1890 
	gpublic
:

1895 
boŞ
 
exi¡s
(cÚ¡ 
key_ty³
& 
key
) const

1897 cÚ¡ 
node
* 
n
 = 
m_roÙ
;

1898 ià(!
	gn
è 
	gçl£
;

1900 !
	gn
->
i¦—âode
())

1902 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

1903 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

1905 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

1908 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

1910 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

1911  (
	g¦Ù
 < 
	gËaf
->
	g¦Ùu£
 && 
key_equ®
(
key
, 
Ëaf
->
¦Ùkey
[
¦Ù
]));

1916 
™”©Ü
 
fšd
(cÚ¡ 
key_ty³
& 
key
)

1918 
node
* 
	gn
 = 
m_roÙ
;

1919 ià(!
	gn
è 
’d
();

1921 !
	gn
->
i¦—âode
())

1923 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

1924 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

1926 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

1929 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
n
);

1931 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

1932  (
	g¦Ù
 < 
	gËaf
->
	g¦Ùu£
 && 
key_equ®
(
key
, 
Ëaf
->
¦Ùkey
[
¦Ù
]))

1933 ? 
™”©Ü
(
Ëaf
, 
¦Ù
è: 
’d
();

1938 
cÚ¡_™”©Ü
 
fšd
(cÚ¡ 
key_ty³
& 
key
) const

1940 cÚ¡ 
node
* 
	gn
 = 
m_roÙ
;

1941 ià(!
	gn
è 
’d
();

1943 !
	gn
->
i¦—âode
())

1945 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

1946 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

1948 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

1951 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

1953 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

1954  (
	g¦Ù
 < 
	gËaf
->
	g¦Ùu£
 && 
key_equ®
(
key
, 
Ëaf
->
¦Ùkey
[
¦Ù
]))

1955 ? 
cÚ¡_™”©Ü
(
Ëaf
, 
¦Ù
è: 
’d
();

1960 
size_ty³
 
couÁ
(cÚ¡ 
key_ty³
& 
key
) const

1962 cÚ¡ 
node
* 
	gn
 = 
m_roÙ
;

1963 ià(!
	gn
)  0;

1965 !
	gn
->
i¦—âode
())

1967 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

1968 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

1970 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

1973 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

1975 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

1976 
size_ty³
 
	gnum
 = 0;

1978 
	gËaf
 && 
	g¦Ù
 <†—f->
	g¦Ùu£
 && 
key_equ®
(
key
, 
Ëaf
->
¦Ùkey
[
¦Ù
]))

1980 ++
	gnum
;

1981 ià(++
	g¦Ù
 >ğ
Ëaf
->
¦Ùu£
)

1983 
Ëaf
 =†—f->
Ãx—f
;

1984 
	g¦Ù
 = 0;

1988  
	gnum
;

1993 
™”©Ü
 
low”_bound
(cÚ¡ 
key_ty³
& 
key
)

1995 
node
* 
	gn
 = 
m_roÙ
;

1996 ià(!
	gn
è 
’d
();

1998 !
	gn
->
i¦—âode
())

2000 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

2001 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

2003 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

2006 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
n
);

2008 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

2009  
™”©Ü
(
Ëaf
, 
¦Ù
);

2015 
cÚ¡_™”©Ü
 
low”_bound
(cÚ¡ 
key_ty³
& 
key
) const

2017 cÚ¡ 
node
* 
	gn
 = 
m_roÙ
;

2018 ià(!
	gn
è 
’d
();

2020 !
	gn
->
i¦—âode
())

2022 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

2023 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

2025 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

2028 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

2030 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

2031  
cÚ¡_™”©Ü
(
Ëaf
, 
¦Ù
);

2036 
™”©Ü
 
uµ”_bound
(cÚ¡ 
key_ty³
& 
key
)

2038 
node
* 
	gn
 = 
m_roÙ
;

2039 ià(!
	gn
è 
’d
();

2041 !
	gn
->
i¦—âode
())

2043 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

2044 
	g¦Ù
 = 
fšd_uµ”
(
šÃr
, 
key
);

2046 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

2049 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
n
);

2051 
	g¦Ù
 = 
fšd_uµ”
(
Ëaf
, 
key
);

2052  
™”©Ü
(
Ëaf
, 
¦Ù
);

2058 
cÚ¡_™”©Ü
 
uµ”_bound
(cÚ¡ 
key_ty³
& 
key
) const

2060 cÚ¡ 
node
* 
	gn
 = 
m_roÙ
;

2061 ià(!
	gn
è 
’d
();

2063 !
	gn
->
i¦—âode
())

2065 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

2066 
	g¦Ù
 = 
fšd_uµ”
(
šÃr
, 
key
);

2068 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

2071 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

2073 
	g¦Ù
 = 
fšd_uµ”
(
Ëaf
, 
key
);

2074  
cÚ¡_™”©Ü
(
Ëaf
, 
¦Ù
);

2078 
šlše
 
	g¡d
::
·œ
<
™”©Ü
, 
	g™”©Ü
> 
equ®_¿nge
(cÚ¡ 
key_ty³
& 
key
)

2080  
	g¡d
::
·œ
<
™”©Ü
, 
	g™”©Ü
>(
low”_bound
(
key
), 
uµ”_bound
(key));

2084 
šlše
 
	g¡d
::
·œ
<
cÚ¡_™”©Ü
, 
	gcÚ¡_™”©Ü
> 
equ®_¿nge
(cÚ¡ 
key_ty³
& 
key
) const

2086  
	g¡d
::
·œ
<
cÚ¡_™”©Ü
, 
	gcÚ¡_™”©Ü
>(
low”_bound
(
key
), 
uµ”_bound
(key));

2089 
	gpublic
:

2095 
šlše
 
boŞ
 
İ”©Ü
 =ğ(cÚ¡ 
£lf_ty³
& 
Ùh”
) const

2097  (
size
(è=ğ
Ùh”
.size()è&& 
¡d
::
equ®
(
begš
(), 
’d
(), other.begin());

2101 
šlše
 
boŞ
 
	gİ”©Ü
 !ğ(cÚ¡ 
£lf_ty³
& 
Ùh”
) const

2103  !(*
this
 =ğ
Ùh”
);

2108 
šlše
 
boŞ
 
	gİ”©Ü
 < (cÚ¡ 
	g£lf_ty³
& 
	gÙh”
) const

2110  
	g¡d
::
Ëxicog¿phiÿl_com·»
(
begš
(), 
’d
(), 
Ùh”
.begin(), other.end());

2114 
šlše
 
boŞ
 
	gİ”©Ü
 > (cÚ¡ 
	g£lf_ty³
& 
	gÙh”
) const

2116  
	gÙh”
 < *
	gthis
;

2120 
šlše
 
boŞ
 
	gİ”©Ü
 <ğ(cÚ¡ 
£lf_ty³
& 
Ùh”
) const

2122  !(
Ùh”
 < *
this
);

2126 
šlše
 
boŞ
 
	gİ”©Ü
 >ğ(cÚ¡ 
£lf_ty³
& 
Ùh”
) const

2128  !(*
this
 < 
Ùh”
);

2131 
	gpublic
:

2135 
šlše
 
£lf_ty³
& 
İ”©Ü
 = (cÚ¡ s–f_ty³& 
Ùh”
)

2137 ià(
this
 !ğ&
Ùh”
)

2139 
ş—r
();

2141 
	gm_key_Ëss
 = 
Ùh”
.
key_comp
();

2142 
	gm_®loÿtÜ
 = 
Ùh”
.
g‘_®loÿtÜ
();

2144 ià(
	gÙh”
.
size
() != 0)

2146 
m_¡©s
.
Ëaves
 = m_¡©s.
šÃºodes
 = 0;

2147 ià(
	gÙh”
.
	gm_roÙ
) {

2148 
	gm_roÙ
 = 
cİy_»cursive
(
Ùh”
.
m_roÙ
);

2150 
	gm_¡©s
 = 
Ùh”
.
m_¡©s
;

2153 ià(
	g£lfv”ify
è
v”ify
();

2155  *
	gthis
;

2160 
šlše
 
bŒ“
(cÚ¡ bŒ“& 
Ùh”
)

2161 : 
m_roÙ
(
NULL
), 
m_h—dËaf
(NULL), 
m_Ëaf
(NULL),

2162 
m_¡©s
(
Ùh”
.m_stats),

2163 
m_key_Ëss
(
Ùh”
.
key_comp
()),

2164 
m_®loÿtÜ
(
Ùh”
.
g‘_®loÿtÜ
())

2166 ià(
size
() > 0)

2168 
	gm_¡©s
.
	gËaves
 = 
m_¡©s
.
šÃºodes
 = 0;

2169 ià(
	gÙh”
.
	gm_roÙ
) {

2170 
	gm_roÙ
 = 
cİy_»cursive
(
Ùh”
.
m_roÙ
);

2172 ià(
	g£lfv”ify
è
v”ify
();

2176 
	g´iv©e
:

2178 
node
 * 
cİy_»cursive
(cÚ¡‚ode* 
n
)

2180 ià(
n
->
i¦—âode
())

2182 cÚ¡ 
Ëaf_node
* 
Ëaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

2183 
Ëaf_node
* 
	gÃwËaf
 = 
®loÿ‹_Ëaf
();

2185 
	gÃwËaf
->
	g¦Ùu£
 = 
Ëaf
->
¦Ùu£
;

2186 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
,†—f->¦Ùkey +†—f->
¦Ùu£
, 
ÃwËaf
->slotkey);

2187 
d©a_cİy
(
Ëaf
->
¦Ùd©a
,†—f->¦Ùd©¨+†—f->
¦Ùu£
, 
ÃwËaf
->slotdata);

2189 ià(
	gm_h—dËaf
 =ğ
NULL
)

2191 
m_h—dËaf
 = 
m_Ëaf
 = 
ÃwËaf
;

2192 
	gÃwËaf
->
	g´evËaf
 = 
ÃwËaf
->
Ãx—f
 = 
NULL
;

2196 
	gÃwËaf
->
	g´evËaf
 = 
m_Ëaf
;

2197 
	gm_Ëaf
->
	gÃx—f
 = 
ÃwËaf
;

2198 
	gm_Ëaf
 = 
ÃwËaf
;

2201  
	gÃwËaf
;

2205 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

2206 
šÃr_node
* 
	gÃwšÃr
 = 
®loÿ‹_šÃr
(
šÃr
->
Ëv–
);

2208 
	gÃwšÃr
->
	g¦Ùu£
 = 
šÃr
->
¦Ùu£
;

2209 
	g¡d
::
cİy
(
šÃr
->
¦Ùkey
, iÂ”->¦Ùkey + iÂ”->
¦Ùu£
, 
ÃwšÃr
->slotkey);

2211 
	g¦Ù
 = 0; slÙ <ğ
šÃr
->
¦Ùu£
; ++slot)

2213 
	gÃwšÃr
->
	gchdid
[
¦Ù
] = 
cİy_»cursive
(
šÃr
->
chdid
[slot]);

2216  
	gÃwšÃr
;

2220 
	gpublic
:

2226 
šlše
 
¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
š£¹
(cÚ¡ 
·œ_ty³
& 
x
)

2228  
š£¹_¡¬t
(
x
.
fœ¡
, x.
£cÚd
);

2235 
šlše
 
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
š£¹
(cÚ¡ 
key_ty³
& 
key
, cÚ¡ 
d©a_ty³
& 
d©a
)

2237  
š£¹_¡¬t
(
key
, 
d©a
);

2244 
šlše
 
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
š£¹2
(cÚ¡ 
key_ty³
& 
key
, cÚ¡ 
d©a_ty³
& 
d©a
)

2246  
š£¹_¡¬t
(
key
, 
d©a
);

2251 
šlše
 
™”©Ü
 
š£¹
(™”©Ü , cÚ¡ 
·œ_ty³
& 
x
)

2253  
š£¹_¡¬t
(
x
.
fœ¡
, x.
£cÚd
).
	gfœ¡
;

2258 
šlše
 
™”©Ü
 
š£¹2
(™”©Ü , cÚ¡ 
key_ty³
& 
key
, cÚ¡ 
d©a_ty³
& 
d©a
)

2260  
š£¹_¡¬t
(
key
, 
d©a
).
	gfœ¡
;

2266 
	g‹m¶©e
 <
ty³Çme
 
	gIÅutI‹¿tÜ
>

2267 
šlše
 
š£¹
(
IÅutI‹¿tÜ
 
fœ¡
, IÅutI‹¿tÜ 
Ï¡
)

2269 
IÅutI‹¿tÜ
 
	g™”
 = 
fœ¡
;

2270 
	g™”
 !ğ
Ï¡
)

2272 
š£¹
(*
™”
);

2273 ++
	g™”
;

2277 
	g´iv©e
:

2282 
¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
š£¹_¡¬t
(cÚ¡ 
key_ty³
& 
key
, cÚ¡ 
d©a_ty³
& 
v®ue
)

2284 
node
* 
	gÃwchd
 = 
NULL
;

2285 
key_ty³
 
	gÃwkey
 = key_type();

2287 ià(
	gm_roÙ
 =ğ
NULL
) {

2288 
m_roÙ
 = 
m_h—dËaf
 = 
m_Ëaf
 = 
®loÿ‹_Ëaf
();

2291 
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
	gr
 = 
š£¹_desûnd
(
m_roÙ
, 
key
, 
v®ue
, &
Ãwkey
, &
Ãwchd
);

2293 ià(
	gÃwchd
)

2295 
šÃr_node
* 
	gÃwroÙ
 = 
®loÿ‹_šÃr
(
m_roÙ
->
Ëv–
 + 1);

2296 
	gÃwroÙ
->
	g¦Ùkey
[0] = 
Ãwkey
;

2298 
	gÃwroÙ
->
	gchdid
[0] = 
m_roÙ
;

2299 
	gÃwroÙ
->
	gchdid
[1] = 
Ãwchd
;

2301 
	gÃwroÙ
->
	g¦Ùu£
 = 1;

2303 
	gm_roÙ
 = 
ÃwroÙ
;

2307 ià(
	gr
.
	g£cÚd
è++
	gm_¡©s
.
	g™emcouÁ
;

2309 #ifdeà
BTREE_DEBUG


2310 ià(
	gdebug
è
´št
(
¡d
::
cout
);

2313 ià(
	g£lfv”ify
) {

2314 
v”ify
();

2315 
BTREE_ASSERT
(
exi¡s
(
key
));

2318  
	gr
;

2328 
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
š£¹_desûnd
(
node
* 
n
,

2329 cÚ¡ 
key_ty³
& 
key
, cÚ¡ 
d©a_ty³
& 
v®ue
,

2330 
key_ty³
* 
¥l™key
, 
node
** 
¥l™node
)

2332 ià(!
	gn
->
i¦—âode
())

2334 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
n
);

2336 
key_ty³
 
	gÃwkey
 = key_type();

2337 
node
* 
	gÃwchd
 = 
NULL
;

2339 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

2341 
BTREE_PRINT
("bŒ“::š£¹_desûnd iÁØ" << 
šÃr
->
chdid
[
¦Ù
]);

2342 
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
	gr
 = 
š£¹_desûnd
(
šÃr
->
chdid
[
¦Ù
],

2343 
key
, 
v®ue
, &
Ãwkey
, &
Ãwchd
);

2345 ià(
	gÃwchd
)

2347 
BTREE_PRINT
("bŒ“::š£¹_desûnd‚ewchd w™h key " << 
Ãwkey
 << "‚od" << 
Ãwchd
 << "‡ˆ¦Ù " << 
¦Ù
);

2349 ià(
	gšÃr
->
isfuÎ
())

2351 
¥l™_šÃr_node
(
šÃr
, 
¥l™key
, 
¥l™node
, 
¦Ù
);

2353 
BTREE_PRINT
("bŒ“::š£¹_desûnd dÚ¥l™_šÃr:…ut¦Ù: " << 
¦Ù
 << "…utkey: " << 
Ãwkey
 << " upkey: " << *
¥l™key
);

2355 #ifdeà
BTREE_DEBUG


2356 ià(
	gdebug
)

2358 
´št_node
(
¡d
::
cout
, 
šÃr
);

2359 
´št_node
(
¡d
::
cout
, *
¥l™node
);

2364 
BTREE_PRINT
("bŒ“::š£¹_desûnd sw™ch: " << 
¦Ù
 << " > " << 
šÃr
->
¦Ùu£
 + 1);

2366 ià(
	g¦Ù
 =ğ
šÃr
->
¦Ùu£
 + 1 && iÂ”->¦Ùu£ < (*
¥l™node
)->slotuse)

2372 
BTREE_ASSERT
(
šÃr
->
¦Ùu£
 + 1 < 
šÃr¦Ùmax
);

2374 
šÃr_node
* 
	g¥l™šÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(*
¥l™node
);

2377 
	gšÃr
->
	g¦Ùkey
[
šÃr
->
¦Ùu£
] = *
¥l™key
;

2378 
	gšÃr
->
	gchdid
[
šÃr
->
¦Ùu£
 + 1] = 
¥l™šÃr
->
chdid
[0];

2379 
	gšÃr
->
	g¦Ùu£
++;

2382 
	g¥l™šÃr
->
	gchdid
[0] = 
Ãwchd
;

2383 *
	g¥l™key
 = 
Ãwkey
;

2385  
	gr
;

2387 ià(
	g¦Ù
 >ğ
šÃr
->
¦Ùu£
 + 1)

2392 
¦Ù
 -ğ
šÃr
->
¦Ùu£
 + 1;

2393 
	gšÃr
 = 
¡©ic_ÿ¡
<
šÃr_node
*>(*
¥l™node
);

2394 
BTREE_PRINT
("bŒ“::š£¹_desûnd sw™chšgØ¥l™‹d‚od" << 
šÃr
 << " slÙ " << 
¦Ù
);

2399 
BTREE_ASSERT
(
¦Ù
 >ğ0 && slÙ <ğ
šÃr
->
¦Ùu£
);

2401 
	g¡d
::
cİy_backw¬d
(
šÃr
->
¦Ùkey
 + 
¦Ù
, iÂ”->¦Ùkey + iÂ”->
¦Ùu£
,

2402 
šÃr
->
¦Ùkey
 + iÂ”->
¦Ùu£
 + 1);

2403 
	g¡d
::
cİy_backw¬d
(
šÃr
->
chdid
 + 
¦Ù
, iÂ”->chdid + iÂ”->
¦Ùu£
 + 1,

2404 
šÃr
->
chdid
 + iÂ”->
¦Ùu£
 + 2);

2406 
	gšÃr
->
	g¦Ùkey
[
¦Ù
] = 
Ãwkey
;

2407 
	gšÃr
->
	gchdid
[
¦Ù
 + 1] = 
Ãwchd
;

2408 
	gšÃr
->
	g¦Ùu£
++;

2411  
	gr
;

2415 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
n
);

2416 
	g¦Ùu£
 = 
Ëaf
->
couÁ
();

2418 
	g¦Ù
 = 
Ëaf_fšd_low”
(
Ëaf
, 
key
);

2420 ià(!
	g®low_du¶iÿ‹s
 && 
	g¦Ù
 < 
	g¦Ùu£
 && 
key_equ®
(
key
, 
Ëaf
->
¦Ùkey
[
¦Ù
])) {

2421  
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
>(™”©Ü(
Ëaf
, 
¦Ù
), 
	gçl£
);

2424 ià(
	gËaf
->
isfuÎ
())

2426 
¥l™_Ëaf_node
(
Ëaf
, 
¥l™key
, 
¥l™node
);

2429 ià(
	g¦Ù
 >ğ
¦Ùu£
)

2431 
¦Ù
 -ğ
¦Ùu£
;

2432 
	gËaf
 = 
¡©ic_ÿ¡
<
Ëaf_node
*>(*
¥l™node
);

2434 
	g¦Ùu£
 = 
Ëaf
->
couÁ
();

2438 
Ëaf_node
 *
	gshadow_Ëaf
 = 
®loÿ‹_Ëaf
();

2439 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
,†—f->¦Ùkey + 
¦Ùu£
, 
shadow_Ëaf
->slotkey);

2440 
d©a_cİy
(
Ëaf
->
¦Ùd©a
,†—f->¦Ùd©¨+ 
¦Ùu£
, 
shadow_Ëaf
->slotdata);

2441 
	g¡d
::
cİy
(
Ëaf
->
bs
,†—f->bs+
¦Ùu£
, 
shadow_Ëaf
->bs);

2443 
nv_æush
((*)
shadow_Ëaf
, (
Ëaf_node
));

2446 
BTREE_ASSERT
(
¦Ù
 >ğ0 && slÙ <ğ
¦Ùu£
);

2448 
	g¡d
::
cİy_backw¬d
(
Ëaf
->
¦Ùkey
 + 
¦Ù
,†—f->¦Ùkey + 
¦Ùu£
,

2449 
Ëaf
->
¦Ùkey
 + 
¦Ùu£
 + 1);

2450 
d©a_cİy_backw¬d
(
Ëaf
->
¦Ùd©a
 + 
¦Ù
,†—f->¦Ùd©¨+ 
¦Ùu£
,

2451 
Ëaf
->
¦Ùd©a
 + 
¦Ùu£
 + 1);

2452 
	gËaf
->
	g¦Ùkey
[
¦Ù
] = 
key
;

2453 ià(!
	gu£d_as_£t
è
	gËaf
->
	g¦Ùd©a
[
¦Ù
] = 
v®ue
;

2455 
	gËaf
->
b™m­_£t
(
¦Ùu£
);

2456 
nv_æush
((*)
Ëaf
, (
Ëaf_node
));

2457 
nv_ä“
(
vmp
, (*)
shadow_Ëaf
);

2459 ià(
	g¥l™node
 && 
	gËaf
 !ğ*
¥l™node
 && 
¦Ù
 =ğ
Ëaf
->
¦Ùu£
 - 1)

2464 *
¥l™key
 = 
key
;

2467  
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
>(™”©Ü(
Ëaf
, 
¦Ù
), 
	gŒue
);

2473 
¥l™_Ëaf_node
(
Ëaf_node
* 
Ëaf
, 
key_ty³
* 
_Ãwkey
, 
node
** 
_ÃwËaf
)

2475 
BTREE_ASSERT
(
Ëaf
->
isfuÎ
());

2476 
	g¦Ùu£
 = 
Ëaf
->
couÁ
();

2477 
	gmid
 = (
¦Ùu£
 >> 1);

2479 
BTREE_PRINT
("bŒ“::¥l™_Ëaf_nodÚ " << 
Ëaf
);

2481 
Ëaf_node
* 
	gÃwËaf
 = 
®loÿ‹_Ëaf
();

2483 
	gÃwËaf
->
	g¦Ùu£
 = 
¦Ùu£
 - 
mid
;

2485 
	gÃwËaf
->
	gÃx—f
 = 
Ëaf
->
Ãx—f
;

2486 ià(
	gÃwËaf
->
	gÃx—f
 =ğ
NULL
) {

2487 
BTREE_ASSERT
(
Ëaf
 =ğ
m_Ëaf
);

2488 
	gm_Ëaf
 = 
ÃwËaf
;

2491 
	gÃwËaf
->
	gÃx—f
->
	g´evËaf
 = 
ÃwËaf
;

2494 
Ëaf_node
 *
	gshadow_Ëaf
 = 
®loÿ‹_Ëaf
();

2495 if(!
	gshadow_Ëaf
){

2496 
	gcout
 << "”rÜ oÀ®loÿ‹ shadow_Ëaà" << 
	g’dl
;

2498 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
,†—f->¦Ùkey + 
¦Ùu£
,

2499 
shadow_Ëaf
->
¦Ùkey
);

2500 
d©a_cİy
(
Ëaf
->
¦Ùd©a
,†—f->¦Ùd©¨+ 
¦Ùu£
,

2501 
shadow_Ëaf
->
¦Ùd©a
);

2502 
	g¡d
::
cİy
(
Ëaf
->
bs
,†—f->b + 
¦Ùu£
, 
shadow_Ëaf
->bs);

2503 
nv_æush
((*)
shadow_Ëaf
, (
Ëaf_node
));

2506 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
 + 
mid
,†—f->¦Ùkey + 
¦Ùu£
,

2507 
ÃwËaf
->
¦Ùkey
);

2508 
d©a_cİy
(
Ëaf
->
¦Ùd©a
 + 
mid
,†—f->¦Ùd©¨+ 
¦Ùu£
,

2509 
ÃwËaf
->
¦Ùd©a
);

2510 
	g¡d
::
cİy
(
Ëaf
->
bs
 + 
mid
,†—f->b + 
¦Ùu£
,

2511 
ÃwËaf
->
bs
);

2514 
	gi
 = 
mid
; i < 
	g¦Ùu£
; i++) {

2515 
	gËaf
->
b™m­_ş—r
(
i
);

2517 
	gËaf
->
	gÃx—f
 = 
ÃwËaf
;

2518 
	gÃwËaf
->
	g´evËaf
 = 
Ëaf
;

2520 *
	g_Ãwkey
 = 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1];

2521 *
	g_ÃwËaf
 = 
ÃwËaf
;

2523 
nv_æush
((*)
ÃwËaf
, (
Ëaf_node
));

2524 
nv_æush
((*)
Ëaf
, (
Ëaf_node
));

2525 
nv_ä“
(
vmp
, (*)
shadow_Ëaf
);

2532 
¥l™_šÃr_node
(
šÃr_node
* 
šÃr
, 
key_ty³
* 
_Ãwkey
, 
node
** 
_ÃwšÃr
, 
add¦Ù
)

2534 
BTREE_ASSERT
(
šÃr
->
isfuÎ
());

2536 
	gmid
 = (
šÃr
->
¦Ùu£
 >> 1);

2538 
BTREE_PRINT
("bŒ“::¥l™_šÃr: mid " << 
mid
 << "‡dd¦Ù " << 
add¦Ù
);

2542 ià(
	gadd¦Ù
 <ğ
mid
 && mid > 
šÃr
->
¦Ùu£
 - (mid + 1))

2543 
mid
--;

2545 
BTREE_PRINT
("bŒ“::¥l™_šÃr: mid " << 
mid
 << "‡dd¦Ù " << 
add¦Ù
);

2547 
BTREE_PRINT
("bŒ“::¥l™_šÃr_nodÚ " << 
šÃr
 << " iÁØtwØnode " << 
mid
 << "‡nd " << iÂ”->
¦Ùu£
 - (mid + 1) << " sized");

2549 
šÃr_node
* 
	gÃwšÃr
 = 
®loÿ‹_šÃr
(
šÃr
->
Ëv–
);

2551 
	gÃwšÃr
->
	g¦Ùu£
 = 
šÃr
->
¦Ùu£
 - (
mid
 + 1);

2553 
	g¡d
::
cİy
(
šÃr
->
¦Ùkey
 + 
mid
 + 1, iÂ”->¦Ùkey + iÂ”->
¦Ùu£
,

2554 
ÃwšÃr
->
¦Ùkey
);

2555 
	g¡d
::
cİy
(
šÃr
->
chdid
 + 
mid
 + 1, iÂ”->chdid + iÂ”->
¦Ùu£
 + 1,

2556 
ÃwšÃr
->
chdid
);

2558 
	gšÃr
->
	g¦Ùu£
 = 
mid
;

2560 *
	g_Ãwkey
 = 
šÃr
->
¦Ùkey
[
mid
];

2561 *
	g_ÃwšÃr
 = 
ÃwšÃr
;

2564 
	gpublic
:

2569 
‹m¶©e
 <
ty³Çme
 
I‹¿tÜ
>

2570 
bulk_lßd
(
I‹¿tÜ
 
ibegš
, I‹¿tÜ 
›nd
)

2572 
BTREE_ASSERT
(
em±y
());

2574 
	gm_¡©s
.
	g™emcouÁ
 = 
›nd
 - 
ibegš
;

2577 
size_t
 
	gnum_™ems
 = 
›nd
 - 
ibegš
;

2578 
size_t
 
	gnum_Ëaves
 = (
num_™ems
 + 
Ëaf¦Ùmax
 - 1) /†eafslotmax;

2580 
BTREE_PRINT
("bŒ“::bulk_lßd,†ev– 0: " << 
m_¡©s
.
™emcouÁ
 << " i‹m štØ" << 
num_Ëaves
 << "†—ve w™h u°tØ" << ((
›nd
 - 
ibegš
 +‚um_leaves - 1) /‚um_leaves) << " items…er†eaf.");

2582 
I‹¿tÜ
 
	g™
 = 
ibegš
;

2583 
size_t
 
	gi
 = 0; i < 
	gnum_Ëaves
; ++i)

2586 
Ëaf_node
* 
	gËaf
 = 
®loÿ‹_Ëaf
();

2590 
	gËaf
->
	g¦Ùu£
 = 
¡©ic_ÿ¡
<>(
num_™ems
 / (
num_Ëaves
 - 
i
));

2591 
size_t
 
	gs
 = 0; s < 
	gËaf
->
	g¦Ùu£
; ++s, ++
	g™
)

2592 
	gËaf
->
£t_¦Ù
(
s
, *
™
);

2594 ià(
	gm_Ëaf
 !ğ
NULL
) {

2595 
m_Ëaf
->
Ãx—f
 = 
Ëaf
;

2596 
	gËaf
->
	g´evËaf
 = 
m_Ëaf
;

2599 
	gm_h—dËaf
 = 
Ëaf
;

2601 
	gm_Ëaf
 = 
Ëaf
;

2603 
	gnum_™ems
 -ğ
Ëaf
->
¦Ùu£
;

2606 
BTREE_ASSERT
(
™
 =ğ
›nd
 && 
num_™ems
 == 0);

2609 ià(
	gm_h—dËaf
 =ğ
m_Ëaf
) {

2610 
m_roÙ
 = 
m_h—dËaf
;

2614 
BTREE_ASSERT
(
m_¡©s
.
Ëaves
 =ğ
num_Ëaves
);

2617 
size_t
 
	gnum_·»Ás
 = (
num_Ëaves
 + (
šÃr¦Ùmax
 + 1) - 1) / (innerslotmax + 1);

2619 
BTREE_PRINT
("bŒ“::bulk_lßd,†ev– 1: " << 
num_Ëaves
 << "†—ve š " << 
num_·»Ás
 << " inner‚odes with upo " << ((num_leaves +‚um_parents - 1) /‚um_parents) << "†eaves…er inner‚ode.");

2622 
	g¡d
::
	t·œ
<
	tšÃr_node
*, cÚ¡ 
	tkey_ty³
*> 
	tÃxev–_ty³
;

2623 
Ãxev–_ty³
* 
	gÃxev–
 = 
Ãw
‚exev–_ty³[
num_·»Ás
];

2625 
Ëaf_node
* 
	gËaf
 = 
m_h—dËaf
;

2626 
size_t
 
	gi
 = 0; i < 
	gnum_·»Ás
; ++i)

2629 
šÃr_node
* 
	gn
 = 
®loÿ‹_šÃr
(1);

2631 
	gn
->
	g¦Ùu£
 = 
¡©ic_ÿ¡
<>(
num_Ëaves
 / (
num_·»Ás
 - 
i
));

2632 
BTREE_ASSERT
(
n
->
¦Ùu£
 > 0);

2633 --
	gn
->
	g¦Ùu£
;

2636 
	gs
 = 0; s < 
	gn
->
	g¦Ùu£
; ++s)

2638 
	gn
->
	g¦Ùkey
[
s
] = 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1];

2639 
	gn
->
	gchdid
[
s
] = 
Ëaf
;

2640 
	gËaf
 = 
Ëaf
->
Ãx—f
;

2642 
	gn
->
	gchdid
[
n
->
¦Ùu£
] = 
Ëaf
;

2645 
	gÃxev–
[
i
].
	gfœ¡
 = 
n
;

2646 
	gÃxev–
[
i
].
	g£cÚd
 = &
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1];

2648 
	gËaf
 = 
Ëaf
->
Ãx—f
;

2649 
	gnum_Ëaves
 -ğ
n
->
¦Ùu£
 + 1;

2652 
BTREE_ASSERT
(
Ëaf
 =ğ
NULL
 && 
num_Ëaves
 == 0);

2655 
	gËv–
 = 2; 
	gnum_·»Ás
 != 1; ++level)

2657 
size_t
 
	gnum_chd»n
 = 
num_·»Ás
;

2658 
	gnum_·»Ás
 = (
num_chd»n
 + (
šÃr¦Ùmax
 + 1) - 1) / (innerslotmax + 1);

2660 
BTREE_PRINT
("bŒ“::bulk_lßd,†ev– " << 
Ëv–
 << ": " << 
num_chd»n
 << " chd»Àš " << 
num_·»Ás
 << " inner‚odes with upo " << ((num_children +‚um_parents - 1) /‚um_parents) << " children…er inner‚ode.");

2662 
size_t
 
	gšÃr_šdex
 = 0;

2663 
size_t
 
	gi
 = 0; i < 
	gnum_·»Ás
; ++i)

2666 
šÃr_node
* 
	gn
 = 
®loÿ‹_šÃr
(
Ëv–
);

2668 
	gn
->
	g¦Ùu£
 = 
¡©ic_ÿ¡
<>(
num_chd»n
 / (
num_·»Ás
 - 
i
));

2669 
BTREE_ASSERT
(
n
->
¦Ùu£
 > 0);

2670 --
	gn
->
	g¦Ùu£
;

2673 
	gs
 = 0; s < 
	gn
->
	g¦Ùu£
; ++s)

2675 
	gn
->
	g¦Ùkey
[
s
] = *
Ãxev–
[
šÃr_šdex
].
£cÚd
;

2676 
	gn
->
	gchdid
[
s
] = 
Ãxev–
[
šÃr_šdex
].
fœ¡
;

2677 ++
	gšÃr_šdex
;

2679 
	gn
->
	gchdid
[
n
->
¦Ùu£
] = 
Ãxev–
[
šÃr_šdex
].
fœ¡
;

2683 
	gÃxev–
[
i
].
	gfœ¡
 = 
n
;

2684 
	gÃxev–
[
i
].
	g£cÚd
 = 
Ãxev–
[
šÃr_šdex
].
£cÚd
;

2686 ++
	gšÃr_šdex
;

2687 
	gnum_chd»n
 -ğ
n
->
¦Ùu£
 + 1;

2690 
BTREE_ASSERT
(
num_chd»n
 == 0);

2693 
	gm_roÙ
 = 
Ãxev–
[0].
fœ¡
;

2694 
	gd–‘e
[] 
	gÃxev–
;

2696 ià(
	g£lfv”ify
è
v”ify
();

2699 
	g´iv©e
:

2703 
	e»suÉ_æags_t


2706 
bŒ“_ok
 = 0,

2709 
	gbŒ“_nÙ_found
 = 1,

2713 
	gbŒ“_upd©e_Ï¡key
 = 2,

2717 
	gbŒ“_fixm”ge
 = 4

2722 
	s»suÉ_t


2725 
»suÉ_æags_t
 
	gæags
;

2728 
key_ty³
 
	gÏ¡key
;

2732 
šlše
 
ex¶ic™
 
»suÉ_t
(
»suÉ_æags_t
 
f
 = 
bŒ“_ok
)

2733 : 
æags
(
f
), 
Ï¡key
()

2737 
šlše
 
»suÉ_t
(
»suÉ_æags_t
 
f
, cÚ¡ 
key_ty³
& 
k
)

2738 : 
æags
(
f
), 
Ï¡key
(
k
)

2742 
šlše
 
boŞ
 
has
(
»suÉ_æags_t
 
f
) const

2744  (
	gæags
 & 
	gf
) != 0;

2748 
šlše
 
	g»suÉ_t
& 
	gİ”©Ü
 |ğ(cÚ¡ 
»suÉ_t
& 
Ùh”
)

2750 
æags
 = 
»suÉ_æags_t
(æag | 
Ùh”
.flags);

2753 ià(
	gÙh”
.
has
(
bŒ“_upd©e_Ï¡key
))

2754 
	gÏ¡key
 = 
Ùh”
.
Ï¡key
;

2756  *
	gthis
;

2760 
	gpublic
:

2765 
boŞ
 
”a£_Úe
(cÚ¡ 
key_ty³
& 
key
)

2767 
BTREE_PRINT
("bŒ“::”a£_Úe(" << 
key
 << "èÚ bŒ“ siz" << 
size
());

2769 ià(
	g£lfv”ify
è
v”ify
();

2771 ià(!
	gm_roÙ
è 
	gçl£
;

2773 
»suÉ_t
 
	g»suÉ
 = 
”a£_Úe_desûnd
(
key
, 
m_roÙ
, 
NULL
, NULL, NULL, NULL, NULL, 0);

2775 ià(!
	g»suÉ
.
has
(
bŒ“_nÙ_found
))

2776 --
	gm_¡©s
.
	g™emcouÁ
;

2778 #ifdeà
BTREE_DEBUG


2779 ià(
	gdebug
è
´št
(
¡d
::
cout
);

2781 ià(
	g£lfv”ify
è
v”ify
();

2783  !
	g»suÉ
.
has
(
bŒ“_nÙ_found
);

2788 
size_ty³
 
”a£
(cÚ¡ 
key_ty³
& 
key
)

2790 
size_ty³
 
	gc
 = 0;

2792 
”a£_Úe
(
key
))

2794 ++
	gc
;

2795 ià(!
	g®low_du¶iÿ‹s
) ;

2798  
	gc
;

2802 
”a£
(
™”©Ü
 
™”
)

2804 
BTREE_PRINT
("bŒ“::”a£_™”(" << 
™”
.
cu¼node
 << "," << i‹r.
cu¼¦Ù
 << "èÚ bŒ“ siz" << 
size
());

2806 ià(
	g£lfv”ify
è
v”ify
();

2808 ià(!
	gm_roÙ
) ;

2810 
»suÉ_t
 
	g»suÉ
 = 
”a£_™”_desûnd
(
™”
, 
m_roÙ
, 
NULL
, NULL, NULL, NULL, NULL, 0);

2812 ià(!
	g»suÉ
.
has
(
bŒ“_nÙ_found
))

2813 --
	gm_¡©s
.
	g™emcouÁ
;

2815 #ifdeà
BTREE_DEBUG


2816 ià(
	gdebug
è
´št
(
¡d
::
cout
);

2818 ià(
	g£lfv”ify
è
v”ify
();

2821 #ifdeà
BTREE_TODO


2824 
”a£
(
™”©Ü
 , iterator )

2826 
abÜt
();

2830 
	g´iv©e
:

2842 
»suÉ_t
 
”a£_Úe_desûnd
(cÚ¡ 
key_ty³
& 
key
,

2843 
node
* 
cu¼
,

2844 
node
* 
Ëá
,‚ode* 
right
,

2845 
šÃr_node
* 
Ëá·»Á
, iÂ”_node* 
righ¬’t
,

2846 
šÃr_node
* 
·»Á
, 
·»Á¦Ù
)

2848 ià(
	gcu¼
->
i¦—âode
())

2850 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
cu¼
);

2851 
Ëaf_node
* 
	gËáËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
Ëá
);

2852 
Ëaf_node
* 
	grigh—f
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
right
);

2854 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

2856 ià(
	g¦Ù
 >ğ
Ëaf
->
¦Ùu£
 || !
key_equ®
(
key
,†—f->
¦Ùkey
[
¦Ù
]))

2858 
BTREE_PRINT
("Could‚Ù fšd key " << 
key
 << "oƒrase.");

2860  
»suÉ_t
(
bŒ“_nÙ_found
);

2863 
BTREE_PRINT
("Found key iÀËaà" << 
cu¼
 << "‡ˆ¦Ù " << 
¦Ù
);

2865 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
 + 
¦Ù
 + 1,†—f->¦Ùkey +†—f->
¦Ùu£
,

2866 
Ëaf
->
¦Ùkey
 + 
¦Ù
);

2867 
d©a_cİy
(
Ëaf
->
¦Ùd©a
 + 
¦Ù
 + 1,†—f->¦Ùd©¨+†—f->
¦Ùu£
,

2868 
Ëaf
->
¦Ùd©a
 + 
¦Ù
);

2870 
	gËaf
->
	g¦Ùu£
--;

2872 
»suÉ_t
 
	gmy»s
 =„esuÉ_t(
bŒ“_ok
);

2876 ià(
	g¦Ù
 =ğ
Ëaf
->
¦Ùu£
)

2878 ià(
·»Á
 && 
·»Á¦Ù
 <…¬’t->
¦Ùu£
)

2880 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
cu¼
);

2881 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1];

2885 ià(
	gËaf
->
	g¦Ùu£
 >= 1)

2887 
BTREE_PRINT
("Schedulšg†a¡keyupd©e: key " << 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1]);

2888 
	gmy»s
 |ğ
»suÉ_t
(
bŒ“_upd©e_Ï¡key
, 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1]);

2892 
BTREE_ASSERT
(
Ëaf
 =ğ
m_roÙ
);

2897 ià(
	gËaf
->
isund”æow
(è&& !Ö—à=ğ
m_roÙ
 && 
Ëaf
->
¦Ùu£
 >= 1))

2903 ià(
ËáËaf
 =ğ
NULL
 && 
righ—f
 == NULL)

2905 
BTREE_ASSERT
(
Ëaf
 =ğ
m_roÙ
);

2906 
BTREE_ASSERT
(
Ëaf
->
¦Ùu£
 == 0);

2908 
ä“_node
(
m_roÙ
);

2910 
	gm_roÙ
 = 
Ëaf
 = 
NULL
;

2911 
	gm_h—dËaf
 = 
m_Ëaf
 = 
NULL
;

2914 
BTREE_ASSERT
(
m_¡©s
.
™emcouÁ
 == 1);

2915 
BTREE_ASSERT
(
m_¡©s
.
Ëaves
 == 0);

2916 
BTREE_ASSERT
(
m_¡©s
.
šÃºodes
 == 0);

2918  
»suÉ_t
(
bŒ“_ok
);

2923 ià((
	gËáËaf
 =ğ
NULL
 || 
ËáËaf
->
isãw
()è&& (
righ—f
 == NULL ||„ightleaf->isfew()))

2925 ià(
Ëá·»Á
 =ğ
·»Á
)

2926 
my»s
 |ğ
m”ge_Ëaves
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
);

2928 
	gmy»s
 |ğ
m”ge_Ëaves
(
Ëaf
, 
righ—f
, 
righ¬’t
);

2931 ià((
	gËáËaf
 !ğ
NULL
 && 
ËáËaf
->
isãw
()è&& (
righ—f
 != NULL && !rightleaf->isfew()))

2933 ià(
righ¬’t
 =ğ
·»Á
)

2934 
my»s
 |ğ
shiá_Ëá_Ëaf
(
Ëaf
, 
righ—f
, 
righ¬’t
, 
·»Á¦Ù
);

2936 
	gmy»s
 |ğ
m”ge_Ëaves
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
);

2939 ià((
	gËáËaf
 !ğ
NULL
 && !
ËáËaf
->
isãw
()è&& (
righ—f
 != NULL &&„ightleaf->isfew()))

2941 ià(
Ëá·»Á
 =ğ
·»Á
)

2942 
shiá_right_Ëaf
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

2944 
	gmy»s
 |ğ
m”ge_Ëaves
(
Ëaf
, 
righ—f
, 
righ¬’t
);

2948 ià(
	gËá·»Á
 =ğ
righ¬’t
)

2950 ià(
ËáËaf
->
¦Ùu£
 <ğ
righ—f
->slotuse)

2951 
my»s
 |ğ
shiá_Ëá_Ëaf
(
Ëaf
, 
righ—f
, 
righ¬’t
, 
·»Á¦Ù
);

2953 
shiá_right_Ëaf
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

2957 ià(
	gËá·»Á
 =ğ
·»Á
)

2958 
shiá_right_Ëaf
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

2960 
	gmy»s
 |ğ
shiá_Ëá_Ëaf
(
Ëaf
, 
righ—f
, 
righ¬’t
, 
·»Á¦Ù
);

2964  
»suÉ_t
(
my»s
);

2968 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
cu¼
);

2969 
šÃr_node
* 
	gËášÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
Ëá
);

2970 
šÃr_node
* 
	grightšÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
right
);

2972 
node
* 
	gmyËá
, * 
	gmyright
;

2973 
šÃr_node
* 
	gmyËá·»Á
, * 
	gmyrigh¬’t
;

2975 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

2977 ià(
	g¦Ù
 == 0) {

2978 
myËá
 = (
Ëá
 =ğ
NULL
è? NULL : (
¡©ic_ÿ¡
<
šÃr_node
*>Öeá))->
chdid
[Ëá->
¦Ùu£
 - 1];

2979 
	gmyËá·»Á
 = 
Ëá·»Á
;

2982 
	gmyËá
 = 
šÃr
->
chdid
[
¦Ù
 - 1];

2983 
	gmyËá·»Á
 = 
šÃr
;

2986 ià(
	g¦Ù
 =ğ
šÃr
->
¦Ùu£
) {

2987 
myright
 = (
right
 =ğ
NULL
è? NULL : (
¡©ic_ÿ¡
<
šÃr_node
*>Ôight))->
chdid
[0];

2988 
	gmyrigh¬’t
 = 
righ¬’t
;

2991 
	gmyright
 = 
šÃr
->
chdid
[
¦Ù
 + 1];

2992 
	gmyrigh¬’t
 = 
šÃr
;

2995 
BTREE_PRINT
("”a£_Úe_desûnd iÁØ" << 
šÃr
->
chdid
[
¦Ù
]);

2997 
»suÉ_t
 
	g»suÉ
 = 
”a£_Úe_desûnd
(
key
,

2998 
šÃr
->
chdid
[
¦Ù
],

2999 
myËá
, 
myright
,

3000 
myËá·»Á
, 
myrigh¬’t
,

3001 
šÃr
, 
¦Ù
);

3003 
»suÉ_t
 
	gmy»s
 =„esuÉ_t(
bŒ“_ok
);

3005 ià(
	g»suÉ
.
has
(
bŒ“_nÙ_found
))

3007  
»suÉ_t
(
»suÉ
);

3010 ià(
	g»suÉ
.
has
(
bŒ“_upd©e_Ï¡key
))

3012 ià(
	g·»Á
 && 
	g·»Á¦Ù
 <…¬’t->
	g¦Ùu£
)

3014 
BTREE_PRINT
("Fixšg†a¡keyupd©e: key " << 
»suÉ
.
Ï¡key
 << " iÁØ·»Á " << 
·»Á
 << "‡ˆ·»Á¦Ù " << 
·»Á¦Ù
);

3016 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
cu¼
);

3017 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
»suÉ
.
Ï¡key
;

3021 
BTREE_PRINT
("FÜw¬dšg†a¡keyupd©e: key " << 
»suÉ
.
Ï¡key
);

3022 
	gmy»s
 |ğ
»suÉ_t
(
bŒ“_upd©e_Ï¡key
, 
»suÉ
.
Ï¡key
);

3026 ià(
	g»suÉ
.
has
(
bŒ“_fixm”ge
))

3029 ià(
	gšÃr
->
	gchdid
[
¦Ù
]->
	g¦Ùu£
 != 0)

3030 
¦Ù
++;

3033 
BTREE_ASSERT
(
šÃr
->
chdid
[
¦Ù
]->
¦Ùu£
 == 0);

3035 
ä“_node
(
šÃr
->
chdid
[
¦Ù
]);

3037 
	g¡d
::
cİy
(
šÃr
->
¦Ùkey
 + 
¦Ù
, iÂ”->¦Ùkey + iÂ”->
¦Ùu£
,

3038 
šÃr
->
¦Ùkey
 + 
¦Ù
 - 1);

3039 
	g¡d
::
cİy
(
šÃr
->
chdid
 + 
¦Ù
 + 1, iÂ”->chdid + iÂ”->
¦Ùu£
 + 1,

3040 
šÃr
->
chdid
 + 
¦Ù
);

3042 
	gšÃr
->
	g¦Ùu£
--;

3044 ià(
	gšÃr
->
	gËv–
 == 1)

3047 
¦Ù
--;

3048 
Ëaf_node
* 
	gchd
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
šÃr
->
chdid
[
¦Ù
]);

3049 
	gšÃr
->
	g¦Ùkey
[
¦Ù
] = 
chd
->
¦Ùkey
[chd->
¦Ùu£
 - 1];

3053 ià(
	gšÃr
->
isund”æow
(è&& !(šÃ¸=ğ
m_roÙ
 && 
šÃr
->
¦Ùu£
 >= 1))

3056 ià(
ËášÃr
 =ğ
NULL
 && 
rightšÃr
 == NULL)

3058 
BTREE_ASSERT
(
šÃr
 =ğ
m_roÙ
);

3059 
BTREE_ASSERT
(
šÃr
->
¦Ùu£
 == 0);

3061 
	gm_roÙ
 = 
šÃr
->
chdid
[0];

3063 
	gšÃr
->
	g¦Ùu£
 = 0;

3064 
ä“_node
(
šÃr
);

3066  
»suÉ_t
(
bŒ“_ok
);

3071 ià((
	gËášÃr
 =ğ
NULL
 || 
ËášÃr
->
isãw
()è&& (
rightšÃr
 == NULL ||„ightinner->isfew()))

3073 ià(
Ëá·»Á
 =ğ
·»Á
)

3074 
my»s
 |ğ
m”ge_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3076 
	gmy»s
 |ğ
m”ge_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3079 ià((
	gËášÃr
 !ğ
NULL
 && 
ËášÃr
->
isãw
()è&& (
rightšÃr
 != NULL && !rightinner->isfew()))

3081 ià(
righ¬’t
 =ğ
·»Á
)

3082 
shiá_Ëá_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3084 
	gmy»s
 |ğ
m”ge_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3087 ià((
	gËášÃr
 !ğ
NULL
 && !
ËášÃr
->
isãw
()è&& (
rightšÃr
 != NULL &&„ightinner->isfew()))

3089 ià(
Ëá·»Á
 =ğ
·»Á
)

3090 
shiá_right_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3092 
	gmy»s
 |ğ
m”ge_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3096 ià(
	gËá·»Á
 =ğ
righ¬’t
)

3098 ià(
ËášÃr
->
¦Ùu£
 <ğ
rightšÃr
->slotuse)

3099 
shiá_Ëá_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3101 
shiá_right_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3105 ià(
	gËá·»Á
 =ğ
·»Á
)

3106 
shiá_right_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3108 
shiá_Ëá_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3112  
»suÉ_t
(
my»s
);

3131 
»suÉ_t
 
”a£_™”_desûnd
(cÚ¡ 
™”©Ü
& 
™”
,

3132 
node
* 
cu¼
,

3133 
node
* 
Ëá
,‚ode* 
right
,

3134 
šÃr_node
* 
Ëá·»Á
, iÂ”_node* 
righ¬’t
,

3135 
šÃr_node
* 
·»Á
, 
·»Á¦Ù
)

3137 ià(
	gcu¼
->
i¦—âode
())

3139 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
cu¼
);

3140 
Ëaf_node
* 
	gËáËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
Ëá
);

3141 
Ëaf_node
* 
	grigh—f
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
right
);

3145 ià(
	gËaf
 !ğ
™”
.
cu¼node
)

3147  
»suÉ_t
(
bŒ“_nÙ_found
);

3150 ià(
	g™”
.
	gcu¼¦Ù
 >ğ
Ëaf
->
¦Ùu£
)

3152 
BTREE_PRINT
("Could‚Ù fšd i‹¿tÜ (" << 
™”
.
cu¼node
 << "," << i‹r.
cu¼¦Ù
 << ")oƒrase. Invalid†eaf‚ode?");

3154  
»suÉ_t
(
bŒ“_nÙ_found
);

3157 
	g¦Ù
 = 
™”
.
cu¼¦Ù
;

3159 
BTREE_PRINT
("Found i‹¿tÜ iÀËaà" << 
cu¼
 << "‡ˆ¦Ù " << 
¦Ù
);

3161 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
 + 
¦Ù
 + 1,†—f->¦Ùkey +†—f->
¦Ùu£
,

3162 
Ëaf
->
¦Ùkey
 + 
¦Ù
);

3163 
d©a_cİy
(
Ëaf
->
¦Ùd©a
 + 
¦Ù
 + 1,†—f->¦Ùd©¨+†—f->
¦Ùu£
,

3164 
Ëaf
->
¦Ùd©a
 + 
¦Ù
);

3166 
	gËaf
->
	g¦Ùu£
--;

3168 
»suÉ_t
 
	gmy»s
 =„esuÉ_t(
bŒ“_ok
);

3172 ià(
	g¦Ù
 =ğ
Ëaf
->
¦Ùu£
)

3174 ià(
·»Á
 && 
·»Á¦Ù
 <…¬’t->
¦Ùu£
)

3176 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
cu¼
);

3177 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1];

3181 ià(
	gËaf
->
	g¦Ùu£
 >= 1)

3183 
BTREE_PRINT
("Schedulšg†a¡keyupd©e: key " << 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1]);

3184 
	gmy»s
 |ğ
»suÉ_t
(
bŒ“_upd©e_Ï¡key
, 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1]);

3188 
BTREE_ASSERT
(
Ëaf
 =ğ
m_roÙ
);

3193 ià(
	gËaf
->
isund”æow
(è&& !Ö—à=ğ
m_roÙ
 && 
Ëaf
->
¦Ùu£
 >= 1))

3199 ià(
ËáËaf
 =ğ
NULL
 && 
righ—f
 == NULL)

3201 
BTREE_ASSERT
(
Ëaf
 =ğ
m_roÙ
);

3202 
BTREE_ASSERT
(
Ëaf
->
¦Ùu£
 == 0);

3204 
ä“_node
(
m_roÙ
);

3206 
	gm_roÙ
 = 
Ëaf
 = 
NULL
;

3207 
	gm_h—dËaf
 = 
m_Ëaf
 = 
NULL
;

3210 
BTREE_ASSERT
(
m_¡©s
.
™emcouÁ
 == 1);

3211 
BTREE_ASSERT
(
m_¡©s
.
Ëaves
 == 0);

3212 
BTREE_ASSERT
(
m_¡©s
.
šÃºodes
 == 0);

3214  
»suÉ_t
(
bŒ“_ok
);

3219 ià((
	gËáËaf
 =ğ
NULL
 || 
ËáËaf
->
isãw
()è&& (
righ—f
 == NULL ||„ightleaf->isfew()))

3221 ià(
Ëá·»Á
 =ğ
·»Á
)

3222 
my»s
 |ğ
m”ge_Ëaves
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
);

3224 
	gmy»s
 |ğ
m”ge_Ëaves
(
Ëaf
, 
righ—f
, 
righ¬’t
);

3227 ià((
	gËáËaf
 !ğ
NULL
 && 
ËáËaf
->
isãw
()è&& (
righ—f
 != NULL && !rightleaf->isfew()))

3229 ià(
righ¬’t
 =ğ
·»Á
)

3230 
my»s
 |ğ
shiá_Ëá_Ëaf
(
Ëaf
, 
righ—f
, 
righ¬’t
, 
·»Á¦Ù
);

3232 
	gmy»s
 |ğ
m”ge_Ëaves
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
);

3235 ià((
	gËáËaf
 !ğ
NULL
 && !
ËáËaf
->
isãw
()è&& (
righ—f
 != NULL &&„ightleaf->isfew()))

3237 ià(
Ëá·»Á
 =ğ
·»Á
)

3238 
shiá_right_Ëaf
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3240 
	gmy»s
 |ğ
m”ge_Ëaves
(
Ëaf
, 
righ—f
, 
righ¬’t
);

3244 ià(
	gËá·»Á
 =ğ
righ¬’t
)

3246 ià(
ËáËaf
->
¦Ùu£
 <ğ
righ—f
->slotuse)

3247 
my»s
 |ğ
shiá_Ëá_Ëaf
(
Ëaf
, 
righ—f
, 
righ¬’t
, 
·»Á¦Ù
);

3249 
shiá_right_Ëaf
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3253 ià(
	gËá·»Á
 =ğ
·»Á
)

3254 
shiá_right_Ëaf
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3256 
	gmy»s
 |ğ
shiá_Ëá_Ëaf
(
Ëaf
, 
righ—f
, 
righ¬’t
, 
·»Á¦Ù
);

3260  
	gmy»s
;

3264 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
cu¼
);

3265 
šÃr_node
* 
	gËášÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
Ëá
);

3266 
šÃr_node
* 
	grightšÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
right
);

3271 
»suÉ_t
 
	g»suÉ
;

3272 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
™”
.
key
());

3274 
	g¦Ù
 <ğ
šÃr
->
¦Ùu£
)

3276 
node
* 
myËá
, * 
myright
;

3277 
šÃr_node
* 
	gmyËá·»Á
, * 
	gmyrigh¬’t
;

3279 ià(
	g¦Ù
 == 0) {

3280 
myËá
 = (
Ëá
 =ğ
NULL
è? NULL : (
¡©ic_ÿ¡
<
šÃr_node
*>Öeá))->
chdid
[Ëá->
¦Ùu£
 - 1];

3281 
	gmyËá·»Á
 = 
Ëá·»Á
;

3284 
	gmyËá
 = 
šÃr
->
chdid
[
¦Ù
 - 1];

3285 
	gmyËá·»Á
 = 
šÃr
;

3288 ià(
	g¦Ù
 =ğ
šÃr
->
¦Ùu£
) {

3289 
myright
 = (
right
 =ğ
NULL
è? NULL : (
¡©ic_ÿ¡
<
šÃr_node
*>Ôight))->
chdid
[0];

3290 
	gmyrigh¬’t
 = 
righ¬’t
;

3293 
	gmyright
 = 
šÃr
->
chdid
[
¦Ù
 + 1];

3294 
	gmyrigh¬’t
 = 
šÃr
;

3297 
BTREE_PRINT
("”a£_™”_desûnd iÁØ" << 
šÃr
->
chdid
[
¦Ù
]);

3299 
	g»suÉ
 = 
”a£_™”_desûnd
(
™”
,

3300 
šÃr
->
chdid
[
¦Ù
],

3301 
myËá
, 
myright
,

3302 
myËá·»Á
, 
myrigh¬’t
,

3303 
šÃr
, 
¦Ù
);

3305 ià(!
	g»suÉ
.
has
(
bŒ“_nÙ_found
))

3310 ià(
	g¦Ù
 < 
	gšÃr
->
	g¦Ùu£
 && 
key_Ëss
(
šÃr
->
¦Ùkey
[
¦Ù
], 
™”
.
key
()))

3311  
»suÉ_t
(
bŒ“_nÙ_found
);

3313 ++
	g¦Ù
;

3316 ià(
	g¦Ù
 > 
	gšÃr
->
	g¦Ùu£
)

3317  
»suÉ_t
(
bŒ“_nÙ_found
);

3319 
»suÉ_t
 
	gmy»s
 =„esuÉ_t(
bŒ“_ok
);

3321 ià(
	g»suÉ
.
has
(
bŒ“_upd©e_Ï¡key
))

3323 ià(
	g·»Á
 && 
	g·»Á¦Ù
 <…¬’t->
	g¦Ùu£
)

3325 
BTREE_PRINT
("Fixšg†a¡keyupd©e: key " << 
»suÉ
.
Ï¡key
 << " iÁØ·»Á " << 
·»Á
 << "‡ˆ·»Á¦Ù " << 
·»Á¦Ù
);

3327 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
cu¼
);

3328 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
»suÉ
.
Ï¡key
;

3332 
BTREE_PRINT
("FÜw¬dšg†a¡keyupd©e: key " << 
»suÉ
.
Ï¡key
);

3333 
	gmy»s
 |ğ
»suÉ_t
(
bŒ“_upd©e_Ï¡key
, 
»suÉ
.
Ï¡key
);

3337 ià(
	g»suÉ
.
has
(
bŒ“_fixm”ge
))

3340 ià(
	gšÃr
->
	gchdid
[
¦Ù
]->
	g¦Ùu£
 != 0)

3341 
¦Ù
++;

3344 
BTREE_ASSERT
(
šÃr
->
chdid
[
¦Ù
]->
¦Ùu£
 == 0);

3346 
ä“_node
(
šÃr
->
chdid
[
¦Ù
]);

3348 
	g¡d
::
cİy
(
šÃr
->
¦Ùkey
 + 
¦Ù
, iÂ”->¦Ùkey + iÂ”->
¦Ùu£
,

3349 
šÃr
->
¦Ùkey
 + 
¦Ù
 - 1);

3350 
	g¡d
::
cİy
(
šÃr
->
chdid
 + 
¦Ù
 + 1, iÂ”->chdid + iÂ”->
¦Ùu£
 + 1,

3351 
šÃr
->
chdid
 + 
¦Ù
);

3353 
	gšÃr
->
	g¦Ùu£
--;

3355 ià(
	gšÃr
->
	gËv–
 == 1)

3358 
¦Ù
--;

3359 
Ëaf_node
* 
	gchd
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
šÃr
->
chdid
[
¦Ù
]);

3360 
	gšÃr
->
	g¦Ùkey
[
¦Ù
] = 
chd
->
¦Ùkey
[chd->
¦Ùu£
 - 1];

3364 ià(
	gšÃr
->
isund”æow
(è&& !(šÃ¸=ğ
m_roÙ
 && 
šÃr
->
¦Ùu£
 >= 1))

3368 ià(
ËášÃr
 =ğ
NULL
 && 
rightšÃr
 == NULL)

3370 
BTREE_ASSERT
(
šÃr
 =ğ
m_roÙ
);

3371 
BTREE_ASSERT
(
šÃr
->
¦Ùu£
 == 0);

3373 
	gm_roÙ
 = 
šÃr
->
chdid
[0];

3375 
	gšÃr
->
	g¦Ùu£
 = 0;

3376 
ä“_node
(
šÃr
);

3378  
»suÉ_t
(
bŒ“_ok
);

3383 ià((
	gËášÃr
 =ğ
NULL
 || 
ËášÃr
->
isãw
()è&& (
rightšÃr
 == NULL ||„ightinner->isfew()))

3385 ià(
Ëá·»Á
 =ğ
·»Á
)

3386 
my»s
 |ğ
m”ge_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3388 
	gmy»s
 |ğ
m”ge_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3391 ià((
	gËášÃr
 !ğ
NULL
 && 
ËášÃr
->
isãw
()è&& (
rightšÃr
 != NULL && !rightinner->isfew()))

3393 ià(
righ¬’t
 =ğ
·»Á
)

3394 
shiá_Ëá_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3396 
	gmy»s
 |ğ
m”ge_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3399 ià((
	gËášÃr
 !ğ
NULL
 && !
ËášÃr
->
isãw
()è&& (
rightšÃr
 != NULL &&„ightinner->isfew()))

3401 ià(
Ëá·»Á
 =ğ
·»Á
)

3402 
shiá_right_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3404 
	gmy»s
 |ğ
m”ge_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3408 ià(
	gËá·»Á
 =ğ
righ¬’t
)

3410 ià(
ËášÃr
->
¦Ùu£
 <ğ
rightšÃr
->slotuse)

3411 
shiá_Ëá_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3413 
shiá_right_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3417 ià(
	gËá·»Á
 =ğ
·»Á
)

3418 
shiá_right_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3420 
shiá_Ëá_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3424  
»suÉ_t
(
my»s
);

3431 
»suÉ_t
 
m”ge_Ëaves
(
Ëaf_node
* 
Ëá
,†—f_node* 
right
, 
šÃr_node
* 
·»Á
)

3433 
BTREE_PRINT
("M”gËaànode " << 
Ëá
 << "‡nd " << 
right
 << " w™h commÚ…¬’ˆ" << 
·»Á
 << ".");

3434 ()
	g·»Á
;

3436 
BTREE_ASSERT
(
Ëá
->
i¦—âode
(è&& 
right
->isleafnode());

3437 
BTREE_ASSERT
(
·»Á
->
Ëv–
 == 1);

3439 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 + 
right
->¦Ùu£ < 
Ëaf¦Ùmax
);

3441 
	g¡d
::
cİy
(
right
->
¦Ùkey
,„ight->¦Ùkey +„ight->
¦Ùu£
,

3442 
Ëá
->
¦Ùkey
 +†eá->
¦Ùu£
);

3443 
d©a_cİy
(
right
->
¦Ùd©a
,„ight->¦Ùd©¨+„ight->
¦Ùu£
,

3444 
Ëá
->
¦Ùd©a
 +†eá->
¦Ùu£
);

3446 
	gËá
->
	g¦Ùu£
 +ğ
right
->
¦Ùu£
;

3448 
	gËá
->
	gÃx—f
 = 
right
->
Ãx—f
;

3449 ià(
	gËá
->
	gÃx—f
)

3450 
	gËá
->
	gÃx—f
->
	g´evËaf
 = 
Ëá
;

3452 
	gm_Ëaf
 = 
Ëá
;

3454 
	gright
->
	g¦Ùu£
 = 0;

3456  
»suÉ_t
(
bŒ“_fixm”ge
);

3462 
»suÉ_t
 
m”ge_šÃr
(
šÃr_node
* 
Ëá
, iÂ”_node* 
right
, iÂ”_node* 
·»Á
, 
·»Á¦Ù
)

3464 
BTREE_PRINT
("M”gšÃ¸node " << 
Ëá
 << "‡nd " << 
right
 << " w™h commÚ…¬’ˆ" << 
·»Á
 << ".");

3466 
BTREE_ASSERT
(
Ëá
->
Ëv–
 =ğ
right
->level);

3467 
BTREE_ASSERT
(
·»Á
->
Ëv–
 =ğ
Ëá
->level + 1);

3469 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
Ëá
);

3471 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 + 
right
->¦Ùu£ < 
šÃr¦Ùmax
);

3473 ià(
	g£lfv”ify
)

3476 
	gËá¦Ù
 = 0;

3477 
	gËá¦Ù
 <ğ
·»Á
->
¦Ùu£
 &&…¬’t->
chdid
[
Ëá¦Ù
] !ğ
Ëá
)

3478 ++
Ëá¦Ù
;

3480 
BTREE_ASSERT
(
Ëá¦Ù
 < 
·»Á
->
¦Ùu£
);

3481 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
] =ğ
Ëá
);

3482 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
 + 1] =ğ
right
);

3484 
BTREE_ASSERT
(
·»Á¦Ù
 =ğ
Ëá¦Ù
);

3488 
	gËá
->
	g¦Ùkey
[
Ëá
->
¦Ùu£
] = 
·»Á
->
¦Ùkey
[
·»Á¦Ù
];

3489 
	gËá
->
	g¦Ùu£
++;

3492 
	g¡d
::
cİy
(
right
->
¦Ùkey
,„ight->¦Ùkey +„ight->
¦Ùu£
,

3493 
Ëá
->
¦Ùkey
 +†eá->
¦Ùu£
);

3494 
	g¡d
::
cİy
(
right
->
chdid
,„ight->chdid +„ight->
¦Ùu£
 + 1,

3495 
Ëá
->
chdid
 +†eá->
¦Ùu£
);

3497 
	gËá
->
	g¦Ùu£
 +ğ
right
->
¦Ùu£
;

3498 
	gright
->
	g¦Ùu£
 = 0;

3500  
»suÉ_t
(
bŒ“_fixm”ge
);

3506 
»suÉ_t
 
shiá_Ëá_Ëaf
(
Ëaf_node
* 
Ëá
,†—f_node* 
right
, 
šÃr_node
* 
·»Á
, 
·»Á¦Ù
)

3508 
BTREE_ASSERT
(
Ëá
->
i¦—âode
(è&& 
right
->isleafnode());

3509 
BTREE_ASSERT
(
·»Á
->
Ëv–
 == 1);

3511 
BTREE_ASSERT
(
Ëá
->
Ãx—f
 =ğ
right
);

3512 
BTREE_ASSERT
(
Ëá
 =ğ
right
->
´evËaf
);

3514 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 < 
right
->slotuse);

3515 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
Ëá
);

3517 
	gshiánum
 = (
right
->
¦Ùu£
 - 
Ëá
->slotuse) >> 1;

3519 
BTREE_PRINT
("Shiášg (Ëafè" << 
shiánum
 << "ƒÁr› tØËá " << 
Ëá
 << " from„ighˆ" << 
right
 << " w™h commÚ…¬’ˆ" << 
·»Á
 << ".");

3521 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 + 
shiánum
 < 
Ëaf¦Ùmax
);

3525 
	g¡d
::
cİy
(
right
->
¦Ùkey
,„ight->¦Ùkey + 
shiánum
,

3526 
Ëá
->
¦Ùkey
 +†eá->
¦Ùu£
);

3527 
d©a_cİy
(
right
->
¦Ùd©a
,„ight->¦Ùd©¨+ 
shiánum
,

3528 
Ëá
->
¦Ùd©a
 +†eá->
¦Ùu£
);

3530 
	gËá
->
	g¦Ùu£
 +ğ
shiánum
;

3534 
	g¡d
::
cİy
(
right
->
¦Ùkey
 + 
shiánum
,„ight->¦Ùkey +„ight->
¦Ùu£
,

3535 
right
->
¦Ùkey
);

3536 
d©a_cİy
(
right
->
¦Ùd©a
 + 
shiánum
,„ight->¦Ùd©¨+„ight->
¦Ùu£
,

3537 
right
->
¦Ùd©a
);

3539 
	gright
->
	g¦Ùu£
 -ğ
shiánum
;

3542 ià(
	g·»Á¦Ù
 < 
	g·»Á
->
	g¦Ùu£
) {

3543 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
Ëá
->
¦Ùkey
[Ëá->
¦Ùu£
 - 1];

3544  
»suÉ_t
(
bŒ“_ok
);

3547  
»suÉ_t
(
bŒ“_upd©e_Ï¡key
, 
Ëá
->
¦Ùkey
[Ëá->
¦Ùu£
 - 1]);

3554 
shiá_Ëá_šÃr
(
šÃr_node
* 
Ëá
, iÂ”_node* 
right
, iÂ”_node* 
·»Á
, 
·»Á¦Ù
)

3556 
BTREE_ASSERT
(
Ëá
->
Ëv–
 =ğ
right
->level);

3557 
BTREE_ASSERT
(
·»Á
->
Ëv–
 =ğ
Ëá
->level + 1);

3559 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 < 
right
->slotuse);

3560 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
Ëá
);

3562 
	gshiánum
 = (
right
->
¦Ùu£
 - 
Ëá
->slotuse) >> 1;

3564 
BTREE_PRINT
("Shiášg (šÃrè" << 
shiánum
 << "ƒÁr› tØËá " << 
Ëá
 << " from„ighˆ" << 
right
 << " w™h commÚ…¬’ˆ" << 
·»Á
 << ".");

3566 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 + 
shiánum
 < 
šÃr¦Ùmax
);

3568 ià(
	g£lfv”ify
)

3572 
	gËá¦Ù
 = 0;

3573 
	gËá¦Ù
 <ğ
·»Á
->
¦Ùu£
 &&…¬’t->
chdid
[
Ëá¦Ù
] !ğ
Ëá
)

3574 ++
Ëá¦Ù
;

3576 
BTREE_ASSERT
(
Ëá¦Ù
 < 
·»Á
->
¦Ùu£
);

3577 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
] =ğ
Ëá
);

3578 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
 + 1] =ğ
right
);

3580 
BTREE_ASSERT
(
Ëá¦Ù
 =ğ
·»Á¦Ù
);

3584 
	gËá
->
	g¦Ùkey
[
Ëá
->
¦Ùu£
] = 
·»Á
->
¦Ùkey
[
·»Á¦Ù
];

3585 
	gËá
->
	g¦Ùu£
++;

3589 
	g¡d
::
cİy
(
right
->
¦Ùkey
,„ight->¦Ùkey + 
shiánum
 - 1,

3590 
Ëá
->
¦Ùkey
 +†eá->
¦Ùu£
);

3591 
	g¡d
::
cİy
(
right
->
chdid
,„ight->chdid + 
shiánum
,

3592 
Ëá
->
chdid
 +†eá->
¦Ùu£
);

3594 
	gËá
->
	g¦Ùu£
 +ğ
shiánum
 - 1;

3597 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
right
->
¦Ùkey
[
shiánum
 - 1];

3601 
	g¡d
::
cİy
(
right
->
¦Ùkey
 + 
shiánum
,„ight->¦Ùkey +„ight->
¦Ùu£
,

3602 
right
->
¦Ùkey
);

3603 
	g¡d
::
cİy
(
right
->
chdid
 + 
shiánum
,„ight->chdid +„ight->
¦Ùu£
 + 1,

3604 
right
->
chdid
);

3606 
	gright
->
	g¦Ùu£
 -ğ
shiánum
;

3612 
shiá_right_Ëaf
(
Ëaf_node
* 
Ëá
,†—f_node* 
right
, 
šÃr_node
* 
·»Á
, 
·»Á¦Ù
)

3614 
BTREE_ASSERT
(
Ëá
->
i¦—âode
(è&& 
right
->isleafnode());

3615 
BTREE_ASSERT
(
·»Á
->
Ëv–
 == 1);

3617 
BTREE_ASSERT
(
Ëá
->
Ãx—f
 =ğ
right
);

3618 
BTREE_ASSERT
(
Ëá
 =ğ
right
->
´evËaf
);

3619 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
Ëá
);

3621 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 > 
right
->slotuse);

3623 
	gshiánum
 = (
Ëá
->
¦Ùu£
 - 
right
->slotuse) >> 1;

3625 
BTREE_PRINT
("Shiášg (Ëafè" << 
shiánum
 << "ƒÁr› tØrighˆ" << 
right
 << " from†eá " << 
Ëá
 << " w™h commÚ…¬’ˆ" << 
·»Á
 << ".");

3627 ià(
	g£lfv”ify
)

3630 
	gËá¦Ù
 = 0;

3631 
	gËá¦Ù
 <ğ
·»Á
->
¦Ùu£
 &&…¬’t->
chdid
[
Ëá¦Ù
] !ğ
Ëá
)

3632 ++
Ëá¦Ù
;

3634 
BTREE_ASSERT
(
Ëá¦Ù
 < 
·»Á
->
¦Ùu£
);

3635 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
] =ğ
Ëá
);

3636 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
 + 1] =ğ
right
);

3638 
BTREE_ASSERT
(
Ëá¦Ù
 =ğ
·»Á¦Ù
);

3643 
BTREE_ASSERT
(
right
->
¦Ùu£
 + 
shiánum
 < 
Ëaf¦Ùmax
);

3645 
	g¡d
::
cİy_backw¬d
(
right
->
¦Ùkey
,„ight->¦Ùkey +„ight->
¦Ùu£
,

3646 
right
->
¦Ùkey
 +„ight->
¦Ùu£
 + 
shiánum
);

3647 
d©a_cİy_backw¬d
(
right
->
¦Ùd©a
,„ight->¦Ùd©¨+„ight->
¦Ùu£
,

3648 
right
->
¦Ùd©a
 +„ight->
¦Ùu£
 + 
shiánum
);

3650 
	gright
->
	g¦Ùu£
 +ğ
shiánum
;

3653 
	g¡d
::
cİy
(
Ëá
->
¦Ùkey
 +†eá->
¦Ùu£
 - 
shiánum
,†eft->slotkey +†eft->slotuse,

3654 
right
->
¦Ùkey
);

3655 
d©a_cİy
(
Ëá
->
¦Ùd©a
 +†eá->
¦Ùu£
 - 
shiánum
,†eft->slotdata +†eft->slotuse,

3656 
right
->
¦Ùd©a
);

3658 
	gËá
->
	g¦Ùu£
 -ğ
shiánum
;

3660 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
Ëá
->
¦Ùkey
[Ëá->
¦Ùu£
 - 1];

3666 
shiá_right_šÃr
(
šÃr_node
* 
Ëá
, iÂ”_node* 
right
, iÂ”_node* 
·»Á
, 
·»Á¦Ù
)

3668 
BTREE_ASSERT
(
Ëá
->
Ëv–
 =ğ
right
->level);

3669 
BTREE_ASSERT
(
·»Á
->
Ëv–
 =ğ
Ëá
->level + 1);

3671 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 > 
right
->slotuse);

3672 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
Ëá
);

3674 
	gshiánum
 = (
Ëá
->
¦Ùu£
 - 
right
->slotuse) >> 1;

3676 
BTREE_PRINT
("Shiášg (Ëafè" << 
shiánum
 << "ƒÁr› tØrighˆ" << 
right
 << " from†eá " << 
Ëá
 << " w™h commÚ…¬’ˆ" << 
·»Á
 << ".");

3678 ià(
	g£lfv”ify
)

3681 
	gËá¦Ù
 = 0;

3682 
	gËá¦Ù
 <ğ
·»Á
->
¦Ùu£
 &&…¬’t->
chdid
[
Ëá¦Ù
] !ğ
Ëá
)

3683 ++
Ëá¦Ù
;

3685 
BTREE_ASSERT
(
Ëá¦Ù
 < 
·»Á
->
¦Ùu£
);

3686 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
] =ğ
Ëá
);

3687 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
 + 1] =ğ
right
);

3689 
BTREE_ASSERT
(
Ëá¦Ù
 =ğ
·»Á¦Ù
);

3694 
BTREE_ASSERT
(
right
->
¦Ùu£
 + 
shiánum
 < 
šÃr¦Ùmax
);

3696 
	g¡d
::
cİy_backw¬d
(
right
->
¦Ùkey
,„ight->¦Ùkey +„ight->
¦Ùu£
,

3697 
right
->
¦Ùkey
 +„ight->
¦Ùu£
 + 
shiánum
);

3698 
	g¡d
::
cİy_backw¬d
(
right
->
chdid
,„ight->chdid +„ight->
¦Ùu£
 + 1,

3699 
right
->
chdid
 +„ight->
¦Ùu£
 + 1 + 
shiánum
);

3701 
	gright
->
	g¦Ùu£
 +ğ
shiánum
;

3704 
	gright
->
	g¦Ùkey
[
shiánum
 - 1] = 
·»Á
->
¦Ùkey
[
·»Á¦Ù
];

3707 
	g¡d
::
cİy
(
Ëá
->
¦Ùkey
 +†eá->
¦Ùu£
 - 
shiánum
 + 1,†eft->slotkey +†eft->slotuse,

3708 
right
->
¦Ùkey
);

3709 
	g¡d
::
cİy
(
Ëá
->
chdid
 +†eá->
¦Ùu£
 - 
shiánum
 + 1,†eft->childid +†eft->slotuse + 1,

3710 
right
->
chdid
);

3713 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
Ëá
->
¦Ùkey
[Ëá->
¦Ùu£
 - 
shiánum
];

3715 
	gËá
->
	g¦Ùu£
 -ğ
shiánum
;

3718 #ifdeà
BTREE_DEBUG


3720 
	gpublic
:

3726 
´št
(
¡d
::
o¡»am
& 
os
) const

3728 ià(
m_roÙ
) {

3729 
´št_node
(
os
, 
m_roÙ
, 0, 
Œue
);

3734 
´št_Ëaves
(
¡d
::
o¡»am
& 
os
) const

3736 
os
 << "Ëaves:" << 
¡d
::
’dl
;

3738 cÚ¡ 
Ëaf_node
* 
	gn
 = 
m_h—dËaf
;

3740 
	gn
)

3742 
	gos
 << " " << 
	gn
 << 
	g¡d
::
’dl
;

3744 
	gn
 = 
n
->
Ãx—f
;

3748 
	g´iv©e
:

3750 
´št_node
(
¡d
::
o¡»am
& 
os
, cÚ¡ 
node
*‚ode, 
d•th
 = 0, 
boŞ
 
»cursive
 = 
çl£
)

3752 
i
 = 0; 
	gi
 < 
	gd•th
; i++è
	gos
 << " ";

3754 
	gos
 << "nod" << 
	gnode
 << "†ev– " <<‚ode->
	gËv–
 << " slÙu£ " <<‚ode->
	g¦Ùu£
 << 
	g¡d
::
’dl
;

3756 ià(
	gnode
->
i¦—âode
())

3758 cÚ¡ 
Ëaf_node
* 
	gËaâode
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
node
);

3760 
	gi
 = 0; i < 
	gd•th
; i++è
	gos
 << " ";

3761 
	gos
 << "†—à´ev " << 
	gËaâode
->
	g´evËaf
 << "‚exˆ" <<†—âode->
	gÃx—f
 << 
	g¡d
::
’dl
;

3763 
	gi
 = 0; i < 
	gd•th
; i++è
	gos
 << " ";

3765 
	g¦Ù
 = 0; slÙ < 
	gËaâode
->
	g¦Ùu£
; ++slot)

3767 
	gos
 << 
	gËaâode
->
	g¦Ùkey
[
¦Ù
] << " ";

3769 
	gos
 << 
	g¡d
::
’dl
;

3773 cÚ¡ 
šÃr_node
* 
	gšÃºode
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
node
);

3775 
	gi
 = 0; i < 
	gd•th
; i++è
	gos
 << " ";

3777 
	g¦Ù
 = 0; slÙ < 
	gšÃºode
->
	g¦Ùu£
; ++slot)

3779 
	gos
 << "(" << 
	gšÃºode
->
	gchdid
[
¦Ù
] << "è" << iÂ”node->
	g¦Ùkey
[slot] << " ";

3781 
	gos
 << "(" << 
	gšÃºode
->
	gchdid
[
šÃºode
->
¦Ùu£
] << ")" << 
	g¡d
::
’dl
;

3783 ià(
	g»cursive
)

3785 
	g¦Ù
 = 0; slÙ < 
	gšÃºode
->
	g¦Ùu£
 + 1; ++slot)

3787 
´št_node
(
os
, 
šÃºode
->
chdid
[
¦Ù
], 
d•th
 + 1, 
»cursive
);

3794 
	gpublic
:

3799 
v”ify
() const

3801 
key_ty³
 
mškey
, 
	gmaxkey
;

3802 
Œ“_¡©s
 
	gv¡©s
;

3804 ià(
	gm_roÙ
)

3806 
v”ify_node
(
m_roÙ
, &
mškey
, &
maxkey
, 
v¡©s
);

3808 
as£¹
(
v¡©s
.
™emcouÁ
 =ğ
m_¡©s
.itemcount);

3809 
as£¹
(
v¡©s
.
Ëaves
 =ğ
m_¡©s
.leaves);

3810 
as£¹
(
v¡©s
.
šÃºodes
 =ğ
m_¡©s
.innernodes);

3812 
v”ify_Ëaæšks
();

3816 
	g´iv©e
:

3818 
v”ify_node
(cÚ¡ 
node
* 
n
, 
key_ty³
* 
mškey
, key_ty³* 
maxkey
, 
Œ“_¡©s
& 
v¡©s
) const

3820 
BTREE_PRINT
("v”ifynod" << 
n
);

3822 ià(
	gn
->
i¦—âode
())

3824 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

3826 
as£¹
(
Ëaf
 =ğ
m_roÙ
 || !Ëaf->
isund”æow
());

3827 
as£¹
(
Ëaf
->
¦Ùu£
 > 0);

3829 
	g¦Ù
 = 0; slÙ < 
	gËaf
->
	g¦Ùu£
 - 1; ++slot)

3831 
as£¹
(
key_Ës£qu®
(
Ëaf
->
¦Ùkey
[
¦Ù
],†eaf->slotkey[slot + 1]));

3834 *
	gmškey
 = 
Ëaf
->
¦Ùkey
[0];

3835 *
	gmaxkey
 = 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1];

3837 
	gv¡©s
.
	gËaves
++;

3838 
	gv¡©s
.
	g™emcouÁ
 +ğ
Ëaf
->
¦Ùu£
;

3842 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

3843 
	gv¡©s
.
	gšÃºodes
++;

3845 
as£¹
(
šÃr
 =ğ
m_roÙ
 || !šÃr->
isund”æow
());

3846 
as£¹
(
šÃr
->
¦Ùu£
 > 0);

3848 
	g¦Ù
 = 0; slÙ < 
	gšÃr
->
	g¦Ùu£
 - 1; ++slot)

3850 
as£¹
(
key_Ës£qu®
(
šÃr
->
¦Ùkey
[
¦Ù
], inner->slotkey[slot + 1]));

3853 
	g¦Ù
 = 0; slÙ <ğ
šÃr
->
¦Ùu£
; ++slot)

3855 cÚ¡ 
node
* 
	gsubnode
 = 
šÃr
->
chdid
[
¦Ù
];

3856 
key_ty³
 
	gsubmškey
 = key_type();

3857 
key_ty³
 
	gsubmaxkey
 = key_type();

3859 
as£¹
(
subnode
->
Ëv–
 + 1 =ğ
šÃr
->level);

3860 
v”ify_node
(
subnode
, &
submškey
, &
submaxkey
, 
v¡©s
);

3862 
BTREE_PRINT
("v”ify subnod" << 
subnode
 << ": " << 
submškey
 << " - " << 
submaxkey
);

3864 ià(
	g¦Ù
 == 0)

3865 *
mškey
 = 
submškey
;

3867 
as£¹
(
key_g»©”equ®
(
submškey
, 
šÃr
->
¦Ùkey
[
¦Ù
 - 1]));

3869 ià(
	g¦Ù
 =ğ
šÃr
->
¦Ùu£
)

3870 *
maxkey
 = 
submaxkey
;

3872 
as£¹
(
key_equ®
(
šÃr
->
¦Ùkey
[
¦Ù
], 
submaxkey
));

3874 ià(
	gšÃr
->
	gËv–
 =ğ1 && 
¦Ù
 < 
šÃr
->
¦Ùu£
)

3878 cÚ¡ 
Ëaf_node
* 
Ëaç
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
šÃr
->
chdid
[
¦Ù
]);

3879 cÚ¡ 
Ëaf_node
* 
	gËafb
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
šÃr
->
chdid
[
¦Ù
 + 1]);

3881 
as£¹
(
Ëaç
->
Ãx—f
 =ğ
Ëafb
);

3882 
as£¹
(
Ëaç
 =ğ
Ëafb
->
´evËaf
);

3883 ()
	gËaç
;

3884 ()
	gËafb
;

3886 ià(
	gšÃr
->
	gËv–
 =ğ2 && 
¦Ù
 < 
šÃr
->
¦Ùu£
)

3889 cÚ¡ 
šÃr_node
* 
·»Áa
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
šÃr
->
chdid
[
¦Ù
]);

3890 cÚ¡ 
šÃr_node
* 
	g·»Áb
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
šÃr
->
chdid
[
¦Ù
 + 1]);

3892 cÚ¡ 
Ëaf_node
* 
	gËaç
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
·»Áa
->
chdid
[·»Áa->
¦Ùu£
]);

3893 cÚ¡ 
Ëaf_node
* 
	gËafb
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
·»Áb
->
chdid
[0]);

3895 
as£¹
(
Ëaç
->
Ãx—f
 =ğ
Ëafb
);

3896 
as£¹
(
Ëaç
 =ğ
Ëafb
->
´evËaf
);

3897 ()
	gËaç
;

3898 ()
	gËafb
;

3905 
v”ify_Ëaæšks
() const

3907 cÚ¡ 
Ëaf_node
* 
	gn
 = 
m_h—dËaf
;

3909 
as£¹
(
n
->
Ëv–
 == 0);

3910 
as£¹
(!
n
 ||‚->
´evËaf
 =ğ
NULL
);

3912 
	g‹¡couÁ
 = 0;

3914 
	gn
)

3916 
as£¹
(
n
->
Ëv–
 == 0);

3917 
as£¹
(
n
->
¦Ùu£
 > 0);

3919 
	g¦Ù
 = 0; slÙ < 
	gn
->
	g¦Ùu£
 - 1; ++slot)

3921 
as£¹
(
key_Ës£qu®
(
n
->
¦Ùkey
[
¦Ù
],‚->slotkey[slot + 1]));

3924 
	g‹¡couÁ
 +ğ
n
->
¦Ùu£
;

3926 ià(
	gn
->
	gÃx—f
)

3928 
as£¹
(
key_Ës£qu®
(
n
->
¦Ùkey
[n->
¦Ùu£
 - 1],‚->
Ãx—f
->slotkey[0]));

3930 
as£¹
(
n
 =ğn->
Ãx—f
->
´evËaf
);

3934 
as£¹
(
m_Ëaf
 =ğ
n
);

3937 
	gn
 = 
n
->
Ãx—f
;

3940 
as£¹
(
‹¡couÁ
 =ğ
size
());

3943 
	g´iv©e
:

3949 
	sdump_h—d”


3952 
sigÇtu»
[12];

3955 
	gv”siÚ
;

3958 
	gkey_ty³_size
;

3961 
	gd©a_ty³_size
;

3964 
	gËaf¦Ùs
;

3967 
	gšÃr¦Ùs
;

3970 
boŞ
 
	g®low_du¶iÿ‹s
;

3973 
size_ty³
 
	g™emcouÁ
;

3977 
šlše
 
fl
()

3980 
	gsigÇtu»
[0] = 's';

3981 
	gsigÇtu»
[1] = 't';

3982 
	gsigÇtu»
[2] = 'x';

3983 
	gsigÇtu»
[3] = '-';

3984 
	gsigÇtu»
[4] = 'b';

3985 
	gsigÇtu»
[5] = 't';

3986 
	gsigÇtu»
[6] = 'r';

3987 
	gsigÇtu»
[7] = 'e';

3988 
	gsigÇtu»
[8] = 'e';

3989 
	gsigÇtu»
[9] = 0;

3990 
	gsigÇtu»
[10] = 0;

3991 
	gsigÇtu»
[11] = 0;

3993 
	gv”siÚ
 = 0;

3994 
	gkey_ty³_size
 = (
ty³Çme
 
£lf_ty³
::
key_ty³
);

3995 
	gd©a_ty³_size
 = (
ty³Çme
 
£lf_ty³
::
d©a_ty³
);

3996 
	gËaf¦Ùs
 = 
£lf_ty³
::
Ëaf¦Ùmax
;

3997 
	gšÃr¦Ùs
 = 
£lf_ty³
::
šÃr¦Ùmax
;

3998 
	g®low_du¶iÿ‹s
 = 
£lf_ty³
::
®low_du¶iÿ‹s
;

4002 
šlše
 
boŞ
 
§me
(cÚ¡ 
dump_h—d”
& 
o
) const

4004  (
	gsigÇtu»
[0] =ğ's' && 
sigÇtu»
[1] == 't' &&

4005 
sigÇtu»
[2] == 'x' && signature[3] == '-' &&

4006 
sigÇtu»
[4] == 'b' && signature[5] == 't' &&

4007 
sigÇtu»
[6] == 'r' && signature[7] == 'e' &&

4008 
sigÇtu»
[8] == 'e' && signature[9] == 0 &&

4009 
sigÇtu»
[10] == 0 && signature[11] == 0)

4010 && (
v”siÚ
 =ğ
o
.version)

4011 && (
key_ty³_size
 =ğ
o
.key_type_size)

4012 && (
d©a_ty³_size
 =ğ
o
.data_type_size)

4013 && (
Ëaf¦Ùs
 =ğ
o
.leafslots)

4014 && (
šÃr¦Ùs
 =ğ
o
.innerslots)

4015 && (
®low_du¶iÿ‹s
 =ğ
o
.allow_duplicates);

4019 
	gpublic
:

4024 
dump
(
¡d
::
o¡»am
& 
os
) const

4026 
dump_h—d”
 
h—d”
;

4027 
	gh—d”
.
fl
();

4028 
	gh—d”
.
	g™emcouÁ
 = 
size
();

4030 
	gos
.
wr™e
(
»š‹½»t_ÿ¡
<*>(&
h—d”
), (header));

4032 ià(
	gm_roÙ
) {

4033 
dump_node
(
os
, 
m_roÙ
);

4041 
boŞ
 
»¡Üe
(
¡d
::
i¡»am
& 
is
)

4043 
dump_h—d”
 
feh—d”
;

4044 
	gis
.
»ad
(
»š‹½»t_ÿ¡
<*>(&
feh—d”
), (fileheader));

4045 ià(!
	gis
.
good
()è 
	gçl£
;

4047 
dump_h—d”
 
	gmyh—d”
;

4048 
	gmyh—d”
.
fl
();

4049 
	gmyh—d”
.
	g™emcouÁ
 = 
feh—d”
.
™emcouÁ
;

4051 ià(!
	gmyh—d”
.
§me
(
feh—d”
))

4053 
BTREE_PRINT
("btree::restore: file header does‚ot match instantiation signature.");

4054  
	gçl£
;

4057 
ş—r
();

4059 ià(
	gfeh—d”
.
	g™emcouÁ
 > 0)

4061 
	gm_roÙ
 = 
»¡Üe_node
(
is
);

4062 ià(
	gm_roÙ
 =ğ
NULL
è 
çl£
;

4064 
	gm_¡©s
.
	g™emcouÁ
 = 
feh—d”
.
™emcouÁ
;

4067 #ifdeà
BTREE_DEBUG


4068 ià(
	gdebug
è
´št
(
¡d
::
cout
);

4070 ià(
	g£lfv”ify
è
v”ify
();

4072  
	gŒue
;

4075 
	g´iv©e
:

4077 
dump_node
(
¡d
::
o¡»am
& 
os
, cÚ¡ 
node
* 
n
) const

4079 
BTREE_PRINT
("dump_nod" << 
n
 << 
¡d
::
’dl
);

4081 ià(
	gn
->
i¦—âode
())

4083 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

4085 
	gos
.
wr™e
(
»š‹½»t_ÿ¡
<cÚ¡ *>(
Ëaf
), (*leaf));

4089 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

4091 
	gos
.
wr™e
(
»š‹½»t_ÿ¡
<cÚ¡ *>(
šÃr
), (*inner));

4093 
	g¦Ù
 = 0; slÙ <ğ
šÃr
->
¦Ùu£
; ++slot)

4095 cÚ¡ 
node
* 
	gsubnode
 = 
šÃr
->
chdid
[
¦Ù
];

4097 
dump_node
(
os
, 
subnode
);

4104 
node
 * 
»¡Üe_node
(
¡d
::
i¡»am
& 
is
)

4106 
node
 
tİ
(0);

4109 
	gis
.
»ad
(
»š‹½»t_ÿ¡
<*>(&
tİ
), (top));

4110 ià(!
	gis
.
good
()è 
	gNULL
;

4112 ià(
	gtİ
.
i¦—âode
())

4114 
Ëaf_node
 
Ëaf
(
tİ
);

4117 
	gis
.
»ad
(
»š‹½»t_ÿ¡
<*>(&
Ëaf
è+ (
tİ
), (leaf) - (top));

4118 ià(!
	gis
.
good
()è 
	gNULL
;

4120 
Ëaf_node
* 
	gÃwËaf
 = 
®loÿ‹_Ëaf
();

4123 *
	gÃwËaf
 = 
Ëaf
;

4126 ià(
	gm_h—dËaf
 =ğ
NULL
) {

4127 
BTREE_ASSERT
(
ÃwËaf
->
´evËaf
 =ğ
NULL
);

4128 
	gm_h—dËaf
 = 
m_Ëaf
 = 
ÃwËaf
;

4131 
	gÃwËaf
->
	g´evËaf
 = 
m_Ëaf
;

4132 
	gm_Ëaf
->
	gÃx—f
 = 
ÃwËaf
;

4133 
	gm_Ëaf
 = 
ÃwËaf
;

4136  
	gÃwËaf
;

4140 
šÃr_node
 
šÃr
(
tİ
);

4143 
	gis
.
»ad
(
»š‹½»t_ÿ¡
<*>(&
šÃr
è+ (
tİ
), (inner) - (top));

4144 ià(!
	gis
.
good
()è 
	gNULL
;

4146 
šÃr_node
* 
	gÃwšÃr
 = 
®loÿ‹_šÃr
(0);

4149 *
	gÃwšÃr
 = 
šÃr
;

4151 
	g¦Ù
 = 0; slÙ <ğ
ÃwšÃr
->
¦Ùu£
; ++slot)

4153 
	gÃwšÃr
->
	gchdid
[
¦Ù
] = 
»¡Üe_node
(
is
);

4156  
	gÃwšÃr
;

	@btree_bitmap_noslotuse.h

32 #iâdeà
STX_STX_BTREE_H_HEADER


33 
	#STX_STX_BTREE_H_HEADER


	)

42 
	~<c¡ršg
>

43 
	~<®gÜ™hm
>

44 
	~<funùiÚ®
>

45 
	~<i¡»am
>

46 
	~<o¡»am
>

47 
	~<memÜy
>

48 
	~<c¡ddef
>

49 
	~<ÿs£¹
>

50 
	~<b™£t
>

51 
	~"nv_back’d.h
"

52 
	~"b™m­.h
"

54 
	#NVRAM_LEN
 1 * 1024 * 1024 * 1024

55 

	)

59 #ifdeà
BTREE_DEBUG


61 
	~<io¡»am
>

64 
	#BTREE_PRINT
(
x
èdØ{ ià(
debug
è(
¡d
::
cout
 << x << std::
’dl
); } 0)

	)

67 
	#BTREE_ASSERT
(
x
èdØ{ 
	`as£¹
(x); } 0)

	)

72 
	#BTREE_PRINT
(
x
èdØ{ } 0)

	)

75 
	#BTREE_ASSERT
(
x
èdØ{ } 0)

	)

80 
	#BTREE_MAX
(
a
, 
b
è(×è< (bè? (bè: (a))

	)

82 #iâdeà
BTREE_FRIENDS


86 
	#BTREE_FRIENDS
 
ä›nd
 
şass
 
bŒ“_ä›nd
;

	)

90 
Çme¥aû
 
	g¡x
 {

94 
	g‹m¶©e
 <
ty³Çme
 
	g_Key
>

95 şas 
	cbŒ“_deçuÉ_£t_Œa™s


97 
	gpublic
:

100 cÚ¡ 
boŞ
 
£lfv”ify
 = 
çl£
;

106 cÚ¡ 
boŞ
 
	gdebug
 = 
çl£
;

110 cÚ¡ 
	gËaf¦Ùs
 = 
BTREE_MAX
(8, 256 / ((
_Key
)));

114 cÚ¡ 
	gšÃr¦Ùs
 = 
BTREE_MAX
(8, 256 / ((
_Key
) + (*)));

120 cÚ¡ 
size_t
 
	gbš£¬ch_th»shŞd
 = 256;

125 
	g‹m¶©e
 <
ty³Çme
 
	g_Key
,y³Çm
	g_D©a
>

126 şas 
	cbŒ“_deçuÉ_m­_Œa™s


128 
	gpublic
:

131 cÚ¡ 
boŞ
 
£lfv”ify
 = 
çl£
;

137 cÚ¡ 
boŞ
 
	gdebug
 = 
çl£
;

141 cÚ¡ 
	gËaf¦Ùs
 = 
BTREE_MAX
(8, 256 / ((
_Key
è+ (
_D©a
)));

145 cÚ¡ 
	gšÃr¦Ùs
 = 
BTREE_MAX
(8, 256 / ((
_Key
) + (*)));

151 cÚ¡ 
size_t
 
	gbš£¬ch_th»shŞd
 = 256;

167 
	g‹m¶©e
 <
ty³Çme
 
	g_Key
,y³Çm
	g_D©a
,

168 
ty³Çme
 
	g_V®ue
 = 
¡d
::
·œ
<
_Key
, 
	g_D©a
>,

169 
ty³Çme
 
	g_Com·»
 = 
¡d
::
Ëss
<
_Key
>,

170 
ty³Çme
 
	g_T¿™s
 = 
bŒ“_deçuÉ_m­_Œa™s
<
_Key
, 
	g_D©a
>,

171 
boŞ
 
	g_Du¶iÿ‹s
 = 
çl£
,

172 
ty³Çme
 
	g_AÎoc
 = 
¡d
::
®loÿtÜ
<
_V®ue
>,

173 
boŞ
 
	g_U£dAsS‘
 = 
çl£
>

174 şas 
	cbŒ“


176 
public
:

181 
_Key
 
	tkey_ty³
;

185 
_D©a
 
	td©a_ty³
;

191 
_V®ue
 
	tv®ue_ty³
;

194 
_Com·»
 
	tkey_com·»
;

198 
_T¿™s
 
	tŒa™s
;

202 cÚ¡ 
boŞ
 
	g®low_du¶iÿ‹s
 = 
_Du¶iÿ‹s
;

205 
_AÎoc
 
	t®loÿtÜ_ty³
;

212 cÚ¡ 
boŞ
 
	gu£d_as_£t
 = 
_U£dAsS‘
;

217 
BTREE_FRIENDS


219 
	gpublic
:

223 
bŒ“
<
	tkey_ty³
, 
	td©a_ty³
, 
	tv®ue_ty³
, 
	tkey_com·»
,

224 
	tŒa™s
, 
	t®low_du¶iÿ‹s
, 
	t®loÿtÜ_ty³
, 
	tu£d_as_£t
> 
	t£lf_ty³
;

227 
size_t
 
	tsize_ty³
;

231 
	g¡d
::
	t·œ
<
	tkey_ty³
, 
	td©a_ty³
> 
	t·œ_ty³
;

233 
	gpublic
:

237 cÚ¡ 
Ëaf¦Ùmax
 = 
Œa™s
::
Ëaf¦Ùs
;

241 cÚ¡ 
	gšÃr¦Ùmax
 = 
Œa™s
::
šÃr¦Ùs
;

246 cÚ¡ 
	gmšËaf¦Ùs
 = (
Ëaf¦Ùmax
 / 2);

251 cÚ¡ 
	gmššÃr¦Ùs
 = (
šÃr¦Ùmax
 / 2);

255 cÚ¡ 
boŞ
 
	g£lfv”ify
 = 
Œa™s
::
£lfv”ify
;

260 cÚ¡ 
boŞ
 
	gdebug
 = 
Œa™s
::
debug
;

262 
	g´iv©e
:

267 
	snode


270 
Ëv–
;

274 
	g¦Ùu£
;

277 
šlše
 
node
(cÚ¡ 
l
, cÚ¡ 
s
 = 0)

278 : 
Ëv–
(
l
), 
¦Ùu£
(
s
)

282 
šlše
 
boŞ
 
i¦—âode
() const

284  (
	gËv–
 == 0);

290 
	gšÃr_node
 : 
public
 
node


293 
ty³Çme
 
	t_AÎoc
::
	t‹m¶©e
 
	t»bšd
<
	tšÃr_node
>::
	tÙh”
 
	t®loc_ty³
;

296 
key_ty³
 
	g¦Ùkey
[
šÃr¦Ùmax
];

299 
node
 * 
	gchdid
[
šÃr¦Ùmax
 + 1];

302 
šlše
 
šÃr_node
(cÚ¡ 
l
)

303 : 
node
(
l
)

307 
šlše
 
šÃr_node
(cÚ¡ 
node
& 
tİ
)

308 : 
node
(
tİ
.
Ëv–
,İ.
¦Ùu£
)

312 
šlše
 
boŞ
 
isfuÎ
() const

314  (
	gnode
::
¦Ùu£
 =ğ
šÃr¦Ùmax
);

318 
šlše
 
boŞ
 
isãw
() const

320  (
	gnode
::
¦Ùu£
 <ğ
mššÃr¦Ùs
);

324 
šlše
 
boŞ
 
isund”æow
() const

326  (
	gnode
::
¦Ùu£
 < 
mššÃr¦Ùs
);

333 
	gËaf_node
 : 
public
 
node


336 
ty³Çme
 
	t_AÎoc
::
	t‹m¶©e
 
	t»bšd
<
	tËaf_node
>::
	tÙh”
 
	t®loc_ty³
;

339 
Ëaf_node
 * 
	g´evËaf
;

342 
Ëaf_node
 * 
	gÃx—f
;

345 
key_ty³
 
	g¦Ùkey
[
Ëaf¦Ùmax
];

348 
d©a_ty³
 
	g¦Ùd©a
[
u£d_as_£t
 ? 1 : 
Ëaf¦Ùmax
];

351 
	gbs
[
BITS_TO_LONGS
(
Ëaf¦Ùmax
)];

355 
šlše
 
Ëaf_node
()

356 : 
node
(0), 
´evËaf
(
NULL
), 
Ãx—f
(NULL)

362 
šlše
 
Ëaf_node
(cÚ¡ 
node
& 
tİ
)

363 : 
node
(
tİ
.
Ëv–
,İ.
¦Ùu£
), 
´evËaf
(
NULL
), 
Ãx—f
(NULL)

365 
»£t
()

367 
mem£t
(
bs
, 0x0, 
BITS_TO_LONGS
(
Ëaf¦Ùmax
) * ());

370 
šlše
 
couÁ
()

372  
hweight_lÚg
(*
bs
);

376 
šlše
 
boŞ
 
isfuÎ
() const

379  (
	gnode
::
¦Ùu£
 =ğ
Ëaf¦Ùmax
);

381  (
couÁ
(è=ğ
Ëaf¦Ùmax
)? 
Œue
: 
çl£
;

385 
šlše
 
boŞ
 
isãw
() const

388  (
	gnode
::
¦Ùu£
 <ğ
mšËaf¦Ùs
);

390  (
couÁ
(è<ğ
Ëaf¦Ùmax
)? 
Œue
: 
çl£
;

394 
šlše
 
boŞ
 
isund”æow
() const

397  (
	gnode
::
¦Ùu£
 < 
mšËaf¦Ùs
);

399  (
couÁ
(è< 
	gmšËaf¦Ùs
)? 
	gŒue
: 
çl£
;

403 
b™m­_£t
(
šdex
)

405 
__£t_b™
(
šdex
, 
bs
);

409 
b™m­_g‘
(
šdex
)

411  
cÚ¡_‹¡_b™
(
šdex
, 
bs
);

415 
b™m­_ş—r
(
šdex
)

417 
__ş—r_b™
(
šdex
, 
bs
);

421 
g‘_fœ¡_£t_b™
()

423  
__ffs
(*
bs
);

427 
g‘_Ï¡_£t_b™
()

429  
__æs
(*
bs
);

434 
g‘_fœ¡_ä“_b™
()

436  
__ffz
(*
bs
);

441 
šlše
 
£t_¦Ù
(
¦Ù
, cÚ¡ 
·œ_ty³
& 
v®ue
)

443 
BTREE_ASSERT
(
u£d_as_£t
 =ğ
çl£
);

444 
BTREE_ASSERT
(
¦Ù
 < 
node
::
¦Ùu£
);

445 
	g¦Ùkey
[
¦Ù
] = 
v®ue
.
fœ¡
;

446 
	g¦Ùd©a
[
¦Ù
] = 
v®ue
.
£cÚd
;

451 
šlše
 
£t_¦Ù
(
¦Ù
, cÚ¡ 
key_ty³
& 
key
)

453 
BTREE_ASSERT
(
u£d_as_£t
 =ğ
Œue
);

454 
BTREE_ASSERT
(
¦Ù
 < 
node
::
¦Ùu£
);

455 
	g¦Ùkey
[
¦Ù
] = 
key
;

459 
	g´iv©e
:

464 
‹m¶©e
 <
ty³Çme
 
v®ue_ty³
,y³Çm
	g·œ_ty³
>

465 
	sbŒ“_·œ_to_v®ue


468 
šlše
 
v®ue_ty³
 
İ”©Ü
 (è(
	g·œ_ty³
& 
	gp
) const

470  
	gp
.
	gfœ¡
;

473 
šlše
 
v®ue_ty³
 
İ”©Ü
 (è(cÚ¡ 
	g·œ_ty³
& 
	gp
) const

475  
	gp
.
	gfœ¡
;

480 
	g‹m¶©e
 <
ty³Çme
 
	gv®ue_ty³
>

481 
	gbŒ“_·œ_to_v®ue
<
	gv®ue_ty³
, value_type>

484 
šlše
 
v®ue_ty³
 
İ”©Ü
 (è(
	g·œ_ty³
& 
	gp
) const

486  
	gp
;

489 
šlše
 
v®ue_ty³
 
İ”©Ü
 (è(cÚ¡ 
	g·œ_ty³
& 
	gp
) const

491  
	gp
;

497 
	gbŒ“_·œ_to_v®ue
<
	tv®ue_ty³
, 
	t·œ_ty³
> 
	t·œ_to_v®ue_ty³
;

499 
	gpublic
:

502 
şass
 
™”©Ü
;

503 
şass
 
	gcÚ¡_™”©Ü
;

504 
şass
 
	g»v”£_™”©Ü
;

505 
şass
 
	gcÚ¡_»v”£_™”©Ü
;

509 şas 
	c™”©Ü


511 
	gpublic
:

515 
ty³Çme
 
	tbŒ“
::
	tkey_ty³
 key_type;

518 
ty³Çme
 
	tbŒ“
::
	td©a_ty³
 data_type;

521 
ty³Çme
 
	tbŒ“
::
	tv®ue_ty³
 value_type;

524 
ty³Çme
 
	tbŒ“
::
	t·œ_ty³
…air_type;

527 
	gv®ue_ty³
& 
	t»ã»nû
;

530 
v®ue_ty³
* 
	tpoš‹r
;

533 
	g¡d
::
	tbidœeùiÚ®_™”©Ü_g
 
	t™”©Ü_ÿ‹gÜy
;

536 
±rdiff_t
 
	tdifã»nû_ty³
;

538 
	g´iv©e
:

542 
ty³Çme
 
bŒ“
::
Ëaf_node
 * 
cu¼node
;

545 
	gcu¼¦Ù
;

549 
ä›nd
 
şass
 
	gcÚ¡_™”©Ü
;

553 
ä›nd
 
şass
 
	g»v”£_™”©Ü
;

557 
ä›nd
 
şass
 
	gcÚ¡_»v”£_™”©Ü
;

561 
ä›nd
 
şass
 
	gbŒ“
<
	gkey_ty³
, 
	gd©a_ty³
, 
	gv®ue_ty³
, 
	gkey_com·»
,

562 
	gŒa™s
, 
	g®low_du¶iÿ‹s
, 
	g®loÿtÜ_ty³
, 
	gu£d_as_£t
>;

566 
mubË
 
v®ue_ty³
 
	g‹mp_v®ue
;

571 
BTREE_FRIENDS


573 
	gpublic
:

577 
šlše
 
™”©Ü
()

578 : 
cu¼node
(
NULL
), 
cu¼¦Ù
(0)

582 
šlše
 
™”©Ü
(
ty³Çme
 
bŒ“
::
Ëaf_node
* 
l
, 
s
)

583 : 
cu¼node
(
l
), 
cu¼¦Ù
(
s
)

587 
šlše
 
™”©Ü
(cÚ¡ 
»v”£_™”©Ü
& 
™
)

588 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

593 
šlše
 
»ã»nû
 
	gİ”©Ü
 * () const

595 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

596  
	g‹mp_v®ue
;

602 
šlše
 
poš‹r
 
	gİ”©Ü
 -> () const

604 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

605  &
	g‹mp_v®ue
;

609 
šlše
 cÚ¡ 
	gkey_ty³
 & 
key
() const

611  
	gcu¼node
->
	g¦Ùkey
[
cu¼¦Ù
];

615 
šlše
 
	gd©a_ty³
 & 
d©a
() const

617  
	gcu¼node
->
	g¦Ùd©a
[
u£d_as_£t
 ? 0 : 
cu¼¦Ù
];

621 
šlše
 
	g™”©Ü
& 
	gİ”©Ü
 ++ ()

623 ià(
	gcu¼¦Ù
 + 1 < 
	gcu¼node
->
	g¦Ùu£
) {

624 ++
	gcu¼¦Ù
;

626 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

627 
cu¼node
 = cu¼node->
Ãx—f
;

628 
	gcu¼¦Ù
 = 0;

632 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

635  *
	gthis
;

639 
šlše
 
™”©Ü
 
	gİ”©Ü
 ++ ()

641 
™”©Ü
 
	gtmp
 = *
this
;

643 ià(
	gcu¼¦Ù
 + 1 < 
	gcu¼node
->
	g¦Ùu£
) {

644 ++
	gcu¼¦Ù
;

646 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

647 
cu¼node
 = cu¼node->
Ãx—f
;

648 
	gcu¼¦Ù
 = 0;

652 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

655  
	gtmp
;

659 
šlše
 
	g™”©Ü
& 
	gİ”©Ü
 -- ()

661 ià(
	gcu¼¦Ù
 > 0) {

662 --
	gcu¼¦Ù
;

664 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

665 
cu¼node
 = cu¼node->
´evËaf
;

666 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
 - 1;

670 
	gcu¼¦Ù
 = 0;

673  *
	gthis
;

677 
šlše
 
™”©Ü
 
	gİ”©Ü
 -- ()

679 
™”©Ü
 
	gtmp
 = *
this
;

681 ià(
	gcu¼¦Ù
 > 0) {

682 --
	gcu¼¦Ù
;

684 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

685 
cu¼node
 = cu¼node->
´evËaf
;

686 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
 - 1;

690 
	gcu¼¦Ù
 = 0;

693  
	gtmp
;

697 
šlše
 
boŞ
 
	gİ”©Ü
 =ğ(cÚ¡ 
™”©Ü
& 
x
) const

699  (
x
.
cu¼node
 =ğcu¼nodeè&& (x.
cu¼¦Ù
 == currslot);

703 
šlše
 
boŞ
 
	gİ”©Ü
 !ğ(cÚ¡ 
™”©Ü
& 
x
) const

705  (
x
.
cu¼node
 !ğcu¼nodeè|| (x.
cu¼¦Ù
 != currslot);

711 şas 
	ccÚ¡_™”©Ü


713 
	gpublic
:

717 
ty³Çme
 
	tbŒ“
::
	tkey_ty³
 key_type;

720 
ty³Çme
 
	tbŒ“
::
	td©a_ty³
 data_type;

723 
ty³Çme
 
	tbŒ“
::
	tv®ue_ty³
 value_type;

726 
ty³Çme
 
	tbŒ“
::
	t·œ_ty³
…air_type;

729 cÚ¡ 
	tv®ue_ty³
& 
	t»ã»nû
;

732 cÚ¡ 
	tv®ue_ty³
* 
	tpoš‹r
;

735 
	g¡d
::
	tbidœeùiÚ®_™”©Ü_g
 
	t™”©Ü_ÿ‹gÜy
;

738 
±rdiff_t
 
	tdifã»nû_ty³
;

740 
	g´iv©e
:

744 cÚ¡ 
ty³Çme
 
bŒ“
::
Ëaf_node
 * 
cu¼node
;

747 
	gcu¼¦Ù
;

751 
ä›nd
 
şass
 
	gcÚ¡_»v”£_™”©Ü
;

755 
mubË
 
v®ue_ty³
 
	g‹mp_v®ue
;

760 
BTREE_FRIENDS


762 
	gpublic
:

766 
šlše
 
cÚ¡_™”©Ü
()

767 : 
cu¼node
(
NULL
), 
cu¼¦Ù
(0)

771 
šlše
 
cÚ¡_™”©Ü
(cÚ¡ 
ty³Çme
 
bŒ“
::
Ëaf_node
* 
l
, 
s
)

772 : 
cu¼node
(
l
), 
cu¼¦Ù
(
s
)

776 
šlše
 
cÚ¡_™”©Ü
(cÚ¡ 
™”©Ü
& 
™
)

777 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

781 
šlše
 
cÚ¡_™”©Ü
(cÚ¡ 
»v”£_™”©Ü
& 
™
)

782 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

786 
šlše
 
cÚ¡_™”©Ü
(cÚ¡ 
cÚ¡_»v”£_™”©Ü
& 
™
)

787 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

793 
šlše
 
»ã»nû
 
	gİ”©Ü
 * () const

795 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

796  
	g‹mp_v®ue
;

802 
šlše
 
poš‹r
 
	gİ”©Ü
 -> () const

804 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

805  &
	g‹mp_v®ue
;

809 
šlše
 cÚ¡ 
	gkey_ty³
 & 
key
() const

811  
	gcu¼node
->
	g¦Ùkey
[
cu¼¦Ù
];

815 
šlše
 cÚ¡ 
	gd©a_ty³
 & 
d©a
() const

817  
	gcu¼node
->
	g¦Ùd©a
[
u£d_as_£t
 ? 0 : 
cu¼¦Ù
];

821 
šlše
 
	gcÚ¡_™”©Ü
& 
	gİ”©Ü
 ++ ()

823 ià(
	gcu¼¦Ù
 + 1 < 
	gcu¼node
->
	g¦Ùu£
) {

824 ++
	gcu¼¦Ù
;

826 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

827 
cu¼node
 = cu¼node->
Ãx—f
;

828 
	gcu¼¦Ù
 = 0;

832 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

835  *
	gthis
;

839 
šlše
 
cÚ¡_™”©Ü
 
	gİ”©Ü
 ++ ()

841 
cÚ¡_™”©Ü
 
	gtmp
 = *
this
;

843 ià(
	gcu¼¦Ù
 + 1 < 
	gcu¼node
->
	g¦Ùu£
) {

844 ++
	gcu¼¦Ù
;

846 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

847 
cu¼node
 = cu¼node->
Ãx—f
;

848 
	gcu¼¦Ù
 = 0;

852 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

855  
	gtmp
;

859 
šlše
 
	gcÚ¡_™”©Ü
& 
	gİ”©Ü
 -- ()

861 ià(
	gcu¼¦Ù
 > 0) {

862 --
	gcu¼¦Ù
;

864 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

865 
cu¼node
 = cu¼node->
´evËaf
;

866 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
 - 1;

870 
	gcu¼¦Ù
 = 0;

873  *
	gthis
;

877 
šlše
 
cÚ¡_™”©Ü
 
	gİ”©Ü
 -- ()

879 
cÚ¡_™”©Ü
 
	gtmp
 = *
this
;

881 ià(
	gcu¼¦Ù
 > 0) {

882 --
	gcu¼¦Ù
;

884 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

885 
cu¼node
 = cu¼node->
´evËaf
;

886 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
 - 1;

890 
	gcu¼¦Ù
 = 0;

893  
	gtmp
;

897 
šlše
 
boŞ
 
	gİ”©Ü
 =ğ(cÚ¡ 
cÚ¡_™”©Ü
& 
x
) const

899  (
x
.
cu¼node
 =ğcu¼nodeè&& (x.
cu¼¦Ù
 == currslot);

903 
šlše
 
boŞ
 
	gİ”©Ü
 !ğ(cÚ¡ 
cÚ¡_™”©Ü
& 
x
) const

905  (
x
.
cu¼node
 !ğcu¼nodeè|| (x.
cu¼¦Ù
 != currslot);

911 şas 
	c»v”£_™”©Ü


913 
	gpublic
:

917 
ty³Çme
 
	tbŒ“
::
	tkey_ty³
 key_type;

920 
ty³Çme
 
	tbŒ“
::
	td©a_ty³
 data_type;

923 
ty³Çme
 
	tbŒ“
::
	tv®ue_ty³
 value_type;

926 
ty³Çme
 
	tbŒ“
::
	t·œ_ty³
…air_type;

929 
	gv®ue_ty³
& 
	t»ã»nû
;

932 
v®ue_ty³
* 
	tpoš‹r
;

935 
	g¡d
::
	tbidœeùiÚ®_™”©Ü_g
 
	t™”©Ü_ÿ‹gÜy
;

938 
±rdiff_t
 
	tdifã»nû_ty³
;

940 
	g´iv©e
:

944 
ty³Çme
 
bŒ“
::
Ëaf_node
 * 
cu¼node
;

947 
	gcu¼¦Ù
;

951 
ä›nd
 
şass
 
	g™”©Ü
;

955 
ä›nd
 
şass
 
	gcÚ¡_™”©Ü
;

959 
ä›nd
 
şass
 
	gcÚ¡_»v”£_™”©Ü
;

963 
mubË
 
v®ue_ty³
 
	g‹mp_v®ue
;

968 
BTREE_FRIENDS


970 
	gpublic
:

974 
šlše
 
»v”£_™”©Ü
()

975 : 
cu¼node
(
NULL
), 
cu¼¦Ù
(0)

979 
šlše
 
»v”£_™”©Ü
(
ty³Çme
 
bŒ“
::
Ëaf_node
* 
l
, 
s
)

980 : 
cu¼node
(
l
), 
cu¼¦Ù
(
s
)

984 
šlše
 
»v”£_™”©Ü
(cÚ¡ 
™”©Ü
& 
™
)

985 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

990 
šlše
 
»ã»nû
 
	gİ”©Ü
 * () const

992 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

993 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

994  
	g‹mp_v®ue
;

1000 
šlše
 
poš‹r
 
	gİ”©Ü
 -> () const

1002 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1003 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

1004  &
	g‹mp_v®ue
;

1008 
šlše
 cÚ¡ 
	gkey_ty³
 & 
key
() const

1010 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1011  
	gcu¼node
->
	g¦Ùkey
[
cu¼¦Ù
 - 1];

1015 
šlše
 
	gd©a_ty³
 & 
d©a
() const

1017 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1018  
	gcu¼node
->
	g¦Ùd©a
[
u£d_as_£t
 ? 0 : 
cu¼¦Ù
 - 1];

1022 
šlše
 
	g»v”£_™”©Ü
& 
	gİ”©Ü
 ++ ()

1024 ià(
	gcu¼¦Ù
 > 1) {

1025 --
	gcu¼¦Ù
;

1027 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

1028 
cu¼node
 = cu¼node->
´evËaf
;

1029 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1033 
	gcu¼¦Ù
 = 0;

1036  *
	gthis
;

1040 
šlše
 
»v”£_™”©Ü
 
	gİ”©Ü
 ++ ()

1042 
»v”£_™”©Ü
 
	gtmp
 = *
this
;

1044 ià(
	gcu¼¦Ù
 > 1) {

1045 --
	gcu¼¦Ù
;

1047 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

1048 
cu¼node
 = cu¼node->
´evËaf
;

1049 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1053 
	gcu¼¦Ù
 = 0;

1056  
	gtmp
;

1060 
šlše
 
	g»v”£_™”©Ü
& 
	gİ”©Ü
 -- ()

1062 ià(
	gcu¼¦Ù
 < 
	gcu¼node
->
	g¦Ùu£
) {

1063 ++
	gcu¼¦Ù
;

1065 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

1066 
cu¼node
 = cu¼node->
Ãx—f
;

1067 
	gcu¼¦Ù
 = 1;

1071 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1074  *
	gthis
;

1078 
šlše
 
»v”£_™”©Ü
 
	gİ”©Ü
 -- ()

1080 
»v”£_™”©Ü
 
	gtmp
 = *
this
;

1082 ià(
	gcu¼¦Ù
 < 
	gcu¼node
->
	g¦Ùu£
) {

1083 ++
	gcu¼¦Ù
;

1085 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

1086 
cu¼node
 = cu¼node->
Ãx—f
;

1087 
	gcu¼¦Ù
 = 1;

1091 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1094  
	gtmp
;

1098 
šlše
 
boŞ
 
	gİ”©Ü
 =ğ(cÚ¡ 
»v”£_™”©Ü
& 
x
) const

1100  (
x
.
cu¼node
 =ğcu¼nodeè&& (x.
cu¼¦Ù
 == currslot);

1104 
šlše
 
boŞ
 
	gİ”©Ü
 !ğ(cÚ¡ 
»v”£_™”©Ü
& 
x
) const

1106  (
x
.
cu¼node
 !ğcu¼nodeè|| (x.
cu¼¦Ù
 != currslot);

1112 şas 
	ccÚ¡_»v”£_™”©Ü


1114 
	gpublic
:

1118 
ty³Çme
 
	tbŒ“
::
	tkey_ty³
 key_type;

1121 
ty³Çme
 
	tbŒ“
::
	td©a_ty³
 data_type;

1124 
ty³Çme
 
	tbŒ“
::
	tv®ue_ty³
 value_type;

1127 
ty³Çme
 
	tbŒ“
::
	t·œ_ty³
…air_type;

1130 cÚ¡ 
	tv®ue_ty³
& 
	t»ã»nû
;

1133 cÚ¡ 
	tv®ue_ty³
* 
	tpoš‹r
;

1136 
	g¡d
::
	tbidœeùiÚ®_™”©Ü_g
 
	t™”©Ü_ÿ‹gÜy
;

1139 
±rdiff_t
 
	tdifã»nû_ty³
;

1141 
	g´iv©e
:

1145 cÚ¡ 
ty³Çme
 
bŒ“
::
Ëaf_node
 * 
cu¼node
;

1148 
	gcu¼¦Ù
;

1152 
ä›nd
 
şass
 
	g»v”£_™”©Ü
;

1156 
mubË
 
v®ue_ty³
 
	g‹mp_v®ue
;

1161 
BTREE_FRIENDS


1163 
	gpublic
:

1167 
šlše
 
cÚ¡_»v”£_™”©Ü
()

1168 : 
cu¼node
(
NULL
), 
cu¼¦Ù
(0)

1172 
šlše
 
cÚ¡_»v”£_™”©Ü
(cÚ¡ 
ty³Çme
 
bŒ“
::
Ëaf_node
* 
l
, 
s
)

1173 : 
cu¼node
(
l
), 
cu¼¦Ù
(
s
)

1177 
šlše
 
cÚ¡_»v”£_™”©Ü
(cÚ¡ 
™”©Ü
& 
™
)

1178 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

1182 
šlše
 
cÚ¡_»v”£_™”©Ü
(cÚ¡ 
cÚ¡_™”©Ü
& 
™
)

1183 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

1187 
šlše
 
cÚ¡_»v”£_™”©Ü
(cÚ¡ 
»v”£_™”©Ü
& 
™
)

1188 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

1194 
šlše
 
»ã»nû
 
	gİ”©Ü
 * () const

1196 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1197 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

1198  
	g‹mp_v®ue
;

1204 
šlše
 
poš‹r
 
	gİ”©Ü
 -> () const

1206 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1207 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

1208  &
	g‹mp_v®ue
;

1212 
šlše
 cÚ¡ 
	gkey_ty³
 & 
key
() const

1214 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1215  
	gcu¼node
->
	g¦Ùkey
[
cu¼¦Ù
 - 1];

1219 
šlše
 cÚ¡ 
	gd©a_ty³
 & 
d©a
() const

1221 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1222  
	gcu¼node
->
	g¦Ùd©a
[
u£d_as_£t
 ? 0 : 
cu¼¦Ù
 - 1];

1226 
šlše
 
	gcÚ¡_»v”£_™”©Ü
& 
	gİ”©Ü
 ++ ()

1228 ià(
	gcu¼¦Ù
 > 1) {

1229 --
	gcu¼¦Ù
;

1231 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

1232 
cu¼node
 = cu¼node->
´evËaf
;

1233 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1237 
	gcu¼¦Ù
 = 0;

1240  *
	gthis
;

1244 
šlše
 
cÚ¡_»v”£_™”©Ü
 
	gİ”©Ü
 ++ ()

1246 
cÚ¡_»v”£_™”©Ü
 
	gtmp
 = *
this
;

1248 ià(
	gcu¼¦Ù
 > 1) {

1249 --
	gcu¼¦Ù
;

1251 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

1252 
cu¼node
 = cu¼node->
´evËaf
;

1253 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1257 
	gcu¼¦Ù
 = 0;

1260  
	gtmp
;

1264 
šlše
 
	gcÚ¡_»v”£_™”©Ü
& 
	gİ”©Ü
 -- ()

1266 ià(
	gcu¼¦Ù
 < 
	gcu¼node
->
	g¦Ùu£
) {

1267 ++
	gcu¼¦Ù
;

1269 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

1270 
cu¼node
 = cu¼node->
Ãx—f
;

1271 
	gcu¼¦Ù
 = 1;

1275 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1278  *
	gthis
;

1282 
šlše
 
cÚ¡_»v”£_™”©Ü
 
	gİ”©Ü
 -- ()

1284 
cÚ¡_»v”£_™”©Ü
 
	gtmp
 = *
this
;

1286 ià(
	gcu¼¦Ù
 < 
	gcu¼node
->
	g¦Ùu£
) {

1287 ++
	gcu¼¦Ù
;

1289 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

1290 
cu¼node
 = cu¼node->
Ãx—f
;

1291 
	gcu¼¦Ù
 = 1;

1295 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1298  
	gtmp
;

1302 
šlše
 
boŞ
 
	gİ”©Ü
 =ğ(cÚ¡ 
cÚ¡_»v”£_™”©Ü
& 
x
) const

1304  (
x
.
cu¼node
 =ğcu¼nodeè&& (x.
cu¼¦Ù
 == currslot);

1308 
šlše
 
boŞ
 
	gİ”©Ü
 !ğ(cÚ¡ 
cÚ¡_»v”£_™”©Ü
& 
x
) const

1310  (
x
.
cu¼node
 !ğcu¼nodeè|| (x.
cu¼¦Ù
 != currslot);

1314 
	gpublic
:

1319 
	sŒ“_¡©s


1322 
size_ty³
 
™emcouÁ
;

1325 
size_ty³
 
	gËaves
;

1328 
size_ty³
 
	gšÃºodes
;

1331 cÚ¡ 
	gËaf¦Ùs
 = 
£lf_ty³
::
Ëaf¦Ùmax
;

1334 cÚ¡ 
	gšÃr¦Ùs
 = 
£lf_ty³
::
šÃr¦Ùmax
;

1337 
šlše
 
Œ“_¡©s
()

1338 : 
™emcouÁ
(0),

1339 
Ëaves
(0), 
šÃºodes
(0)

1343 
šlše
 
size_ty³
 
nodes
() const

1345  
	gšÃºodes
 + 
	gËaves
;

1349 
šlše
 
avgfl_Ëaves
() const

1351  
	g¡©ic_ÿ¡
<>(
	g™emcouÁ
è/ (
Ëaves
 * 
	gËaf¦Ùs
);

1355 
	g´iv©e
:

1359 
node
* 
m_roÙ
;

1362 
Ëaf_node
* 
	gm_h—dËaf
;

1365 
Ëaf_node
* 
	gm_Ëaf
;

1368 
Œ“_¡©s
 
	gm_¡©s
;

1372 
key_com·»
 
	gm_key_Ëss
;

1375 
®loÿtÜ_ty³
 
	gm_®loÿtÜ
;

1378 
VMEM
 *
	gvmp
;

1380 
	gpublic
:

1385 
ex¶ic™
 
šlše
 
bŒ“
(cÚ¡ 
®loÿtÜ_ty³
& 
®loc
 =‡llocator_type())

1386 : 
m_roÙ
(
NULL
), 
m_h—dËaf
(NULL), 
m_Ëaf
(NULL), 
m_®loÿtÜ
(
®loc
)

1388 
	gvmp
 = 
nv_ü—‹
("/mÁ/nv¿m1", 
NVRAM_LEN
);

1389 if(
	gvmp
 =ğ
NULL
)

1390 
cout
 << "‚v_ü—‹ faed " << 
’dl
;

1395 
ex¶ic™
 
šlše
 
bŒ“
(cÚ¡ 
key_com·»
& 
kcf
,

1396 cÚ¡ 
®loÿtÜ_ty³
& 
®loc
 =‡llocator_type())

1397 : 
m_roÙ
(
NULL
), 
m_h—dËaf
(NULL), 
m_Ëaf
(NULL),

1398 
m_key_Ëss
(
kcf
), 
m_®loÿtÜ
(
®loc
)

1404 
	g‹m¶©e
 <
şass
 
	gIÅutI‹¿tÜ
>

1405 
šlše
 
bŒ“
(
IÅutI‹¿tÜ
 
fœ¡
, IÅutI‹¿tÜ 
Ï¡
,

1406 cÚ¡ 
®loÿtÜ_ty³
& 
®loc
 =‡llocator_type())

1407 : 
m_roÙ
(
NULL
), 
m_h—dËaf
(NULL), 
m_Ëaf
(NULL), 
m_®loÿtÜ
(
®loc
)

1409 
š£¹
(
fœ¡
, 
Ï¡
);

1415 
	g‹m¶©e
 <
şass
 
	gIÅutI‹¿tÜ
>

1416 
šlše
 
bŒ“
(
IÅutI‹¿tÜ
 
fœ¡
, IÅutI‹¿tÜ 
Ï¡
, cÚ¡ 
key_com·»
& 
kcf
,

1417 cÚ¡ 
®loÿtÜ_ty³
& 
®loc
 =‡llocator_type())

1418 : 
m_roÙ
(
NULL
), 
m_h—dËaf
(NULL), 
m_Ëaf
(NULL),

1419 
m_key_Ëss
(
kcf
), 
m_®loÿtÜ
(
®loc
)

1421 
š£¹
(
fœ¡
, 
Ï¡
);

1425 
	gšlše
 ~
bŒ“
()

1427 
ş—r
();

1428 
nv_de¡roy
(
vmp
);

1432 
sw­
(
£lf_ty³
& 
äom
)

1434 
	g¡d
::
sw­
(
m_roÙ
, 
äom
.m_root);

1435 
	g¡d
::
sw­
(
m_h—dËaf
, 
äom
.m_headleaf);

1436 
	g¡d
::
sw­
(
m_Ëaf
, 
äom
.m_tailleaf);

1437 
	g¡d
::
sw­
(
m_¡©s
, 
äom
.m_stats);

1438 
	g¡d
::
sw­
(
m_key_Ëss
, 
äom
.m_key_less);

1439 
	g¡d
::
sw­
(
m_®loÿtÜ
, 
äom
.m_allocator);

1442 
	gpublic
:

1446 şas 
	cv®ue_com·»


1448 
´Ùeùed
:

1450 
key_com·»
 
key_comp
;

1453 
šlše
 
ex¶ic™
 
v®ue_com·»
(
key_com·»
 
kc
)

1454 : 
key_comp
(
kc
)

1458 
ä›nd
 
şass
 
bŒ“
<
key_ty³
, 
	gd©a_ty³
, 
	gv®ue_ty³
, 
	gkey_com·»
,

1459 
	gŒa™s
, 
	g®low_du¶iÿ‹s
, 
	g®loÿtÜ_ty³
, 
	gu£d_as_£t
>;

1461 
	gpublic
:

1463 
šlše
 
boŞ
 
İ”©Ü
 (è(cÚ¡ 
v®ue_ty³
& 
x
, cÚ¡ 
	gv®ue_ty³
& 
	gy
) const

1465  
key_comp
(
x
.
fœ¡
, 
y
.first);

1470 
šlše
 
key_com·»
 
key_comp
() const

1472  
	gm_key_Ëss
;

1477 
šlše
 
v®ue_com·»
 
v®ue_comp
() const

1479  
v®ue_com·»
(
m_key_Ëss
);

1482 
	g´iv©e
:

1486 
šlše
 
boŞ
 
key_Ëss
(cÚ¡ 
key_ty³
& 
a
, cÚ¡ key_ty³ 
b
) const

1488  
m_key_Ëss
(
a
, 
b
);

1492 
šlše
 
boŞ
 
key_Ës£qu®
(cÚ¡ 
key_ty³
& 
a
, cÚ¡ key_ty³ 
b
) const

1494  !
m_key_Ëss
(
b
, 
a
);

1498 
šlše
 
boŞ
 
key_g»©”
(cÚ¡ 
key_ty³
& 
a
, cÚ¡ key_ty³& 
b
) const

1500  
m_key_Ëss
(
b
, 
a
);

1504 
šlše
 
boŞ
 
key_g»©”equ®
(cÚ¡ 
key_ty³
& 
a
, cÚ¡ key_ty³ 
b
) const

1506  !
m_key_Ëss
(
a
, 
b
);

1511 
šlše
 
boŞ
 
key_equ®
(cÚ¡ 
key_ty³
& 
a
, cÚ¡ key_ty³& 
b
) const

1513  !
m_key_Ëss
(
a
, 
b
) && !m_key_less(b,‡);

1516 
	gpublic
:

1520 
®loÿtÜ_ty³
 
g‘_®loÿtÜ
() const

1522  
m_®loÿtÜ
;

1525 
	g´iv©e
:

1529 
šlše
 
Ëaf_node
 *
nvËaf_®loc
(
VMEM
 *
vmp
)

1531 
Ëaf_node
 * 
n
 = (Ëaf_nod*)
nv_m®loc
(Ö—f_node), 
vmp
);

1532 if(
	gn
 =ğ
NULL
) {

1533 
cout
 << "‚vËaà®loøçed " << 
’dl
;

1535  
	gn
;

1540 
ty³Çme
 
	gËaf_node
::
®loc_ty³
 
Ëaf_node_®loÿtÜ
()

1542  
ty³Çme
 
Ëaf_node
::
®loc_ty³
(
m_®loÿtÜ
);

1546 
ty³Çme
 
	gšÃr_node
::
®loc_ty³
 
šÃr_node_®loÿtÜ
()

1548  
ty³Çme
 
šÃr_node
::
®loc_ty³
(
m_®loÿtÜ
);

1552 
šlše
 
Ëaf_node
 * 
®loÿ‹_Ëaf
()

1555 
Ëaf_node
* 
	gn
 = 
Ãw
 (
Ëaf_node_®loÿtÜ
().
®loÿ‹
(1))

1556 
Ëaf_node
();

1558 
Ëaf_node
 *
	gn
 = 
nvËaf_®loc
(
vmp
);

1559 
	gn
->
	g´evËaf
 = 
NULL
;

1560 
	gn
->
	gÃx—f
 = 
NULL
;

1561 
	gn
->
	gËv–
 = 0;

1562 
	gn
->
	g¦Ùu£
 = 0;

1563 
	gm_¡©s
.
	gËaves
++;

1564  
	gn
;

1568 
šlše
 
šÃr_node
 * 
®loÿ‹_šÃr
(
Ëv–
)

1570 
šÃr_node
* 
	gn
 = 
Ãw
 (
šÃr_node_®loÿtÜ
().
®loÿ‹
(1))

1571 
šÃr_node
(
Ëv–
);

1572 
	gm_¡©s
.
	gšÃºodes
++;

1573  
	gn
;

1578 
šlše
 
ä“_node
(
node
* 
n
)

1580 ià(
	gn
->
i¦—âode
()) {

1581 
Ëaf_node
* 
	gÊ
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
n
);

1582 
ty³Çme
 
	gËaf_node
::
®loc_ty³
 
a
(
Ëaf_node_®loÿtÜ
());

1583 
nv_ä“
(
vmp
, (*)
Ê
);

1588 
	gm_¡©s
.
	gËaves
--;

1591 
šÃr_node
* 
	gš
 = 
¡©ic_ÿ¡
<šÃr_node*>(
n
);

1592 
ty³Çme
 
	gšÃr_node
::
®loc_ty³
 
a
(
šÃr_node_®loÿtÜ
());

1593 
	ga
.
de¡roy
(
š
);

1594 
	ga
.
d—Îoÿ‹
(
š
, 1);

1595 
	gm_¡©s
.
	gšÃºodes
--;

1601 
	g‹m¶©e
 <
şass
 
	gIÅutI‹¿tÜ
, cÏs 
	gOuutI‹¿tÜ
>

1602 
OuutI‹¿tÜ
 
d©a_cİy
(
IÅutI‹¿tÜ
 
fœ¡
, IÅutI‹¿tÜ 
Ï¡
,

1603 
OuutI‹¿tÜ
 
»suÉ
)

1605 ià(
	gu£d_as_£t
è 
	g»suÉ
;

1606  
	g¡d
::
cİy
(
fœ¡
, 
Ï¡
, 
»suÉ
);

1611 
	g‹m¶©e
 <
şass
 
	gIÅutI‹¿tÜ
, cÏs 
	gOuutI‹¿tÜ
>

1612 
OuutI‹¿tÜ
 
d©a_cİy_backw¬d
(
IÅutI‹¿tÜ
 
fœ¡
, IÅutI‹¿tÜ 
Ï¡
,

1613 
OuutI‹¿tÜ
 
»suÉ
)

1615 ià(
	gu£d_as_£t
è 
	g»suÉ
;

1616  
	g¡d
::
cİy_backw¬d
(
fœ¡
, 
Ï¡
, 
»suÉ
);

1619 
	gpublic
:

1623 
ş—r
()

1625 ià(
m_roÙ
)

1627 
ş—r_»cursive
(
m_roÙ
);

1628 
ä“_node
(
m_roÙ
);

1630 
	gm_roÙ
 = 
NULL
;

1631 
	gm_h—dËaf
 = 
m_Ëaf
 = 
NULL
;

1633 
	gm_¡©s
 = 
Œ“_¡©s
();

1635 
BTREE_ASSERT
(
m_¡©s
.
™emcouÁ
 == 0);

1638 
	g´iv©e
:

1640 
ş—r_»cursive
(
node
* 
n
)

1642 ià(
n
->
i¦—âode
())

1644 
Ëaf_node
* 
Ëaâode
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
n
);

1646 
	g¦Ù
 = 0; slÙ < 
	gËaâode
->
	g¦Ùu£
; ++slot)

1653 
šÃr_node
* 
	gšÃºode
 = 
¡©ic_ÿ¡
<šÃr_node*>(
n
);

1655 
	g¦Ù
 = 0; slÙ < 
	gšÃºode
->
	g¦Ùu£
 + 1; ++slot)

1657 
ş—r_»cursive
(
šÃºode
->
chdid
[
¦Ù
]);

1658 
ä“_node
(
šÃºode
->
chdid
[
¦Ù
]);

1663 
	gpublic
:

1668 
šlše
 
™”©Ü
 
begš
()

1670  
™”©Ü
(
m_h—dËaf
, 0);

1675 
šlše
 
™”©Ü
 
’d
()

1677  
™”©Ü
(
m_Ëaf
, m_Ëaà? m_Ëaf->
¦Ùu£
 : 0);

1682 
šlše
 
cÚ¡_™”©Ü
 
begš
() const

1684  
cÚ¡_™”©Ü
(
m_h—dËaf
, 0);

1689 
šlše
 
cÚ¡_™”©Ü
 
’d
() const

1691  
cÚ¡_™”©Ü
(
m_Ëaf
, m_Ëaà? m_Ëaf->
¦Ùu£
 : 0);

1696 
šlše
 
»v”£_™”©Ü
 
rbegš
()

1698  
»v”£_™”©Ü
(
’d
());

1703 
šlše
 
»v”£_™”©Ü
 
»nd
()

1705  
»v”£_™”©Ü
(
begš
());

1710 
šlše
 
cÚ¡_»v”£_™”©Ü
 
rbegš
() const

1712  
cÚ¡_»v”£_™”©Ü
(
’d
());

1717 
šlše
 
cÚ¡_»v”£_™”©Ü
 
»nd
() const

1719  
cÚ¡_»v”£_™”©Ü
(
begš
());

1722 
	g´iv©e
:

1723 
šlše
 
Ëaf_fšd_low”
(cÚ¡ 
Ëaf_node
 *
n
, cÚ¡ 
key_ty³
& 
key
) const

1725 
	g¦Ùu£
 = 
n
->
couÁ
();

1729 ià(
	g¦Ùu£
 == 0)  0;

1732 
	glo
 = 0, 
	ghi
 = 
¦Ùu£
;

1734 
	glo
 < 
	ghi
)

1736 
	gmid
 = (
lo
 + 
hi
) >> 1;

1738 ià(
key_Ës£qu®
(
key
, 
n
->
¦Ùkey
[
mid
])) {

1739 
	ghi
 = 
mid
;

1742 
	glo
 = 
mid
 + 1;

1746 
BTREE_PRINT
("bŒ“::fšd_low”: oÀ" << 
n
 << " key " << 
key
 << " -> " << 
lo
 << " / " << 
hi
);

1749 ià(
	g£lfv”ify
)

1751 
	gi
 = 0;

1752 
	gi
 < 
	g¦Ùu£
 && 
key_Ëss
(
n
->
¦Ùkey
[
i
], 
key
)) ++i;

1754 
BTREE_PRINT
("bŒ“::fšd_low”:e¡fšd: " << 
i
);

1755 
BTREE_ASSERT
(
i
 =ğ
lo
);

1758  
	glo
;

1762 
	glo
 = 0;

1764 
	glo
 < 
	g¦Ùu£
 && 
key_Ëss
(
n
->
¦Ùkey
[
lo
], 
key
)) ++lo;

1765  
	glo
;

1774 
	g‹m¶©e
 <
ty³Çme
 
	gnode_ty³
>

1775 
šlše
 
fšd_low”
(cÚ¡ 
node_ty³
* 
n
, cÚ¡ 
key_ty³
& 
key
) const

1777 ià(0 && (
	gn
->
	g¦Ùkey
è> 
	gŒa™s
::
bš£¬ch_th»shŞd
)

1779 ià(
n
->
¦Ùu£
 == 0)  0;

1781 
	glo
 = 0, 
	ghi
 = 
n
->
¦Ùu£
;

1783 
	glo
 < 
	ghi
)

1785 
	gmid
 = (
lo
 + 
hi
) >> 1;

1787 ià(
key_Ës£qu®
(
key
, 
n
->
¦Ùkey
[
mid
])) {

1788 
	ghi
 = 
mid
;

1791 
	glo
 = 
mid
 + 1;

1795 
BTREE_PRINT
("bŒ“::fšd_low”: oÀ" << 
n
 << " key " << 
key
 << " -> " << 
lo
 << " / " << 
hi
);

1798 ià(
	g£lfv”ify
)

1800 
	gi
 = 0;

1801 
	gi
 < 
	gn
->
	g¦Ùu£
 && 
key_Ëss
(
n
->
¦Ùkey
[
i
], 
key
)) ++i;

1803 
BTREE_PRINT
("bŒ“::fšd_low”:e¡fšd: " << 
i
);

1804 
BTREE_ASSERT
(
i
 =ğ
lo
);

1807  
	glo
;

1811 
	glo
 = 0;

1812 
	glo
 < 
	gn
->
	g¦Ùu£
 && 
key_Ëss
(
n
->
¦Ùkey
[
lo
], 
key
)) ++lo;

1813  
	glo
;

1821 
	g‹m¶©e
 <
ty³Çme
 
	gnode_ty³
>

1822 
šlše
 
fšd_uµ”
(cÚ¡ 
node_ty³
* 
n
, cÚ¡ 
key_ty³
& 
key
) const

1824 ià(0 && (
	gn
->
	g¦Ùkey
è> 
	gŒa™s
::
bš£¬ch_th»shŞd
)

1826 ià(
n
->
¦Ùu£
 == 0)  0;

1828 
	glo
 = 0, 
	ghi
 = 
n
->
¦Ùu£
;

1830 
	glo
 < 
	ghi
)

1832 
	gmid
 = (
lo
 + 
hi
) >> 1;

1834 ià(
key_Ëss
(
key
, 
n
->
¦Ùkey
[
mid
])) {

1835 
	ghi
 = 
mid
;

1838 
	glo
 = 
mid
 + 1;

1842 
BTREE_PRINT
("bŒ“::fšd_uµ”: oÀ" << 
n
 << " key " << 
key
 << " -> " << 
lo
 << " / " << 
hi
);

1845 ià(
	g£lfv”ify
)

1847 
	gi
 = 0;

1848 
	gi
 < 
	gn
->
	g¦Ùu£
 && 
key_Ës£qu®
(
n
->
¦Ùkey
[
i
], 
key
)) ++i;

1850 
BTREE_PRINT
("bŒ“::fšd_uµ”e¡fšd: " << 
i
);

1851 
BTREE_ASSERT
(
i
 =ğ
hi
);

1854  
	glo
;

1858 
	glo
 = 0;

1859 
	glo
 < 
	gn
->
	g¦Ùu£
 && 
key_Ës£qu®
(
n
->
¦Ùkey
[
lo
], 
key
)) ++lo;

1860  
	glo
;

1864 
	gpublic
:

1868 
šlše
 
size_ty³
 
size
() const

1870  
m_¡©s
.
™emcouÁ
;

1874 
šlše
 
boŞ
 
em±y
() const

1876  (
size
(è=ğ
size_ty³
(0));

1881 
šlše
 
size_ty³
 
max_size
() const

1883  
size_ty³
(-1);

1887 
šlše
 cÚ¡ 
	gŒ“_¡©s
 & 
g‘_¡©s
() const

1889  
	gm_¡©s
;

1892 
	gpublic
:

1897 
boŞ
 
exi¡s
(cÚ¡ 
key_ty³
& 
key
) const

1899 cÚ¡ 
node
* 
n
 = 
m_roÙ
;

1900 ià(!
	gn
è 
	gçl£
;

1902 !
	gn
->
i¦—âode
())

1904 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

1905 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

1907 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

1910 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

1912 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

1913  (
	g¦Ù
 < 
	gËaf
->
	g¦Ùu£
 && 
key_equ®
(
key
, 
Ëaf
->
¦Ùkey
[
¦Ù
]));

1918 
™”©Ü
 
fšd
(cÚ¡ 
key_ty³
& 
key
)

1920 
node
* 
	gn
 = 
m_roÙ
;

1921 ià(!
	gn
è 
’d
();

1923 !
	gn
->
i¦—âode
())

1925 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

1926 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

1928 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

1931 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
n
);

1933 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

1934  (
	g¦Ù
 < 
	gËaf
->
	g¦Ùu£
 && 
key_equ®
(
key
, 
Ëaf
->
¦Ùkey
[
¦Ù
]))

1935 ? 
™”©Ü
(
Ëaf
, 
¦Ù
è: 
’d
();

1940 
cÚ¡_™”©Ü
 
fšd
(cÚ¡ 
key_ty³
& 
key
) const

1942 cÚ¡ 
node
* 
	gn
 = 
m_roÙ
;

1943 ià(!
	gn
è 
’d
();

1945 !
	gn
->
i¦—âode
())

1947 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

1948 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

1950 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

1953 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

1955 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

1956  (
	g¦Ù
 < 
	gËaf
->
	g¦Ùu£
 && 
key_equ®
(
key
, 
Ëaf
->
¦Ùkey
[
¦Ù
]))

1957 ? 
cÚ¡_™”©Ü
(
Ëaf
, 
¦Ù
è: 
’d
();

1962 
size_ty³
 
couÁ
(cÚ¡ 
key_ty³
& 
key
) const

1964 cÚ¡ 
node
* 
	gn
 = 
m_roÙ
;

1965 ià(!
	gn
)  0;

1967 !
	gn
->
i¦—âode
())

1969 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

1970 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

1972 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

1975 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

1977 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

1978 
size_ty³
 
	gnum
 = 0;

1980 
	gËaf
 && 
	g¦Ù
 <†—f->
	g¦Ùu£
 && 
key_equ®
(
key
, 
Ëaf
->
¦Ùkey
[
¦Ù
]))

1982 ++
	gnum
;

1983 ià(++
	g¦Ù
 >ğ
Ëaf
->
¦Ùu£
)

1985 
Ëaf
 =†—f->
Ãx—f
;

1986 
	g¦Ù
 = 0;

1990  
	gnum
;

1995 
™”©Ü
 
low”_bound
(cÚ¡ 
key_ty³
& 
key
)

1997 
node
* 
	gn
 = 
m_roÙ
;

1998 ià(!
	gn
è 
’d
();

2000 !
	gn
->
i¦—âode
())

2002 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

2003 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

2005 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

2008 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
n
);

2010 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

2011  
™”©Ü
(
Ëaf
, 
¦Ù
);

2017 
cÚ¡_™”©Ü
 
low”_bound
(cÚ¡ 
key_ty³
& 
key
) const

2019 cÚ¡ 
node
* 
	gn
 = 
m_roÙ
;

2020 ià(!
	gn
è 
’d
();

2022 !
	gn
->
i¦—âode
())

2024 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

2025 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

2027 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

2030 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

2032 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

2033  
cÚ¡_™”©Ü
(
Ëaf
, 
¦Ù
);

2038 
™”©Ü
 
uµ”_bound
(cÚ¡ 
key_ty³
& 
key
)

2040 
node
* 
	gn
 = 
m_roÙ
;

2041 ià(!
	gn
è 
’d
();

2043 !
	gn
->
i¦—âode
())

2045 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

2046 
	g¦Ù
 = 
fšd_uµ”
(
šÃr
, 
key
);

2048 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

2051 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
n
);

2053 
	g¦Ù
 = 
fšd_uµ”
(
Ëaf
, 
key
);

2054  
™”©Ü
(
Ëaf
, 
¦Ù
);

2060 
cÚ¡_™”©Ü
 
uµ”_bound
(cÚ¡ 
key_ty³
& 
key
) const

2062 cÚ¡ 
node
* 
	gn
 = 
m_roÙ
;

2063 ià(!
	gn
è 
’d
();

2065 !
	gn
->
i¦—âode
())

2067 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

2068 
	g¦Ù
 = 
fšd_uµ”
(
šÃr
, 
key
);

2070 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

2073 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

2075 
	g¦Ù
 = 
fšd_uµ”
(
Ëaf
, 
key
);

2076  
cÚ¡_™”©Ü
(
Ëaf
, 
¦Ù
);

2080 
šlše
 
	g¡d
::
·œ
<
™”©Ü
, 
	g™”©Ü
> 
equ®_¿nge
(cÚ¡ 
key_ty³
& 
key
)

2082  
	g¡d
::
·œ
<
™”©Ü
, 
	g™”©Ü
>(
low”_bound
(
key
), 
uµ”_bound
(key));

2086 
šlše
 
	g¡d
::
·œ
<
cÚ¡_™”©Ü
, 
	gcÚ¡_™”©Ü
> 
equ®_¿nge
(cÚ¡ 
key_ty³
& 
key
) const

2088  
	g¡d
::
·œ
<
cÚ¡_™”©Ü
, 
	gcÚ¡_™”©Ü
>(
low”_bound
(
key
), 
uµ”_bound
(key));

2091 
	gpublic
:

2097 
šlše
 
boŞ
 
İ”©Ü
 =ğ(cÚ¡ 
£lf_ty³
& 
Ùh”
) const

2099  (
size
(è=ğ
Ùh”
.size()è&& 
¡d
::
equ®
(
begš
(), 
’d
(), other.begin());

2103 
šlše
 
boŞ
 
	gİ”©Ü
 !ğ(cÚ¡ 
£lf_ty³
& 
Ùh”
) const

2105  !(*
this
 =ğ
Ùh”
);

2110 
šlše
 
boŞ
 
	gİ”©Ü
 < (cÚ¡ 
	g£lf_ty³
& 
	gÙh”
) const

2112  
	g¡d
::
Ëxicog¿phiÿl_com·»
(
begš
(), 
’d
(), 
Ùh”
.begin(), other.end());

2116 
šlše
 
boŞ
 
	gİ”©Ü
 > (cÚ¡ 
	g£lf_ty³
& 
	gÙh”
) const

2118  
	gÙh”
 < *
	gthis
;

2122 
šlše
 
boŞ
 
	gİ”©Ü
 <ğ(cÚ¡ 
£lf_ty³
& 
Ùh”
) const

2124  !(
Ùh”
 < *
this
);

2128 
šlše
 
boŞ
 
	gİ”©Ü
 >ğ(cÚ¡ 
£lf_ty³
& 
Ùh”
) const

2130  !(*
this
 < 
Ùh”
);

2133 
	gpublic
:

2137 
šlše
 
£lf_ty³
& 
İ”©Ü
 = (cÚ¡ s–f_ty³& 
Ùh”
)

2139 ià(
this
 !ğ&
Ùh”
)

2141 
ş—r
();

2143 
	gm_key_Ëss
 = 
Ùh”
.
key_comp
();

2144 
	gm_®loÿtÜ
 = 
Ùh”
.
g‘_®loÿtÜ
();

2146 ià(
	gÙh”
.
size
() != 0)

2148 
m_¡©s
.
Ëaves
 = m_¡©s.
šÃºodes
 = 0;

2149 ià(
	gÙh”
.
	gm_roÙ
) {

2150 
	gm_roÙ
 = 
cİy_»cursive
(
Ùh”
.
m_roÙ
);

2152 
	gm_¡©s
 = 
Ùh”
.
m_¡©s
;

2155 ià(
	g£lfv”ify
è
v”ify
();

2157  *
	gthis
;

2162 
šlše
 
bŒ“
(cÚ¡ bŒ“& 
Ùh”
)

2163 : 
m_roÙ
(
NULL
), 
m_h—dËaf
(NULL), 
m_Ëaf
(NULL),

2164 
m_¡©s
(
Ùh”
.m_stats),

2165 
m_key_Ëss
(
Ùh”
.
key_comp
()),

2166 
m_®loÿtÜ
(
Ùh”
.
g‘_®loÿtÜ
())

2168 ià(
size
() > 0)

2170 
	gm_¡©s
.
	gËaves
 = 
m_¡©s
.
šÃºodes
 = 0;

2171 ià(
	gÙh”
.
	gm_roÙ
) {

2172 
	gm_roÙ
 = 
cİy_»cursive
(
Ùh”
.
m_roÙ
);

2174 ià(
	g£lfv”ify
è
v”ify
();

2178 
	g´iv©e
:

2180 
node
 * 
cİy_»cursive
(cÚ¡‚ode* 
n
)

2182 ià(
n
->
i¦—âode
())

2184 cÚ¡ 
Ëaf_node
* 
Ëaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

2185 
Ëaf_node
* 
	gÃwËaf
 = 
®loÿ‹_Ëaf
();

2187 
	gÃwËaf
->
	g¦Ùu£
 = 
Ëaf
->
¦Ùu£
;

2188 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
,†—f->¦Ùkey +†—f->
¦Ùu£
, 
ÃwËaf
->slotkey);

2189 
d©a_cİy
(
Ëaf
->
¦Ùd©a
,†—f->¦Ùd©¨+†—f->
¦Ùu£
, 
ÃwËaf
->slotdata);

2191 ià(
	gm_h—dËaf
 =ğ
NULL
)

2193 
m_h—dËaf
 = 
m_Ëaf
 = 
ÃwËaf
;

2194 
	gÃwËaf
->
	g´evËaf
 = 
ÃwËaf
->
Ãx—f
 = 
NULL
;

2198 
	gÃwËaf
->
	g´evËaf
 = 
m_Ëaf
;

2199 
	gm_Ëaf
->
	gÃx—f
 = 
ÃwËaf
;

2200 
	gm_Ëaf
 = 
ÃwËaf
;

2203  
	gÃwËaf
;

2207 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

2208 
šÃr_node
* 
	gÃwšÃr
 = 
®loÿ‹_šÃr
(
šÃr
->
Ëv–
);

2210 
	gÃwšÃr
->
	g¦Ùu£
 = 
šÃr
->
¦Ùu£
;

2211 
	g¡d
::
cİy
(
šÃr
->
¦Ùkey
, iÂ”->¦Ùkey + iÂ”->
¦Ùu£
, 
ÃwšÃr
->slotkey);

2213 
	g¦Ù
 = 0; slÙ <ğ
šÃr
->
¦Ùu£
; ++slot)

2215 
	gÃwšÃr
->
	gchdid
[
¦Ù
] = 
cİy_»cursive
(
šÃr
->
chdid
[slot]);

2218  
	gÃwšÃr
;

2222 
	gpublic
:

2228 
šlše
 
¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
š£¹
(cÚ¡ 
·œ_ty³
& 
x
)

2230  
š£¹_¡¬t
(
x
.
fœ¡
, x.
£cÚd
);

2237 
šlše
 
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
š£¹
(cÚ¡ 
key_ty³
& 
key
, cÚ¡ 
d©a_ty³
& 
d©a
)

2239  
š£¹_¡¬t
(
key
, 
d©a
);

2246 
šlše
 
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
š£¹2
(cÚ¡ 
key_ty³
& 
key
, cÚ¡ 
d©a_ty³
& 
d©a
)

2248  
š£¹_¡¬t
(
key
, 
d©a
);

2253 
šlše
 
™”©Ü
 
š£¹
(™”©Ü , cÚ¡ 
·œ_ty³
& 
x
)

2255  
š£¹_¡¬t
(
x
.
fœ¡
, x.
£cÚd
).
	gfœ¡
;

2260 
šlše
 
™”©Ü
 
š£¹2
(™”©Ü , cÚ¡ 
key_ty³
& 
key
, cÚ¡ 
d©a_ty³
& 
d©a
)

2262  
š£¹_¡¬t
(
key
, 
d©a
).
	gfœ¡
;

2268 
	g‹m¶©e
 <
ty³Çme
 
	gIÅutI‹¿tÜ
>

2269 
šlše
 
š£¹
(
IÅutI‹¿tÜ
 
fœ¡
, IÅutI‹¿tÜ 
Ï¡
)

2271 
IÅutI‹¿tÜ
 
	g™”
 = 
fœ¡
;

2272 
	g™”
 !ğ
Ï¡
)

2274 
š£¹
(*
™”
);

2275 ++
	g™”
;

2279 
	g´iv©e
:

2284 
¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
š£¹_¡¬t
(cÚ¡ 
key_ty³
& 
key
, cÚ¡ 
d©a_ty³
& 
v®ue
)

2286 
node
* 
	gÃwchd
 = 
NULL
;

2287 
key_ty³
 
	gÃwkey
 = key_type();

2289 ià(
	gm_roÙ
 =ğ
NULL
) {

2290 
m_roÙ
 = 
m_h—dËaf
 = 
m_Ëaf
 = 
®loÿ‹_Ëaf
();

2293 
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
	gr
 = 
š£¹_desûnd
(
m_roÙ
, 
key
, 
v®ue
, &
Ãwkey
, &
Ãwchd
);

2295 ià(
	gÃwchd
)

2297 
šÃr_node
* 
	gÃwroÙ
 = 
®loÿ‹_šÃr
(
m_roÙ
->
Ëv–
 + 1);

2298 
	gÃwroÙ
->
	g¦Ùkey
[0] = 
Ãwkey
;

2300 
	gÃwroÙ
->
	gchdid
[0] = 
m_roÙ
;

2301 
	gÃwroÙ
->
	gchdid
[1] = 
Ãwchd
;

2303 
	gÃwroÙ
->
	g¦Ùu£
 = 1;

2305 
	gm_roÙ
 = 
ÃwroÙ
;

2309 ià(
	gr
.
	g£cÚd
è++
	gm_¡©s
.
	g™emcouÁ
;

2311 #ifdeà
BTREE_DEBUG


2312 ià(
	gdebug
è
´št
(
¡d
::
cout
);

2315 ià(
	g£lfv”ify
) {

2316 
v”ify
();

2317 
BTREE_ASSERT
(
exi¡s
(
key
));

2320  
	gr
;

2330 
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
š£¹_desûnd
(
node
* 
n
,

2331 cÚ¡ 
key_ty³
& 
key
, cÚ¡ 
d©a_ty³
& 
v®ue
,

2332 
key_ty³
* 
¥l™key
, 
node
** 
¥l™node
)

2334 ià(!
	gn
->
i¦—âode
())

2336 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
n
);

2338 
key_ty³
 
	gÃwkey
 = key_type();

2339 
node
* 
	gÃwchd
 = 
NULL
;

2341 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

2343 
BTREE_PRINT
("bŒ“::š£¹_desûnd iÁØ" << 
šÃr
->
chdid
[
¦Ù
]);

2344 
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
	gr
 = 
š£¹_desûnd
(
šÃr
->
chdid
[
¦Ù
],

2345 
key
, 
v®ue
, &
Ãwkey
, &
Ãwchd
);

2347 ià(
	gÃwchd
)

2349 
BTREE_PRINT
("bŒ“::š£¹_desûnd‚ewchd w™h key " << 
Ãwkey
 << "‚od" << 
Ãwchd
 << "‡ˆ¦Ù " << 
¦Ù
);

2351 ià(
	gšÃr
->
isfuÎ
())

2353 
¥l™_šÃr_node
(
šÃr
, 
¥l™key
, 
¥l™node
, 
¦Ù
);

2355 
BTREE_PRINT
("bŒ“::š£¹_desûnd dÚ¥l™_šÃr:…ut¦Ù: " << 
¦Ù
 << "…utkey: " << 
Ãwkey
 << " upkey: " << *
¥l™key
);

2357 #ifdeà
BTREE_DEBUG


2358 ià(
	gdebug
)

2360 
´št_node
(
¡d
::
cout
, 
šÃr
);

2361 
´št_node
(
¡d
::
cout
, *
¥l™node
);

2366 
BTREE_PRINT
("bŒ“::š£¹_desûnd sw™ch: " << 
¦Ù
 << " > " << 
šÃr
->
¦Ùu£
 + 1);

2368 ià(
	g¦Ù
 =ğ
šÃr
->
¦Ùu£
 + 1 && iÂ”->¦Ùu£ < (*
¥l™node
)->slotuse)

2374 
BTREE_ASSERT
(
šÃr
->
¦Ùu£
 + 1 < 
šÃr¦Ùmax
);

2376 
šÃr_node
* 
	g¥l™šÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(*
¥l™node
);

2379 
	gšÃr
->
	g¦Ùkey
[
šÃr
->
¦Ùu£
] = *
¥l™key
;

2380 
	gšÃr
->
	gchdid
[
šÃr
->
¦Ùu£
 + 1] = 
¥l™šÃr
->
chdid
[0];

2381 
	gšÃr
->
	g¦Ùu£
++;

2384 
	g¥l™šÃr
->
	gchdid
[0] = 
Ãwchd
;

2385 *
	g¥l™key
 = 
Ãwkey
;

2387  
	gr
;

2389 ià(
	g¦Ù
 >ğ
šÃr
->
¦Ùu£
 + 1)

2394 
¦Ù
 -ğ
šÃr
->
¦Ùu£
 + 1;

2395 
	gšÃr
 = 
¡©ic_ÿ¡
<
šÃr_node
*>(*
¥l™node
);

2396 
BTREE_PRINT
("bŒ“::š£¹_desûnd sw™chšgØ¥l™‹d‚od" << 
šÃr
 << " slÙ " << 
¦Ù
);

2401 
BTREE_ASSERT
(
¦Ù
 >ğ0 && slÙ <ğ
šÃr
->
¦Ùu£
);

2403 
	g¡d
::
cİy_backw¬d
(
šÃr
->
¦Ùkey
 + 
¦Ù
, iÂ”->¦Ùkey + iÂ”->
¦Ùu£
,

2404 
šÃr
->
¦Ùkey
 + iÂ”->
¦Ùu£
 + 1);

2405 
	g¡d
::
cİy_backw¬d
(
šÃr
->
chdid
 + 
¦Ù
, iÂ”->chdid + iÂ”->
¦Ùu£
 + 1,

2406 
šÃr
->
chdid
 + iÂ”->
¦Ùu£
 + 2);

2408 
	gšÃr
->
	g¦Ùkey
[
¦Ù
] = 
Ãwkey
;

2409 
	gšÃr
->
	gchdid
[
¦Ù
 + 1] = 
Ãwchd
;

2410 
	gšÃr
->
	g¦Ùu£
++;

2413  
	gr
;

2417 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
n
);

2418 
	gÜig_¦Ùu£d
 = 
Ëaf
->
couÁ
();

2420 
	g¦Ù
 = 
Ëaf_fšd_low”
(
Ëaf
, 
key
);

2422 ià(!
	g®low_du¶iÿ‹s
 && 
	g¦Ù
 < 
	gÜig_¦Ùu£d
 && 
key_equ®
(
key
, 
Ëaf
->
¦Ùkey
[
¦Ù
])) {

2423  
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
>(™”©Ü(
Ëaf
, 
¦Ù
), 
	gçl£
);

2426 ià(
	gËaf
->
isfuÎ
())

2428 
¥l™_Ëaf_node
(
Ëaf
, 
¥l™key
, 
¥l™node
);

2431 
	gÜig_¦Ùu£d
 = 
Ëaf
->
couÁ
();

2432 ià(
	g¦Ù
 >ğ
Üig_¦Ùu£d
)

2434 
¦Ù
 -ğ
Üig_¦Ùu£d
;

2435 
	gËaf
 = 
¡©ic_ÿ¡
<
Ëaf_node
*>(*
¥l™node
);

2440 
Ëaf_node
 *
	gshadow_Ëaf
 = 
®loÿ‹_Ëaf
();

2441 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
,†—f->¦Ùkey + 
Üig_¦Ùu£d
, 
shadow_Ëaf
->slotkey);

2442 
d©a_cİy
(
Ëaf
->
¦Ùd©a
,†—f->¦Ùd©¨+ 
Üig_¦Ùu£d
, 
shadow_Ëaf
->slotdata);

2443 
	g¡d
::
cİy
(
Ëaf
->
bs
,†—f->b + 
BITS_TO_LONGS
(
Ëaf¦Ùmax
è* (), 
shadow_Ëaf
->bs);

2445 
nv_æush
((*)
shadow_Ëaf
, (
Ëaf_node
));

2448 
BTREE_ASSERT
(
¦Ù
 >ğ0 && slÙ <ğ
Üig_¦Ùu£d
);

2450 
	g¡d
::
cİy_backw¬d
(
Ëaf
->
¦Ùkey
 + 
¦Ù
,†—f->¦Ùkey + 
Üig_¦Ùu£d
,†eaf->slotkey + orig_slotused + 1);

2451 
d©a_cİy_backw¬d
(
Ëaf
->
¦Ùd©a
 + 
¦Ù
,†—f->¦Ùd©¨+ 
Üig_¦Ùu£d
,†eaf->slotdata + orig_slotused + 1);

2452 
	gi
 = 
Üig_¦Ùu£d
; i > 
	g¦Ù
; i--){

2453 
	gËaf
->
b™m­_£t
(
i
);

2455 
	gËaf
->
	g¦Ùkey
[
¦Ù
] = 
key
;

2456 ià(!
	gu£d_as_£t
è
	gËaf
->
	g¦Ùd©a
[
¦Ù
] = 
v®ue
;

2457 
	gËaf
->
b™m­_£t
(
¦Ù
);

2458 
nv_æush
((*)
Ëaf
, (
Ëaf_node
));

2459 
nv_ä“
(
vmp
, (*)
shadow_Ëaf
);

2461 ià(
	g¥l™node
 && 
	gËaf
 !ğ*
¥l™node
 && 
¦Ù
 =ğ
Üig_¦Ùu£d
 - 1)

2466 *
¥l™key
 = 
key
;

2469  
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
>(™”©Ü(
Ëaf
, 
¦Ù
), 
	gŒue
);

2475 
¥l™_Ëaf_node
(
Ëaf_node
* 
Ëaf
, 
key_ty³
* 
_Ãwkey
, 
node
** 
_ÃwËaf
)

2477 
BTREE_ASSERT
(
Ëaf
->
isfuÎ
());

2479 
	gÜig_¦Ùu£d
 = 
Ëaf
->
couÁ
();

2480 
	gmid
 = (
Üig_¦Ùu£d
 >> 1);

2482 
BTREE_PRINT
("bŒ“::¥l™_Ëaf_nodÚ " << 
Ëaf
);

2484 
Ëaf_node
* 
	gÃwËaf
 = 
®loÿ‹_Ëaf
();

2487 
	gÃw_¦Ùu£d
 = 
Üig_¦Ùu£d
 - 
mid
;

2489 
	gÃwËaf
->
	gÃx—f
 = 
Ëaf
->
Ãx—f
;

2490 ià(
	gÃwËaf
->
	gÃx—f
 =ğ
NULL
) {

2491 
BTREE_ASSERT
(
Ëaf
 =ğ
m_Ëaf
);

2492 
	gm_Ëaf
 = 
ÃwËaf
;

2495 
	gÃwËaf
->
	gÃx—f
->
	g´evËaf
 = 
ÃwËaf
;

2498 
Ëaf_node
 *
	gshadow_Ëaf
 = 
®loÿ‹_Ëaf
();

2499 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
,†—f->¦Ùkey + 
Üig_¦Ùu£d
,

2500 
shadow_Ëaf
->
¦Ùkey
);

2501 
d©a_cİy
(
Ëaf
->
¦Ùd©a
,†—f->¦Ùd©¨+ 
Üig_¦Ùu£d
,

2502 
shadow_Ëaf
->
¦Ùd©a
);

2503 
	g¡d
::
cİy
(
Ëaf
->
bs
,†—f->b + 
BITS_TO_LONGS
(
Ëaf¦Ùmax
è* (),
shadow_Ëaf
->bs);

2504 
nv_æush
((*)
shadow_Ëaf
, (
Ëaf_node
));

2507 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
 + 
mid
,†—f->¦Ùkey + 
Üig_¦Ùu£d
, 
ÃwËaf
->slotkey);

2508 
d©a_cİy
(
Ëaf
->
¦Ùd©a
 + 
mid
,†—f->¦Ùd©¨+ 
Üig_¦Ùu£d
, 
ÃwËaf
->slotdata);

2509 
	gi
 = 0; i < 
	gÜig_¦Ùu£d
 - 
	gmid
; i++)

2510 
	gÃwËaf
->
b™m­_£t
(
i
);

2513 
	gi
 = 
mid
; i < 
	gÜig_¦Ùu£d
; i++) {

2514 
	gËaf
->
b™m­_ş—r
(
i
);

2516 
	gËaf
->
	gÃx—f
 = 
ÃwËaf
;

2517 
	gÃwËaf
->
	g´evËaf
 = 
Ëaf
;

2519 *
	g_Ãwkey
 = 
Ëaf
->
¦Ùkey
[Ëaf->
couÁ
() - 1];

2520 *
	g_ÃwËaf
 = 
ÃwËaf
;

2522 
nv_æush
((*)
ÃwËaf
, (
Ëaf_node
));

2523 
nv_æush
((*)
Ëaf
, (
Ëaf_node
));

2524 
nv_ä“
(
vmp
, (*)
shadow_Ëaf
);

2531 
¥l™_šÃr_node
(
šÃr_node
* 
šÃr
, 
key_ty³
* 
_Ãwkey
, 
node
** 
_ÃwšÃr
, 
add¦Ù
)

2533 
BTREE_ASSERT
(
šÃr
->
isfuÎ
());

2535 
	gmid
 = (
šÃr
->
¦Ùu£
 >> 1);

2537 
BTREE_PRINT
("bŒ“::¥l™_šÃr: mid " << 
mid
 << "‡dd¦Ù " << 
add¦Ù
);

2541 ià(
	gadd¦Ù
 <ğ
mid
 && mid > 
šÃr
->
¦Ùu£
 - (mid + 1))

2542 
mid
--;

2544 
BTREE_PRINT
("bŒ“::¥l™_šÃr: mid " << 
mid
 << "‡dd¦Ù " << 
add¦Ù
);

2546 
BTREE_PRINT
("bŒ“::¥l™_šÃr_nodÚ " << 
šÃr
 << " iÁØtwØnode " << 
mid
 << "‡nd " << iÂ”->
¦Ùu£
 - (mid + 1) << " sized");

2548 
šÃr_node
* 
	gÃwšÃr
 = 
®loÿ‹_šÃr
(
šÃr
->
Ëv–
);

2550 
	gÃwšÃr
->
	g¦Ùu£
 = 
šÃr
->
¦Ùu£
 - (
mid
 + 1);

2552 
	g¡d
::
cİy
(
šÃr
->
¦Ùkey
 + 
mid
 + 1, iÂ”->¦Ùkey + iÂ”->
¦Ùu£
,

2553 
ÃwšÃr
->
¦Ùkey
);

2554 
	g¡d
::
cİy
(
šÃr
->
chdid
 + 
mid
 + 1, iÂ”->chdid + iÂ”->
¦Ùu£
 + 1,

2555 
ÃwšÃr
->
chdid
);

2557 
	gšÃr
->
	g¦Ùu£
 = 
mid
;

2559 *
	g_Ãwkey
 = 
šÃr
->
¦Ùkey
[
mid
];

2560 *
	g_ÃwšÃr
 = 
ÃwšÃr
;

2563 
	gpublic
:

2568 
‹m¶©e
 <
ty³Çme
 
I‹¿tÜ
>

2569 
bulk_lßd
(
I‹¿tÜ
 
ibegš
, I‹¿tÜ 
›nd
)

2571 
BTREE_ASSERT
(
em±y
());

2573 
	gm_¡©s
.
	g™emcouÁ
 = 
›nd
 - 
ibegš
;

2576 
size_t
 
	gnum_™ems
 = 
›nd
 - 
ibegš
;

2577 
size_t
 
	gnum_Ëaves
 = (
num_™ems
 + 
Ëaf¦Ùmax
 - 1) /†eafslotmax;

2579 
BTREE_PRINT
("bŒ“::bulk_lßd,†ev– 0: " << 
m_¡©s
.
™emcouÁ
 << " i‹m štØ" << 
num_Ëaves
 << "†—ve w™h u°tØ" << ((
›nd
 - 
ibegš
 +‚um_leaves - 1) /‚um_leaves) << " items…er†eaf.");

2581 
I‹¿tÜ
 
	g™
 = 
ibegš
;

2582 
size_t
 
	gi
 = 0; i < 
	gnum_Ëaves
; ++i)

2585 
Ëaf_node
* 
	gËaf
 = 
®loÿ‹_Ëaf
();

2589 
	gËaf
->
	g¦Ùu£
 = 
¡©ic_ÿ¡
<>(
num_™ems
 / (
num_Ëaves
 - 
i
));

2590 
size_t
 
	gs
 = 0; s < 
	gËaf
->
	g¦Ùu£
; ++s, ++
	g™
)

2591 
	gËaf
->
£t_¦Ù
(
s
, *
™
);

2593 ià(
	gm_Ëaf
 !ğ
NULL
) {

2594 
m_Ëaf
->
Ãx—f
 = 
Ëaf
;

2595 
	gËaf
->
	g´evËaf
 = 
m_Ëaf
;

2598 
	gm_h—dËaf
 = 
Ëaf
;

2600 
	gm_Ëaf
 = 
Ëaf
;

2602 
	gnum_™ems
 -ğ
Ëaf
->
¦Ùu£
;

2605 
BTREE_ASSERT
(
™
 =ğ
›nd
 && 
num_™ems
 == 0);

2608 ià(
	gm_h—dËaf
 =ğ
m_Ëaf
) {

2609 
m_roÙ
 = 
m_h—dËaf
;

2613 
BTREE_ASSERT
(
m_¡©s
.
Ëaves
 =ğ
num_Ëaves
);

2616 
size_t
 
	gnum_·»Ás
 = (
num_Ëaves
 + (
šÃr¦Ùmax
 + 1) - 1) / (innerslotmax + 1);

2618 
BTREE_PRINT
("bŒ“::bulk_lßd,†ev– 1: " << 
num_Ëaves
 << "†—ve š " << 
num_·»Ás
 << " inner‚odes with upo " << ((num_leaves +‚um_parents - 1) /‚um_parents) << "†eaves…er inner‚ode.");

2621 
	g¡d
::
	t·œ
<
	tšÃr_node
*, cÚ¡ 
	tkey_ty³
*> 
	tÃxev–_ty³
;

2622 
Ãxev–_ty³
* 
	gÃxev–
 = 
Ãw
‚exev–_ty³[
num_·»Ás
];

2624 
Ëaf_node
* 
	gËaf
 = 
m_h—dËaf
;

2625 
size_t
 
	gi
 = 0; i < 
	gnum_·»Ás
; ++i)

2628 
šÃr_node
* 
	gn
 = 
®loÿ‹_šÃr
(1);

2630 
	gn
->
	g¦Ùu£
 = 
¡©ic_ÿ¡
<>(
num_Ëaves
 / (
num_·»Ás
 - 
i
));

2631 
BTREE_ASSERT
(
n
->
¦Ùu£
 > 0);

2632 --
	gn
->
	g¦Ùu£
;

2635 
	gs
 = 0; s < 
	gn
->
	g¦Ùu£
; ++s)

2637 
	gn
->
	g¦Ùkey
[
s
] = 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1];

2638 
	gn
->
	gchdid
[
s
] = 
Ëaf
;

2639 
	gËaf
 = 
Ëaf
->
Ãx—f
;

2641 
	gn
->
	gchdid
[
n
->
¦Ùu£
] = 
Ëaf
;

2644 
	gÃxev–
[
i
].
	gfœ¡
 = 
n
;

2645 
	gÃxev–
[
i
].
	g£cÚd
 = &
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1];

2647 
	gËaf
 = 
Ëaf
->
Ãx—f
;

2648 
	gnum_Ëaves
 -ğ
n
->
¦Ùu£
 + 1;

2651 
BTREE_ASSERT
(
Ëaf
 =ğ
NULL
 && 
num_Ëaves
 == 0);

2654 
	gËv–
 = 2; 
	gnum_·»Ás
 != 1; ++level)

2656 
size_t
 
	gnum_chd»n
 = 
num_·»Ás
;

2657 
	gnum_·»Ás
 = (
num_chd»n
 + (
šÃr¦Ùmax
 + 1) - 1) / (innerslotmax + 1);

2659 
BTREE_PRINT
("bŒ“::bulk_lßd,†ev– " << 
Ëv–
 << ": " << 
num_chd»n
 << " chd»Àš " << 
num_·»Ás
 << " inner‚odes with upo " << ((num_children +‚um_parents - 1) /‚um_parents) << " children…er inner‚ode.");

2661 
size_t
 
	gšÃr_šdex
 = 0;

2662 
size_t
 
	gi
 = 0; i < 
	gnum_·»Ás
; ++i)

2665 
šÃr_node
* 
	gn
 = 
®loÿ‹_šÃr
(
Ëv–
);

2667 
	gn
->
	g¦Ùu£
 = 
¡©ic_ÿ¡
<>(
num_chd»n
 / (
num_·»Ás
 - 
i
));

2668 
BTREE_ASSERT
(
n
->
¦Ùu£
 > 0);

2669 --
	gn
->
	g¦Ùu£
;

2672 
	gs
 = 0; s < 
	gn
->
	g¦Ùu£
; ++s)

2674 
	gn
->
	g¦Ùkey
[
s
] = *
Ãxev–
[
šÃr_šdex
].
£cÚd
;

2675 
	gn
->
	gchdid
[
s
] = 
Ãxev–
[
šÃr_šdex
].
fœ¡
;

2676 ++
	gšÃr_šdex
;

2678 
	gn
->
	gchdid
[
n
->
¦Ùu£
] = 
Ãxev–
[
šÃr_šdex
].
fœ¡
;

2682 
	gÃxev–
[
i
].
	gfœ¡
 = 
n
;

2683 
	gÃxev–
[
i
].
	g£cÚd
 = 
Ãxev–
[
šÃr_šdex
].
£cÚd
;

2685 ++
	gšÃr_šdex
;

2686 
	gnum_chd»n
 -ğ
n
->
¦Ùu£
 + 1;

2689 
BTREE_ASSERT
(
num_chd»n
 == 0);

2692 
	gm_roÙ
 = 
Ãxev–
[0].
fœ¡
;

2693 
	gd–‘e
[] 
	gÃxev–
;

2695 ià(
	g£lfv”ify
è
v”ify
();

2698 
	g´iv©e
:

2702 
	e»suÉ_æags_t


2705 
bŒ“_ok
 = 0,

2708 
	gbŒ“_nÙ_found
 = 1,

2712 
	gbŒ“_upd©e_Ï¡key
 = 2,

2716 
	gbŒ“_fixm”ge
 = 4

2721 
	s»suÉ_t


2724 
»suÉ_æags_t
 
	gæags
;

2727 
key_ty³
 
	gÏ¡key
;

2731 
šlše
 
ex¶ic™
 
»suÉ_t
(
»suÉ_æags_t
 
f
 = 
bŒ“_ok
)

2732 : 
æags
(
f
), 
Ï¡key
()

2736 
šlše
 
»suÉ_t
(
»suÉ_æags_t
 
f
, cÚ¡ 
key_ty³
& 
k
)

2737 : 
æags
(
f
), 
Ï¡key
(
k
)

2741 
šlše
 
boŞ
 
has
(
»suÉ_æags_t
 
f
) const

2743  (
	gæags
 & 
	gf
) != 0;

2747 
šlše
 
	g»suÉ_t
& 
	gİ”©Ü
 |ğ(cÚ¡ 
»suÉ_t
& 
Ùh”
)

2749 
æags
 = 
»suÉ_æags_t
(æag | 
Ùh”
.flags);

2752 ià(
	gÙh”
.
has
(
bŒ“_upd©e_Ï¡key
))

2753 
	gÏ¡key
 = 
Ùh”
.
Ï¡key
;

2755  *
	gthis
;

2759 
	gpublic
:

2764 
boŞ
 
”a£_Úe
(cÚ¡ 
key_ty³
& 
key
)

2766 
BTREE_PRINT
("bŒ“::”a£_Úe(" << 
key
 << "èÚ bŒ“ siz" << 
size
());

2768 ià(
	g£lfv”ify
è
v”ify
();

2770 ià(!
	gm_roÙ
è 
	gçl£
;

2772 
»suÉ_t
 
	g»suÉ
 = 
”a£_Úe_desûnd
(
key
, 
m_roÙ
, 
NULL
, NULL, NULL, NULL, NULL, 0);

2774 ià(!
	g»suÉ
.
has
(
bŒ“_nÙ_found
))

2775 --
	gm_¡©s
.
	g™emcouÁ
;

2777 #ifdeà
BTREE_DEBUG


2778 ià(
	gdebug
è
´št
(
¡d
::
cout
);

2780 ià(
	g£lfv”ify
è
v”ify
();

2782  !
	g»suÉ
.
has
(
bŒ“_nÙ_found
);

2787 
size_ty³
 
”a£
(cÚ¡ 
key_ty³
& 
key
)

2789 
size_ty³
 
	gc
 = 0;

2791 
”a£_Úe
(
key
))

2793 ++
	gc
;

2794 ià(!
	g®low_du¶iÿ‹s
) ;

2797  
	gc
;

2801 
”a£
(
™”©Ü
 
™”
)

2803 
BTREE_PRINT
("bŒ“::”a£_™”(" << 
™”
.
cu¼node
 << "," << i‹r.
cu¼¦Ù
 << "èÚ bŒ“ siz" << 
size
());

2805 ià(
	g£lfv”ify
è
v”ify
();

2807 ià(!
	gm_roÙ
) ;

2809 
»suÉ_t
 
	g»suÉ
 = 
”a£_™”_desûnd
(
™”
, 
m_roÙ
, 
NULL
, NULL, NULL, NULL, NULL, 0);

2811 ià(!
	g»suÉ
.
has
(
bŒ“_nÙ_found
))

2812 --
	gm_¡©s
.
	g™emcouÁ
;

2814 #ifdeà
BTREE_DEBUG


2815 ià(
	gdebug
è
´št
(
¡d
::
cout
);

2817 ià(
	g£lfv”ify
è
v”ify
();

2820 #ifdeà
BTREE_TODO


2823 
”a£
(
™”©Ü
 , iterator )

2825 
abÜt
();

2829 
	g´iv©e
:

2841 
»suÉ_t
 
”a£_Úe_desûnd
(cÚ¡ 
key_ty³
& 
key
,

2842 
node
* 
cu¼
,

2843 
node
* 
Ëá
,‚ode* 
right
,

2844 
šÃr_node
* 
Ëá·»Á
, iÂ”_node* 
righ¬’t
,

2845 
šÃr_node
* 
·»Á
, 
·»Á¦Ù
)

2847 ià(
	gcu¼
->
i¦—âode
())

2849 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
cu¼
);

2850 
Ëaf_node
* 
	gËáËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
Ëá
);

2851 
Ëaf_node
* 
	grigh—f
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
right
);

2853 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

2855 ià(
	g¦Ù
 >ğ
Ëaf
->
¦Ùu£
 || !
key_equ®
(
key
,†—f->
¦Ùkey
[
¦Ù
]))

2857 
BTREE_PRINT
("Could‚Ù fšd key " << 
key
 << "oƒrase.");

2859  
»suÉ_t
(
bŒ“_nÙ_found
);

2862 
BTREE_PRINT
("Found key iÀËaà" << 
cu¼
 << "‡ˆ¦Ù " << 
¦Ù
);

2864 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
 + 
¦Ù
 + 1,†—f->¦Ùkey +†—f->
¦Ùu£
,

2865 
Ëaf
->
¦Ùkey
 + 
¦Ù
);

2866 
d©a_cİy
(
Ëaf
->
¦Ùd©a
 + 
¦Ù
 + 1,†—f->¦Ùd©¨+†—f->
¦Ùu£
,

2867 
Ëaf
->
¦Ùd©a
 + 
¦Ù
);

2869 
	gËaf
->
	g¦Ùu£
--;

2871 
»suÉ_t
 
	gmy»s
 =„esuÉ_t(
bŒ“_ok
);

2875 ià(
	g¦Ù
 =ğ
Ëaf
->
¦Ùu£
)

2877 ià(
·»Á
 && 
·»Á¦Ù
 <…¬’t->
¦Ùu£
)

2879 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
cu¼
);

2880 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1];

2884 ià(
	gËaf
->
	g¦Ùu£
 >= 1)

2886 
BTREE_PRINT
("Schedulšg†a¡keyupd©e: key " << 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1]);

2887 
	gmy»s
 |ğ
»suÉ_t
(
bŒ“_upd©e_Ï¡key
, 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1]);

2891 
BTREE_ASSERT
(
Ëaf
 =ğ
m_roÙ
);

2896 ià(
	gËaf
->
isund”æow
(è&& !Ö—à=ğ
m_roÙ
 && 
Ëaf
->
¦Ùu£
 >= 1))

2902 ià(
ËáËaf
 =ğ
NULL
 && 
righ—f
 == NULL)

2904 
BTREE_ASSERT
(
Ëaf
 =ğ
m_roÙ
);

2905 
BTREE_ASSERT
(
Ëaf
->
¦Ùu£
 == 0);

2907 
ä“_node
(
m_roÙ
);

2909 
	gm_roÙ
 = 
Ëaf
 = 
NULL
;

2910 
	gm_h—dËaf
 = 
m_Ëaf
 = 
NULL
;

2913 
BTREE_ASSERT
(
m_¡©s
.
™emcouÁ
 == 1);

2914 
BTREE_ASSERT
(
m_¡©s
.
Ëaves
 == 0);

2915 
BTREE_ASSERT
(
m_¡©s
.
šÃºodes
 == 0);

2917  
»suÉ_t
(
bŒ“_ok
);

2922 ià((
	gËáËaf
 =ğ
NULL
 || 
ËáËaf
->
isãw
()è&& (
righ—f
 == NULL ||„ightleaf->isfew()))

2924 ià(
Ëá·»Á
 =ğ
·»Á
)

2925 
my»s
 |ğ
m”ge_Ëaves
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
);

2927 
	gmy»s
 |ğ
m”ge_Ëaves
(
Ëaf
, 
righ—f
, 
righ¬’t
);

2930 ià((
	gËáËaf
 !ğ
NULL
 && 
ËáËaf
->
isãw
()è&& (
righ—f
 != NULL && !rightleaf->isfew()))

2932 ià(
righ¬’t
 =ğ
·»Á
)

2933 
my»s
 |ğ
shiá_Ëá_Ëaf
(
Ëaf
, 
righ—f
, 
righ¬’t
, 
·»Á¦Ù
);

2935 
	gmy»s
 |ğ
m”ge_Ëaves
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
);

2938 ià((
	gËáËaf
 !ğ
NULL
 && !
ËáËaf
->
isãw
()è&& (
righ—f
 != NULL &&„ightleaf->isfew()))

2940 ià(
Ëá·»Á
 =ğ
·»Á
)

2941 
shiá_right_Ëaf
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

2943 
	gmy»s
 |ğ
m”ge_Ëaves
(
Ëaf
, 
righ—f
, 
righ¬’t
);

2947 ià(
	gËá·»Á
 =ğ
righ¬’t
)

2949 ià(
ËáËaf
->
¦Ùu£
 <ğ
righ—f
->slotuse)

2950 
my»s
 |ğ
shiá_Ëá_Ëaf
(
Ëaf
, 
righ—f
, 
righ¬’t
, 
·»Á¦Ù
);

2952 
shiá_right_Ëaf
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

2956 ià(
	gËá·»Á
 =ğ
·»Á
)

2957 
shiá_right_Ëaf
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

2959 
	gmy»s
 |ğ
shiá_Ëá_Ëaf
(
Ëaf
, 
righ—f
, 
righ¬’t
, 
·»Á¦Ù
);

2963  
»suÉ_t
(
my»s
);

2967 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
cu¼
);

2968 
šÃr_node
* 
	gËášÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
Ëá
);

2969 
šÃr_node
* 
	grightšÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
right
);

2971 
node
* 
	gmyËá
, * 
	gmyright
;

2972 
šÃr_node
* 
	gmyËá·»Á
, * 
	gmyrigh¬’t
;

2974 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

2976 ià(
	g¦Ù
 == 0) {

2977 
myËá
 = (
Ëá
 =ğ
NULL
è? NULL : (
¡©ic_ÿ¡
<
šÃr_node
*>Öeá))->
chdid
[Ëá->
¦Ùu£
 - 1];

2978 
	gmyËá·»Á
 = 
Ëá·»Á
;

2981 
	gmyËá
 = 
šÃr
->
chdid
[
¦Ù
 - 1];

2982 
	gmyËá·»Á
 = 
šÃr
;

2985 ià(
	g¦Ù
 =ğ
šÃr
->
¦Ùu£
) {

2986 
myright
 = (
right
 =ğ
NULL
è? NULL : (
¡©ic_ÿ¡
<
šÃr_node
*>Ôight))->
chdid
[0];

2987 
	gmyrigh¬’t
 = 
righ¬’t
;

2990 
	gmyright
 = 
šÃr
->
chdid
[
¦Ù
 + 1];

2991 
	gmyrigh¬’t
 = 
šÃr
;

2994 
BTREE_PRINT
("”a£_Úe_desûnd iÁØ" << 
šÃr
->
chdid
[
¦Ù
]);

2996 
»suÉ_t
 
	g»suÉ
 = 
”a£_Úe_desûnd
(
key
,

2997 
šÃr
->
chdid
[
¦Ù
],

2998 
myËá
, 
myright
,

2999 
myËá·»Á
, 
myrigh¬’t
,

3000 
šÃr
, 
¦Ù
);

3002 
»suÉ_t
 
	gmy»s
 =„esuÉ_t(
bŒ“_ok
);

3004 ià(
	g»suÉ
.
has
(
bŒ“_nÙ_found
))

3006  
»suÉ_t
(
»suÉ
);

3009 ià(
	g»suÉ
.
has
(
bŒ“_upd©e_Ï¡key
))

3011 ià(
	g·»Á
 && 
	g·»Á¦Ù
 <…¬’t->
	g¦Ùu£
)

3013 
BTREE_PRINT
("Fixšg†a¡keyupd©e: key " << 
»suÉ
.
Ï¡key
 << " iÁØ·»Á " << 
·»Á
 << "‡ˆ·»Á¦Ù " << 
·»Á¦Ù
);

3015 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
cu¼
);

3016 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
»suÉ
.
Ï¡key
;

3020 
BTREE_PRINT
("FÜw¬dšg†a¡keyupd©e: key " << 
»suÉ
.
Ï¡key
);

3021 
	gmy»s
 |ğ
»suÉ_t
(
bŒ“_upd©e_Ï¡key
, 
»suÉ
.
Ï¡key
);

3025 ià(
	g»suÉ
.
has
(
bŒ“_fixm”ge
))

3028 ià(
	gšÃr
->
	gchdid
[
¦Ù
]->
	g¦Ùu£
 != 0)

3029 
¦Ù
++;

3032 
BTREE_ASSERT
(
šÃr
->
chdid
[
¦Ù
]->
¦Ùu£
 == 0);

3034 
ä“_node
(
šÃr
->
chdid
[
¦Ù
]);

3036 
	g¡d
::
cİy
(
šÃr
->
¦Ùkey
 + 
¦Ù
, iÂ”->¦Ùkey + iÂ”->
¦Ùu£
,

3037 
šÃr
->
¦Ùkey
 + 
¦Ù
 - 1);

3038 
	g¡d
::
cİy
(
šÃr
->
chdid
 + 
¦Ù
 + 1, iÂ”->chdid + iÂ”->
¦Ùu£
 + 1,

3039 
šÃr
->
chdid
 + 
¦Ù
);

3041 
	gšÃr
->
	g¦Ùu£
--;

3043 ià(
	gšÃr
->
	gËv–
 == 1)

3046 
¦Ù
--;

3047 
Ëaf_node
* 
	gchd
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
šÃr
->
chdid
[
¦Ù
]);

3048 
	gšÃr
->
	g¦Ùkey
[
¦Ù
] = 
chd
->
¦Ùkey
[chd->
¦Ùu£
 - 1];

3052 ià(
	gšÃr
->
isund”æow
(è&& !(šÃ¸=ğ
m_roÙ
 && 
šÃr
->
¦Ùu£
 >= 1))

3055 ià(
ËášÃr
 =ğ
NULL
 && 
rightšÃr
 == NULL)

3057 
BTREE_ASSERT
(
šÃr
 =ğ
m_roÙ
);

3058 
BTREE_ASSERT
(
šÃr
->
¦Ùu£
 == 0);

3060 
	gm_roÙ
 = 
šÃr
->
chdid
[0];

3062 
	gšÃr
->
	g¦Ùu£
 = 0;

3063 
ä“_node
(
šÃr
);

3065  
»suÉ_t
(
bŒ“_ok
);

3070 ià((
	gËášÃr
 =ğ
NULL
 || 
ËášÃr
->
isãw
()è&& (
rightšÃr
 == NULL ||„ightinner->isfew()))

3072 ià(
Ëá·»Á
 =ğ
·»Á
)

3073 
my»s
 |ğ
m”ge_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3075 
	gmy»s
 |ğ
m”ge_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3078 ià((
	gËášÃr
 !ğ
NULL
 && 
ËášÃr
->
isãw
()è&& (
rightšÃr
 != NULL && !rightinner->isfew()))

3080 ià(
righ¬’t
 =ğ
·»Á
)

3081 
shiá_Ëá_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3083 
	gmy»s
 |ğ
m”ge_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3086 ià((
	gËášÃr
 !ğ
NULL
 && !
ËášÃr
->
isãw
()è&& (
rightšÃr
 != NULL &&„ightinner->isfew()))

3088 ià(
Ëá·»Á
 =ğ
·»Á
)

3089 
shiá_right_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3091 
	gmy»s
 |ğ
m”ge_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3095 ià(
	gËá·»Á
 =ğ
righ¬’t
)

3097 ià(
ËášÃr
->
¦Ùu£
 <ğ
rightšÃr
->slotuse)

3098 
shiá_Ëá_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3100 
shiá_right_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3104 ià(
	gËá·»Á
 =ğ
·»Á
)

3105 
shiá_right_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3107 
shiá_Ëá_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3111  
»suÉ_t
(
my»s
);

3130 
»suÉ_t
 
”a£_™”_desûnd
(cÚ¡ 
™”©Ü
& 
™”
,

3131 
node
* 
cu¼
,

3132 
node
* 
Ëá
,‚ode* 
right
,

3133 
šÃr_node
* 
Ëá·»Á
, iÂ”_node* 
righ¬’t
,

3134 
šÃr_node
* 
·»Á
, 
·»Á¦Ù
)

3136 ià(
	gcu¼
->
i¦—âode
())

3138 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
cu¼
);

3139 
Ëaf_node
* 
	gËáËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
Ëá
);

3140 
Ëaf_node
* 
	grigh—f
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
right
);

3144 ià(
	gËaf
 !ğ
™”
.
cu¼node
)

3146  
»suÉ_t
(
bŒ“_nÙ_found
);

3149 ià(
	g™”
.
	gcu¼¦Ù
 >ğ
Ëaf
->
¦Ùu£
)

3151 
BTREE_PRINT
("Could‚Ù fšd i‹¿tÜ (" << 
™”
.
cu¼node
 << "," << i‹r.
cu¼¦Ù
 << ")oƒrase. Invalid†eaf‚ode?");

3153  
»suÉ_t
(
bŒ“_nÙ_found
);

3156 
	g¦Ù
 = 
™”
.
cu¼¦Ù
;

3158 
BTREE_PRINT
("Found i‹¿tÜ iÀËaà" << 
cu¼
 << "‡ˆ¦Ù " << 
¦Ù
);

3160 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
 + 
¦Ù
 + 1,†—f->¦Ùkey +†—f->
¦Ùu£
,

3161 
Ëaf
->
¦Ùkey
 + 
¦Ù
);

3162 
d©a_cİy
(
Ëaf
->
¦Ùd©a
 + 
¦Ù
 + 1,†—f->¦Ùd©¨+†—f->
¦Ùu£
,

3163 
Ëaf
->
¦Ùd©a
 + 
¦Ù
);

3165 
	gËaf
->
	g¦Ùu£
--;

3167 
»suÉ_t
 
	gmy»s
 =„esuÉ_t(
bŒ“_ok
);

3171 ià(
	g¦Ù
 =ğ
Ëaf
->
¦Ùu£
)

3173 ià(
·»Á
 && 
·»Á¦Ù
 <…¬’t->
¦Ùu£
)

3175 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
cu¼
);

3176 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1];

3180 ià(
	gËaf
->
	g¦Ùu£
 >= 1)

3182 
BTREE_PRINT
("Schedulšg†a¡keyupd©e: key " << 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1]);

3183 
	gmy»s
 |ğ
»suÉ_t
(
bŒ“_upd©e_Ï¡key
, 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1]);

3187 
BTREE_ASSERT
(
Ëaf
 =ğ
m_roÙ
);

3192 ià(
	gËaf
->
isund”æow
(è&& !Ö—à=ğ
m_roÙ
 && 
Ëaf
->
¦Ùu£
 >= 1))

3198 ià(
ËáËaf
 =ğ
NULL
 && 
righ—f
 == NULL)

3200 
BTREE_ASSERT
(
Ëaf
 =ğ
m_roÙ
);

3201 
BTREE_ASSERT
(
Ëaf
->
¦Ùu£
 == 0);

3203 
ä“_node
(
m_roÙ
);

3205 
	gm_roÙ
 = 
Ëaf
 = 
NULL
;

3206 
	gm_h—dËaf
 = 
m_Ëaf
 = 
NULL
;

3209 
BTREE_ASSERT
(
m_¡©s
.
™emcouÁ
 == 1);

3210 
BTREE_ASSERT
(
m_¡©s
.
Ëaves
 == 0);

3211 
BTREE_ASSERT
(
m_¡©s
.
šÃºodes
 == 0);

3213  
»suÉ_t
(
bŒ“_ok
);

3218 ià((
	gËáËaf
 =ğ
NULL
 || 
ËáËaf
->
isãw
()è&& (
righ—f
 == NULL ||„ightleaf->isfew()))

3220 ià(
Ëá·»Á
 =ğ
·»Á
)

3221 
my»s
 |ğ
m”ge_Ëaves
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
);

3223 
	gmy»s
 |ğ
m”ge_Ëaves
(
Ëaf
, 
righ—f
, 
righ¬’t
);

3226 ià((
	gËáËaf
 !ğ
NULL
 && 
ËáËaf
->
isãw
()è&& (
righ—f
 != NULL && !rightleaf->isfew()))

3228 ià(
righ¬’t
 =ğ
·»Á
)

3229 
my»s
 |ğ
shiá_Ëá_Ëaf
(
Ëaf
, 
righ—f
, 
righ¬’t
, 
·»Á¦Ù
);

3231 
	gmy»s
 |ğ
m”ge_Ëaves
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
);

3234 ià((
	gËáËaf
 !ğ
NULL
 && !
ËáËaf
->
isãw
()è&& (
righ—f
 != NULL &&„ightleaf->isfew()))

3236 ià(
Ëá·»Á
 =ğ
·»Á
)

3237 
shiá_right_Ëaf
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3239 
	gmy»s
 |ğ
m”ge_Ëaves
(
Ëaf
, 
righ—f
, 
righ¬’t
);

3243 ià(
	gËá·»Á
 =ğ
righ¬’t
)

3245 ià(
ËáËaf
->
¦Ùu£
 <ğ
righ—f
->slotuse)

3246 
my»s
 |ğ
shiá_Ëá_Ëaf
(
Ëaf
, 
righ—f
, 
righ¬’t
, 
·»Á¦Ù
);

3248 
shiá_right_Ëaf
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3252 ià(
	gËá·»Á
 =ğ
·»Á
)

3253 
shiá_right_Ëaf
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3255 
	gmy»s
 |ğ
shiá_Ëá_Ëaf
(
Ëaf
, 
righ—f
, 
righ¬’t
, 
·»Á¦Ù
);

3259  
	gmy»s
;

3263 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
cu¼
);

3264 
šÃr_node
* 
	gËášÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
Ëá
);

3265 
šÃr_node
* 
	grightšÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
right
);

3270 
»suÉ_t
 
	g»suÉ
;

3271 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
™”
.
key
());

3273 
	g¦Ù
 <ğ
šÃr
->
¦Ùu£
)

3275 
node
* 
myËá
, * 
myright
;

3276 
šÃr_node
* 
	gmyËá·»Á
, * 
	gmyrigh¬’t
;

3278 ià(
	g¦Ù
 == 0) {

3279 
myËá
 = (
Ëá
 =ğ
NULL
è? NULL : (
¡©ic_ÿ¡
<
šÃr_node
*>Öeá))->
chdid
[Ëá->
¦Ùu£
 - 1];

3280 
	gmyËá·»Á
 = 
Ëá·»Á
;

3283 
	gmyËá
 = 
šÃr
->
chdid
[
¦Ù
 - 1];

3284 
	gmyËá·»Á
 = 
šÃr
;

3287 ià(
	g¦Ù
 =ğ
šÃr
->
¦Ùu£
) {

3288 
myright
 = (
right
 =ğ
NULL
è? NULL : (
¡©ic_ÿ¡
<
šÃr_node
*>Ôight))->
chdid
[0];

3289 
	gmyrigh¬’t
 = 
righ¬’t
;

3292 
	gmyright
 = 
šÃr
->
chdid
[
¦Ù
 + 1];

3293 
	gmyrigh¬’t
 = 
šÃr
;

3296 
BTREE_PRINT
("”a£_™”_desûnd iÁØ" << 
šÃr
->
chdid
[
¦Ù
]);

3298 
	g»suÉ
 = 
”a£_™”_desûnd
(
™”
,

3299 
šÃr
->
chdid
[
¦Ù
],

3300 
myËá
, 
myright
,

3301 
myËá·»Á
, 
myrigh¬’t
,

3302 
šÃr
, 
¦Ù
);

3304 ià(!
	g»suÉ
.
has
(
bŒ“_nÙ_found
))

3309 ià(
	g¦Ù
 < 
	gšÃr
->
	g¦Ùu£
 && 
key_Ëss
(
šÃr
->
¦Ùkey
[
¦Ù
], 
™”
.
key
()))

3310  
»suÉ_t
(
bŒ“_nÙ_found
);

3312 ++
	g¦Ù
;

3315 ià(
	g¦Ù
 > 
	gšÃr
->
	g¦Ùu£
)

3316  
»suÉ_t
(
bŒ“_nÙ_found
);

3318 
»suÉ_t
 
	gmy»s
 =„esuÉ_t(
bŒ“_ok
);

3320 ià(
	g»suÉ
.
has
(
bŒ“_upd©e_Ï¡key
))

3322 ià(
	g·»Á
 && 
	g·»Á¦Ù
 <…¬’t->
	g¦Ùu£
)

3324 
BTREE_PRINT
("Fixšg†a¡keyupd©e: key " << 
»suÉ
.
Ï¡key
 << " iÁØ·»Á " << 
·»Á
 << "‡ˆ·»Á¦Ù " << 
·»Á¦Ù
);

3326 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
cu¼
);

3327 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
»suÉ
.
Ï¡key
;

3331 
BTREE_PRINT
("FÜw¬dšg†a¡keyupd©e: key " << 
»suÉ
.
Ï¡key
);

3332 
	gmy»s
 |ğ
»suÉ_t
(
bŒ“_upd©e_Ï¡key
, 
»suÉ
.
Ï¡key
);

3336 ià(
	g»suÉ
.
has
(
bŒ“_fixm”ge
))

3339 ià(
	gšÃr
->
	gchdid
[
¦Ù
]->
	g¦Ùu£
 != 0)

3340 
¦Ù
++;

3343 
BTREE_ASSERT
(
šÃr
->
chdid
[
¦Ù
]->
¦Ùu£
 == 0);

3345 
ä“_node
(
šÃr
->
chdid
[
¦Ù
]);

3347 
	g¡d
::
cİy
(
šÃr
->
¦Ùkey
 + 
¦Ù
, iÂ”->¦Ùkey + iÂ”->
¦Ùu£
,

3348 
šÃr
->
¦Ùkey
 + 
¦Ù
 - 1);

3349 
	g¡d
::
cİy
(
šÃr
->
chdid
 + 
¦Ù
 + 1, iÂ”->chdid + iÂ”->
¦Ùu£
 + 1,

3350 
šÃr
->
chdid
 + 
¦Ù
);

3352 
	gšÃr
->
	g¦Ùu£
--;

3354 ià(
	gšÃr
->
	gËv–
 == 1)

3357 
¦Ù
--;

3358 
Ëaf_node
* 
	gchd
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
šÃr
->
chdid
[
¦Ù
]);

3359 
	gšÃr
->
	g¦Ùkey
[
¦Ù
] = 
chd
->
¦Ùkey
[chd->
¦Ùu£
 - 1];

3363 ià(
	gšÃr
->
isund”æow
(è&& !(šÃ¸=ğ
m_roÙ
 && 
šÃr
->
¦Ùu£
 >= 1))

3367 ià(
ËášÃr
 =ğ
NULL
 && 
rightšÃr
 == NULL)

3369 
BTREE_ASSERT
(
šÃr
 =ğ
m_roÙ
);

3370 
BTREE_ASSERT
(
šÃr
->
¦Ùu£
 == 0);

3372 
	gm_roÙ
 = 
šÃr
->
chdid
[0];

3374 
	gšÃr
->
	g¦Ùu£
 = 0;

3375 
ä“_node
(
šÃr
);

3377  
»suÉ_t
(
bŒ“_ok
);

3382 ià((
	gËášÃr
 =ğ
NULL
 || 
ËášÃr
->
isãw
()è&& (
rightšÃr
 == NULL ||„ightinner->isfew()))

3384 ià(
Ëá·»Á
 =ğ
·»Á
)

3385 
my»s
 |ğ
m”ge_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3387 
	gmy»s
 |ğ
m”ge_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3390 ià((
	gËášÃr
 !ğ
NULL
 && 
ËášÃr
->
isãw
()è&& (
rightšÃr
 != NULL && !rightinner->isfew()))

3392 ià(
righ¬’t
 =ğ
·»Á
)

3393 
shiá_Ëá_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3395 
	gmy»s
 |ğ
m”ge_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3398 ià((
	gËášÃr
 !ğ
NULL
 && !
ËášÃr
->
isãw
()è&& (
rightšÃr
 != NULL &&„ightinner->isfew()))

3400 ià(
Ëá·»Á
 =ğ
·»Á
)

3401 
shiá_right_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3403 
	gmy»s
 |ğ
m”ge_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3407 ià(
	gËá·»Á
 =ğ
righ¬’t
)

3409 ià(
ËášÃr
->
¦Ùu£
 <ğ
rightšÃr
->slotuse)

3410 
shiá_Ëá_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3412 
shiá_right_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3416 ià(
	gËá·»Á
 =ğ
·»Á
)

3417 
shiá_right_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3419 
shiá_Ëá_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3423  
»suÉ_t
(
my»s
);

3430 
»suÉ_t
 
m”ge_Ëaves
(
Ëaf_node
* 
Ëá
,†—f_node* 
right
, 
šÃr_node
* 
·»Á
)

3432 
BTREE_PRINT
("M”gËaànode " << 
Ëá
 << "‡nd " << 
right
 << " w™h commÚ…¬’ˆ" << 
·»Á
 << ".");

3433 ()
	g·»Á
;

3435 
BTREE_ASSERT
(
Ëá
->
i¦—âode
(è&& 
right
->isleafnode());

3436 
BTREE_ASSERT
(
·»Á
->
Ëv–
 == 1);

3438 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 + 
right
->¦Ùu£ < 
Ëaf¦Ùmax
);

3440 
	g¡d
::
cİy
(
right
->
¦Ùkey
,„ight->¦Ùkey +„ight->
¦Ùu£
,

3441 
Ëá
->
¦Ùkey
 +†eá->
¦Ùu£
);

3442 
d©a_cİy
(
right
->
¦Ùd©a
,„ight->¦Ùd©¨+„ight->
¦Ùu£
,

3443 
Ëá
->
¦Ùd©a
 +†eá->
¦Ùu£
);

3445 
	gËá
->
	g¦Ùu£
 +ğ
right
->
¦Ùu£
;

3447 
	gËá
->
	gÃx—f
 = 
right
->
Ãx—f
;

3448 ià(
	gËá
->
	gÃx—f
)

3449 
	gËá
->
	gÃx—f
->
	g´evËaf
 = 
Ëá
;

3451 
	gm_Ëaf
 = 
Ëá
;

3453 
	gright
->
	g¦Ùu£
 = 0;

3455  
»suÉ_t
(
bŒ“_fixm”ge
);

3461 
»suÉ_t
 
m”ge_šÃr
(
šÃr_node
* 
Ëá
, iÂ”_node* 
right
, iÂ”_node* 
·»Á
, 
·»Á¦Ù
)

3463 
BTREE_PRINT
("M”gšÃ¸node " << 
Ëá
 << "‡nd " << 
right
 << " w™h commÚ…¬’ˆ" << 
·»Á
 << ".");

3465 
BTREE_ASSERT
(
Ëá
->
Ëv–
 =ğ
right
->level);

3466 
BTREE_ASSERT
(
·»Á
->
Ëv–
 =ğ
Ëá
->level + 1);

3468 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
Ëá
);

3470 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 + 
right
->¦Ùu£ < 
šÃr¦Ùmax
);

3472 ià(
	g£lfv”ify
)

3475 
	gËá¦Ù
 = 0;

3476 
	gËá¦Ù
 <ğ
·»Á
->
¦Ùu£
 &&…¬’t->
chdid
[
Ëá¦Ù
] !ğ
Ëá
)

3477 ++
Ëá¦Ù
;

3479 
BTREE_ASSERT
(
Ëá¦Ù
 < 
·»Á
->
¦Ùu£
);

3480 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
] =ğ
Ëá
);

3481 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
 + 1] =ğ
right
);

3483 
BTREE_ASSERT
(
·»Á¦Ù
 =ğ
Ëá¦Ù
);

3487 
	gËá
->
	g¦Ùkey
[
Ëá
->
¦Ùu£
] = 
·»Á
->
¦Ùkey
[
·»Á¦Ù
];

3488 
	gËá
->
	g¦Ùu£
++;

3491 
	g¡d
::
cİy
(
right
->
¦Ùkey
,„ight->¦Ùkey +„ight->
¦Ùu£
,

3492 
Ëá
->
¦Ùkey
 +†eá->
¦Ùu£
);

3493 
	g¡d
::
cİy
(
right
->
chdid
,„ight->chdid +„ight->
¦Ùu£
 + 1,

3494 
Ëá
->
chdid
 +†eá->
¦Ùu£
);

3496 
	gËá
->
	g¦Ùu£
 +ğ
right
->
¦Ùu£
;

3497 
	gright
->
	g¦Ùu£
 = 0;

3499  
»suÉ_t
(
bŒ“_fixm”ge
);

3505 
»suÉ_t
 
shiá_Ëá_Ëaf
(
Ëaf_node
* 
Ëá
,†—f_node* 
right
, 
šÃr_node
* 
·»Á
, 
·»Á¦Ù
)

3507 
BTREE_ASSERT
(
Ëá
->
i¦—âode
(è&& 
right
->isleafnode());

3508 
BTREE_ASSERT
(
·»Á
->
Ëv–
 == 1);

3510 
BTREE_ASSERT
(
Ëá
->
Ãx—f
 =ğ
right
);

3511 
BTREE_ASSERT
(
Ëá
 =ğ
right
->
´evËaf
);

3513 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 < 
right
->slotuse);

3514 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
Ëá
);

3516 
	gshiánum
 = (
right
->
¦Ùu£
 - 
Ëá
->slotuse) >> 1;

3518 
BTREE_PRINT
("Shiášg (Ëafè" << 
shiánum
 << "ƒÁr› tØËá " << 
Ëá
 << " from„ighˆ" << 
right
 << " w™h commÚ…¬’ˆ" << 
·»Á
 << ".");

3520 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 + 
shiánum
 < 
Ëaf¦Ùmax
);

3524 
	g¡d
::
cİy
(
right
->
¦Ùkey
,„ight->¦Ùkey + 
shiánum
,

3525 
Ëá
->
¦Ùkey
 +†eá->
¦Ùu£
);

3526 
d©a_cİy
(
right
->
¦Ùd©a
,„ight->¦Ùd©¨+ 
shiánum
,

3527 
Ëá
->
¦Ùd©a
 +†eá->
¦Ùu£
);

3529 
	gËá
->
	g¦Ùu£
 +ğ
shiánum
;

3533 
	g¡d
::
cİy
(
right
->
¦Ùkey
 + 
shiánum
,„ight->¦Ùkey +„ight->
¦Ùu£
,

3534 
right
->
¦Ùkey
);

3535 
d©a_cİy
(
right
->
¦Ùd©a
 + 
shiánum
,„ight->¦Ùd©¨+„ight->
¦Ùu£
,

3536 
right
->
¦Ùd©a
);

3538 
	gright
->
	g¦Ùu£
 -ğ
shiánum
;

3541 ià(
	g·»Á¦Ù
 < 
	g·»Á
->
	g¦Ùu£
) {

3542 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
Ëá
->
¦Ùkey
[Ëá->
¦Ùu£
 - 1];

3543  
»suÉ_t
(
bŒ“_ok
);

3546  
»suÉ_t
(
bŒ“_upd©e_Ï¡key
, 
Ëá
->
¦Ùkey
[Ëá->
¦Ùu£
 - 1]);

3553 
shiá_Ëá_šÃr
(
šÃr_node
* 
Ëá
, iÂ”_node* 
right
, iÂ”_node* 
·»Á
, 
·»Á¦Ù
)

3555 
BTREE_ASSERT
(
Ëá
->
Ëv–
 =ğ
right
->level);

3556 
BTREE_ASSERT
(
·»Á
->
Ëv–
 =ğ
Ëá
->level + 1);

3558 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 < 
right
->slotuse);

3559 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
Ëá
);

3561 
	gshiánum
 = (
right
->
¦Ùu£
 - 
Ëá
->slotuse) >> 1;

3563 
BTREE_PRINT
("Shiášg (šÃrè" << 
shiánum
 << "ƒÁr› tØËá " << 
Ëá
 << " from„ighˆ" << 
right
 << " w™h commÚ…¬’ˆ" << 
·»Á
 << ".");

3565 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 + 
shiánum
 < 
šÃr¦Ùmax
);

3567 ià(
	g£lfv”ify
)

3571 
	gËá¦Ù
 = 0;

3572 
	gËá¦Ù
 <ğ
·»Á
->
¦Ùu£
 &&…¬’t->
chdid
[
Ëá¦Ù
] !ğ
Ëá
)

3573 ++
Ëá¦Ù
;

3575 
BTREE_ASSERT
(
Ëá¦Ù
 < 
·»Á
->
¦Ùu£
);

3576 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
] =ğ
Ëá
);

3577 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
 + 1] =ğ
right
);

3579 
BTREE_ASSERT
(
Ëá¦Ù
 =ğ
·»Á¦Ù
);

3583 
	gËá
->
	g¦Ùkey
[
Ëá
->
¦Ùu£
] = 
·»Á
->
¦Ùkey
[
·»Á¦Ù
];

3584 
	gËá
->
	g¦Ùu£
++;

3588 
	g¡d
::
cİy
(
right
->
¦Ùkey
,„ight->¦Ùkey + 
shiánum
 - 1,

3589 
Ëá
->
¦Ùkey
 +†eá->
¦Ùu£
);

3590 
	g¡d
::
cİy
(
right
->
chdid
,„ight->chdid + 
shiánum
,

3591 
Ëá
->
chdid
 +†eá->
¦Ùu£
);

3593 
	gËá
->
	g¦Ùu£
 +ğ
shiánum
 - 1;

3596 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
right
->
¦Ùkey
[
shiánum
 - 1];

3600 
	g¡d
::
cİy
(
right
->
¦Ùkey
 + 
shiánum
,„ight->¦Ùkey +„ight->
¦Ùu£
,

3601 
right
->
¦Ùkey
);

3602 
	g¡d
::
cİy
(
right
->
chdid
 + 
shiánum
,„ight->chdid +„ight->
¦Ùu£
 + 1,

3603 
right
->
chdid
);

3605 
	gright
->
	g¦Ùu£
 -ğ
shiánum
;

3611 
shiá_right_Ëaf
(
Ëaf_node
* 
Ëá
,†—f_node* 
right
, 
šÃr_node
* 
·»Á
, 
·»Á¦Ù
)

3613 
BTREE_ASSERT
(
Ëá
->
i¦—âode
(è&& 
right
->isleafnode());

3614 
BTREE_ASSERT
(
·»Á
->
Ëv–
 == 1);

3616 
BTREE_ASSERT
(
Ëá
->
Ãx—f
 =ğ
right
);

3617 
BTREE_ASSERT
(
Ëá
 =ğ
right
->
´evËaf
);

3618 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
Ëá
);

3620 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 > 
right
->slotuse);

3622 
	gshiánum
 = (
Ëá
->
¦Ùu£
 - 
right
->slotuse) >> 1;

3624 
BTREE_PRINT
("Shiášg (Ëafè" << 
shiánum
 << "ƒÁr› tØrighˆ" << 
right
 << " from†eá " << 
Ëá
 << " w™h commÚ…¬’ˆ" << 
·»Á
 << ".");

3626 ià(
	g£lfv”ify
)

3629 
	gËá¦Ù
 = 0;

3630 
	gËá¦Ù
 <ğ
·»Á
->
¦Ùu£
 &&…¬’t->
chdid
[
Ëá¦Ù
] !ğ
Ëá
)

3631 ++
Ëá¦Ù
;

3633 
BTREE_ASSERT
(
Ëá¦Ù
 < 
·»Á
->
¦Ùu£
);

3634 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
] =ğ
Ëá
);

3635 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
 + 1] =ğ
right
);

3637 
BTREE_ASSERT
(
Ëá¦Ù
 =ğ
·»Á¦Ù
);

3642 
BTREE_ASSERT
(
right
->
¦Ùu£
 + 
shiánum
 < 
Ëaf¦Ùmax
);

3644 
	g¡d
::
cİy_backw¬d
(
right
->
¦Ùkey
,„ight->¦Ùkey +„ight->
¦Ùu£
,

3645 
right
->
¦Ùkey
 +„ight->
¦Ùu£
 + 
shiánum
);

3646 
d©a_cİy_backw¬d
(
right
->
¦Ùd©a
,„ight->¦Ùd©¨+„ight->
¦Ùu£
,

3647 
right
->
¦Ùd©a
 +„ight->
¦Ùu£
 + 
shiánum
);

3649 
	gright
->
	g¦Ùu£
 +ğ
shiánum
;

3652 
	g¡d
::
cİy
(
Ëá
->
¦Ùkey
 +†eá->
¦Ùu£
 - 
shiánum
,†eft->slotkey +†eft->slotuse,

3653 
right
->
¦Ùkey
);

3654 
d©a_cİy
(
Ëá
->
¦Ùd©a
 +†eá->
¦Ùu£
 - 
shiánum
,†eft->slotdata +†eft->slotuse,

3655 
right
->
¦Ùd©a
);

3657 
	gËá
->
	g¦Ùu£
 -ğ
shiánum
;

3659 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
Ëá
->
¦Ùkey
[Ëá->
¦Ùu£
 - 1];

3665 
shiá_right_šÃr
(
šÃr_node
* 
Ëá
, iÂ”_node* 
right
, iÂ”_node* 
·»Á
, 
·»Á¦Ù
)

3667 
BTREE_ASSERT
(
Ëá
->
Ëv–
 =ğ
right
->level);

3668 
BTREE_ASSERT
(
·»Á
->
Ëv–
 =ğ
Ëá
->level + 1);

3670 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 > 
right
->slotuse);

3671 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
Ëá
);

3673 
	gshiánum
 = (
Ëá
->
¦Ùu£
 - 
right
->slotuse) >> 1;

3675 
BTREE_PRINT
("Shiášg (Ëafè" << 
shiánum
 << "ƒÁr› tØrighˆ" << 
right
 << " from†eá " << 
Ëá
 << " w™h commÚ…¬’ˆ" << 
·»Á
 << ".");

3677 ià(
	g£lfv”ify
)

3680 
	gËá¦Ù
 = 0;

3681 
	gËá¦Ù
 <ğ
·»Á
->
¦Ùu£
 &&…¬’t->
chdid
[
Ëá¦Ù
] !ğ
Ëá
)

3682 ++
Ëá¦Ù
;

3684 
BTREE_ASSERT
(
Ëá¦Ù
 < 
·»Á
->
¦Ùu£
);

3685 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
] =ğ
Ëá
);

3686 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
 + 1] =ğ
right
);

3688 
BTREE_ASSERT
(
Ëá¦Ù
 =ğ
·»Á¦Ù
);

3693 
BTREE_ASSERT
(
right
->
¦Ùu£
 + 
shiánum
 < 
šÃr¦Ùmax
);

3695 
	g¡d
::
cİy_backw¬d
(
right
->
¦Ùkey
,„ight->¦Ùkey +„ight->
¦Ùu£
,

3696 
right
->
¦Ùkey
 +„ight->
¦Ùu£
 + 
shiánum
);

3697 
	g¡d
::
cİy_backw¬d
(
right
->
chdid
,„ight->chdid +„ight->
¦Ùu£
 + 1,

3698 
right
->
chdid
 +„ight->
¦Ùu£
 + 1 + 
shiánum
);

3700 
	gright
->
	g¦Ùu£
 +ğ
shiánum
;

3703 
	gright
->
	g¦Ùkey
[
shiánum
 - 1] = 
·»Á
->
¦Ùkey
[
·»Á¦Ù
];

3706 
	g¡d
::
cİy
(
Ëá
->
¦Ùkey
 +†eá->
¦Ùu£
 - 
shiánum
 + 1,†eft->slotkey +†eft->slotuse,

3707 
right
->
¦Ùkey
);

3708 
	g¡d
::
cİy
(
Ëá
->
chdid
 +†eá->
¦Ùu£
 - 
shiánum
 + 1,†eft->childid +†eft->slotuse + 1,

3709 
right
->
chdid
);

3712 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
Ëá
->
¦Ùkey
[Ëá->
¦Ùu£
 - 
shiánum
];

3714 
	gËá
->
	g¦Ùu£
 -ğ
shiánum
;

3717 #ifdeà
BTREE_DEBUG


3719 
	gpublic
:

3725 
´št
(
¡d
::
o¡»am
& 
os
) const

3727 ià(
m_roÙ
) {

3728 
´št_node
(
os
, 
m_roÙ
, 0, 
Œue
);

3733 
´št_Ëaves
(
¡d
::
o¡»am
& 
os
) const

3735 
os
 << "Ëaves:" << 
¡d
::
’dl
;

3737 cÚ¡ 
Ëaf_node
* 
	gn
 = 
m_h—dËaf
;

3739 
	gn
)

3741 
	gos
 << " " << 
	gn
 << 
	g¡d
::
’dl
;

3743 
	gn
 = 
n
->
Ãx—f
;

3747 
	g´iv©e
:

3749 
´št_node
(
¡d
::
o¡»am
& 
os
, cÚ¡ 
node
*‚ode, 
d•th
 = 0, 
boŞ
 
»cursive
 = 
çl£
)

3751 
i
 = 0; 
	gi
 < 
	gd•th
; i++è
	gos
 << " ";

3753 
	gos
 << "nod" << 
	gnode
 << "†ev– " <<‚ode->
	gËv–
 << " slÙu£ " <<‚ode->
	g¦Ùu£
 << 
	g¡d
::
’dl
;

3755 ià(
	gnode
->
i¦—âode
())

3757 cÚ¡ 
Ëaf_node
* 
	gËaâode
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
node
);

3759 
	gi
 = 0; i < 
	gd•th
; i++è
	gos
 << " ";

3760 
	gos
 << "†—à´ev " << 
	gËaâode
->
	g´evËaf
 << "‚exˆ" <<†—âode->
	gÃx—f
 << 
	g¡d
::
’dl
;

3762 
	gi
 = 0; i < 
	gd•th
; i++è
	gos
 << " ";

3764 
	g¦Ù
 = 0; slÙ < 
	gËaâode
->
	g¦Ùu£
; ++slot)

3766 
	gos
 << 
	gËaâode
->
	g¦Ùkey
[
¦Ù
] << " ";

3768 
	gos
 << 
	g¡d
::
’dl
;

3772 cÚ¡ 
šÃr_node
* 
	gšÃºode
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
node
);

3774 
	gi
 = 0; i < 
	gd•th
; i++è
	gos
 << " ";

3776 
	g¦Ù
 = 0; slÙ < 
	gšÃºode
->
	g¦Ùu£
; ++slot)

3778 
	gos
 << "(" << 
	gšÃºode
->
	gchdid
[
¦Ù
] << "è" << iÂ”node->
	g¦Ùkey
[slot] << " ";

3780 
	gos
 << "(" << 
	gšÃºode
->
	gchdid
[
šÃºode
->
¦Ùu£
] << ")" << 
	g¡d
::
’dl
;

3782 ià(
	g»cursive
)

3784 
	g¦Ù
 = 0; slÙ < 
	gšÃºode
->
	g¦Ùu£
 + 1; ++slot)

3786 
´št_node
(
os
, 
šÃºode
->
chdid
[
¦Ù
], 
d•th
 + 1, 
»cursive
);

3793 
	gpublic
:

3798 
v”ify
() const

3800 
key_ty³
 
mškey
, 
	gmaxkey
;

3801 
Œ“_¡©s
 
	gv¡©s
;

3803 ià(
	gm_roÙ
)

3805 
v”ify_node
(
m_roÙ
, &
mškey
, &
maxkey
, 
v¡©s
);

3807 
as£¹
(
v¡©s
.
™emcouÁ
 =ğ
m_¡©s
.itemcount);

3808 
as£¹
(
v¡©s
.
Ëaves
 =ğ
m_¡©s
.leaves);

3809 
as£¹
(
v¡©s
.
šÃºodes
 =ğ
m_¡©s
.innernodes);

3811 
v”ify_Ëaæšks
();

3815 
	g´iv©e
:

3817 
v”ify_node
(cÚ¡ 
node
* 
n
, 
key_ty³
* 
mškey
, key_ty³* 
maxkey
, 
Œ“_¡©s
& 
v¡©s
) const

3819 
BTREE_PRINT
("v”ifynod" << 
n
);

3821 ià(
	gn
->
i¦—âode
())

3823 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

3825 
as£¹
(
Ëaf
 =ğ
m_roÙ
 || !Ëaf->
isund”æow
());

3826 
as£¹
(
Ëaf
->
¦Ùu£
 > 0);

3828 
	g¦Ù
 = 0; slÙ < 
	gËaf
->
	g¦Ùu£
 - 1; ++slot)

3830 
as£¹
(
key_Ës£qu®
(
Ëaf
->
¦Ùkey
[
¦Ù
],†eaf->slotkey[slot + 1]));

3833 *
	gmškey
 = 
Ëaf
->
¦Ùkey
[0];

3834 *
	gmaxkey
 = 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1];

3836 
	gv¡©s
.
	gËaves
++;

3837 
	gv¡©s
.
	g™emcouÁ
 +ğ
Ëaf
->
¦Ùu£
;

3841 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

3842 
	gv¡©s
.
	gšÃºodes
++;

3844 
as£¹
(
šÃr
 =ğ
m_roÙ
 || !šÃr->
isund”æow
());

3845 
as£¹
(
šÃr
->
¦Ùu£
 > 0);

3847 
	g¦Ù
 = 0; slÙ < 
	gšÃr
->
	g¦Ùu£
 - 1; ++slot)

3849 
as£¹
(
key_Ës£qu®
(
šÃr
->
¦Ùkey
[
¦Ù
], inner->slotkey[slot + 1]));

3852 
	g¦Ù
 = 0; slÙ <ğ
šÃr
->
¦Ùu£
; ++slot)

3854 cÚ¡ 
node
* 
	gsubnode
 = 
šÃr
->
chdid
[
¦Ù
];

3855 
key_ty³
 
	gsubmškey
 = key_type();

3856 
key_ty³
 
	gsubmaxkey
 = key_type();

3858 
as£¹
(
subnode
->
Ëv–
 + 1 =ğ
šÃr
->level);

3859 
v”ify_node
(
subnode
, &
submškey
, &
submaxkey
, 
v¡©s
);

3861 
BTREE_PRINT
("v”ify subnod" << 
subnode
 << ": " << 
submškey
 << " - " << 
submaxkey
);

3863 ià(
	g¦Ù
 == 0)

3864 *
mškey
 = 
submškey
;

3866 
as£¹
(
key_g»©”equ®
(
submškey
, 
šÃr
->
¦Ùkey
[
¦Ù
 - 1]));

3868 ià(
	g¦Ù
 =ğ
šÃr
->
¦Ùu£
)

3869 *
maxkey
 = 
submaxkey
;

3871 
as£¹
(
key_equ®
(
šÃr
->
¦Ùkey
[
¦Ù
], 
submaxkey
));

3873 ià(
	gšÃr
->
	gËv–
 =ğ1 && 
¦Ù
 < 
šÃr
->
¦Ùu£
)

3877 cÚ¡ 
Ëaf_node
* 
Ëaç
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
šÃr
->
chdid
[
¦Ù
]);

3878 cÚ¡ 
Ëaf_node
* 
	gËafb
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
šÃr
->
chdid
[
¦Ù
 + 1]);

3880 
as£¹
(
Ëaç
->
Ãx—f
 =ğ
Ëafb
);

3881 
as£¹
(
Ëaç
 =ğ
Ëafb
->
´evËaf
);

3882 ()
	gËaç
;

3883 ()
	gËafb
;

3885 ià(
	gšÃr
->
	gËv–
 =ğ2 && 
¦Ù
 < 
šÃr
->
¦Ùu£
)

3888 cÚ¡ 
šÃr_node
* 
·»Áa
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
šÃr
->
chdid
[
¦Ù
]);

3889 cÚ¡ 
šÃr_node
* 
	g·»Áb
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
šÃr
->
chdid
[
¦Ù
 + 1]);

3891 cÚ¡ 
Ëaf_node
* 
	gËaç
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
·»Áa
->
chdid
[·»Áa->
¦Ùu£
]);

3892 cÚ¡ 
Ëaf_node
* 
	gËafb
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
·»Áb
->
chdid
[0]);

3894 
as£¹
(
Ëaç
->
Ãx—f
 =ğ
Ëafb
);

3895 
as£¹
(
Ëaç
 =ğ
Ëafb
->
´evËaf
);

3896 ()
	gËaç
;

3897 ()
	gËafb
;

3904 
v”ify_Ëaæšks
() const

3906 cÚ¡ 
Ëaf_node
* 
	gn
 = 
m_h—dËaf
;

3908 
as£¹
(
n
->
Ëv–
 == 0);

3909 
as£¹
(!
n
 ||‚->
´evËaf
 =ğ
NULL
);

3911 
	g‹¡couÁ
 = 0;

3913 
	gn
)

3915 
as£¹
(
n
->
Ëv–
 == 0);

3916 
as£¹
(
n
->
¦Ùu£
 > 0);

3918 
	g¦Ù
 = 0; slÙ < 
	gn
->
	g¦Ùu£
 - 1; ++slot)

3920 
as£¹
(
key_Ës£qu®
(
n
->
¦Ùkey
[
¦Ù
],‚->slotkey[slot + 1]));

3923 
	g‹¡couÁ
 +ğ
n
->
¦Ùu£
;

3925 ià(
	gn
->
	gÃx—f
)

3927 
as£¹
(
key_Ës£qu®
(
n
->
¦Ùkey
[n->
¦Ùu£
 - 1],‚->
Ãx—f
->slotkey[0]));

3929 
as£¹
(
n
 =ğn->
Ãx—f
->
´evËaf
);

3933 
as£¹
(
m_Ëaf
 =ğ
n
);

3936 
	gn
 = 
n
->
Ãx—f
;

3939 
as£¹
(
‹¡couÁ
 =ğ
size
());

3942 
	g´iv©e
:

3948 
	sdump_h—d”


3951 
sigÇtu»
[12];

3954 
	gv”siÚ
;

3957 
	gkey_ty³_size
;

3960 
	gd©a_ty³_size
;

3963 
	gËaf¦Ùs
;

3966 
	gšÃr¦Ùs
;

3969 
boŞ
 
	g®low_du¶iÿ‹s
;

3972 
size_ty³
 
	g™emcouÁ
;

3976 
šlše
 
fl
()

3979 
	gsigÇtu»
[0] = 's';

3980 
	gsigÇtu»
[1] = 't';

3981 
	gsigÇtu»
[2] = 'x';

3982 
	gsigÇtu»
[3] = '-';

3983 
	gsigÇtu»
[4] = 'b';

3984 
	gsigÇtu»
[5] = 't';

3985 
	gsigÇtu»
[6] = 'r';

3986 
	gsigÇtu»
[7] = 'e';

3987 
	gsigÇtu»
[8] = 'e';

3988 
	gsigÇtu»
[9] = 0;

3989 
	gsigÇtu»
[10] = 0;

3990 
	gsigÇtu»
[11] = 0;

3992 
	gv”siÚ
 = 0;

3993 
	gkey_ty³_size
 = (
ty³Çme
 
£lf_ty³
::
key_ty³
);

3994 
	gd©a_ty³_size
 = (
ty³Çme
 
£lf_ty³
::
d©a_ty³
);

3995 
	gËaf¦Ùs
 = 
£lf_ty³
::
Ëaf¦Ùmax
;

3996 
	gšÃr¦Ùs
 = 
£lf_ty³
::
šÃr¦Ùmax
;

3997 
	g®low_du¶iÿ‹s
 = 
£lf_ty³
::
®low_du¶iÿ‹s
;

4001 
šlše
 
boŞ
 
§me
(cÚ¡ 
dump_h—d”
& 
o
) const

4003  (
	gsigÇtu»
[0] =ğ's' && 
sigÇtu»
[1] == 't' &&

4004 
sigÇtu»
[2] == 'x' && signature[3] == '-' &&

4005 
sigÇtu»
[4] == 'b' && signature[5] == 't' &&

4006 
sigÇtu»
[6] == 'r' && signature[7] == 'e' &&

4007 
sigÇtu»
[8] == 'e' && signature[9] == 0 &&

4008 
sigÇtu»
[10] == 0 && signature[11] == 0)

4009 && (
v”siÚ
 =ğ
o
.version)

4010 && (
key_ty³_size
 =ğ
o
.key_type_size)

4011 && (
d©a_ty³_size
 =ğ
o
.data_type_size)

4012 && (
Ëaf¦Ùs
 =ğ
o
.leafslots)

4013 && (
šÃr¦Ùs
 =ğ
o
.innerslots)

4014 && (
®low_du¶iÿ‹s
 =ğ
o
.allow_duplicates);

4018 
	gpublic
:

4023 
dump
(
¡d
::
o¡»am
& 
os
) const

4025 
dump_h—d”
 
h—d”
;

4026 
	gh—d”
.
fl
();

4027 
	gh—d”
.
	g™emcouÁ
 = 
size
();

4029 
	gos
.
wr™e
(
»š‹½»t_ÿ¡
<*>(&
h—d”
), (header));

4031 ià(
	gm_roÙ
) {

4032 
dump_node
(
os
, 
m_roÙ
);

4040 
boŞ
 
»¡Üe
(
¡d
::
i¡»am
& 
is
)

4042 
dump_h—d”
 
feh—d”
;

4043 
	gis
.
»ad
(
»š‹½»t_ÿ¡
<*>(&
feh—d”
), (fileheader));

4044 ià(!
	gis
.
good
()è 
	gçl£
;

4046 
dump_h—d”
 
	gmyh—d”
;

4047 
	gmyh—d”
.
fl
();

4048 
	gmyh—d”
.
	g™emcouÁ
 = 
feh—d”
.
™emcouÁ
;

4050 ià(!
	gmyh—d”
.
§me
(
feh—d”
))

4052 
BTREE_PRINT
("btree::restore: file header does‚ot match instantiation signature.");

4053  
	gçl£
;

4056 
ş—r
();

4058 ià(
	gfeh—d”
.
	g™emcouÁ
 > 0)

4060 
	gm_roÙ
 = 
»¡Üe_node
(
is
);

4061 ià(
	gm_roÙ
 =ğ
NULL
è 
çl£
;

4063 
	gm_¡©s
.
	g™emcouÁ
 = 
feh—d”
.
™emcouÁ
;

4066 #ifdeà
BTREE_DEBUG


4067 ià(
	gdebug
è
´št
(
¡d
::
cout
);

4069 ià(
	g£lfv”ify
è
v”ify
();

4071  
	gŒue
;

4074 
	g´iv©e
:

4076 
dump_node
(
¡d
::
o¡»am
& 
os
, cÚ¡ 
node
* 
n
) const

4078 
BTREE_PRINT
("dump_nod" << 
n
 << 
¡d
::
’dl
);

4080 ià(
	gn
->
i¦—âode
())

4082 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

4084 
	gos
.
wr™e
(
»š‹½»t_ÿ¡
<cÚ¡ *>(
Ëaf
), (*leaf));

4088 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

4090 
	gos
.
wr™e
(
»š‹½»t_ÿ¡
<cÚ¡ *>(
šÃr
), (*inner));

4092 
	g¦Ù
 = 0; slÙ <ğ
šÃr
->
¦Ùu£
; ++slot)

4094 cÚ¡ 
node
* 
	gsubnode
 = 
šÃr
->
chdid
[
¦Ù
];

4096 
dump_node
(
os
, 
subnode
);

4103 
node
 * 
»¡Üe_node
(
¡d
::
i¡»am
& 
is
)

4105 
node
 
tİ
(0);

4108 
	gis
.
»ad
(
»š‹½»t_ÿ¡
<*>(&
tİ
), (top));

4109 ià(!
	gis
.
good
()è 
	gNULL
;

4111 ià(
	gtİ
.
i¦—âode
())

4113 
Ëaf_node
 
Ëaf
(
tİ
);

4116 
	gis
.
»ad
(
»š‹½»t_ÿ¡
<*>(&
Ëaf
è+ (
tİ
), (leaf) - (top));

4117 ià(!
	gis
.
good
()è 
	gNULL
;

4119 
Ëaf_node
* 
	gÃwËaf
 = 
®loÿ‹_Ëaf
();

4122 *
	gÃwËaf
 = 
Ëaf
;

4125 ià(
	gm_h—dËaf
 =ğ
NULL
) {

4126 
BTREE_ASSERT
(
ÃwËaf
->
´evËaf
 =ğ
NULL
);

4127 
	gm_h—dËaf
 = 
m_Ëaf
 = 
ÃwËaf
;

4130 
	gÃwËaf
->
	g´evËaf
 = 
m_Ëaf
;

4131 
	gm_Ëaf
->
	gÃx—f
 = 
ÃwËaf
;

4132 
	gm_Ëaf
 = 
ÃwËaf
;

4135  
	gÃwËaf
;

4139 
šÃr_node
 
šÃr
(
tİ
);

4142 
	gis
.
»ad
(
»š‹½»t_ÿ¡
<*>(&
šÃr
è+ (
tİ
), (inner) - (top));

4143 ià(!
	gis
.
good
()è 
	gNULL
;

4145 
šÃr_node
* 
	gÃwšÃr
 = 
®loÿ‹_šÃr
(0);

4148 *
	gÃwšÃr
 = 
šÃr
;

4150 
	g¦Ù
 = 0; slÙ <ğ
ÃwšÃr
->
¦Ùu£
; ++slot)

4152 
	gÃwšÃr
->
	gchdid
[
¦Ù
] = 
»¡Üe_node
(
is
);

4155  
	gÃwšÃr
;

	@btree_bitmap_outoforder.h

32 #iâdeà
STX_STX_BTREE_H_HEADER


33 
	#STX_STX_BTREE_H_HEADER


	)

42 
	~<c¡ršg
>

43 
	~<®gÜ™hm
>

44 
	~<funùiÚ®
>

45 
	~<i¡»am
>

46 
	~<o¡»am
>

47 
	~<memÜy
>

48 
	~<c¡ddef
>

49 
	~<ÿs£¹
>

50 
	~<b™£t
>

51 
	~<veùÜ
>

52 
	~"nv_back’d.h
"

53 
	~"b™m­.h
"

55 
	#NVRAM_LEN
 1 * 1024 * 1024 * 1024

56 

	)

60 #ifdeà
BTREE_DEBUG


62 
	~<io¡»am
>

65 
	#BTREE_PRINT
(
x
èdØ{ ià(
debug
è(
¡d
::
cout
 << x << std::
’dl
); } 0)

	)

68 
	#BTREE_ASSERT
(
x
èdØ{ 
	`as£¹
(x); } 0)

	)

73 
	#BTREE_PRINT
(
x
èdØ{ } 0)

	)

76 
	#BTREE_ASSERT
(
x
èdØ{ } 0)

	)

81 
	#BTREE_MAX
(
a
, 
b
è(×è< (bè? (bè: (a))

	)

83 #iâdeà
BTREE_FRIENDS


87 
	#BTREE_FRIENDS
 
ä›nd
 
şass
 
bŒ“_ä›nd
;

	)

92 
Çme¥aû
 
	g¡x
 {

96 
	g‹m¶©e
 <
ty³Çme
 
	g_Key
>

97 şas 
	cbŒ“_deçuÉ_£t_Œa™s


99 
	gpublic
:

102 cÚ¡ 
boŞ
 
£lfv”ify
 = 
çl£
;

108 cÚ¡ 
boŞ
 
	gdebug
 = 
çl£
;

112 cÚ¡ 
	gËaf¦Ùs
 = 
BTREE_MAX
(8, 256 / ((
_Key
)));

116 cÚ¡ 
	gšÃr¦Ùs
 = 
BTREE_MAX
(8, 256 / ((
_Key
) + (*)));

122 cÚ¡ 
size_t
 
	gbš£¬ch_th»shŞd
 = 64;

127 
	g‹m¶©e
 <
ty³Çme
 
	g_Key
,y³Çm
	g_D©a
>

128 şas 
	cbŒ“_deçuÉ_m­_Œa™s


130 
	gpublic
:

133 cÚ¡ 
boŞ
 
£lfv”ify
 = 
çl£
;

139 cÚ¡ 
boŞ
 
	gdebug
 = 
çl£
;

143 cÚ¡ 
	gËaf¦Ùs
 = 
BTREE_MAX
(8, 256 / ((
_Key
è+ (
_D©a
)));

147 cÚ¡ 
	gšÃr¦Ùs
 = 
BTREE_MAX
(8, 256 / ((
_Key
) + (*)));

153 cÚ¡ 
size_t
 
	gbš£¬ch_th»shŞd
 = 256;

169 
	g‹m¶©e
 <
ty³Çme
 
	g_Key
,y³Çm
	g_D©a
,

170 
ty³Çme
 
	g_V®ue
 = 
¡d
::
·œ
<
_Key
, 
	g_D©a
>,

171 
ty³Çme
 
	g_Com·»
 = 
¡d
::
Ëss
<
_Key
>,

172 
ty³Çme
 
	g_T¿™s
 = 
bŒ“_deçuÉ_m­_Œa™s
<
_Key
, 
	g_D©a
>,

173 
boŞ
 
	g_Du¶iÿ‹s
 = 
çl£
,

174 
ty³Çme
 
	g_AÎoc
 = 
¡d
::
®loÿtÜ
<
_V®ue
>,

175 
boŞ
 
	g_U£dAsS‘
 = 
çl£
>

176 şas 
	cbŒ“


178 
public
:

183 
_Key
 
	tkey_ty³
;

187 
_D©a
 
	td©a_ty³
;

193 
_V®ue
 
	tv®ue_ty³
;

196 
_Com·»
 
	tkey_com·»
;

200 
_T¿™s
 
	tŒa™s
;

204 cÚ¡ 
boŞ
 
	g®low_du¶iÿ‹s
 = 
_Du¶iÿ‹s
;

207 
_AÎoc
 
	t®loÿtÜ_ty³
;

214 cÚ¡ 
boŞ
 
	gu£d_as_£t
 = 
_U£dAsS‘
;

220 
	gnv’Œy_couÁ
;

221 
	gnvb™m­_couÁ
;

222 
	gnvnode_couÁ
;

223 
BTREE_FRIENDS


225 
	gpublic
:

229 
bŒ“
<
	tkey_ty³
, 
	td©a_ty³
, 
	tv®ue_ty³
, 
	tkey_com·»
,

230 
	tŒa™s
, 
	t®low_du¶iÿ‹s
, 
	t®loÿtÜ_ty³
, 
	tu£d_as_£t
> 
	t£lf_ty³
;

233 
size_t
 
	tsize_ty³
;

237 
	g¡d
::
	t·œ
<
	tkey_ty³
, 
	td©a_ty³
> 
	t·œ_ty³
;

239 
	gpublic
:

243 cÚ¡ 
Ëaf¦Ùmax
 = 
Œa™s
::
Ëaf¦Ùs
;

247 cÚ¡ 
	gšÃr¦Ùmax
 = 
Œa™s
::
šÃr¦Ùs
;

252 cÚ¡ 
	gmšËaf¦Ùs
 = (
Ëaf¦Ùmax
 / 2);

257 cÚ¡ 
	gmššÃr¦Ùs
 = (
šÃr¦Ùmax
 / 2);

261 cÚ¡ 
boŞ
 
	g£lfv”ify
 = 
Œa™s
::
£lfv”ify
;

266 cÚ¡ 
boŞ
 
	gdebug
 = 
Œa™s
::
debug
;

268 
	g´iv©e
:

273 
	snode


276 
Ëv–
;

280 
	g¦Ùu£
;

283 
šlše
 
node
(cÚ¡ 
l
, cÚ¡ 
s
 = 0)

284 : 
Ëv–
(
l
), 
¦Ùu£
(
s
)

288 
šlše
 
boŞ
 
i¦—âode
() const

290  (
	gËv–
 == 0);

296 
	gšÃr_node
 : 
public
 
node


299 
ty³Çme
 
	t_AÎoc
::
	t‹m¶©e
 
	t»bšd
<
	tšÃr_node
>::
	tÙh”
 
	t®loc_ty³
;

302 
key_ty³
 
	g¦Ùkey
[
šÃr¦Ùmax
];

305 
node
 * 
	gchdid
[
šÃr¦Ùmax
 + 1];

308 
šlše
 
šÃr_node
(cÚ¡ 
l
)

309 : 
node
(
l
)

313 
šlše
 
šÃr_node
(cÚ¡ 
node
& 
tİ
)

314 : 
node
(
tİ
.
Ëv–
,İ.
¦Ùu£
)

318 
šlše
 
boŞ
 
isfuÎ
() const

320  (
	gnode
::
¦Ùu£
 =ğ
šÃr¦Ùmax
);

324 
šlše
 
boŞ
 
isãw
() const

326  (
	gnode
::
¦Ùu£
 <ğ
mššÃr¦Ùs
);

330 
šlše
 
boŞ
 
isund”æow
() const

332  (
	gnode
::
¦Ùu£
 < 
mššÃr¦Ùs
);

339 
	gËaf_node
 : 
public
 
node


342 
ty³Çme
 
	t_AÎoc
::
	t‹m¶©e
 
	t»bšd
<
	tËaf_node
>::
	tÙh”
 
	t®loc_ty³
;

345 
Ëaf_node
 * 
	g´evËaf
;

348 
Ëaf_node
 * 
	gÃx—f
;

351 
key_ty³
 
	g¦Ùkey
[
Ëaf¦Ùmax
];

354 
d©a_ty³
 
	g¦Ùd©a
[
u£d_as_£t
 ? 1 : 
Ëaf¦Ùmax
];

357 
	gbs
[
BITS_TO_LONGS
(
Ëaf¦Ùmax
)];

364 
šlše
 
Ëaf_node
()

365 : 
node
(0), 
´evËaf
(
NULL
), 
Ãx—f
(NULL)

371 
šlše
 
Ëaf_node
(cÚ¡ 
node
& 
tİ
)

372 : 
node
(
tİ
.
Ëv–
,İ.
¦Ùu£
), 
´evËaf
(
NULL
), 
Ãx—f
(NULL)

375 
šlše
 
couÁ
()

377  
hweight_lÚg
(*
bs
);

381 
šlše
 
boŞ
 
isfuÎ
() const

383  (
	gËaf_node
::
couÁ
(è=ğ
Ëaf¦Ùmax
);

387 
šlše
 
boŞ
 
isãw
() const

389  (
	gnode
::
¦Ùu£
 <ğ
mšËaf¦Ùs
);

393 
šlše
 
boŞ
 
isund”æow
() const

395  (
	gnode
::
¦Ùu£
 < 
mšËaf¦Ùs
);

399 
b™m­_£t
(
šdex
)

401 
__£t_b™
(
šdex
, 
bs
);

405 
b™m­_g‘
(
šdex
)

407  
cÚ¡_‹¡_b™
(
šdex
, 
bs
);

411 
b™m­_ş—r
(
šdex
)

413 
__ş—r_b™
(
šdex
, 
bs
);

417 
g‘_fœ¡_£t_b™
()

419  
__ffs
(*
bs
);

423 
g‘_Ï¡_£t_b™
()

425  
__æs
(*
bs
);

430 
g‘_fœ¡_ä“_b™
()

432  
__ffz
(*
bs
);

437 
šlše
 
£t_¦Ù
(
¦Ù
, cÚ¡ 
·œ_ty³
& 
v®ue
)

439 
BTREE_ASSERT
(
u£d_as_£t
 =ğ
çl£
);

440 
BTREE_ASSERT
(
¦Ù
 < 
node
::
¦Ùu£
);

441 
	g¦Ùkey
[
¦Ù
] = 
v®ue
.
fœ¡
;

442 
	g¦Ùd©a
[
¦Ù
] = 
v®ue
.
£cÚd
;

447 
šlše
 
£t_¦Ù
(
¦Ù
, cÚ¡ 
key_ty³
& 
key
)

449 
BTREE_ASSERT
(
u£d_as_£t
 =ğ
Œue
);

450 
BTREE_ASSERT
(
¦Ù
 < 
node
::
¦Ùu£
);

451 
	g¦Ùkey
[
¦Ù
] = 
key
;

455 
	g´iv©e
:

460 
‹m¶©e
 <
ty³Çme
 
v®ue_ty³
,y³Çm
	g·œ_ty³
>

461 
	sbŒ“_·œ_to_v®ue


464 
šlše
 
v®ue_ty³
 
İ”©Ü
 (è(
	g·œ_ty³
& 
	gp
) const

466  
	gp
.
	gfœ¡
;

469 
šlše
 
v®ue_ty³
 
İ”©Ü
 (è(cÚ¡ 
	g·œ_ty³
& 
	gp
) const

471  
	gp
.
	gfœ¡
;

476 
	g‹m¶©e
 <
ty³Çme
 
	gv®ue_ty³
>

477 
	gbŒ“_·œ_to_v®ue
<
	gv®ue_ty³
, value_type>

480 
šlše
 
v®ue_ty³
 
İ”©Ü
 (è(
	g·œ_ty³
& 
	gp
) const

482  
	gp
;

485 
šlše
 
v®ue_ty³
 
İ”©Ü
 (è(cÚ¡ 
	g·œ_ty³
& 
	gp
) const

487  
	gp
;

493 
	gbŒ“_·œ_to_v®ue
<
	tv®ue_ty³
, 
	t·œ_ty³
> 
	t·œ_to_v®ue_ty³
;

495 
	gpublic
:

498 
şass
 
™”©Ü
;

499 
şass
 
	gcÚ¡_™”©Ü
;

500 
şass
 
	g»v”£_™”©Ü
;

501 
şass
 
	gcÚ¡_»v”£_™”©Ü
;

505 şas 
	c™”©Ü


507 
	gpublic
:

511 
ty³Çme
 
	tbŒ“
::
	tkey_ty³
 key_type;

514 
ty³Çme
 
	tbŒ“
::
	td©a_ty³
 data_type;

517 
ty³Çme
 
	tbŒ“
::
	tv®ue_ty³
 value_type;

520 
ty³Çme
 
	tbŒ“
::
	t·œ_ty³
…air_type;

523 
	gv®ue_ty³
& 
	t»ã»nû
;

526 
v®ue_ty³
* 
	tpoš‹r
;

529 
	g¡d
::
	tbidœeùiÚ®_™”©Ü_g
 
	t™”©Ü_ÿ‹gÜy
;

532 
±rdiff_t
 
	tdifã»nû_ty³
;

534 
	g´iv©e
:

538 
ty³Çme
 
bŒ“
::
Ëaf_node
 * 
cu¼node
;

541 
	gcu¼¦Ù
;

545 
ä›nd
 
şass
 
	gcÚ¡_™”©Ü
;

549 
ä›nd
 
şass
 
	g»v”£_™”©Ü
;

553 
ä›nd
 
şass
 
	gcÚ¡_»v”£_™”©Ü
;

557 
ä›nd
 
şass
 
	gbŒ“
<
	gkey_ty³
, 
	gd©a_ty³
, 
	gv®ue_ty³
, 
	gkey_com·»
,

558 
	gŒa™s
, 
	g®low_du¶iÿ‹s
, 
	g®loÿtÜ_ty³
, 
	gu£d_as_£t
>;

562 
mubË
 
v®ue_ty³
 
	g‹mp_v®ue
;

567 
BTREE_FRIENDS


569 
	gpublic
:

573 
šlše
 
™”©Ü
()

574 : 
cu¼node
(
NULL
), 
cu¼¦Ù
(0)

578 
šlše
 
™”©Ü
(
ty³Çme
 
bŒ“
::
Ëaf_node
* 
l
, 
s
)

579 : 
cu¼node
(
l
), 
cu¼¦Ù
(
s
)

583 
šlše
 
™”©Ü
(cÚ¡ 
»v”£_™”©Ü
& 
™
)

584 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

589 
šlše
 
»ã»nû
 
	gİ”©Ü
 * () const

591 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

592  
	g‹mp_v®ue
;

598 
šlše
 
poš‹r
 
	gİ”©Ü
 -> () const

600 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

601  &
	g‹mp_v®ue
;

605 
šlše
 cÚ¡ 
	gkey_ty³
 & 
key
() const

607  
	gcu¼node
->
	g¦Ùkey
[
cu¼¦Ù
];

611 
šlše
 
	gd©a_ty³
 & 
d©a
() const

613  
	gcu¼node
->
	g¦Ùd©a
[
u£d_as_£t
 ? 0 : 
cu¼¦Ù
];

617 
šlše
 
	g™”©Ü
& 
	gİ”©Ü
 ++ ()

619 ià(
	gcu¼¦Ù
 + 1 < 
	gcu¼node
->
	g¦Ùu£
) {

620 ++
	gcu¼¦Ù
;

622 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

623 
cu¼node
 = cu¼node->
Ãx—f
;

624 
	gcu¼¦Ù
 = 0;

628 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

631  *
	gthis
;

635 
šlše
 
™”©Ü
 
	gİ”©Ü
 ++ ()

637 
™”©Ü
 
	gtmp
 = *
this
;

639 ià(
	gcu¼¦Ù
 + 1 < 
	gcu¼node
->
	g¦Ùu£
) {

640 ++
	gcu¼¦Ù
;

642 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

643 
cu¼node
 = cu¼node->
Ãx—f
;

644 
	gcu¼¦Ù
 = 0;

648 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

651  
	gtmp
;

655 
šlše
 
	g™”©Ü
& 
	gİ”©Ü
 -- ()

657 ià(
	gcu¼¦Ù
 > 0) {

658 --
	gcu¼¦Ù
;

660 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

661 
cu¼node
 = cu¼node->
´evËaf
;

662 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
 - 1;

666 
	gcu¼¦Ù
 = 0;

669  *
	gthis
;

673 
šlše
 
™”©Ü
 
	gİ”©Ü
 -- ()

675 
™”©Ü
 
	gtmp
 = *
this
;

677 ià(
	gcu¼¦Ù
 > 0) {

678 --
	gcu¼¦Ù
;

680 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

681 
cu¼node
 = cu¼node->
´evËaf
;

682 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
 - 1;

686 
	gcu¼¦Ù
 = 0;

689  
	gtmp
;

693 
šlše
 
boŞ
 
	gİ”©Ü
 =ğ(cÚ¡ 
™”©Ü
& 
x
) const

695  (
x
.
cu¼node
 =ğcu¼nodeè&& (x.
cu¼¦Ù
 == currslot);

699 
šlše
 
boŞ
 
	gİ”©Ü
 !ğ(cÚ¡ 
™”©Ü
& 
x
) const

701  (
x
.
cu¼node
 !ğcu¼nodeè|| (x.
cu¼¦Ù
 != currslot);

707 şas 
	ccÚ¡_™”©Ü


709 
	gpublic
:

713 
ty³Çme
 
	tbŒ“
::
	tkey_ty³
 key_type;

716 
ty³Çme
 
	tbŒ“
::
	td©a_ty³
 data_type;

719 
ty³Çme
 
	tbŒ“
::
	tv®ue_ty³
 value_type;

722 
ty³Çme
 
	tbŒ“
::
	t·œ_ty³
…air_type;

725 cÚ¡ 
	tv®ue_ty³
& 
	t»ã»nû
;

728 cÚ¡ 
	tv®ue_ty³
* 
	tpoš‹r
;

731 
	g¡d
::
	tbidœeùiÚ®_™”©Ü_g
 
	t™”©Ü_ÿ‹gÜy
;

734 
±rdiff_t
 
	tdifã»nû_ty³
;

736 
	g´iv©e
:

740 cÚ¡ 
ty³Çme
 
bŒ“
::
Ëaf_node
 * 
cu¼node
;

743 
	gcu¼¦Ù
;

747 
ä›nd
 
şass
 
	gcÚ¡_»v”£_™”©Ü
;

751 
mubË
 
v®ue_ty³
 
	g‹mp_v®ue
;

756 
BTREE_FRIENDS


758 
	gpublic
:

762 
šlše
 
cÚ¡_™”©Ü
()

763 : 
cu¼node
(
NULL
), 
cu¼¦Ù
(0)

767 
šlše
 
cÚ¡_™”©Ü
(cÚ¡ 
ty³Çme
 
bŒ“
::
Ëaf_node
* 
l
, 
s
)

768 : 
cu¼node
(
l
), 
cu¼¦Ù
(
s
)

772 
šlše
 
cÚ¡_™”©Ü
(cÚ¡ 
™”©Ü
& 
™
)

773 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

777 
šlše
 
cÚ¡_™”©Ü
(cÚ¡ 
»v”£_™”©Ü
& 
™
)

778 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

782 
šlše
 
cÚ¡_™”©Ü
(cÚ¡ 
cÚ¡_»v”£_™”©Ü
& 
™
)

783 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

789 
šlše
 
»ã»nû
 
	gİ”©Ü
 * () const

791 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

792  
	g‹mp_v®ue
;

798 
šlše
 
poš‹r
 
	gİ”©Ü
 -> () const

800 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

801  &
	g‹mp_v®ue
;

805 
šlše
 cÚ¡ 
	gkey_ty³
 & 
key
() const

807  
	gcu¼node
->
	g¦Ùkey
[
cu¼¦Ù
];

811 
šlše
 cÚ¡ 
	gd©a_ty³
 & 
d©a
() const

813  
	gcu¼node
->
	g¦Ùd©a
[
u£d_as_£t
 ? 0 : 
cu¼¦Ù
];

817 
šlše
 
	gcÚ¡_™”©Ü
& 
	gİ”©Ü
 ++ ()

819 ià(
	gcu¼¦Ù
 + 1 < 
	gcu¼node
->
	g¦Ùu£
) {

820 ++
	gcu¼¦Ù
;

822 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

823 
cu¼node
 = cu¼node->
Ãx—f
;

824 
	gcu¼¦Ù
 = 0;

828 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

831  *
	gthis
;

835 
šlše
 
cÚ¡_™”©Ü
 
	gİ”©Ü
 ++ ()

837 
cÚ¡_™”©Ü
 
	gtmp
 = *
this
;

839 ià(
	gcu¼¦Ù
 + 1 < 
	gcu¼node
->
	g¦Ùu£
) {

840 ++
	gcu¼¦Ù
;

842 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

843 
cu¼node
 = cu¼node->
Ãx—f
;

844 
	gcu¼¦Ù
 = 0;

848 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

851  
	gtmp
;

855 
šlše
 
	gcÚ¡_™”©Ü
& 
	gİ”©Ü
 -- ()

857 ià(
	gcu¼¦Ù
 > 0) {

858 --
	gcu¼¦Ù
;

860 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

861 
cu¼node
 = cu¼node->
´evËaf
;

862 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
 - 1;

866 
	gcu¼¦Ù
 = 0;

869  *
	gthis
;

873 
šlše
 
cÚ¡_™”©Ü
 
	gİ”©Ü
 -- ()

875 
cÚ¡_™”©Ü
 
	gtmp
 = *
this
;

877 ià(
	gcu¼¦Ù
 > 0) {

878 --
	gcu¼¦Ù
;

880 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

881 
cu¼node
 = cu¼node->
´evËaf
;

882 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
 - 1;

886 
	gcu¼¦Ù
 = 0;

889  
	gtmp
;

893 
šlše
 
boŞ
 
	gİ”©Ü
 =ğ(cÚ¡ 
cÚ¡_™”©Ü
& 
x
) const

895  (
x
.
cu¼node
 =ğcu¼nodeè&& (x.
cu¼¦Ù
 == currslot);

899 
šlše
 
boŞ
 
	gİ”©Ü
 !ğ(cÚ¡ 
cÚ¡_™”©Ü
& 
x
) const

901  (
x
.
cu¼node
 !ğcu¼nodeè|| (x.
cu¼¦Ù
 != currslot);

907 şas 
	c»v”£_™”©Ü


909 
	gpublic
:

913 
ty³Çme
 
	tbŒ“
::
	tkey_ty³
 key_type;

916 
ty³Çme
 
	tbŒ“
::
	td©a_ty³
 data_type;

919 
ty³Çme
 
	tbŒ“
::
	tv®ue_ty³
 value_type;

922 
ty³Çme
 
	tbŒ“
::
	t·œ_ty³
…air_type;

925 
	gv®ue_ty³
& 
	t»ã»nû
;

928 
v®ue_ty³
* 
	tpoš‹r
;

931 
	g¡d
::
	tbidœeùiÚ®_™”©Ü_g
 
	t™”©Ü_ÿ‹gÜy
;

934 
±rdiff_t
 
	tdifã»nû_ty³
;

936 
	g´iv©e
:

940 
ty³Çme
 
bŒ“
::
Ëaf_node
 * 
cu¼node
;

943 
	gcu¼¦Ù
;

947 
ä›nd
 
şass
 
	g™”©Ü
;

951 
ä›nd
 
şass
 
	gcÚ¡_™”©Ü
;

955 
ä›nd
 
şass
 
	gcÚ¡_»v”£_™”©Ü
;

959 
mubË
 
v®ue_ty³
 
	g‹mp_v®ue
;

964 
BTREE_FRIENDS


966 
	gpublic
:

970 
šlše
 
»v”£_™”©Ü
()

971 : 
cu¼node
(
NULL
), 
cu¼¦Ù
(0)

975 
šlše
 
»v”£_™”©Ü
(
ty³Çme
 
bŒ“
::
Ëaf_node
* 
l
, 
s
)

976 : 
cu¼node
(
l
), 
cu¼¦Ù
(
s
)

980 
šlše
 
»v”£_™”©Ü
(cÚ¡ 
™”©Ü
& 
™
)

981 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

986 
šlše
 
»ã»nû
 
	gİ”©Ü
 * () const

988 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

989 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

990  
	g‹mp_v®ue
;

996 
šlše
 
poš‹r
 
	gİ”©Ü
 -> () const

998 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

999 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

1000  &
	g‹mp_v®ue
;

1004 
šlše
 cÚ¡ 
	gkey_ty³
 & 
key
() const

1006 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1007  
	gcu¼node
->
	g¦Ùkey
[
cu¼¦Ù
 - 1];

1011 
šlše
 
	gd©a_ty³
 & 
d©a
() const

1013 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1014  
	gcu¼node
->
	g¦Ùd©a
[
u£d_as_£t
 ? 0 : 
cu¼¦Ù
 - 1];

1018 
šlše
 
	g»v”£_™”©Ü
& 
	gİ”©Ü
 ++ ()

1020 ià(
	gcu¼¦Ù
 > 1) {

1021 --
	gcu¼¦Ù
;

1023 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

1024 
cu¼node
 = cu¼node->
´evËaf
;

1025 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1029 
	gcu¼¦Ù
 = 0;

1032  *
	gthis
;

1036 
šlše
 
»v”£_™”©Ü
 
	gİ”©Ü
 ++ ()

1038 
»v”£_™”©Ü
 
	gtmp
 = *
this
;

1040 ià(
	gcu¼¦Ù
 > 1) {

1041 --
	gcu¼¦Ù
;

1043 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

1044 
cu¼node
 = cu¼node->
´evËaf
;

1045 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1049 
	gcu¼¦Ù
 = 0;

1052  
	gtmp
;

1056 
šlše
 
	g»v”£_™”©Ü
& 
	gİ”©Ü
 -- ()

1058 ià(
	gcu¼¦Ù
 < 
	gcu¼node
->
	g¦Ùu£
) {

1059 ++
	gcu¼¦Ù
;

1061 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

1062 
cu¼node
 = cu¼node->
Ãx—f
;

1063 
	gcu¼¦Ù
 = 1;

1067 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1070  *
	gthis
;

1074 
šlše
 
»v”£_™”©Ü
 
	gİ”©Ü
 -- ()

1076 
»v”£_™”©Ü
 
	gtmp
 = *
this
;

1078 ià(
	gcu¼¦Ù
 < 
	gcu¼node
->
	g¦Ùu£
) {

1079 ++
	gcu¼¦Ù
;

1081 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

1082 
cu¼node
 = cu¼node->
Ãx—f
;

1083 
	gcu¼¦Ù
 = 1;

1087 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1090  
	gtmp
;

1094 
šlše
 
boŞ
 
	gİ”©Ü
 =ğ(cÚ¡ 
»v”£_™”©Ü
& 
x
) const

1096  (
x
.
cu¼node
 =ğcu¼nodeè&& (x.
cu¼¦Ù
 == currslot);

1100 
šlše
 
boŞ
 
	gİ”©Ü
 !ğ(cÚ¡ 
»v”£_™”©Ü
& 
x
) const

1102  (
x
.
cu¼node
 !ğcu¼nodeè|| (x.
cu¼¦Ù
 != currslot);

1108 şas 
	ccÚ¡_»v”£_™”©Ü


1110 
	gpublic
:

1114 
ty³Çme
 
	tbŒ“
::
	tkey_ty³
 key_type;

1117 
ty³Çme
 
	tbŒ“
::
	td©a_ty³
 data_type;

1120 
ty³Çme
 
	tbŒ“
::
	tv®ue_ty³
 value_type;

1123 
ty³Çme
 
	tbŒ“
::
	t·œ_ty³
…air_type;

1126 cÚ¡ 
	tv®ue_ty³
& 
	t»ã»nû
;

1129 cÚ¡ 
	tv®ue_ty³
* 
	tpoš‹r
;

1132 
	g¡d
::
	tbidœeùiÚ®_™”©Ü_g
 
	t™”©Ü_ÿ‹gÜy
;

1135 
±rdiff_t
 
	tdifã»nû_ty³
;

1137 
	g´iv©e
:

1141 cÚ¡ 
ty³Çme
 
bŒ“
::
Ëaf_node
 * 
cu¼node
;

1144 
	gcu¼¦Ù
;

1148 
ä›nd
 
şass
 
	g»v”£_™”©Ü
;

1152 
mubË
 
v®ue_ty³
 
	g‹mp_v®ue
;

1157 
BTREE_FRIENDS


1159 
	gpublic
:

1163 
šlše
 
cÚ¡_»v”£_™”©Ü
()

1164 : 
cu¼node
(
NULL
), 
cu¼¦Ù
(0)

1168 
šlše
 
cÚ¡_»v”£_™”©Ü
(cÚ¡ 
ty³Çme
 
bŒ“
::
Ëaf_node
* 
l
, 
s
)

1169 : 
cu¼node
(
l
), 
cu¼¦Ù
(
s
)

1173 
šlše
 
cÚ¡_»v”£_™”©Ü
(cÚ¡ 
™”©Ü
& 
™
)

1174 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

1178 
šlše
 
cÚ¡_»v”£_™”©Ü
(cÚ¡ 
cÚ¡_™”©Ü
& 
™
)

1179 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

1183 
šlše
 
cÚ¡_»v”£_™”©Ü
(cÚ¡ 
»v”£_™”©Ü
& 
™
)

1184 : 
cu¼node
(
™
.cu¼node), 
cu¼¦Ù
(it.currslot)

1190 
šlše
 
»ã»nû
 
	gİ”©Ü
 * () const

1192 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1193 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

1194  
	g‹mp_v®ue
;

1200 
šlše
 
poš‹r
 
	gİ”©Ü
 -> () const

1202 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1203 
	g‹mp_v®ue
 = 
·œ_to_v®ue_ty³
()(
·œ_ty³
(
key
(), 
d©a
()));

1204  &
	g‹mp_v®ue
;

1208 
šlše
 cÚ¡ 
	gkey_ty³
 & 
key
() const

1210 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1211  
	gcu¼node
->
	g¦Ùkey
[
cu¼¦Ù
 - 1];

1215 
šlše
 cÚ¡ 
	gd©a_ty³
 & 
d©a
() const

1217 
BTREE_ASSERT
(
cu¼¦Ù
 > 0);

1218  
	gcu¼node
->
	g¦Ùd©a
[
u£d_as_£t
 ? 0 : 
cu¼¦Ù
 - 1];

1222 
šlše
 
	gcÚ¡_»v”£_™”©Ü
& 
	gİ”©Ü
 ++ ()

1224 ià(
	gcu¼¦Ù
 > 1) {

1225 --
	gcu¼¦Ù
;

1227 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

1228 
cu¼node
 = cu¼node->
´evËaf
;

1229 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1233 
	gcu¼¦Ù
 = 0;

1236  *
	gthis
;

1240 
šlše
 
cÚ¡_»v”£_™”©Ü
 
	gİ”©Ü
 ++ ()

1242 
cÚ¡_»v”£_™”©Ü
 
	gtmp
 = *
this
;

1244 ià(
	gcu¼¦Ù
 > 1) {

1245 --
	gcu¼¦Ù
;

1247 ià(
	gcu¼node
->
	g´evËaf
 !ğ
NULL
) {

1248 
cu¼node
 = cu¼node->
´evËaf
;

1249 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1253 
	gcu¼¦Ù
 = 0;

1256  
	gtmp
;

1260 
šlše
 
	gcÚ¡_»v”£_™”©Ü
& 
	gİ”©Ü
 -- ()

1262 ià(
	gcu¼¦Ù
 < 
	gcu¼node
->
	g¦Ùu£
) {

1263 ++
	gcu¼¦Ù
;

1265 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

1266 
cu¼node
 = cu¼node->
Ãx—f
;

1267 
	gcu¼¦Ù
 = 1;

1271 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1274  *
	gthis
;

1278 
šlše
 
cÚ¡_»v”£_™”©Ü
 
	gİ”©Ü
 -- ()

1280 
cÚ¡_»v”£_™”©Ü
 
	gtmp
 = *
this
;

1282 ià(
	gcu¼¦Ù
 < 
	gcu¼node
->
	g¦Ùu£
) {

1283 ++
	gcu¼¦Ù
;

1285 ià(
	gcu¼node
->
	gÃx—f
 !ğ
NULL
) {

1286 
cu¼node
 = cu¼node->
Ãx—f
;

1287 
	gcu¼¦Ù
 = 1;

1291 
	gcu¼¦Ù
 = 
cu¼node
->
¦Ùu£
;

1294  
	gtmp
;

1298 
šlše
 
boŞ
 
	gİ”©Ü
 =ğ(cÚ¡ 
cÚ¡_»v”£_™”©Ü
& 
x
) const

1300  (
x
.
cu¼node
 =ğcu¼nodeè&& (x.
cu¼¦Ù
 == currslot);

1304 
šlše
 
boŞ
 
	gİ”©Ü
 !ğ(cÚ¡ 
cÚ¡_»v”£_™”©Ü
& 
x
) const

1306  (
x
.
cu¼node
 !ğcu¼nodeè|| (x.
cu¼¦Ù
 != currslot);

1310 
	gpublic
:

1315 
	sŒ“_¡©s


1318 
size_ty³
 
™emcouÁ
;

1321 
size_ty³
 
	gËaves
;

1324 
size_ty³
 
	gšÃºodes
;

1327 cÚ¡ 
	gËaf¦Ùs
 = 
£lf_ty³
::
Ëaf¦Ùmax
;

1330 cÚ¡ 
	gšÃr¦Ùs
 = 
£lf_ty³
::
šÃr¦Ùmax
;

1333 
šlše
 
Œ“_¡©s
()

1334 : 
™emcouÁ
(0),

1335 
Ëaves
(0), 
šÃºodes
(0)

1339 
šlše
 
size_ty³
 
nodes
() const

1341  
	gšÃºodes
 + 
	gËaves
;

1345 
šlše
 
avgfl_Ëaves
() const

1347  
	g¡©ic_ÿ¡
<>(
	g™emcouÁ
è/ (
Ëaves
 * 
	gËaf¦Ùs
);

1351 
	g´iv©e
:

1355 
node
* 
m_roÙ
;

1358 
Ëaf_node
* 
	gm_h—dËaf
;

1361 
Ëaf_node
* 
	gm_Ëaf
;

1364 
Œ“_¡©s
 
	gm_¡©s
;

1368 
key_com·»
 
	gm_key_Ëss
;

1371 
®loÿtÜ_ty³
 
	gm_®loÿtÜ
;

1374 
VMEM
 *
	gvmp
;

1376 
	gpublic
:

1381 
ex¶ic™
 
šlše
 
bŒ“
(cÚ¡ 
®loÿtÜ_ty³
& 
®loc
 =‡llocator_type())

1382 : 
m_roÙ
(
NULL
), 
m_h—dËaf
(NULL), 
m_Ëaf
(NULL), 
m_®loÿtÜ
(
®loc
)

1384 
	gvmp
 = 
nv_ü—‹
("/mÁ/nv¿m1", 
NVRAM_LEN
);

1385 if(
	gvmp
 =ğ
NULL
)

1386 
cout
 << "‚v_ü—‹ faed " << 
’dl
;

1387 
	gnv’Œy_couÁ
 = 0;

1388 
	gnvb™m­_couÁ
 = 0;

1389 
	gnvnode_couÁ
 = 0;

1394 
ex¶ic™
 
šlše
 
bŒ“
(cÚ¡ 
key_com·»
& 
kcf
,

1395 cÚ¡ 
®loÿtÜ_ty³
& 
®loc
 =‡llocator_type())

1396 : 
m_roÙ
(
NULL
), 
m_h—dËaf
(NULL), 
m_Ëaf
(NULL),

1397 
m_key_Ëss
(
kcf
), 
m_®loÿtÜ
(
®loc
)

1403 
	g‹m¶©e
 <
şass
 
	gIÅutI‹¿tÜ
>

1404 
šlše
 
bŒ“
(
IÅutI‹¿tÜ
 
fœ¡
, IÅutI‹¿tÜ 
Ï¡
,

1405 cÚ¡ 
®loÿtÜ_ty³
& 
®loc
 =‡llocator_type())

1406 : 
m_roÙ
(
NULL
), 
m_h—dËaf
(NULL), 
m_Ëaf
(NULL), 
m_®loÿtÜ
(
®loc
)

1408 
š£¹
(
fœ¡
, 
Ï¡
);

1414 
	g‹m¶©e
 <
şass
 
	gIÅutI‹¿tÜ
>

1415 
šlše
 
bŒ“
(
IÅutI‹¿tÜ
 
fœ¡
, IÅutI‹¿tÜ 
Ï¡
, cÚ¡ 
key_com·»
& 
kcf
,

1416 cÚ¡ 
®loÿtÜ_ty³
& 
®loc
 =‡llocator_type())

1417 : 
m_roÙ
(
NULL
), 
m_h—dËaf
(NULL), 
m_Ëaf
(NULL),

1418 
m_key_Ëss
(
kcf
), 
m_®loÿtÜ
(
®loc
)

1420 
š£¹
(
fœ¡
, 
Ï¡
);

1424 
	gšlše
 ~
bŒ“
()

1426 
ş—r
();

1427 
	gcout
 << "nv’Œy_couÁ "<<
	gnv’Œy_couÁ
 << "‚vb™m­_couÁ " << 
	gnvb™m­_couÁ
 << "‚vnode_couÁ " << 
	gnvnode_couÁ
<< 
	g’dl
;

1428 
nv_de¡roy
(
vmp
);

1432 
sw­
(
£lf_ty³
& 
äom
)

1434 
	g¡d
::
sw­
(
m_roÙ
, 
äom
.m_root);

1435 
	g¡d
::
sw­
(
m_h—dËaf
, 
äom
.m_headleaf);

1436 
	g¡d
::
sw­
(
m_Ëaf
, 
äom
.m_tailleaf);

1437 
	g¡d
::
sw­
(
m_¡©s
, 
äom
.m_stats);

1438 
	g¡d
::
sw­
(
m_key_Ëss
, 
äom
.m_key_less);

1439 
	g¡d
::
sw­
(
m_®loÿtÜ
, 
äom
.m_allocator);

1442 
	gpublic
:

1446 şas 
	cv®ue_com·»


1448 
´Ùeùed
:

1450 
key_com·»
 
key_comp
;

1453 
šlše
 
ex¶ic™
 
v®ue_com·»
(
key_com·»
 
kc
)

1454 : 
key_comp
(
kc
)

1458 
ä›nd
 
şass
 
bŒ“
<
key_ty³
, 
	gd©a_ty³
, 
	gv®ue_ty³
, 
	gkey_com·»
,

1459 
	gŒa™s
, 
	g®low_du¶iÿ‹s
, 
	g®loÿtÜ_ty³
, 
	gu£d_as_£t
>;

1461 
	gpublic
:

1463 
šlše
 
boŞ
 
İ”©Ü
 (è(cÚ¡ 
v®ue_ty³
& 
x
, cÚ¡ 
	gv®ue_ty³
& 
	gy
) const

1465  
key_comp
(
x
.
fœ¡
, 
y
.first);

1470 
šlše
 
key_com·»
 
key_comp
() const

1472  
	gm_key_Ëss
;

1477 
šlše
 
v®ue_com·»
 
v®ue_comp
() const

1479  
v®ue_com·»
(
m_key_Ëss
);

1482 
	g´iv©e
:

1486 
šlše
 
boŞ
 
key_Ëss
(cÚ¡ 
key_ty³
& 
a
, cÚ¡ key_ty³ 
b
) const

1488  
m_key_Ëss
(
a
, 
b
);

1492 
šlše
 
boŞ
 
key_Ës£qu®
(cÚ¡ 
key_ty³
& 
a
, cÚ¡ key_ty³ 
b
) const

1494  !
m_key_Ëss
(
b
, 
a
);

1498 
šlše
 
boŞ
 
key_g»©”
(cÚ¡ 
key_ty³
& 
a
, cÚ¡ key_ty³& 
b
) const

1500  
m_key_Ëss
(
b
, 
a
);

1504 
šlše
 
boŞ
 
key_g»©”equ®
(cÚ¡ 
key_ty³
& 
a
, cÚ¡ key_ty³ 
b
) const

1506  !
m_key_Ëss
(
a
, 
b
);

1511 
šlše
 
boŞ
 
key_equ®
(cÚ¡ 
key_ty³
& 
a
, cÚ¡ key_ty³& 
b
) const

1513  !
m_key_Ëss
(
a
, 
b
) && !m_key_less(b,‡);

1516 
	gpublic
:

1520 
®loÿtÜ_ty³
 
g‘_®loÿtÜ
() const

1522  
m_®loÿtÜ
;

1525 
	g´iv©e
:

1529 
šlše
 
Ëaf_node
 *
nvËaf_®loc
(
VMEM
 *
vmp
)

1531 
Ëaf_node
 * 
n
 = (Ëaf_nod*)
nv_m®loc
(Ö—f_node), 
vmp
);

1532 if(
	gn
 =ğ
NULL
) {

1533 
cout
 << "‚vËaà®loøçed " << 
’dl
;

1536  
	gn
;

1541 
ty³Çme
 
	gËaf_node
::
®loc_ty³
 
Ëaf_node_®loÿtÜ
()

1543  
ty³Çme
 
Ëaf_node
::
®loc_ty³
(
m_®loÿtÜ
);

1547 
ty³Çme
 
	gšÃr_node
::
®loc_ty³
 
šÃr_node_®loÿtÜ
()

1549  
ty³Çme
 
šÃr_node
::
®loc_ty³
(
m_®loÿtÜ
);

1553 
šlše
 
Ëaf_node
 * 
®loÿ‹_Ëaf
()

1556 
Ëaf_node
* 
	gn
 = 
Ãw
 (
Ëaf_node_®loÿtÜ
().
®loÿ‹
(1))

1557 
Ëaf_node
();

1559 
Ëaf_node
 *
	gn
 = 
nvËaf_®loc
(
vmp
);

1560 
	gn
->
	g´evËaf
 = 
NULL
;

1561 
	gn
->
	gÃx—f
 = 
NULL
;

1562 
	gn
->
	gËv–
 = 0;

1563 
	gn
->
	g¦Ùu£
 = 0;

1564 
	gm_¡©s
.
	gËaves
++;

1565  
	gn
;

1569 
šlše
 
šÃr_node
 * 
®loÿ‹_šÃr
(
Ëv–
)

1571 
šÃr_node
* 
	gn
 = 
Ãw
 (
šÃr_node_®loÿtÜ
().
®loÿ‹
(1))

1572 
šÃr_node
(
Ëv–
);

1573 
	gm_¡©s
.
	gšÃºodes
++;

1574  
	gn
;

1579 
šlše
 
ä“_node
(
node
* 
n
)

1581 ià(
	gn
->
i¦—âode
()) {

1582 
Ëaf_node
* 
	gÊ
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
n
);

1583 
ty³Çme
 
	gËaf_node
::
®loc_ty³
 
a
(
Ëaf_node_®loÿtÜ
());

1584 
nv_ä“
(
vmp
, (*)
Ê
);

1589 
	gm_¡©s
.
	gËaves
--;

1592 
šÃr_node
* 
	gš
 = 
¡©ic_ÿ¡
<šÃr_node*>(
n
);

1593 
ty³Çme
 
	gšÃr_node
::
®loc_ty³
 
a
(
šÃr_node_®loÿtÜ
());

1594 
	ga
.
de¡roy
(
š
);

1595 
	ga
.
d—Îoÿ‹
(
š
, 1);

1596 
	gm_¡©s
.
	gšÃºodes
--;

1602 
	g‹m¶©e
 <
şass
 
	gIÅutI‹¿tÜ
, cÏs 
	gOuutI‹¿tÜ
>

1603 
OuutI‹¿tÜ
 
d©a_cİy
(
IÅutI‹¿tÜ
 
fœ¡
, IÅutI‹¿tÜ 
Ï¡
,

1604 
OuutI‹¿tÜ
 
»suÉ
)

1606 ià(
	gu£d_as_£t
è 
	g»suÉ
;

1607  
	g¡d
::
cİy
(
fœ¡
, 
Ï¡
, 
»suÉ
);

1612 
	g‹m¶©e
 <
şass
 
	gIÅutI‹¿tÜ
, cÏs 
	gOuutI‹¿tÜ
>

1613 
OuutI‹¿tÜ
 
d©a_cİy_backw¬d
(
IÅutI‹¿tÜ
 
fœ¡
, IÅutI‹¿tÜ 
Ï¡
,

1614 
OuutI‹¿tÜ
 
»suÉ
)

1616 ià(
	gu£d_as_£t
è 
	g»suÉ
;

1617  
	g¡d
::
cİy_backw¬d
(
fœ¡
, 
Ï¡
, 
»suÉ
);

1620 
	gpublic
:

1624 
ş—r
()

1626 ià(
m_roÙ
)

1628 
ş—r_»cursive
(
m_roÙ
);

1629 
ä“_node
(
m_roÙ
);

1631 
	gm_roÙ
 = 
NULL
;

1632 
	gm_h—dËaf
 = 
m_Ëaf
 = 
NULL
;

1634 
	gm_¡©s
 = 
Œ“_¡©s
();

1636 
BTREE_ASSERT
(
m_¡©s
.
™emcouÁ
 == 0);

1639 
	g´iv©e
:

1641 
ş—r_»cursive
(
node
* 
n
)

1643 ià(
n
->
i¦—âode
())

1645 
Ëaf_node
* 
Ëaâode
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
n
);

1647 
	g¦Ù
 = 0; slÙ < 
	gËaâode
->
	g¦Ùu£
; ++slot)

1654 
šÃr_node
* 
	gšÃºode
 = 
¡©ic_ÿ¡
<šÃr_node*>(
n
);

1656 
	g¦Ù
 = 0; slÙ < 
	gšÃºode
->
	g¦Ùu£
 + 1; ++slot)

1658 
ş—r_»cursive
(
šÃºode
->
chdid
[
¦Ù
]);

1659 
ä“_node
(
šÃºode
->
chdid
[
¦Ù
]);

1664 
	gpublic
:

1669 
šlše
 
™”©Ü
 
begš
()

1671  
™”©Ü
(
m_h—dËaf
, 0);

1676 
šlše
 
™”©Ü
 
’d
()

1678  
™”©Ü
(
m_Ëaf
, m_Ëaà? m_Ëaf->
¦Ùu£
 : 0);

1683 
šlše
 
cÚ¡_™”©Ü
 
begš
() const

1685  
cÚ¡_™”©Ü
(
m_h—dËaf
, 0);

1690 
šlše
 
cÚ¡_™”©Ü
 
’d
() const

1692  
cÚ¡_™”©Ü
(
m_Ëaf
, m_Ëaà? m_Ëaf->
¦Ùu£
 : 0);

1697 
šlše
 
»v”£_™”©Ü
 
rbegš
()

1699  
»v”£_™”©Ü
(
’d
());

1704 
šlše
 
»v”£_™”©Ü
 
»nd
()

1706  
»v”£_™”©Ü
(
begš
());

1711 
šlše
 
cÚ¡_»v”£_™”©Ü
 
rbegš
() const

1713  
cÚ¡_»v”£_™”©Ü
(
’d
());

1718 
šlše
 
cÚ¡_»v”£_™”©Ü
 
»nd
() const

1720  
cÚ¡_»v”£_™”©Ü
(
begš
());

1723 
	g´iv©e
:

1730 
‹m¶©e
 <
ty³Çme
 
node_ty³
>

1731 
šlše
 
fšd_low”
(cÚ¡ 
node_ty³
* 
n
, cÚ¡ 
key_ty³
& 
key
) const

1736 ià(
	gn
->
	g¦Ùu£
 == 0)  0;

1738 
	glo
 = 0, 
	ghi
 = 
n
->
¦Ùu£
;

1740 
	glo
 < 
	ghi
)

1742 
	gmid
 = (
lo
 + 
hi
) >> 1;

1744 ià(
key_Ës£qu®
(
key
, 
n
->
¦Ùkey
[
mid
])) {

1745 
	ghi
 = 
mid
;

1748 
	glo
 = 
mid
 + 1;

1752 
BTREE_PRINT
("bŒ“::fšd_low”: oÀ" << 
n
 << " key " << 
key
 << " -> " << 
lo
 << " / " << 
hi
);

1755 ià(
	g£lfv”ify
)

1757 
	gi
 = 0;

1758 
	gi
 < 
	gn
->
	g¦Ùu£
 && 
key_Ëss
(
n
->
¦Ùkey
[
i
], 
key
)) ++i;

1760 
BTREE_PRINT
("bŒ“::fšd_low”:e¡fšd: " << 
i
);

1761 
BTREE_ASSERT
(
i
 =ğ
lo
);

1764  
	glo
;

1768 
	glo
 = 0;

1769 
	glo
 < 
	gn
->
	g¦Ùu£
 && 
key_Ëss
(
n
->
¦Ùkey
[
lo
], 
key
)) ++lo;

1770  
	glo
;

1774 
šlše
 
fšd_low”_Üg
(cÚ¡ 
Ëaf_node
* 
n
, cÚ¡ 
key_ty³
& 
key
) const

1779 ià(
	gn
->
	g¦Ùu£
 == 0)  0;

1781 
	glo
 = 0, 
	ghi
 = 
n
->
¦Ùu£
;

1783 
	glo
 < 
	ghi
)

1785 
	gmid
 = (
lo
 + 
hi
) >> 1;

1787 ià(
key_Ës£qu®
(
key
, 
n
->
¦Ùkey
[
mid
])) {

1788 
	ghi
 = 
mid
;

1791 
	glo
 = 
mid
 + 1;

1795 
BTREE_PRINT
("bŒ“::fšd_low”: oÀ" << 
n
 << " key " << 
key
 << " -> " << 
lo
 << " / " << 
hi
);

1798 ià(
	g£lfv”ify
)

1800 
	gi
 = 0;

1801 
	gi
 < 
	gn
->
	g¦Ùu£
 && 
key_Ëss
(
n
->
¦Ùkey
[
i
], 
key
)) ++i;

1803 
BTREE_PRINT
("bŒ“::fšd_low”:e¡fšd: " << 
i
);

1804 
BTREE_ASSERT
(
i
 =ğ
lo
);

1807  
	glo
;

1811 
	glo
 = 0;

1812 
	glo
 < 
	gn
->
	g¦Ùu£
 && 
key_Ëss
(
n
->
¦Ùkey
[
lo
], 
key
)) ++lo;

1813  
	glo
;

1817 
šlše
 
Ëaf_fšd_low”
(cÚ¡ 
Ëaf_node
* 
n
, cÚ¡ 
key_ty³
& 
key
) const

1819  
	gn
->
couÁ
();

1826 
	g‹m¶©e
 <
ty³Çme
 
	gnode_ty³
>

1827 
šlše
 
fšd_uµ”
(cÚ¡ 
node_ty³
* 
n
, cÚ¡ 
key_ty³
& 
key
) const

1829 ià(0 && (
	gn
->
	g¦Ùkey
è> 
	gŒa™s
::
bš£¬ch_th»shŞd
)

1831 ià(
n
->
¦Ùu£
 == 0)  0;

1833 
	glo
 = 0, 
	ghi
 = 
n
->
¦Ùu£
;

1835 
	glo
 < 
	ghi
)

1837 
	gmid
 = (
lo
 + 
hi
) >> 1;

1839 ià(
key_Ëss
(
key
, 
n
->
¦Ùkey
[
mid
])) {

1840 
	ghi
 = 
mid
;

1843 
	glo
 = 
mid
 + 1;

1847 
BTREE_PRINT
("bŒ“::fšd_uµ”: oÀ" << 
n
 << " key " << 
key
 << " -> " << 
lo
 << " / " << 
hi
);

1850 ià(
	g£lfv”ify
)

1852 
	gi
 = 0;

1853 
	gi
 < 
	gn
->
	g¦Ùu£
 && 
key_Ës£qu®
(
n
->
¦Ùkey
[
i
], 
key
)) ++i;

1855 
BTREE_PRINT
("bŒ“::fšd_uµ”e¡fšd: " << 
i
);

1856 
BTREE_ASSERT
(
i
 =ğ
hi
);

1859  
	glo
;

1863 
	glo
 = 0;

1864 
	glo
 < 
	gn
->
	g¦Ùu£
 && 
key_Ës£qu®
(
n
->
¦Ùkey
[
lo
], 
key
)) ++lo;

1865  
	glo
;

1869 
	gpublic
:

1873 
šlše
 
size_ty³
 
size
() const

1875  
m_¡©s
.
™emcouÁ
;

1879 
šlše
 
boŞ
 
em±y
() const

1881  (
size
(è=ğ
size_ty³
(0));

1886 
šlše
 
size_ty³
 
max_size
() const

1888  
size_ty³
(-1);

1892 
šlše
 cÚ¡ 
	gŒ“_¡©s
 & 
g‘_¡©s
() const

1894  
	gm_¡©s
;

1897 
	gpublic
:

1902 
boŞ
 
exi¡s
(cÚ¡ 
key_ty³
& 
key
) const

1904 cÚ¡ 
node
* 
n
 = 
m_roÙ
;

1905 ià(!
	gn
è 
	gçl£
;

1907 !
	gn
->
i¦—âode
())

1909 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

1910 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

1912 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

1915 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

1917 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

1918  (
	g¦Ù
 < 
	gËaf
->
	g¦Ùu£
 && 
key_equ®
(
key
, 
Ëaf
->
¦Ùkey
[
¦Ù
]));

1923 
™”©Ü
 
fšd
(cÚ¡ 
key_ty³
& 
key
)

1925 
node
* 
	gn
 = 
m_roÙ
;

1926 ià(!
	gn
è 
’d
();

1928 !
	gn
->
i¦—âode
())

1930 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

1931 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

1933 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

1936 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
n
);

1938 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

1939  (
	g¦Ù
 < 
	gËaf
->
	g¦Ùu£
 && 
key_equ®
(
key
, 
Ëaf
->
¦Ùkey
[
¦Ù
]))

1940 ? 
™”©Ü
(
Ëaf
, 
¦Ù
è: 
’d
();

1945 
cÚ¡_™”©Ü
 
fšd
(cÚ¡ 
key_ty³
& 
key
) const

1947 cÚ¡ 
node
* 
	gn
 = 
m_roÙ
;

1948 ià(!
	gn
è 
’d
();

1950 !
	gn
->
i¦—âode
())

1952 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

1953 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

1955 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

1958 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

1960 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

1961  (
	g¦Ù
 < 
	gËaf
->
	g¦Ùu£
 && 
key_equ®
(
key
, 
Ëaf
->
¦Ùkey
[
¦Ù
]))

1962 ? 
cÚ¡_™”©Ü
(
Ëaf
, 
¦Ù
è: 
’d
();

1967 
size_ty³
 
couÁ
(cÚ¡ 
key_ty³
& 
key
) const

1969 cÚ¡ 
node
* 
	gn
 = 
m_roÙ
;

1970 ià(!
	gn
)  0;

1972 !
	gn
->
i¦—âode
())

1974 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

1975 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

1977 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

1980 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

1982 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

1983 
size_ty³
 
	gnum
 = 0;

1985 
	gËaf
 && 
	g¦Ù
 <†—f->
	g¦Ùu£
 && 
key_equ®
(
key
, 
Ëaf
->
¦Ùkey
[
¦Ù
]))

1987 ++
	gnum
;

1988 ià(++
	g¦Ù
 >ğ
Ëaf
->
¦Ùu£
)

1990 
Ëaf
 =†—f->
Ãx—f
;

1991 
	g¦Ù
 = 0;

1995  
	gnum
;

2000 
™”©Ü
 
low”_bound
(cÚ¡ 
key_ty³
& 
key
)

2002 
node
* 
	gn
 = 
m_roÙ
;

2003 ià(!
	gn
è 
’d
();

2005 !
	gn
->
i¦—âode
())

2007 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

2008 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

2010 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

2013 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
n
);

2015 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

2016  
™”©Ü
(
Ëaf
, 
¦Ù
);

2022 
cÚ¡_™”©Ü
 
low”_bound
(cÚ¡ 
key_ty³
& 
key
) const

2024 cÚ¡ 
node
* 
	gn
 = 
m_roÙ
;

2025 ià(!
	gn
è 
’d
();

2027 !
	gn
->
i¦—âode
())

2029 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

2030 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

2032 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

2035 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

2037 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

2038  
cÚ¡_™”©Ü
(
Ëaf
, 
¦Ù
);

2043 
™”©Ü
 
uµ”_bound
(cÚ¡ 
key_ty³
& 
key
)

2045 
node
* 
	gn
 = 
m_roÙ
;

2046 ià(!
	gn
è 
’d
();

2048 !
	gn
->
i¦—âode
())

2050 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

2051 
	g¦Ù
 = 
fšd_uµ”
(
šÃr
, 
key
);

2053 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

2056 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
n
);

2058 
	g¦Ù
 = 
fšd_uµ”
(
Ëaf
, 
key
);

2059  
™”©Ü
(
Ëaf
, 
¦Ù
);

2065 
cÚ¡_™”©Ü
 
uµ”_bound
(cÚ¡ 
key_ty³
& 
key
) const

2067 cÚ¡ 
node
* 
	gn
 = 
m_roÙ
;

2068 ià(!
	gn
è 
’d
();

2070 !
	gn
->
i¦—âode
())

2072 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

2073 
	g¦Ù
 = 
fšd_uµ”
(
šÃr
, 
key
);

2075 
	gn
 = 
šÃr
->
chdid
[
¦Ù
];

2078 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

2080 
	g¦Ù
 = 
fšd_uµ”
(
Ëaf
, 
key
);

2081  
cÚ¡_™”©Ü
(
Ëaf
, 
¦Ù
);

2085 
šlše
 
	g¡d
::
·œ
<
™”©Ü
, 
	g™”©Ü
> 
equ®_¿nge
(cÚ¡ 
key_ty³
& 
key
)

2087  
	g¡d
::
·œ
<
™”©Ü
, 
	g™”©Ü
>(
low”_bound
(
key
), 
uµ”_bound
(key));

2091 
šlše
 
	g¡d
::
·œ
<
cÚ¡_™”©Ü
, 
	gcÚ¡_™”©Ü
> 
equ®_¿nge
(cÚ¡ 
key_ty³
& 
key
) const

2093  
	g¡d
::
·œ
<
cÚ¡_™”©Ü
, 
	gcÚ¡_™”©Ü
>(
low”_bound
(
key
), 
uµ”_bound
(key));

2096 
	gpublic
:

2102 
šlše
 
boŞ
 
İ”©Ü
 =ğ(cÚ¡ 
£lf_ty³
& 
Ùh”
) const

2104  (
size
(è=ğ
Ùh”
.size()è&& 
¡d
::
equ®
(
begš
(), 
’d
(), other.begin());

2108 
šlše
 
boŞ
 
	gİ”©Ü
 !ğ(cÚ¡ 
£lf_ty³
& 
Ùh”
) const

2110  !(*
this
 =ğ
Ùh”
);

2115 
šlše
 
boŞ
 
	gİ”©Ü
 < (cÚ¡ 
	g£lf_ty³
& 
	gÙh”
) const

2117  
	g¡d
::
Ëxicog¿phiÿl_com·»
(
begš
(), 
’d
(), 
Ùh”
.begin(), other.end());

2121 
šlše
 
boŞ
 
	gİ”©Ü
 > (cÚ¡ 
	g£lf_ty³
& 
	gÙh”
) const

2123  
	gÙh”
 < *
	gthis
;

2127 
šlše
 
boŞ
 
	gİ”©Ü
 <ğ(cÚ¡ 
£lf_ty³
& 
Ùh”
) const

2129  !(
Ùh”
 < *
this
);

2133 
šlše
 
boŞ
 
	gİ”©Ü
 >ğ(cÚ¡ 
£lf_ty³
& 
Ùh”
) const

2135  !(*
this
 < 
Ùh”
);

2138 
	gpublic
:

2142 
šlše
 
£lf_ty³
& 
İ”©Ü
 = (cÚ¡ s–f_ty³& 
Ùh”
)

2144 ià(
this
 !ğ&
Ùh”
)

2146 
ş—r
();

2148 
	gm_key_Ëss
 = 
Ùh”
.
key_comp
();

2149 
	gm_®loÿtÜ
 = 
Ùh”
.
g‘_®loÿtÜ
();

2151 ià(
	gÙh”
.
size
() != 0)

2153 
m_¡©s
.
Ëaves
 = m_¡©s.
šÃºodes
 = 0;

2154 ià(
	gÙh”
.
	gm_roÙ
) {

2155 
	gm_roÙ
 = 
cİy_»cursive
(
Ùh”
.
m_roÙ
);

2157 
	gm_¡©s
 = 
Ùh”
.
m_¡©s
;

2160 ià(
	g£lfv”ify
è
v”ify
();

2162  *
	gthis
;

2167 
šlše
 
bŒ“
(cÚ¡ bŒ“& 
Ùh”
)

2168 : 
m_roÙ
(
NULL
), 
m_h—dËaf
(NULL), 
m_Ëaf
(NULL),

2169 
m_¡©s
(
Ùh”
.m_stats),

2170 
m_key_Ëss
(
Ùh”
.
key_comp
()),

2171 
m_®loÿtÜ
(
Ùh”
.
g‘_®loÿtÜ
())

2173 ià(
size
() > 0)

2175 
	gm_¡©s
.
	gËaves
 = 
m_¡©s
.
šÃºodes
 = 0;

2176 ià(
	gÙh”
.
	gm_roÙ
) {

2177 
	gm_roÙ
 = 
cİy_»cursive
(
Ùh”
.
m_roÙ
);

2179 ià(
	g£lfv”ify
è
v”ify
();

2183 
	g´iv©e
:

2185 
node
 * 
cİy_»cursive
(cÚ¡‚ode* 
n
)

2187 ià(
n
->
i¦—âode
())

2189 cÚ¡ 
Ëaf_node
* 
Ëaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

2190 
Ëaf_node
* 
	gÃwËaf
 = 
®loÿ‹_Ëaf
();

2192 
	gÃwËaf
->
	g¦Ùu£
 = 
Ëaf
->
¦Ùu£
;

2193 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
,†—f->¦Ùkey +†—f->
¦Ùu£
, 
ÃwËaf
->slotkey);

2194 
d©a_cİy
(
Ëaf
->
¦Ùd©a
,†—f->¦Ùd©¨+†—f->
¦Ùu£
, 
ÃwËaf
->slotdata);

2196 ià(
	gm_h—dËaf
 =ğ
NULL
)

2198 
m_h—dËaf
 = 
m_Ëaf
 = 
ÃwËaf
;

2199 
	gÃwËaf
->
	g´evËaf
 = 
ÃwËaf
->
Ãx—f
 = 
NULL
;

2203 
	gÃwËaf
->
	g´evËaf
 = 
m_Ëaf
;

2204 
	gm_Ëaf
->
	gÃx—f
 = 
ÃwËaf
;

2205 
	gm_Ëaf
 = 
ÃwËaf
;

2208  
	gÃwËaf
;

2212 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

2213 
šÃr_node
* 
	gÃwšÃr
 = 
®loÿ‹_šÃr
(
šÃr
->
Ëv–
);

2215 
	gÃwšÃr
->
	g¦Ùu£
 = 
šÃr
->
¦Ùu£
;

2216 
	g¡d
::
cİy
(
šÃr
->
¦Ùkey
, iÂ”->¦Ùkey + iÂ”->
¦Ùu£
, 
ÃwšÃr
->slotkey);

2218 
	g¦Ù
 = 0; slÙ <ğ
šÃr
->
¦Ùu£
; ++slot)

2220 
	gÃwšÃr
->
	gchdid
[
¦Ù
] = 
cİy_»cursive
(
šÃr
->
chdid
[slot]);

2223  
	gÃwšÃr
;

2227 
	gpublic
:

2233 
šlše
 
¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
š£¹
(cÚ¡ 
·œ_ty³
& 
x
)

2235  
š£¹_¡¬t
(
x
.
fœ¡
, x.
£cÚd
);

2242 
šlše
 
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
š£¹
(cÚ¡ 
key_ty³
& 
key
, cÚ¡ 
d©a_ty³
& 
d©a
)

2244  
š£¹_¡¬t
(
key
, 
d©a
);

2251 
šlše
 
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
š£¹2
(cÚ¡ 
key_ty³
& 
key
, cÚ¡ 
d©a_ty³
& 
d©a
)

2253  
š£¹_¡¬t
(
key
, 
d©a
);

2258 
šlše
 
™”©Ü
 
š£¹
(™”©Ü , cÚ¡ 
·œ_ty³
& 
x
)

2260  
š£¹_¡¬t
(
x
.
fœ¡
, x.
£cÚd
).
	gfœ¡
;

2265 
šlše
 
™”©Ü
 
š£¹2
(™”©Ü , cÚ¡ 
key_ty³
& 
key
, cÚ¡ 
d©a_ty³
& 
d©a
)

2267  
š£¹_¡¬t
(
key
, 
d©a
).
	gfœ¡
;

2273 
	g‹m¶©e
 <
ty³Çme
 
	gIÅutI‹¿tÜ
>

2274 
šlše
 
š£¹
(
IÅutI‹¿tÜ
 
fœ¡
, IÅutI‹¿tÜ 
Ï¡
)

2276 
IÅutI‹¿tÜ
 
	g™”
 = 
fœ¡
;

2277 
	g™”
 !ğ
Ï¡
)

2279 
š£¹
(*
™”
);

2280 ++
	g™”
;

2284 
	g´iv©e
:

2289 
¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
š£¹_¡¬t
(cÚ¡ 
key_ty³
& 
key
, cÚ¡ 
d©a_ty³
& 
v®ue
)

2291 
node
* 
	gÃwchd
 = 
NULL
;

2292 
key_ty³
 
	gÃwkey
 = key_type();

2294 ià(
	gm_roÙ
 =ğ
NULL
) {

2295 
m_roÙ
 = 
m_h—dËaf
 = 
m_Ëaf
 = 
®loÿ‹_Ëaf
();

2298 
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
	gr
 = 
š£¹_desûnd
(
m_roÙ
, 
key
, 
v®ue
, &
Ãwkey
, &
Ãwchd
);

2300 ià(
	gÃwchd
)

2302 
šÃr_node
* 
	gÃwroÙ
 = 
®loÿ‹_šÃr
(
m_roÙ
->
Ëv–
 + 1);

2303 
	gÃwroÙ
->
	g¦Ùkey
[0] = 
Ãwkey
;

2305 
	gÃwroÙ
->
	gchdid
[0] = 
m_roÙ
;

2306 
	gÃwroÙ
->
	gchdid
[1] = 
Ãwchd
;

2308 
	gÃwroÙ
->
	g¦Ùu£
 = 1;

2310 
	gm_roÙ
 = 
ÃwroÙ
;

2314 ià(
	gr
.
	g£cÚd
è++
	gm_¡©s
.
	g™emcouÁ
;

2316 #ifdeà
BTREE_DEBUG


2317 ià(
	gdebug
è
´št
(
¡d
::
cout
);

2320 ià(
	g£lfv”ify
) {

2321 
v”ify
();

2322 
BTREE_ASSERT
(
exi¡s
(
key
));

2325  
	gr
;

2335 
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
š£¹_desûnd
(
node
* 
n
,

2336 cÚ¡ 
key_ty³
& 
key
, cÚ¡ 
d©a_ty³
& 
v®ue
,

2337 
key_ty³
* 
¥l™key
, 
node
** 
¥l™node
)

2339 ià(!
	gn
->
i¦—âode
())

2341 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
n
);

2343 
key_ty³
 
	gÃwkey
 = key_type();

2344 
node
* 
	gÃwchd
 = 
NULL
;

2346 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

2348 
BTREE_PRINT
("bŒ“::š£¹_desûnd iÁØ" << 
šÃr
->
chdid
[
¦Ù
]);

2349 
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
> 
	gr
 = 
š£¹_desûnd
(
šÃr
->
chdid
[
¦Ù
],

2350 
key
, 
v®ue
, &
Ãwkey
, &
Ãwchd
);

2352 ià(
	gÃwchd
)

2354 
BTREE_PRINT
("bŒ“::š£¹_desûnd‚ewchd w™h key " << 
Ãwkey
 << "‚od" << 
Ãwchd
 << "‡ˆ¦Ù " << 
¦Ù
);

2356 ià(
	gšÃr
->
isfuÎ
())

2358 
¥l™_šÃr_node
(
šÃr
, 
¥l™key
, 
¥l™node
, 
¦Ù
);

2360 
BTREE_PRINT
("bŒ“::š£¹_desûnd dÚ¥l™_šÃr:…ut¦Ù: " << 
¦Ù
 << "…utkey: " << 
Ãwkey
 << " upkey: " << *
¥l™key
);

2362 #ifdeà
BTREE_DEBUG


2363 ià(
	gdebug
)

2365 
´št_node
(
¡d
::
cout
, 
šÃr
);

2366 
´št_node
(
¡d
::
cout
, *
¥l™node
);

2371 
BTREE_PRINT
("bŒ“::š£¹_desûnd sw™ch: " << 
¦Ù
 << " > " << 
šÃr
->
¦Ùu£
 + 1);

2373 ià(
	g¦Ù
 =ğ
šÃr
->
¦Ùu£
 + 1 && iÂ”->¦Ùu£ < (*
¥l™node
)->slotuse)

2379 
BTREE_ASSERT
(
šÃr
->
¦Ùu£
 + 1 < 
šÃr¦Ùmax
);

2381 
šÃr_node
* 
	g¥l™šÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(*
¥l™node
);

2384 
	gšÃr
->
	g¦Ùkey
[
šÃr
->
¦Ùu£
] = *
¥l™key
;

2385 
	gšÃr
->
	gchdid
[
šÃr
->
¦Ùu£
 + 1] = 
¥l™šÃr
->
chdid
[0];

2386 
	gšÃr
->
	g¦Ùu£
++;

2389 
	g¥l™šÃr
->
	gchdid
[0] = 
Ãwchd
;

2390 *
	g¥l™key
 = 
Ãwkey
;

2392  
	gr
;

2394 ià(
	g¦Ù
 >ğ
šÃr
->
¦Ùu£
 + 1)

2399 
¦Ù
 -ğ
šÃr
->
¦Ùu£
 + 1;

2400 
	gšÃr
 = 
¡©ic_ÿ¡
<
šÃr_node
*>(*
¥l™node
);

2401 
BTREE_PRINT
("bŒ“::š£¹_desûnd sw™chšgØ¥l™‹d‚od" << 
šÃr
 << " slÙ " << 
¦Ù
);

2406 
BTREE_ASSERT
(
¦Ù
 >ğ0 && slÙ <ğ
šÃr
->
¦Ùu£
);

2408 
	g¡d
::
cİy_backw¬d
(
šÃr
->
¦Ùkey
 + 
¦Ù
, iÂ”->¦Ùkey + iÂ”->
¦Ùu£
,

2409 
šÃr
->
¦Ùkey
 + iÂ”->
¦Ùu£
 + 1);

2410 
	g¡d
::
cİy_backw¬d
(
šÃr
->
chdid
 + 
¦Ù
, iÂ”->chdid + iÂ”->
¦Ùu£
 + 1,

2411 
šÃr
->
chdid
 + iÂ”->
¦Ùu£
 + 2);

2413 
	gšÃr
->
	g¦Ùkey
[
¦Ù
] = 
Ãwkey
;

2414 
	gšÃr
->
	gchdid
[
¦Ù
 + 1] = 
Ãwchd
;

2415 
	gšÃr
->
	g¦Ùu£
++;

2418  
	gr
;

2422 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
n
);

2423 
	gÜig_¦Ùu£d
 = 
Ëaf
->
couÁ
();

2424 
	g¦Ù
 = 
Ëaf_fšd_low”
(
Ëaf
, 
key
);

2426 ià(!
	g®low_du¶iÿ‹s
 && 
	g¦Ù
 < 
	gÜig_¦Ùu£d
 && 
key_equ®
(
key
, 
Ëaf
->
¦Ùkey
[
¦Ù
])) {

2427  
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
>(™”©Ü(
Ëaf
, 
¦Ù
), 
	gçl£
);

2430 ià(
	gËaf
->
isfuÎ
())

2432 
¥l™_Ëaf_node
(
Ëaf
, 
¥l™key
, 
¥l™node
);

2435 
	gÜig_¦Ùu£d
 = 
Ëaf
->
couÁ
();

2436 ià(
	g¦Ù
 >ğ
Üig_¦Ùu£d
)

2438 
¦Ù
 -ğ
Üig_¦Ùu£d
;

2439 
	gËaf
 = 
¡©ic_ÿ¡
<
Ëaf_node
*>(*
¥l™node
);

2445 
BTREE_ASSERT
(
¦Ù
 >ğ0 && slÙ <ğ
Üig_¦Ùu£d
);

2447 
	gËaf
->
	g¦Ùkey
[
¦Ù
] = 
key
;

2448 ià(!
	gu£d_as_£t
)

2449 
	gËaf
->
	g¦Ùd©a
[
¦Ù
] = 
v®ue
;

2451 
nv_æush
((*)(
Ëaf
->
¦Ùkey
+
¦Ù
), (
key_ty³
));

2452 ià(!
	gu£d_as_£t
)

2453 
nv_æush
((*)(
Ëaf
->
¦Ùd©a
+
¦Ù
), (
d©a_ty³
));

2455 
	gËaf
->
b™m­_£t
(
¦Ù
);

2456 
nv_æush
((*)
Ëaf
->
bs
, 
BITS_TO_LONGS
(
Ëaf¦Ùmax
));

2459 ià(
	g¥l™node
 && 
	gËaf
 !ğ*
¥l™node
 && 
¦Ù
 =ğ
Üig_¦Ùu£d
 - 1)

2464 *
¥l™key
 = 
key
;

2467  
	g¡d
::
·œ
<
™”©Ü
, 
	gboŞ
>(™”©Ü(
Ëaf
, 
¦Ù
), 
	gŒue
);

2471 
¥l™_Ëaf_node_Üg
(
Ëaf_node
* 
Ëaf
, 
key_ty³
* 
_Ãwkey
, 
node
** 
_ÃwËaf
)

2473 
BTREE_ASSERT
(
Ëaf
->
isfuÎ
());

2475 
	gmid
 = (
Ëaf
->
¦Ùu£
 >> 1);

2477 
BTREE_PRINT
("bŒ“::¥l™_Ëaf_nodÚ " << 
Ëaf
);

2480 
Ëaf_node
* 
	gÃwËaf
 = 
®loÿ‹_Ëaf
();

2482 
	gÃwËaf
->
	g¦Ùu£
 = 
Ëaf
->
¦Ùu£
 - 
mid
;

2484 
	gÃwËaf
->
	gÃx—f
 = 
Ëaf
->
Ãx—f
;

2485 ià(
	gÃwËaf
->
	gÃx—f
 =ğ
NULL
) {

2486 
BTREE_ASSERT
(
Ëaf
 =ğ
m_Ëaf
);

2487 
	gm_Ëaf
 = 
ÃwËaf
;

2490 
	gÃwËaf
->
	gÃx—f
->
	g´evËaf
 = 
ÃwËaf
;

2493 
Ëaf_node
 *
	gshadow_Ëaf
 = 
®loÿ‹_Ëaf
();

2494 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
,†—f->¦Ùkey +†—f->
¦Ùu£
,

2495 
shadow_Ëaf
->
¦Ùkey
);

2496 
d©a_cİy
(
Ëaf
->
¦Ùd©a
,†—f->¦Ùd©¨+†—f->
¦Ùu£
,

2497 
shadow_Ëaf
->
¦Ùd©a
);

2498 
d©a_cİy
(
Ëaf
->
bs
,†—f->b +†—f->
¦Ùu£
,

2499 
shadow_Ëaf
->
bs
);

2500 
nv_æush
((*)
shadow_Ëaf
, (
Ëaf_node
));

2501 
	gnvnode_couÁ
++;

2505 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
 + 
mid
,†—f->¦Ùkey +†—f->
¦Ùu£
,

2506 
ÃwËaf
->
¦Ùkey
);

2507 
d©a_cİy
(
Ëaf
->
¦Ùd©a
 + 
mid
,†—f->¦Ùd©¨+†—f->
¦Ùu£
,

2508 
ÃwËaf
->
¦Ùd©a
);

2509 
	g¡d
::
cİy
(
Ëaf
->
bs
 + 
mid
,†—f->b +†—f->
¦Ùu£
,

2510 
ÃwËaf
->
bs
);

2512 
	gËaf
->
	g¦Ùu£
 = 
mid
;

2513 
	gËaf
->
	gÃx—f
 = 
ÃwËaf
;

2514 
	gÃwËaf
->
	g´evËaf
 = 
Ëaf
;

2516 *
	g_Ãwkey
 = 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1];

2517 *
	g_ÃwËaf
 = 
ÃwËaf
;

2519 
nv_æush
((*)
ÃwËaf
, (
Ëaf_node
));

2520 
	gnvnode_couÁ
++;

2521 
nv_æush
((*)
Ëaf
, (
Ëaf_node
));

2522 
	gnvnode_couÁ
++;

2523 
nv_ä“
(
vmp
, (*)
shadow_Ëaf
);

2528 
¥l™_Ëaf_node
(
Ëaf_node
* 
Ëaf
, 
key_ty³
* 
_Ãwkey
, 
node
** 
_ÃwËaf
)

2530 
BTREE_ASSERT
(
Ëaf
->
isfuÎ
());

2532 
	gÜig_¦Ùu£d
 = 
Ëaf
->
couÁ
();

2533 
	gmid
 = (
Üig_¦Ùu£d
 >> 1);

2534 
	g¡d
::
veùÜ
<
·œ
<, > >
	gvec
;

2536 
	gi
 = 0; i < 
	gÜig_¦Ùu£d
; i++) {

2537 
	gvec
.
push_back
(
¡d
::
make_·œ
<, >(
Ëaf
->
¦Ùkey
[
i
], i));

2539 
sÜt
(
vec
.
begš
(), vec.
’d
());

2541 
BTREE_PRINT
("bŒ“::¥l™_Ëaf_nodÚ " << 
Ëaf
);

2544 
Ëaf_node
* 
	gÃwËaf
 = 
®loÿ‹_Ëaf
();

2545 
	gÃw_¦Ùu£d
 = 
Üig_¦Ùu£d
 - 
mid
;

2547 
	gÃwËaf
->
	gÃx—f
 = 
Ëaf
->
Ãx—f
;

2548 ià(
	gÃwËaf
->
	gÃx—f
 =ğ
NULL
) {

2549 
BTREE_ASSERT
(
Ëaf
 =ğ
m_Ëaf
);

2550 
	gm_Ëaf
 = 
ÃwËaf
;

2553 
	gÃwËaf
->
	gÃx—f
->
	g´evËaf
 = 
ÃwËaf
;

2556 
Ëaf_node
 *
	gshadow_Ëaf
 = 
®loÿ‹_Ëaf
();

2557 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
,†—f->¦Ùkey + 
Üig_¦Ùu£d
,

2558 
shadow_Ëaf
->
¦Ùkey
);

2559 
d©a_cİy
(
Ëaf
->
¦Ùd©a
,†—f->¦Ùd©¨+ 
Üig_¦Ùu£d
,

2560 
shadow_Ëaf
->
¦Ùd©a
);

2561 
	g¡d
::
cİy
(
Ëaf
->
bs
,†—f->b + 
BITS_TO_LONGS
(
Ëaf¦Ùmax
è* (), 
shadow_Ëaf
->bs);

2562 
nv_æush
((*)
shadow_Ëaf
, (
Ëaf_node
));

2567 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
 + 
mid
,†—f->¦Ùkey +†—f->
¦Ùu£
,

2568 
ÃwËaf
->
¦Ùkey
);

2569 
d©a_cİy
(
Ëaf
->
¦Ùd©a
 + 
mid
,†—f->¦Ùd©¨+†—f->
¦Ùu£
,

2570 
ÃwËaf
->
¦Ùd©a
);

2572 
	g¡d
::
veùÜ
<
·œ
<, > >::
™”©Ü
 
™
;

2573 
	gËaf_šdex
 = 0, 
	gÃwËaf_šdex
 = 0;

2574 
	gcouÁ
 = 0;

2575 
	g™
 = 
vec
.
begš
(); iˆ!ğvec.
’d
(); ++™, ++
	gcouÁ
) {

2576 if(
	gcouÁ
 < 
	gmid
) {

2577 
	gËaf
->
	g¦Ùkey
[
Ëaf_šdex
] = 
shadow_Ëaf
->
¦Ùkey
[
™
->
£cÚd
];

2578 
	gËaf
->
	g¦Ùd©a
[
Ëaf_šdex
] = 
shadow_Ëaf
->
¦Ùd©a
[
™
->
£cÚd
];

2579 
	gËaf
->
b™m­_£t
(
Ëaf_šdex
);

2580 
	gËaf_šdex
++;

2582 
	gÃwËaf
->
	g¦Ùkey
[
ÃwËaf_šdex
] = 
shadow_Ëaf
->
¦Ùkey
[
™
->
£cÚd
];

2583 
	gÃwËaf
->
	g¦Ùd©a
[
ÃwËaf_šdex
] = 
shadow_Ëaf
->
¦Ùd©a
[
™
->
£cÚd
];

2584 
	gÃwËaf
->
b™m­_£t
(
ÃwËaf_šdex
);

2585 
	gÃwËaf_šdex
++;

2588 
	gi
 = 
mid
; i < 
	gÜig_¦Ùu£d
; i++) {

2589 
	gËaf
->
b™m­_ş—r
(
i
);

2592 
	gËaf
->
	gÃx—f
 = 
ÃwËaf
;

2593 
	gÃwËaf
->
	g´evËaf
 = 
Ëaf
;

2595 *
	g_Ãwkey
 = 
Ëaf
->
¦Ùkey
[Ëaf->
couÁ
() - 1];

2596 *
	g_ÃwËaf
 = 
ÃwËaf
;

2598 
nv_æush
((*)
ÃwËaf
, (
Ëaf_node
));

2600 
nv_æush
((*)
Ëaf
, (
Ëaf_node
));

2602 
nv_ä“
(
vmp
, (*)
shadow_Ëaf
);

2609 
¥l™_šÃr_node
(
šÃr_node
* 
šÃr
, 
key_ty³
* 
_Ãwkey
, 
node
** 
_ÃwšÃr
, 
add¦Ù
)

2611 
BTREE_ASSERT
(
šÃr
->
isfuÎ
());

2613 
	gmid
 = (
šÃr
->
¦Ùu£
 >> 1);

2615 
BTREE_PRINT
("bŒ“::¥l™_šÃr: mid " << 
mid
 << "‡dd¦Ù " << 
add¦Ù
);

2619 ià(
	gadd¦Ù
 <ğ
mid
 && mid > 
šÃr
->
¦Ùu£
 - (mid + 1))

2620 
mid
--;

2622 
BTREE_PRINT
("bŒ“::¥l™_šÃr: mid " << 
mid
 << "‡dd¦Ù " << 
add¦Ù
);

2624 
BTREE_PRINT
("bŒ“::¥l™_šÃr_nodÚ " << 
šÃr
 << " iÁØtwØnode " << 
mid
 << "‡nd " << iÂ”->
¦Ùu£
 - (mid + 1) << " sized");

2626 
šÃr_node
* 
	gÃwšÃr
 = 
®loÿ‹_šÃr
(
šÃr
->
Ëv–
);

2628 
	gÃwšÃr
->
	g¦Ùu£
 = 
šÃr
->
¦Ùu£
 - (
mid
 + 1);

2630 
	g¡d
::
cİy
(
šÃr
->
¦Ùkey
 + 
mid
 + 1, iÂ”->¦Ùkey + iÂ”->
¦Ùu£
,

2631 
ÃwšÃr
->
¦Ùkey
);

2632 
	g¡d
::
cİy
(
šÃr
->
chdid
 + 
mid
 + 1, iÂ”->chdid + iÂ”->
¦Ùu£
 + 1,

2633 
ÃwšÃr
->
chdid
);

2635 
	gšÃr
->
	g¦Ùu£
 = 
mid
;

2637 *
	g_Ãwkey
 = 
šÃr
->
¦Ùkey
[
mid
];

2638 *
	g_ÃwšÃr
 = 
ÃwšÃr
;

2641 
	gpublic
:

2646 
‹m¶©e
 <
ty³Çme
 
I‹¿tÜ
>

2647 
bulk_lßd
(
I‹¿tÜ
 
ibegš
, I‹¿tÜ 
›nd
)

2649 
BTREE_ASSERT
(
em±y
());

2651 
	gm_¡©s
.
	g™emcouÁ
 = 
›nd
 - 
ibegš
;

2654 
size_t
 
	gnum_™ems
 = 
›nd
 - 
ibegš
;

2655 
size_t
 
	gnum_Ëaves
 = (
num_™ems
 + 
Ëaf¦Ùmax
 - 1) /†eafslotmax;

2657 
BTREE_PRINT
("bŒ“::bulk_lßd,†ev– 0: " << 
m_¡©s
.
™emcouÁ
 << " i‹m štØ" << 
num_Ëaves
 << "†—ve w™h u°tØ" << ((
›nd
 - 
ibegš
 +‚um_leaves - 1) /‚um_leaves) << " items…er†eaf.");

2659 
I‹¿tÜ
 
	g™
 = 
ibegš
;

2660 
size_t
 
	gi
 = 0; i < 
	gnum_Ëaves
; ++i)

2663 
Ëaf_node
* 
	gËaf
 = 
®loÿ‹_Ëaf
();

2667 
	gËaf
->
	g¦Ùu£
 = 
¡©ic_ÿ¡
<>(
num_™ems
 / (
num_Ëaves
 - 
i
));

2668 
size_t
 
	gs
 = 0; s < 
	gËaf
->
	g¦Ùu£
; ++s, ++
	g™
)

2669 
	gËaf
->
£t_¦Ù
(
s
, *
™
);

2671 ià(
	gm_Ëaf
 !ğ
NULL
) {

2672 
m_Ëaf
->
Ãx—f
 = 
Ëaf
;

2673 
	gËaf
->
	g´evËaf
 = 
m_Ëaf
;

2676 
	gm_h—dËaf
 = 
Ëaf
;

2678 
	gm_Ëaf
 = 
Ëaf
;

2680 
	gnum_™ems
 -ğ
Ëaf
->
¦Ùu£
;

2683 
BTREE_ASSERT
(
™
 =ğ
›nd
 && 
num_™ems
 == 0);

2686 ià(
	gm_h—dËaf
 =ğ
m_Ëaf
) {

2687 
m_roÙ
 = 
m_h—dËaf
;

2691 
BTREE_ASSERT
(
m_¡©s
.
Ëaves
 =ğ
num_Ëaves
);

2694 
size_t
 
	gnum_·»Ás
 = (
num_Ëaves
 + (
šÃr¦Ùmax
 + 1) - 1) / (innerslotmax + 1);

2696 
BTREE_PRINT
("bŒ“::bulk_lßd,†ev– 1: " << 
num_Ëaves
 << "†—ve š " << 
num_·»Ás
 << " inner‚odes with upo " << ((num_leaves +‚um_parents - 1) /‚um_parents) << "†eaves…er inner‚ode.");

2699 
	g¡d
::
	t·œ
<
	tšÃr_node
*, cÚ¡ 
	tkey_ty³
*> 
	tÃxev–_ty³
;

2700 
Ãxev–_ty³
* 
	gÃxev–
 = 
Ãw
‚exev–_ty³[
num_·»Ás
];

2702 
Ëaf_node
* 
	gËaf
 = 
m_h—dËaf
;

2703 
size_t
 
	gi
 = 0; i < 
	gnum_·»Ás
; ++i)

2706 
šÃr_node
* 
	gn
 = 
®loÿ‹_šÃr
(1);

2708 
	gn
->
	g¦Ùu£
 = 
¡©ic_ÿ¡
<>(
num_Ëaves
 / (
num_·»Ás
 - 
i
));

2709 
BTREE_ASSERT
(
n
->
¦Ùu£
 > 0);

2710 --
	gn
->
	g¦Ùu£
;

2713 
	gs
 = 0; s < 
	gn
->
	g¦Ùu£
; ++s)

2715 
	gn
->
	g¦Ùkey
[
s
] = 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1];

2716 
	gn
->
	gchdid
[
s
] = 
Ëaf
;

2717 
	gËaf
 = 
Ëaf
->
Ãx—f
;

2719 
	gn
->
	gchdid
[
n
->
¦Ùu£
] = 
Ëaf
;

2722 
	gÃxev–
[
i
].
	gfœ¡
 = 
n
;

2723 
	gÃxev–
[
i
].
	g£cÚd
 = &
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1];

2725 
	gËaf
 = 
Ëaf
->
Ãx—f
;

2726 
	gnum_Ëaves
 -ğ
n
->
¦Ùu£
 + 1;

2729 
BTREE_ASSERT
(
Ëaf
 =ğ
NULL
 && 
num_Ëaves
 == 0);

2732 
	gËv–
 = 2; 
	gnum_·»Ás
 != 1; ++level)

2734 
size_t
 
	gnum_chd»n
 = 
num_·»Ás
;

2735 
	gnum_·»Ás
 = (
num_chd»n
 + (
šÃr¦Ùmax
 + 1) - 1) / (innerslotmax + 1);

2737 
BTREE_PRINT
("bŒ“::bulk_lßd,†ev– " << 
Ëv–
 << ": " << 
num_chd»n
 << " chd»Àš " << 
num_·»Ás
 << " inner‚odes with upo " << ((num_children +‚um_parents - 1) /‚um_parents) << " children…er inner‚ode.");

2739 
size_t
 
	gšÃr_šdex
 = 0;

2740 
size_t
 
	gi
 = 0; i < 
	gnum_·»Ás
; ++i)

2743 
šÃr_node
* 
	gn
 = 
®loÿ‹_šÃr
(
Ëv–
);

2745 
	gn
->
	g¦Ùu£
 = 
¡©ic_ÿ¡
<>(
num_chd»n
 / (
num_·»Ás
 - 
i
));

2746 
BTREE_ASSERT
(
n
->
¦Ùu£
 > 0);

2747 --
	gn
->
	g¦Ùu£
;

2750 
	gs
 = 0; s < 
	gn
->
	g¦Ùu£
; ++s)

2752 
	gn
->
	g¦Ùkey
[
s
] = *
Ãxev–
[
šÃr_šdex
].
£cÚd
;

2753 
	gn
->
	gchdid
[
s
] = 
Ãxev–
[
šÃr_šdex
].
fœ¡
;

2754 ++
	gšÃr_šdex
;

2756 
	gn
->
	gchdid
[
n
->
¦Ùu£
] = 
Ãxev–
[
šÃr_šdex
].
fœ¡
;

2760 
	gÃxev–
[
i
].
	gfœ¡
 = 
n
;

2761 
	gÃxev–
[
i
].
	g£cÚd
 = 
Ãxev–
[
šÃr_šdex
].
£cÚd
;

2763 ++
	gšÃr_šdex
;

2764 
	gnum_chd»n
 -ğ
n
->
¦Ùu£
 + 1;

2767 
BTREE_ASSERT
(
num_chd»n
 == 0);

2770 
	gm_roÙ
 = 
Ãxev–
[0].
fœ¡
;

2771 
	gd–‘e
[] 
	gÃxev–
;

2773 ià(
	g£lfv”ify
è
v”ify
();

2776 
	g´iv©e
:

2780 
	e»suÉ_æags_t


2783 
bŒ“_ok
 = 0,

2786 
	gbŒ“_nÙ_found
 = 1,

2790 
	gbŒ“_upd©e_Ï¡key
 = 2,

2794 
	gbŒ“_fixm”ge
 = 4

2799 
	s»suÉ_t


2802 
»suÉ_æags_t
 
	gæags
;

2805 
key_ty³
 
	gÏ¡key
;

2809 
šlše
 
ex¶ic™
 
»suÉ_t
(
»suÉ_æags_t
 
f
 = 
bŒ“_ok
)

2810 : 
æags
(
f
), 
Ï¡key
()

2814 
šlše
 
»suÉ_t
(
»suÉ_æags_t
 
f
, cÚ¡ 
key_ty³
& 
k
)

2815 : 
æags
(
f
), 
Ï¡key
(
k
)

2819 
šlše
 
boŞ
 
has
(
»suÉ_æags_t
 
f
) const

2821  (
	gæags
 & 
	gf
) != 0;

2825 
šlše
 
	g»suÉ_t
& 
	gİ”©Ü
 |ğ(cÚ¡ 
»suÉ_t
& 
Ùh”
)

2827 
æags
 = 
»suÉ_æags_t
(æag | 
Ùh”
.flags);

2830 ià(
	gÙh”
.
has
(
bŒ“_upd©e_Ï¡key
))

2831 
	gÏ¡key
 = 
Ùh”
.
Ï¡key
;

2833  *
	gthis
;

2837 
	gpublic
:

2842 
boŞ
 
”a£_Úe
(cÚ¡ 
key_ty³
& 
key
)

2844 
BTREE_PRINT
("bŒ“::”a£_Úe(" << 
key
 << "èÚ bŒ“ siz" << 
size
());

2846 ià(
	g£lfv”ify
è
v”ify
();

2848 ià(!
	gm_roÙ
è 
	gçl£
;

2850 
»suÉ_t
 
	g»suÉ
 = 
”a£_Úe_desûnd
(
key
, 
m_roÙ
, 
NULL
, NULL, NULL, NULL, NULL, 0);

2852 ià(!
	g»suÉ
.
has
(
bŒ“_nÙ_found
))

2853 --
	gm_¡©s
.
	g™emcouÁ
;

2855 #ifdeà
BTREE_DEBUG


2856 ià(
	gdebug
è
´št
(
¡d
::
cout
);

2858 ià(
	g£lfv”ify
è
v”ify
();

2860  !
	g»suÉ
.
has
(
bŒ“_nÙ_found
);

2865 
size_ty³
 
”a£
(cÚ¡ 
key_ty³
& 
key
)

2867 
size_ty³
 
	gc
 = 0;

2869 
”a£_Úe
(
key
))

2871 ++
	gc
;

2872 ià(!
	g®low_du¶iÿ‹s
) ;

2875  
	gc
;

2879 
”a£
(
™”©Ü
 
™”
)

2881 
BTREE_PRINT
("bŒ“::”a£_™”(" << 
™”
.
cu¼node
 << "," << i‹r.
cu¼¦Ù
 << "èÚ bŒ“ siz" << 
size
());

2883 ià(
	g£lfv”ify
è
v”ify
();

2885 ià(!
	gm_roÙ
) ;

2887 
»suÉ_t
 
	g»suÉ
 = 
”a£_™”_desûnd
(
™”
, 
m_roÙ
, 
NULL
, NULL, NULL, NULL, NULL, 0);

2889 ià(!
	g»suÉ
.
has
(
bŒ“_nÙ_found
))

2890 --
	gm_¡©s
.
	g™emcouÁ
;

2892 #ifdeà
BTREE_DEBUG


2893 ià(
	gdebug
è
´št
(
¡d
::
cout
);

2895 ià(
	g£lfv”ify
è
v”ify
();

2898 #ifdeà
BTREE_TODO


2901 
”a£
(
™”©Ü
 , iterator )

2903 
abÜt
();

2907 
	g´iv©e
:

2919 
»suÉ_t
 
”a£_Úe_desûnd
(cÚ¡ 
key_ty³
& 
key
,

2920 
node
* 
cu¼
,

2921 
node
* 
Ëá
,‚ode* 
right
,

2922 
šÃr_node
* 
Ëá·»Á
, iÂ”_node* 
righ¬’t
,

2923 
šÃr_node
* 
·»Á
, 
·»Á¦Ù
)

2925 ià(
	gcu¼
->
i¦—âode
())

2927 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
cu¼
);

2928 
Ëaf_node
* 
	gËáËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
Ëá
);

2929 
Ëaf_node
* 
	grigh—f
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
right
);

2931 
	g¦Ù
 = 
fšd_low”
(
Ëaf
, 
key
);

2933 ià(
	g¦Ù
 >ğ
Ëaf
->
¦Ùu£
 || !
key_equ®
(
key
,†—f->
¦Ùkey
[
¦Ù
]))

2935 
BTREE_PRINT
("Could‚Ù fšd key " << 
key
 << "oƒrase.");

2937  
»suÉ_t
(
bŒ“_nÙ_found
);

2940 
BTREE_PRINT
("Found key iÀËaà" << 
cu¼
 << "‡ˆ¦Ù " << 
¦Ù
);

2942 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
 + 
¦Ù
 + 1,†—f->¦Ùkey +†—f->
¦Ùu£
,

2943 
Ëaf
->
¦Ùkey
 + 
¦Ù
);

2944 
d©a_cİy
(
Ëaf
->
¦Ùd©a
 + 
¦Ù
 + 1,†—f->¦Ùd©¨+†—f->
¦Ùu£
,

2945 
Ëaf
->
¦Ùd©a
 + 
¦Ù
);

2947 
	gËaf
->
	g¦Ùu£
--;

2949 
»suÉ_t
 
	gmy»s
 =„esuÉ_t(
bŒ“_ok
);

2953 ià(
	g¦Ù
 =ğ
Ëaf
->
¦Ùu£
)

2955 ià(
·»Á
 && 
·»Á¦Ù
 <…¬’t->
¦Ùu£
)

2957 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
cu¼
);

2958 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1];

2962 ià(
	gËaf
->
	g¦Ùu£
 >= 1)

2964 
BTREE_PRINT
("Schedulšg†a¡keyupd©e: key " << 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1]);

2965 
	gmy»s
 |ğ
»suÉ_t
(
bŒ“_upd©e_Ï¡key
, 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1]);

2969 
BTREE_ASSERT
(
Ëaf
 =ğ
m_roÙ
);

2974 ià(
	gËaf
->
isund”æow
(è&& !Ö—à=ğ
m_roÙ
 && 
Ëaf
->
¦Ùu£
 >= 1))

2980 ià(
ËáËaf
 =ğ
NULL
 && 
righ—f
 == NULL)

2982 
BTREE_ASSERT
(
Ëaf
 =ğ
m_roÙ
);

2983 
BTREE_ASSERT
(
Ëaf
->
¦Ùu£
 == 0);

2985 
ä“_node
(
m_roÙ
);

2987 
	gm_roÙ
 = 
Ëaf
 = 
NULL
;

2988 
	gm_h—dËaf
 = 
m_Ëaf
 = 
NULL
;

2991 
BTREE_ASSERT
(
m_¡©s
.
™emcouÁ
 == 1);

2992 
BTREE_ASSERT
(
m_¡©s
.
Ëaves
 == 0);

2993 
BTREE_ASSERT
(
m_¡©s
.
šÃºodes
 == 0);

2995  
»suÉ_t
(
bŒ“_ok
);

3000 ià((
	gËáËaf
 =ğ
NULL
 || 
ËáËaf
->
isãw
()è&& (
righ—f
 == NULL ||„ightleaf->isfew()))

3002 ià(
Ëá·»Á
 =ğ
·»Á
)

3003 
my»s
 |ğ
m”ge_Ëaves
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
);

3005 
	gmy»s
 |ğ
m”ge_Ëaves
(
Ëaf
, 
righ—f
, 
righ¬’t
);

3008 ià((
	gËáËaf
 !ğ
NULL
 && 
ËáËaf
->
isãw
()è&& (
righ—f
 != NULL && !rightleaf->isfew()))

3010 ià(
righ¬’t
 =ğ
·»Á
)

3011 
my»s
 |ğ
shiá_Ëá_Ëaf
(
Ëaf
, 
righ—f
, 
righ¬’t
, 
·»Á¦Ù
);

3013 
	gmy»s
 |ğ
m”ge_Ëaves
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
);

3016 ià((
	gËáËaf
 !ğ
NULL
 && !
ËáËaf
->
isãw
()è&& (
righ—f
 != NULL &&„ightleaf->isfew()))

3018 ià(
Ëá·»Á
 =ğ
·»Á
)

3019 
shiá_right_Ëaf
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3021 
	gmy»s
 |ğ
m”ge_Ëaves
(
Ëaf
, 
righ—f
, 
righ¬’t
);

3025 ià(
	gËá·»Á
 =ğ
righ¬’t
)

3027 ià(
ËáËaf
->
¦Ùu£
 <ğ
righ—f
->slotuse)

3028 
my»s
 |ğ
shiá_Ëá_Ëaf
(
Ëaf
, 
righ—f
, 
righ¬’t
, 
·»Á¦Ù
);

3030 
shiá_right_Ëaf
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3034 ià(
	gËá·»Á
 =ğ
·»Á
)

3035 
shiá_right_Ëaf
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3037 
	gmy»s
 |ğ
shiá_Ëá_Ëaf
(
Ëaf
, 
righ—f
, 
righ¬’t
, 
·»Á¦Ù
);

3041  
»suÉ_t
(
my»s
);

3045 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
cu¼
);

3046 
šÃr_node
* 
	gËášÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
Ëá
);

3047 
šÃr_node
* 
	grightšÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
right
);

3049 
node
* 
	gmyËá
, * 
	gmyright
;

3050 
šÃr_node
* 
	gmyËá·»Á
, * 
	gmyrigh¬’t
;

3052 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
key
);

3054 ià(
	g¦Ù
 == 0) {

3055 
myËá
 = (
Ëá
 =ğ
NULL
è? NULL : (
¡©ic_ÿ¡
<
šÃr_node
*>Öeá))->
chdid
[Ëá->
¦Ùu£
 - 1];

3056 
	gmyËá·»Á
 = 
Ëá·»Á
;

3059 
	gmyËá
 = 
šÃr
->
chdid
[
¦Ù
 - 1];

3060 
	gmyËá·»Á
 = 
šÃr
;

3063 ià(
	g¦Ù
 =ğ
šÃr
->
¦Ùu£
) {

3064 
myright
 = (
right
 =ğ
NULL
è? NULL : (
¡©ic_ÿ¡
<
šÃr_node
*>Ôight))->
chdid
[0];

3065 
	gmyrigh¬’t
 = 
righ¬’t
;

3068 
	gmyright
 = 
šÃr
->
chdid
[
¦Ù
 + 1];

3069 
	gmyrigh¬’t
 = 
šÃr
;

3072 
BTREE_PRINT
("”a£_Úe_desûnd iÁØ" << 
šÃr
->
chdid
[
¦Ù
]);

3074 
»suÉ_t
 
	g»suÉ
 = 
”a£_Úe_desûnd
(
key
,

3075 
šÃr
->
chdid
[
¦Ù
],

3076 
myËá
, 
myright
,

3077 
myËá·»Á
, 
myrigh¬’t
,

3078 
šÃr
, 
¦Ù
);

3080 
»suÉ_t
 
	gmy»s
 =„esuÉ_t(
bŒ“_ok
);

3082 ià(
	g»suÉ
.
has
(
bŒ“_nÙ_found
))

3084  
»suÉ_t
(
»suÉ
);

3087 ià(
	g»suÉ
.
has
(
bŒ“_upd©e_Ï¡key
))

3089 ià(
	g·»Á
 && 
	g·»Á¦Ù
 <…¬’t->
	g¦Ùu£
)

3091 
BTREE_PRINT
("Fixšg†a¡keyupd©e: key " << 
»suÉ
.
Ï¡key
 << " iÁØ·»Á " << 
·»Á
 << "‡ˆ·»Á¦Ù " << 
·»Á¦Ù
);

3093 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
cu¼
);

3094 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
»suÉ
.
Ï¡key
;

3098 
BTREE_PRINT
("FÜw¬dšg†a¡keyupd©e: key " << 
»suÉ
.
Ï¡key
);

3099 
	gmy»s
 |ğ
»suÉ_t
(
bŒ“_upd©e_Ï¡key
, 
»suÉ
.
Ï¡key
);

3103 ià(
	g»suÉ
.
has
(
bŒ“_fixm”ge
))

3106 ià(
	gšÃr
->
	gchdid
[
¦Ù
]->
	g¦Ùu£
 != 0)

3107 
¦Ù
++;

3110 
BTREE_ASSERT
(
šÃr
->
chdid
[
¦Ù
]->
¦Ùu£
 == 0);

3112 
ä“_node
(
šÃr
->
chdid
[
¦Ù
]);

3114 
	g¡d
::
cİy
(
šÃr
->
¦Ùkey
 + 
¦Ù
, iÂ”->¦Ùkey + iÂ”->
¦Ùu£
,

3115 
šÃr
->
¦Ùkey
 + 
¦Ù
 - 1);

3116 
	g¡d
::
cİy
(
šÃr
->
chdid
 + 
¦Ù
 + 1, iÂ”->chdid + iÂ”->
¦Ùu£
 + 1,

3117 
šÃr
->
chdid
 + 
¦Ù
);

3119 
	gšÃr
->
	g¦Ùu£
--;

3121 ià(
	gšÃr
->
	gËv–
 == 1)

3124 
¦Ù
--;

3125 
Ëaf_node
* 
	gchd
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
šÃr
->
chdid
[
¦Ù
]);

3126 
	gšÃr
->
	g¦Ùkey
[
¦Ù
] = 
chd
->
¦Ùkey
[chd->
¦Ùu£
 - 1];

3130 ià(
	gšÃr
->
isund”æow
(è&& !(šÃ¸=ğ
m_roÙ
 && 
šÃr
->
¦Ùu£
 >= 1))

3133 ià(
ËášÃr
 =ğ
NULL
 && 
rightšÃr
 == NULL)

3135 
BTREE_ASSERT
(
šÃr
 =ğ
m_roÙ
);

3136 
BTREE_ASSERT
(
šÃr
->
¦Ùu£
 == 0);

3138 
	gm_roÙ
 = 
šÃr
->
chdid
[0];

3140 
	gšÃr
->
	g¦Ùu£
 = 0;

3141 
ä“_node
(
šÃr
);

3143  
»suÉ_t
(
bŒ“_ok
);

3148 ià((
	gËášÃr
 =ğ
NULL
 || 
ËášÃr
->
isãw
()è&& (
rightšÃr
 == NULL ||„ightinner->isfew()))

3150 ià(
Ëá·»Á
 =ğ
·»Á
)

3151 
my»s
 |ğ
m”ge_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3153 
	gmy»s
 |ğ
m”ge_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3156 ià((
	gËášÃr
 !ğ
NULL
 && 
ËášÃr
->
isãw
()è&& (
rightšÃr
 != NULL && !rightinner->isfew()))

3158 ià(
righ¬’t
 =ğ
·»Á
)

3159 
shiá_Ëá_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3161 
	gmy»s
 |ğ
m”ge_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3164 ià((
	gËášÃr
 !ğ
NULL
 && !
ËášÃr
->
isãw
()è&& (
rightšÃr
 != NULL &&„ightinner->isfew()))

3166 ià(
Ëá·»Á
 =ğ
·»Á
)

3167 
shiá_right_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3169 
	gmy»s
 |ğ
m”ge_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3173 ià(
	gËá·»Á
 =ğ
righ¬’t
)

3175 ià(
ËášÃr
->
¦Ùu£
 <ğ
rightšÃr
->slotuse)

3176 
shiá_Ëá_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3178 
shiá_right_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3182 ià(
	gËá·»Á
 =ğ
·»Á
)

3183 
shiá_right_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3185 
shiá_Ëá_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3189  
»suÉ_t
(
my»s
);

3208 
»suÉ_t
 
”a£_™”_desûnd
(cÚ¡ 
™”©Ü
& 
™”
,

3209 
node
* 
cu¼
,

3210 
node
* 
Ëá
,‚ode* 
right
,

3211 
šÃr_node
* 
Ëá·»Á
, iÂ”_node* 
righ¬’t
,

3212 
šÃr_node
* 
·»Á
, 
·»Á¦Ù
)

3214 ià(
	gcu¼
->
i¦—âode
())

3216 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
cu¼
);

3217 
Ëaf_node
* 
	gËáËaf
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
Ëá
);

3218 
Ëaf_node
* 
	grigh—f
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
right
);

3222 ià(
	gËaf
 !ğ
™”
.
cu¼node
)

3224  
»suÉ_t
(
bŒ“_nÙ_found
);

3227 ià(
	g™”
.
	gcu¼¦Ù
 >ğ
Ëaf
->
¦Ùu£
)

3229 
BTREE_PRINT
("Could‚Ù fšd i‹¿tÜ (" << 
™”
.
cu¼node
 << "," << i‹r.
cu¼¦Ù
 << ")oƒrase. Invalid†eaf‚ode?");

3231  
»suÉ_t
(
bŒ“_nÙ_found
);

3234 
	g¦Ù
 = 
™”
.
cu¼¦Ù
;

3236 
BTREE_PRINT
("Found i‹¿tÜ iÀËaà" << 
cu¼
 << "‡ˆ¦Ù " << 
¦Ù
);

3238 
	g¡d
::
cİy
(
Ëaf
->
¦Ùkey
 + 
¦Ù
 + 1,†—f->¦Ùkey +†—f->
¦Ùu£
,

3239 
Ëaf
->
¦Ùkey
 + 
¦Ù
);

3240 
d©a_cİy
(
Ëaf
->
¦Ùd©a
 + 
¦Ù
 + 1,†—f->¦Ùd©¨+†—f->
¦Ùu£
,

3241 
Ëaf
->
¦Ùd©a
 + 
¦Ù
);

3243 
	gËaf
->
	g¦Ùu£
--;

3245 
»suÉ_t
 
	gmy»s
 =„esuÉ_t(
bŒ“_ok
);

3249 ià(
	g¦Ù
 =ğ
Ëaf
->
¦Ùu£
)

3251 ià(
·»Á
 && 
·»Á¦Ù
 <…¬’t->
¦Ùu£
)

3253 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
cu¼
);

3254 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1];

3258 ià(
	gËaf
->
	g¦Ùu£
 >= 1)

3260 
BTREE_PRINT
("Schedulšg†a¡keyupd©e: key " << 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1]);

3261 
	gmy»s
 |ğ
»suÉ_t
(
bŒ“_upd©e_Ï¡key
, 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1]);

3265 
BTREE_ASSERT
(
Ëaf
 =ğ
m_roÙ
);

3270 ià(
	gËaf
->
isund”æow
(è&& !Ö—à=ğ
m_roÙ
 && 
Ëaf
->
¦Ùu£
 >= 1))

3276 ià(
ËáËaf
 =ğ
NULL
 && 
righ—f
 == NULL)

3278 
BTREE_ASSERT
(
Ëaf
 =ğ
m_roÙ
);

3279 
BTREE_ASSERT
(
Ëaf
->
¦Ùu£
 == 0);

3281 
ä“_node
(
m_roÙ
);

3283 
	gm_roÙ
 = 
Ëaf
 = 
NULL
;

3284 
	gm_h—dËaf
 = 
m_Ëaf
 = 
NULL
;

3287 
BTREE_ASSERT
(
m_¡©s
.
™emcouÁ
 == 1);

3288 
BTREE_ASSERT
(
m_¡©s
.
Ëaves
 == 0);

3289 
BTREE_ASSERT
(
m_¡©s
.
šÃºodes
 == 0);

3291  
»suÉ_t
(
bŒ“_ok
);

3296 ià((
	gËáËaf
 =ğ
NULL
 || 
ËáËaf
->
isãw
()è&& (
righ—f
 == NULL ||„ightleaf->isfew()))

3298 ià(
Ëá·»Á
 =ğ
·»Á
)

3299 
my»s
 |ğ
m”ge_Ëaves
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
);

3301 
	gmy»s
 |ğ
m”ge_Ëaves
(
Ëaf
, 
righ—f
, 
righ¬’t
);

3304 ià((
	gËáËaf
 !ğ
NULL
 && 
ËáËaf
->
isãw
()è&& (
righ—f
 != NULL && !rightleaf->isfew()))

3306 ià(
righ¬’t
 =ğ
·»Á
)

3307 
my»s
 |ğ
shiá_Ëá_Ëaf
(
Ëaf
, 
righ—f
, 
righ¬’t
, 
·»Á¦Ù
);

3309 
	gmy»s
 |ğ
m”ge_Ëaves
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
);

3312 ià((
	gËáËaf
 !ğ
NULL
 && !
ËáËaf
->
isãw
()è&& (
righ—f
 != NULL &&„ightleaf->isfew()))

3314 ià(
Ëá·»Á
 =ğ
·»Á
)

3315 
shiá_right_Ëaf
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3317 
	gmy»s
 |ğ
m”ge_Ëaves
(
Ëaf
, 
righ—f
, 
righ¬’t
);

3321 ià(
	gËá·»Á
 =ğ
righ¬’t
)

3323 ià(
ËáËaf
->
¦Ùu£
 <ğ
righ—f
->slotuse)

3324 
my»s
 |ğ
shiá_Ëá_Ëaf
(
Ëaf
, 
righ—f
, 
righ¬’t
, 
·»Á¦Ù
);

3326 
shiá_right_Ëaf
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3330 ià(
	gËá·»Á
 =ğ
·»Á
)

3331 
shiá_right_Ëaf
(
ËáËaf
, 
Ëaf
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3333 
	gmy»s
 |ğ
shiá_Ëá_Ëaf
(
Ëaf
, 
righ—f
, 
righ¬’t
, 
·»Á¦Ù
);

3337  
	gmy»s
;

3341 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
cu¼
);

3342 
šÃr_node
* 
	gËášÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
Ëá
);

3343 
šÃr_node
* 
	grightšÃr
 = 
¡©ic_ÿ¡
<šÃr_node*>(
right
);

3348 
»suÉ_t
 
	g»suÉ
;

3349 
	g¦Ù
 = 
fšd_low”
(
šÃr
, 
™”
.
key
());

3351 
	g¦Ù
 <ğ
šÃr
->
¦Ùu£
)

3353 
node
* 
myËá
, * 
myright
;

3354 
šÃr_node
* 
	gmyËá·»Á
, * 
	gmyrigh¬’t
;

3356 ià(
	g¦Ù
 == 0) {

3357 
myËá
 = (
Ëá
 =ğ
NULL
è? NULL : (
¡©ic_ÿ¡
<
šÃr_node
*>Öeá))->
chdid
[Ëá->
¦Ùu£
 - 1];

3358 
	gmyËá·»Á
 = 
Ëá·»Á
;

3361 
	gmyËá
 = 
šÃr
->
chdid
[
¦Ù
 - 1];

3362 
	gmyËá·»Á
 = 
šÃr
;

3365 ià(
	g¦Ù
 =ğ
šÃr
->
¦Ùu£
) {

3366 
myright
 = (
right
 =ğ
NULL
è? NULL : (
¡©ic_ÿ¡
<
šÃr_node
*>Ôight))->
chdid
[0];

3367 
	gmyrigh¬’t
 = 
righ¬’t
;

3370 
	gmyright
 = 
šÃr
->
chdid
[
¦Ù
 + 1];

3371 
	gmyrigh¬’t
 = 
šÃr
;

3374 
BTREE_PRINT
("”a£_™”_desûnd iÁØ" << 
šÃr
->
chdid
[
¦Ù
]);

3376 
	g»suÉ
 = 
”a£_™”_desûnd
(
™”
,

3377 
šÃr
->
chdid
[
¦Ù
],

3378 
myËá
, 
myright
,

3379 
myËá·»Á
, 
myrigh¬’t
,

3380 
šÃr
, 
¦Ù
);

3382 ià(!
	g»suÉ
.
has
(
bŒ“_nÙ_found
))

3387 ià(
	g¦Ù
 < 
	gšÃr
->
	g¦Ùu£
 && 
key_Ëss
(
šÃr
->
¦Ùkey
[
¦Ù
], 
™”
.
key
()))

3388  
»suÉ_t
(
bŒ“_nÙ_found
);

3390 ++
	g¦Ù
;

3393 ià(
	g¦Ù
 > 
	gšÃr
->
	g¦Ùu£
)

3394  
»suÉ_t
(
bŒ“_nÙ_found
);

3396 
»suÉ_t
 
	gmy»s
 =„esuÉ_t(
bŒ“_ok
);

3398 ià(
	g»suÉ
.
has
(
bŒ“_upd©e_Ï¡key
))

3400 ià(
	g·»Á
 && 
	g·»Á¦Ù
 <…¬’t->
	g¦Ùu£
)

3402 
BTREE_PRINT
("Fixšg†a¡keyupd©e: key " << 
»suÉ
.
Ï¡key
 << " iÁØ·»Á " << 
·»Á
 << "‡ˆ·»Á¦Ù " << 
·»Á¦Ù
);

3404 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
cu¼
);

3405 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
»suÉ
.
Ï¡key
;

3409 
BTREE_PRINT
("FÜw¬dšg†a¡keyupd©e: key " << 
»suÉ
.
Ï¡key
);

3410 
	gmy»s
 |ğ
»suÉ_t
(
bŒ“_upd©e_Ï¡key
, 
»suÉ
.
Ï¡key
);

3414 ià(
	g»suÉ
.
has
(
bŒ“_fixm”ge
))

3417 ià(
	gšÃr
->
	gchdid
[
¦Ù
]->
	g¦Ùu£
 != 0)

3418 
¦Ù
++;

3421 
BTREE_ASSERT
(
šÃr
->
chdid
[
¦Ù
]->
¦Ùu£
 == 0);

3423 
ä“_node
(
šÃr
->
chdid
[
¦Ù
]);

3425 
	g¡d
::
cİy
(
šÃr
->
¦Ùkey
 + 
¦Ù
, iÂ”->¦Ùkey + iÂ”->
¦Ùu£
,

3426 
šÃr
->
¦Ùkey
 + 
¦Ù
 - 1);

3427 
	g¡d
::
cİy
(
šÃr
->
chdid
 + 
¦Ù
 + 1, iÂ”->chdid + iÂ”->
¦Ùu£
 + 1,

3428 
šÃr
->
chdid
 + 
¦Ù
);

3430 
	gšÃr
->
	g¦Ùu£
--;

3432 ià(
	gšÃr
->
	gËv–
 == 1)

3435 
¦Ù
--;

3436 
Ëaf_node
* 
	gchd
 = 
¡©ic_ÿ¡
<Ëaf_node*>(
šÃr
->
chdid
[
¦Ù
]);

3437 
	gšÃr
->
	g¦Ùkey
[
¦Ù
] = 
chd
->
¦Ùkey
[chd->
¦Ùu£
 - 1];

3441 ià(
	gšÃr
->
isund”æow
(è&& !(šÃ¸=ğ
m_roÙ
 && 
šÃr
->
¦Ùu£
 >= 1))

3445 ià(
ËášÃr
 =ğ
NULL
 && 
rightšÃr
 == NULL)

3447 
BTREE_ASSERT
(
šÃr
 =ğ
m_roÙ
);

3448 
BTREE_ASSERT
(
šÃr
->
¦Ùu£
 == 0);

3450 
	gm_roÙ
 = 
šÃr
->
chdid
[0];

3452 
	gšÃr
->
	g¦Ùu£
 = 0;

3453 
ä“_node
(
šÃr
);

3455  
»suÉ_t
(
bŒ“_ok
);

3460 ià((
	gËášÃr
 =ğ
NULL
 || 
ËášÃr
->
isãw
()è&& (
rightšÃr
 == NULL ||„ightinner->isfew()))

3462 ià(
Ëá·»Á
 =ğ
·»Á
)

3463 
my»s
 |ğ
m”ge_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3465 
	gmy»s
 |ğ
m”ge_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3468 ià((
	gËášÃr
 !ğ
NULL
 && 
ËášÃr
->
isãw
()è&& (
rightšÃr
 != NULL && !rightinner->isfew()))

3470 ià(
righ¬’t
 =ğ
·»Á
)

3471 
shiá_Ëá_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3473 
	gmy»s
 |ğ
m”ge_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3476 ià((
	gËášÃr
 !ğ
NULL
 && !
ËášÃr
->
isãw
()è&& (
rightšÃr
 != NULL &&„ightinner->isfew()))

3478 ià(
Ëá·»Á
 =ğ
·»Á
)

3479 
shiá_right_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3481 
	gmy»s
 |ğ
m”ge_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3485 ià(
	gËá·»Á
 =ğ
righ¬’t
)

3487 ià(
ËášÃr
->
¦Ùu£
 <ğ
rightšÃr
->slotuse)

3488 
shiá_Ëá_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3490 
shiá_right_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3494 ià(
	gËá·»Á
 =ğ
·»Á
)

3495 
shiá_right_šÃr
(
ËášÃr
, 
šÃr
, 
Ëá·»Á
, 
·»Á¦Ù
 - 1);

3497 
shiá_Ëá_šÃr
(
šÃr
, 
rightšÃr
, 
righ¬’t
, 
·»Á¦Ù
);

3501  
»suÉ_t
(
my»s
);

3508 
»suÉ_t
 
m”ge_Ëaves
(
Ëaf_node
* 
Ëá
,†—f_node* 
right
, 
šÃr_node
* 
·»Á
)

3510 
BTREE_PRINT
("M”gËaànode " << 
Ëá
 << "‡nd " << 
right
 << " w™h commÚ…¬’ˆ" << 
·»Á
 << ".");

3511 ()
	g·»Á
;

3513 
BTREE_ASSERT
(
Ëá
->
i¦—âode
(è&& 
right
->isleafnode());

3514 
BTREE_ASSERT
(
·»Á
->
Ëv–
 == 1);

3516 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 + 
right
->¦Ùu£ < 
Ëaf¦Ùmax
);

3518 
	g¡d
::
cİy
(
right
->
¦Ùkey
,„ight->¦Ùkey +„ight->
¦Ùu£
,

3519 
Ëá
->
¦Ùkey
 +†eá->
¦Ùu£
);

3520 
d©a_cİy
(
right
->
¦Ùd©a
,„ight->¦Ùd©¨+„ight->
¦Ùu£
,

3521 
Ëá
->
¦Ùd©a
 +†eá->
¦Ùu£
);

3523 
	gËá
->
	g¦Ùu£
 +ğ
right
->
¦Ùu£
;

3525 
	gËá
->
	gÃx—f
 = 
right
->
Ãx—f
;

3526 ià(
	gËá
->
	gÃx—f
)

3527 
	gËá
->
	gÃx—f
->
	g´evËaf
 = 
Ëá
;

3529 
	gm_Ëaf
 = 
Ëá
;

3531 
	gright
->
	g¦Ùu£
 = 0;

3533  
»suÉ_t
(
bŒ“_fixm”ge
);

3539 
»suÉ_t
 
m”ge_šÃr
(
šÃr_node
* 
Ëá
, iÂ”_node* 
right
, iÂ”_node* 
·»Á
, 
·»Á¦Ù
)

3541 
BTREE_PRINT
("M”gšÃ¸node " << 
Ëá
 << "‡nd " << 
right
 << " w™h commÚ…¬’ˆ" << 
·»Á
 << ".");

3543 
BTREE_ASSERT
(
Ëá
->
Ëv–
 =ğ
right
->level);

3544 
BTREE_ASSERT
(
·»Á
->
Ëv–
 =ğ
Ëá
->level + 1);

3546 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
Ëá
);

3548 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 + 
right
->¦Ùu£ < 
šÃr¦Ùmax
);

3550 ià(
	g£lfv”ify
)

3553 
	gËá¦Ù
 = 0;

3554 
	gËá¦Ù
 <ğ
·»Á
->
¦Ùu£
 &&…¬’t->
chdid
[
Ëá¦Ù
] !ğ
Ëá
)

3555 ++
Ëá¦Ù
;

3557 
BTREE_ASSERT
(
Ëá¦Ù
 < 
·»Á
->
¦Ùu£
);

3558 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
] =ğ
Ëá
);

3559 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
 + 1] =ğ
right
);

3561 
BTREE_ASSERT
(
·»Á¦Ù
 =ğ
Ëá¦Ù
);

3565 
	gËá
->
	g¦Ùkey
[
Ëá
->
¦Ùu£
] = 
·»Á
->
¦Ùkey
[
·»Á¦Ù
];

3566 
	gËá
->
	g¦Ùu£
++;

3569 
	g¡d
::
cİy
(
right
->
¦Ùkey
,„ight->¦Ùkey +„ight->
¦Ùu£
,

3570 
Ëá
->
¦Ùkey
 +†eá->
¦Ùu£
);

3571 
	g¡d
::
cİy
(
right
->
chdid
,„ight->chdid +„ight->
¦Ùu£
 + 1,

3572 
Ëá
->
chdid
 +†eá->
¦Ùu£
);

3574 
	gËá
->
	g¦Ùu£
 +ğ
right
->
¦Ùu£
;

3575 
	gright
->
	g¦Ùu£
 = 0;

3577  
»suÉ_t
(
bŒ“_fixm”ge
);

3583 
»suÉ_t
 
shiá_Ëá_Ëaf
(
Ëaf_node
* 
Ëá
,†—f_node* 
right
, 
šÃr_node
* 
·»Á
, 
·»Á¦Ù
)

3585 
BTREE_ASSERT
(
Ëá
->
i¦—âode
(è&& 
right
->isleafnode());

3586 
BTREE_ASSERT
(
·»Á
->
Ëv–
 == 1);

3588 
BTREE_ASSERT
(
Ëá
->
Ãx—f
 =ğ
right
);

3589 
BTREE_ASSERT
(
Ëá
 =ğ
right
->
´evËaf
);

3591 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 < 
right
->slotuse);

3592 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
Ëá
);

3594 
	gshiánum
 = (
right
->
¦Ùu£
 - 
Ëá
->slotuse) >> 1;

3596 
BTREE_PRINT
("Shiášg (Ëafè" << 
shiánum
 << "ƒÁr› tØËá " << 
Ëá
 << " from„ighˆ" << 
right
 << " w™h commÚ…¬’ˆ" << 
·»Á
 << ".");

3598 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 + 
shiánum
 < 
Ëaf¦Ùmax
);

3602 
	g¡d
::
cİy
(
right
->
¦Ùkey
,„ight->¦Ùkey + 
shiánum
,

3603 
Ëá
->
¦Ùkey
 +†eá->
¦Ùu£
);

3604 
d©a_cİy
(
right
->
¦Ùd©a
,„ight->¦Ùd©¨+ 
shiánum
,

3605 
Ëá
->
¦Ùd©a
 +†eá->
¦Ùu£
);

3607 
	gËá
->
	g¦Ùu£
 +ğ
shiánum
;

3611 
	g¡d
::
cİy
(
right
->
¦Ùkey
 + 
shiánum
,„ight->¦Ùkey +„ight->
¦Ùu£
,

3612 
right
->
¦Ùkey
);

3613 
d©a_cİy
(
right
->
¦Ùd©a
 + 
shiánum
,„ight->¦Ùd©¨+„ight->
¦Ùu£
,

3614 
right
->
¦Ùd©a
);

3616 
	gright
->
	g¦Ùu£
 -ğ
shiánum
;

3619 ià(
	g·»Á¦Ù
 < 
	g·»Á
->
	g¦Ùu£
) {

3620 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
Ëá
->
¦Ùkey
[Ëá->
¦Ùu£
 - 1];

3621  
»suÉ_t
(
bŒ“_ok
);

3624  
»suÉ_t
(
bŒ“_upd©e_Ï¡key
, 
Ëá
->
¦Ùkey
[Ëá->
¦Ùu£
 - 1]);

3631 
shiá_Ëá_šÃr
(
šÃr_node
* 
Ëá
, iÂ”_node* 
right
, iÂ”_node* 
·»Á
, 
·»Á¦Ù
)

3633 
BTREE_ASSERT
(
Ëá
->
Ëv–
 =ğ
right
->level);

3634 
BTREE_ASSERT
(
·»Á
->
Ëv–
 =ğ
Ëá
->level + 1);

3636 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 < 
right
->slotuse);

3637 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
Ëá
);

3639 
	gshiánum
 = (
right
->
¦Ùu£
 - 
Ëá
->slotuse) >> 1;

3641 
BTREE_PRINT
("Shiášg (šÃrè" << 
shiánum
 << "ƒÁr› tØËá " << 
Ëá
 << " from„ighˆ" << 
right
 << " w™h commÚ…¬’ˆ" << 
·»Á
 << ".");

3643 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 + 
shiánum
 < 
šÃr¦Ùmax
);

3645 ià(
	g£lfv”ify
)

3649 
	gËá¦Ù
 = 0;

3650 
	gËá¦Ù
 <ğ
·»Á
->
¦Ùu£
 &&…¬’t->
chdid
[
Ëá¦Ù
] !ğ
Ëá
)

3651 ++
Ëá¦Ù
;

3653 
BTREE_ASSERT
(
Ëá¦Ù
 < 
·»Á
->
¦Ùu£
);

3654 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
] =ğ
Ëá
);

3655 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
 + 1] =ğ
right
);

3657 
BTREE_ASSERT
(
Ëá¦Ù
 =ğ
·»Á¦Ù
);

3661 
	gËá
->
	g¦Ùkey
[
Ëá
->
¦Ùu£
] = 
·»Á
->
¦Ùkey
[
·»Á¦Ù
];

3662 
	gËá
->
	g¦Ùu£
++;

3666 
	g¡d
::
cİy
(
right
->
¦Ùkey
,„ight->¦Ùkey + 
shiánum
 - 1,

3667 
Ëá
->
¦Ùkey
 +†eá->
¦Ùu£
);

3668 
	g¡d
::
cİy
(
right
->
chdid
,„ight->chdid + 
shiánum
,

3669 
Ëá
->
chdid
 +†eá->
¦Ùu£
);

3671 
	gËá
->
	g¦Ùu£
 +ğ
shiánum
 - 1;

3674 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
right
->
¦Ùkey
[
shiánum
 - 1];

3678 
	g¡d
::
cİy
(
right
->
¦Ùkey
 + 
shiánum
,„ight->¦Ùkey +„ight->
¦Ùu£
,

3679 
right
->
¦Ùkey
);

3680 
	g¡d
::
cİy
(
right
->
chdid
 + 
shiánum
,„ight->chdid +„ight->
¦Ùu£
 + 1,

3681 
right
->
chdid
);

3683 
	gright
->
	g¦Ùu£
 -ğ
shiánum
;

3689 
shiá_right_Ëaf
(
Ëaf_node
* 
Ëá
,†—f_node* 
right
, 
šÃr_node
* 
·»Á
, 
·»Á¦Ù
)

3691 
BTREE_ASSERT
(
Ëá
->
i¦—âode
(è&& 
right
->isleafnode());

3692 
BTREE_ASSERT
(
·»Á
->
Ëv–
 == 1);

3694 
BTREE_ASSERT
(
Ëá
->
Ãx—f
 =ğ
right
);

3695 
BTREE_ASSERT
(
Ëá
 =ğ
right
->
´evËaf
);

3696 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
Ëá
);

3698 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 > 
right
->slotuse);

3700 
	gshiánum
 = (
Ëá
->
¦Ùu£
 - 
right
->slotuse) >> 1;

3702 
BTREE_PRINT
("Shiášg (Ëafè" << 
shiánum
 << "ƒÁr› tØrighˆ" << 
right
 << " from†eá " << 
Ëá
 << " w™h commÚ…¬’ˆ" << 
·»Á
 << ".");

3704 ià(
	g£lfv”ify
)

3707 
	gËá¦Ù
 = 0;

3708 
	gËá¦Ù
 <ğ
·»Á
->
¦Ùu£
 &&…¬’t->
chdid
[
Ëá¦Ù
] !ğ
Ëá
)

3709 ++
Ëá¦Ù
;

3711 
BTREE_ASSERT
(
Ëá¦Ù
 < 
·»Á
->
¦Ùu£
);

3712 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
] =ğ
Ëá
);

3713 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
 + 1] =ğ
right
);

3715 
BTREE_ASSERT
(
Ëá¦Ù
 =ğ
·»Á¦Ù
);

3720 
BTREE_ASSERT
(
right
->
¦Ùu£
 + 
shiánum
 < 
Ëaf¦Ùmax
);

3722 
	g¡d
::
cİy_backw¬d
(
right
->
¦Ùkey
,„ight->¦Ùkey +„ight->
¦Ùu£
,

3723 
right
->
¦Ùkey
 +„ight->
¦Ùu£
 + 
shiánum
);

3724 
d©a_cİy_backw¬d
(
right
->
¦Ùd©a
,„ight->¦Ùd©¨+„ight->
¦Ùu£
,

3725 
right
->
¦Ùd©a
 +„ight->
¦Ùu£
 + 
shiánum
);

3727 
	gright
->
	g¦Ùu£
 +ğ
shiánum
;

3730 
	g¡d
::
cİy
(
Ëá
->
¦Ùkey
 +†eá->
¦Ùu£
 - 
shiánum
,†eft->slotkey +†eft->slotuse,

3731 
right
->
¦Ùkey
);

3732 
d©a_cİy
(
Ëá
->
¦Ùd©a
 +†eá->
¦Ùu£
 - 
shiánum
,†eft->slotdata +†eft->slotuse,

3733 
right
->
¦Ùd©a
);

3735 
	gËá
->
	g¦Ùu£
 -ğ
shiánum
;

3737 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
Ëá
->
¦Ùkey
[Ëá->
¦Ùu£
 - 1];

3743 
shiá_right_šÃr
(
šÃr_node
* 
Ëá
, iÂ”_node* 
right
, iÂ”_node* 
·»Á
, 
·»Á¦Ù
)

3745 
BTREE_ASSERT
(
Ëá
->
Ëv–
 =ğ
right
->level);

3746 
BTREE_ASSERT
(
·»Á
->
Ëv–
 =ğ
Ëá
->level + 1);

3748 
BTREE_ASSERT
(
Ëá
->
¦Ùu£
 > 
right
->slotuse);

3749 
BTREE_ASSERT
(
·»Á
->
chdid
[
·»Á¦Ù
] =ğ
Ëá
);

3751 
	gshiánum
 = (
Ëá
->
¦Ùu£
 - 
right
->slotuse) >> 1;

3753 
BTREE_PRINT
("Shiášg (Ëafè" << 
shiánum
 << "ƒÁr› tØrighˆ" << 
right
 << " from†eá " << 
Ëá
 << " w™h commÚ…¬’ˆ" << 
·»Á
 << ".");

3755 ià(
	g£lfv”ify
)

3758 
	gËá¦Ù
 = 0;

3759 
	gËá¦Ù
 <ğ
·»Á
->
¦Ùu£
 &&…¬’t->
chdid
[
Ëá¦Ù
] !ğ
Ëá
)

3760 ++
Ëá¦Ù
;

3762 
BTREE_ASSERT
(
Ëá¦Ù
 < 
·»Á
->
¦Ùu£
);

3763 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
] =ğ
Ëá
);

3764 
BTREE_ASSERT
(
·»Á
->
chdid
[
Ëá¦Ù
 + 1] =ğ
right
);

3766 
BTREE_ASSERT
(
Ëá¦Ù
 =ğ
·»Á¦Ù
);

3771 
BTREE_ASSERT
(
right
->
¦Ùu£
 + 
shiánum
 < 
šÃr¦Ùmax
);

3773 
	g¡d
::
cİy_backw¬d
(
right
->
¦Ùkey
,„ight->¦Ùkey +„ight->
¦Ùu£
,

3774 
right
->
¦Ùkey
 +„ight->
¦Ùu£
 + 
shiánum
);

3775 
	g¡d
::
cİy_backw¬d
(
right
->
chdid
,„ight->chdid +„ight->
¦Ùu£
 + 1,

3776 
right
->
chdid
 +„ight->
¦Ùu£
 + 1 + 
shiánum
);

3778 
	gright
->
	g¦Ùu£
 +ğ
shiánum
;

3781 
	gright
->
	g¦Ùkey
[
shiánum
 - 1] = 
·»Á
->
¦Ùkey
[
·»Á¦Ù
];

3784 
	g¡d
::
cİy
(
Ëá
->
¦Ùkey
 +†eá->
¦Ùu£
 - 
shiánum
 + 1,†eft->slotkey +†eft->slotuse,

3785 
right
->
¦Ùkey
);

3786 
	g¡d
::
cİy
(
Ëá
->
chdid
 +†eá->
¦Ùu£
 - 
shiánum
 + 1,†eft->childid +†eft->slotuse + 1,

3787 
right
->
chdid
);

3790 
	g·»Á
->
	g¦Ùkey
[
·»Á¦Ù
] = 
Ëá
->
¦Ùkey
[Ëá->
¦Ùu£
 - 
shiánum
];

3792 
	gËá
->
	g¦Ùu£
 -ğ
shiánum
;

3795 #ifdeà
BTREE_DEBUG


3797 
	gpublic
:

3803 
´št
(
¡d
::
o¡»am
& 
os
) const

3805 ià(
m_roÙ
) {

3806 
´št_node
(
os
, 
m_roÙ
, 0, 
Œue
);

3811 
´št_Ëaves
(
¡d
::
o¡»am
& 
os
) const

3813 
os
 << "Ëaves:" << 
¡d
::
’dl
;

3815 cÚ¡ 
Ëaf_node
* 
	gn
 = 
m_h—dËaf
;

3817 
	gn
)

3819 
	gos
 << " " << 
	gn
 << 
	g¡d
::
’dl
;

3821 
	gn
 = 
n
->
Ãx—f
;

3825 
	g´iv©e
:

3827 
´št_node
(
¡d
::
o¡»am
& 
os
, cÚ¡ 
node
*‚ode, 
d•th
 = 0, 
boŞ
 
»cursive
 = 
çl£
)

3829 
i
 = 0; 
	gi
 < 
	gd•th
; i++è
	gos
 << " ";

3831 
	gos
 << "nod" << 
	gnode
 << "†ev– " <<‚ode->
	gËv–
 << " slÙu£ " <<‚ode->
	g¦Ùu£
 << 
	g¡d
::
’dl
;

3833 ià(
	gnode
->
i¦—âode
())

3835 cÚ¡ 
Ëaf_node
* 
	gËaâode
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
node
);

3837 
	gi
 = 0; i < 
	gd•th
; i++è
	gos
 << " ";

3838 
	gos
 << "†—à´ev " << 
	gËaâode
->
	g´evËaf
 << "‚exˆ" <<†—âode->
	gÃx—f
 << 
	g¡d
::
’dl
;

3840 
	gi
 = 0; i < 
	gd•th
; i++è
	gos
 << " ";

3842 
	g¦Ù
 = 0; slÙ < 
	gËaâode
->
	g¦Ùu£
; ++slot)

3844 
	gos
 << 
	gËaâode
->
	g¦Ùkey
[
¦Ù
] << " ";

3846 
	gos
 << 
	g¡d
::
’dl
;

3850 cÚ¡ 
šÃr_node
* 
	gšÃºode
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
node
);

3852 
	gi
 = 0; i < 
	gd•th
; i++è
	gos
 << " ";

3854 
	g¦Ù
 = 0; slÙ < 
	gšÃºode
->
	g¦Ùu£
; ++slot)

3856 
	gos
 << "(" << 
	gšÃºode
->
	gchdid
[
¦Ù
] << "è" << iÂ”node->
	g¦Ùkey
[slot] << " ";

3858 
	gos
 << "(" << 
	gšÃºode
->
	gchdid
[
šÃºode
->
¦Ùu£
] << ")" << 
	g¡d
::
’dl
;

3860 ià(
	g»cursive
)

3862 
	g¦Ù
 = 0; slÙ < 
	gšÃºode
->
	g¦Ùu£
 + 1; ++slot)

3864 
´št_node
(
os
, 
šÃºode
->
chdid
[
¦Ù
], 
d•th
 + 1, 
»cursive
);

3871 
	gpublic
:

3876 
v”ify
() const

3878 
key_ty³
 
mškey
, 
	gmaxkey
;

3879 
Œ“_¡©s
 
	gv¡©s
;

3881 ià(
	gm_roÙ
)

3883 
v”ify_node
(
m_roÙ
, &
mškey
, &
maxkey
, 
v¡©s
);

3885 
as£¹
(
v¡©s
.
™emcouÁ
 =ğ
m_¡©s
.itemcount);

3886 
as£¹
(
v¡©s
.
Ëaves
 =ğ
m_¡©s
.leaves);

3887 
as£¹
(
v¡©s
.
šÃºodes
 =ğ
m_¡©s
.innernodes);

3889 
v”ify_Ëaæšks
();

3893 
	g´iv©e
:

3895 
v”ify_node
(cÚ¡ 
node
* 
n
, 
key_ty³
* 
mškey
, key_ty³* 
maxkey
, 
Œ“_¡©s
& 
v¡©s
) const

3897 
BTREE_PRINT
("v”ifynod" << 
n
);

3899 ià(
	gn
->
i¦—âode
())

3901 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

3903 
as£¹
(
Ëaf
 =ğ
m_roÙ
 || !Ëaf->
isund”æow
());

3904 
as£¹
(
Ëaf
->
¦Ùu£
 > 0);

3906 
	g¦Ù
 = 0; slÙ < 
	gËaf
->
	g¦Ùu£
 - 1; ++slot)

3908 
as£¹
(
key_Ës£qu®
(
Ëaf
->
¦Ùkey
[
¦Ù
],†eaf->slotkey[slot + 1]));

3911 *
	gmškey
 = 
Ëaf
->
¦Ùkey
[0];

3912 *
	gmaxkey
 = 
Ëaf
->
¦Ùkey
[Ëaf->
¦Ùu£
 - 1];

3914 
	gv¡©s
.
	gËaves
++;

3915 
	gv¡©s
.
	g™emcouÁ
 +ğ
Ëaf
->
¦Ùu£
;

3919 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

3920 
	gv¡©s
.
	gšÃºodes
++;

3922 
as£¹
(
šÃr
 =ğ
m_roÙ
 || !šÃr->
isund”æow
());

3923 
as£¹
(
šÃr
->
¦Ùu£
 > 0);

3925 
	g¦Ù
 = 0; slÙ < 
	gšÃr
->
	g¦Ùu£
 - 1; ++slot)

3927 
as£¹
(
key_Ës£qu®
(
šÃr
->
¦Ùkey
[
¦Ù
], inner->slotkey[slot + 1]));

3930 
	g¦Ù
 = 0; slÙ <ğ
šÃr
->
¦Ùu£
; ++slot)

3932 cÚ¡ 
node
* 
	gsubnode
 = 
šÃr
->
chdid
[
¦Ù
];

3933 
key_ty³
 
	gsubmškey
 = key_type();

3934 
key_ty³
 
	gsubmaxkey
 = key_type();

3936 
as£¹
(
subnode
->
Ëv–
 + 1 =ğ
šÃr
->level);

3937 
v”ify_node
(
subnode
, &
submškey
, &
submaxkey
, 
v¡©s
);

3939 
BTREE_PRINT
("v”ify subnod" << 
subnode
 << ": " << 
submškey
 << " - " << 
submaxkey
);

3941 ià(
	g¦Ù
 == 0)

3942 *
mškey
 = 
submškey
;

3944 
as£¹
(
key_g»©”equ®
(
submškey
, 
šÃr
->
¦Ùkey
[
¦Ù
 - 1]));

3946 ià(
	g¦Ù
 =ğ
šÃr
->
¦Ùu£
)

3947 *
maxkey
 = 
submaxkey
;

3949 
as£¹
(
key_equ®
(
šÃr
->
¦Ùkey
[
¦Ù
], 
submaxkey
));

3951 ià(
	gšÃr
->
	gËv–
 =ğ1 && 
¦Ù
 < 
šÃr
->
¦Ùu£
)

3955 cÚ¡ 
Ëaf_node
* 
Ëaç
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
šÃr
->
chdid
[
¦Ù
]);

3956 cÚ¡ 
Ëaf_node
* 
	gËafb
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
šÃr
->
chdid
[
¦Ù
 + 1]);

3958 
as£¹
(
Ëaç
->
Ãx—f
 =ğ
Ëafb
);

3959 
as£¹
(
Ëaç
 =ğ
Ëafb
->
´evËaf
);

3960 ()
	gËaç
;

3961 ()
	gËafb
;

3963 ià(
	gšÃr
->
	gËv–
 =ğ2 && 
¦Ù
 < 
šÃr
->
¦Ùu£
)

3966 cÚ¡ 
šÃr_node
* 
·»Áa
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
šÃr
->
chdid
[
¦Ù
]);

3967 cÚ¡ 
šÃr_node
* 
	g·»Áb
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
šÃr
->
chdid
[
¦Ù
 + 1]);

3969 cÚ¡ 
Ëaf_node
* 
	gËaç
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
·»Áa
->
chdid
[·»Áa->
¦Ùu£
]);

3970 cÚ¡ 
Ëaf_node
* 
	gËafb
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
·»Áb
->
chdid
[0]);

3972 
as£¹
(
Ëaç
->
Ãx—f
 =ğ
Ëafb
);

3973 
as£¹
(
Ëaç
 =ğ
Ëafb
->
´evËaf
);

3974 ()
	gËaç
;

3975 ()
	gËafb
;

3982 
v”ify_Ëaæšks
() const

3984 cÚ¡ 
Ëaf_node
* 
	gn
 = 
m_h—dËaf
;

3986 
as£¹
(
n
->
Ëv–
 == 0);

3987 
as£¹
(!
n
 ||‚->
´evËaf
 =ğ
NULL
);

3989 
	g‹¡couÁ
 = 0;

3991 
	gn
)

3993 
as£¹
(
n
->
Ëv–
 == 0);

3994 
as£¹
(
n
->
¦Ùu£
 > 0);

3996 
	g¦Ù
 = 0; slÙ < 
	gn
->
	g¦Ùu£
 - 1; ++slot)

3998 
as£¹
(
key_Ës£qu®
(
n
->
¦Ùkey
[
¦Ù
],‚->slotkey[slot + 1]));

4001 
	g‹¡couÁ
 +ğ
n
->
¦Ùu£
;

4003 ià(
	gn
->
	gÃx—f
)

4005 
as£¹
(
key_Ës£qu®
(
n
->
¦Ùkey
[n->
¦Ùu£
 - 1],‚->
Ãx—f
->slotkey[0]));

4007 
as£¹
(
n
 =ğn->
Ãx—f
->
´evËaf
);

4011 
as£¹
(
m_Ëaf
 =ğ
n
);

4014 
	gn
 = 
n
->
Ãx—f
;

4017 
as£¹
(
‹¡couÁ
 =ğ
size
());

4020 
	g´iv©e
:

4026 
	sdump_h—d”


4029 
sigÇtu»
[12];

4032 
	gv”siÚ
;

4035 
	gkey_ty³_size
;

4038 
	gd©a_ty³_size
;

4041 
	gËaf¦Ùs
;

4044 
	gšÃr¦Ùs
;

4047 
boŞ
 
	g®low_du¶iÿ‹s
;

4050 
size_ty³
 
	g™emcouÁ
;

4054 
šlše
 
fl
()

4057 
	gsigÇtu»
[0] = 's';

4058 
	gsigÇtu»
[1] = 't';

4059 
	gsigÇtu»
[2] = 'x';

4060 
	gsigÇtu»
[3] = '-';

4061 
	gsigÇtu»
[4] = 'b';

4062 
	gsigÇtu»
[5] = 't';

4063 
	gsigÇtu»
[6] = 'r';

4064 
	gsigÇtu»
[7] = 'e';

4065 
	gsigÇtu»
[8] = 'e';

4066 
	gsigÇtu»
[9] = 0;

4067 
	gsigÇtu»
[10] = 0;

4068 
	gsigÇtu»
[11] = 0;

4070 
	gv”siÚ
 = 0;

4071 
	gkey_ty³_size
 = (
ty³Çme
 
£lf_ty³
::
key_ty³
);

4072 
	gd©a_ty³_size
 = (
ty³Çme
 
£lf_ty³
::
d©a_ty³
);

4073 
	gËaf¦Ùs
 = 
£lf_ty³
::
Ëaf¦Ùmax
;

4074 
	gšÃr¦Ùs
 = 
£lf_ty³
::
šÃr¦Ùmax
;

4075 
	g®low_du¶iÿ‹s
 = 
£lf_ty³
::
®low_du¶iÿ‹s
;

4079 
šlše
 
boŞ
 
§me
(cÚ¡ 
dump_h—d”
& 
o
) const

4081  (
	gsigÇtu»
[0] =ğ's' && 
sigÇtu»
[1] == 't' &&

4082 
sigÇtu»
[2] == 'x' && signature[3] == '-' &&

4083 
sigÇtu»
[4] == 'b' && signature[5] == 't' &&

4084 
sigÇtu»
[6] == 'r' && signature[7] == 'e' &&

4085 
sigÇtu»
[8] == 'e' && signature[9] == 0 &&

4086 
sigÇtu»
[10] == 0 && signature[11] == 0)

4087 && (
v”siÚ
 =ğ
o
.version)

4088 && (
key_ty³_size
 =ğ
o
.key_type_size)

4089 && (
d©a_ty³_size
 =ğ
o
.data_type_size)

4090 && (
Ëaf¦Ùs
 =ğ
o
.leafslots)

4091 && (
šÃr¦Ùs
 =ğ
o
.innerslots)

4092 && (
®low_du¶iÿ‹s
 =ğ
o
.allow_duplicates);

4096 
	gpublic
:

4101 
dump
(
¡d
::
o¡»am
& 
os
) const

4103 
dump_h—d”
 
h—d”
;

4104 
	gh—d”
.
fl
();

4105 
	gh—d”
.
	g™emcouÁ
 = 
size
();

4107 
	gos
.
wr™e
(
»š‹½»t_ÿ¡
<*>(&
h—d”
), (header));

4109 ià(
	gm_roÙ
) {

4110 
dump_node
(
os
, 
m_roÙ
);

4118 
boŞ
 
»¡Üe
(
¡d
::
i¡»am
& 
is
)

4120 
dump_h—d”
 
feh—d”
;

4121 
	gis
.
»ad
(
»š‹½»t_ÿ¡
<*>(&
feh—d”
), (fileheader));

4122 ià(!
	gis
.
good
()è 
	gçl£
;

4124 
dump_h—d”
 
	gmyh—d”
;

4125 
	gmyh—d”
.
fl
();

4126 
	gmyh—d”
.
	g™emcouÁ
 = 
feh—d”
.
™emcouÁ
;

4128 ià(!
	gmyh—d”
.
§me
(
feh—d”
))

4130 
BTREE_PRINT
("btree::restore: file header does‚ot match instantiation signature.");

4131  
	gçl£
;

4134 
ş—r
();

4136 ià(
	gfeh—d”
.
	g™emcouÁ
 > 0)

4138 
	gm_roÙ
 = 
»¡Üe_node
(
is
);

4139 ià(
	gm_roÙ
 =ğ
NULL
è 
çl£
;

4141 
	gm_¡©s
.
	g™emcouÁ
 = 
feh—d”
.
™emcouÁ
;

4144 #ifdeà
BTREE_DEBUG


4145 ià(
	gdebug
è
´št
(
¡d
::
cout
);

4147 ià(
	g£lfv”ify
è
v”ify
();

4149  
	gŒue
;

4152 
	g´iv©e
:

4154 
dump_node
(
¡d
::
o¡»am
& 
os
, cÚ¡ 
node
* 
n
) const

4156 
BTREE_PRINT
("dump_nod" << 
n
 << 
¡d
::
’dl
);

4158 ià(
	gn
->
i¦—âode
())

4160 cÚ¡ 
Ëaf_node
* 
	gËaf
 = 
¡©ic_ÿ¡
<cÚ¡†—f_node*>(
n
);

4162 
	gos
.
wr™e
(
»š‹½»t_ÿ¡
<cÚ¡ *>(
Ëaf
), (*leaf));

4166 cÚ¡ 
šÃr_node
* 
	gšÃr
 = 
¡©ic_ÿ¡
<cÚ¡ iÂ”_node*>(
n
);

4168 
	gos
.
wr™e
(
»š‹½»t_ÿ¡
<cÚ¡ *>(
šÃr
), (*inner));

4170 
	g¦Ù
 = 0; slÙ <ğ
šÃr
->
¦Ùu£
; ++slot)

4172 cÚ¡ 
node
* 
	gsubnode
 = 
šÃr
->
chdid
[
¦Ù
];

4174 
dump_node
(
os
, 
subnode
);

4181 
node
 * 
»¡Üe_node
(
¡d
::
i¡»am
& 
is
)

4183 
node
 
tİ
(0);

4186 
	gis
.
»ad
(
»š‹½»t_ÿ¡
<*>(&
tİ
), (top));

4187 ià(!
	gis
.
good
()è 
	gNULL
;

4189 ià(
	gtİ
.
i¦—âode
())

4191 
Ëaf_node
 
Ëaf
(
tİ
);

4194 
	gis
.
»ad
(
»š‹½»t_ÿ¡
<*>(&
Ëaf
è+ (
tİ
), (leaf) - (top));

4195 ià(!
	gis
.
good
()è 
	gNULL
;

4197 
Ëaf_node
* 
	gÃwËaf
 = 
®loÿ‹_Ëaf
();

4200 *
	gÃwËaf
 = 
Ëaf
;

4203 ià(
	gm_h—dËaf
 =ğ
NULL
) {

4204 
BTREE_ASSERT
(
ÃwËaf
->
´evËaf
 =ğ
NULL
);

4205 
	gm_h—dËaf
 = 
m_Ëaf
 = 
ÃwËaf
;

4208 
	gÃwËaf
->
	g´evËaf
 = 
m_Ëaf
;

4209 
	gm_Ëaf
->
	gÃx—f
 = 
ÃwËaf
;

4210 
	gm_Ëaf
 = 
ÃwËaf
;

4213  
	gÃwËaf
;

4217 
šÃr_node
 
šÃr
(
tİ
);

4220 
	gis
.
»ad
(
»š‹½»t_ÿ¡
<*>(&
šÃr
è+ (
tİ
), (inner) - (top));

4221 ià(!
	gis
.
good
()è 
	gNULL
;

4223 
šÃr_node
* 
	gÃwšÃr
 = 
®loÿ‹_šÃr
(0);

4226 *
	gÃwšÃr
 = 
šÃr
;

4228 
	g¦Ù
 = 0; slÙ <ğ
ÃwšÃr
->
¦Ùu£
; ++slot)

4230 
	gÃwšÃr
->
	gchdid
[
¦Ù
] = 
»¡Üe_node
(
is
);

4233  
	gÃwšÃr
;

	@btree_multimap.h

32 #iâdeà
STX_STX_BTREE_MULTIMAP_H_HEADER


33 
	#STX_STX_BTREE_MULTIMAP_H_HEADER


	)

39 
	~"bŒ“.h
"

41 
Çme¥aû
 
	g¡x
 {

58 
	g‹m¶©e
 <
ty³Çme
 
	g_Key
,y³Çm
	g_D©a
,

59 
ty³Çme
 
	g_Com·»
 = 
¡d
::
Ëss
<
_Key
>,

60 
ty³Çme
 
	g_T¿™s
 = 
bŒ“_deçuÉ_m­_Œa™s
<
_Key
, 
	g_D©a
>,

61 
ty³Çme
 
	g_AÎoc
 = 
¡d
::
®loÿtÜ
<¡d::
·œ
<
_Key
, 
	g_D©a
> > >

62 şas 
	cbŒ“_muÉim­


64 
	gpublic
:

69 
_Key
 
	tkey_ty³
;

73 
_D©a
 
	td©a_ty³
;

76 
_Com·»
 
	tkey_com·»
;

80 
_T¿™s
 
	tŒa™s
;

83 
_AÎoc
 
	t®loÿtÜ_ty³
;

88 
BTREE_FRIENDS


90 
	gpublic
:

94 
bŒ“_muÉim­
<
	tkey_ty³
, 
	td©a_ty³
, 
	tkey_com·»
, 
	tŒa™s
, 
	t®loÿtÜ_ty³
> 
	t£lf_ty³
;

98 
	g¡d
::
	t·œ
<
	tkey_ty³
, 
	td©a_ty³
> 
	tv®ue_ty³
;

101 
	g¡x
::
	tbŒ“
<
	tkey_ty³
, 
	td©a_ty³
, 
	tv®ue_ty³
, 
	tkey_com·»
,

102 
	tŒa™s
, 
	tŒue
, 
	t®loÿtÜ_ty³
, 
	tçl£
> 
	tbŒ“_im¶
;

105 
ty³Çme
 
	tbŒ“_im¶
::
	tv®ue_com·»
 value_compare;

108 
ty³Çme
 
	tbŒ“_im¶
::
	tsize_ty³
 size_type;

111 
ty³Çme
 
	tbŒ“_im¶
::
	tŒ“_¡©s
ree_stats;

113 
	gpublic
:

117 cÚ¡ 
Ëaf¦Ùmax
 = 
bŒ“_im¶
::leafslotmax;

121 cÚ¡ 
	gšÃr¦Ùmax
 = 
bŒ“_im¶
::
šÃr¦Ùmax
;

126 cÚ¡ 
	gmšËaf¦Ùs
 = 
bŒ“_im¶
::
mšËaf¦Ùs
;

131 cÚ¡ 
	gmššÃr¦Ùs
 = 
bŒ“_im¶
::
mššÃr¦Ùs
;

135 cÚ¡ 
boŞ
 
	g£lfv”ify
 = 
bŒ“_im¶
::
£lfv”ify
;

140 cÚ¡ 
boŞ
 
	gdebug
 = 
bŒ“_im¶
::
debug
;

143 cÚ¡ 
boŞ
 
	g®low_du¶iÿ‹s
 = 
bŒ“_im¶
::
®low_du¶iÿ‹s
;

145 
	gpublic
:

150 
ty³Çme
 
	tbŒ“_im¶
::
	t™”©Ü
 iterator;

154 
ty³Çme
 
	tbŒ“_im¶
::
	tcÚ¡_™”©Ü
 const_iterator;

157 
ty³Çme
 
	tbŒ“_im¶
::
	t»v”£_™”©Ü
„everse_iterator;

160 
ty³Çme
 
	tbŒ“_im¶
::
	tcÚ¡_»v”£_™”©Ü
 const_reverse_iterator;

162 
	g´iv©e
:

166 
bŒ“_im¶
 
Œ“
;

168 
	gpublic
:

173 
ex¶ic™
 
šlše
 
bŒ“_muÉim­
(cÚ¡ 
®loÿtÜ_ty³
& 
®loc
 =‡llocator_type())

174 : 
Œ“
(
®loc
)

179 
ex¶ic™
 
šlše
 
bŒ“_muÉim­
(cÚ¡ 
key_com·»
& 
kcf
,

180 cÚ¡ 
®loÿtÜ_ty³
& 
®loc
 =‡llocator_type())

181 : 
Œ“
(
kcf
, 
®loc
)

185 
	g‹m¶©e
 <
şass
 
	gIÅutI‹¿tÜ
>

186 
šlše
 
bŒ“_muÉim­
(
IÅutI‹¿tÜ
 
fœ¡
, IÅutI‹¿tÜ 
Ï¡
,

187 cÚ¡ 
®loÿtÜ_ty³
& 
®loc
 =‡llocator_type())

188 : 
Œ“
(
fœ¡
, 
Ï¡
, 
®loc
)

193 
	g‹m¶©e
 <
şass
 
	gIÅutI‹¿tÜ
>

194 
šlše
 
bŒ“_muÉim­
(
IÅutI‹¿tÜ
 
fœ¡
, IÅutI‹¿tÜ 
Ï¡
, cÚ¡ 
key_com·»
& 
kcf
,

195 cÚ¡ 
®loÿtÜ_ty³
& 
®loc
 =‡llocator_type())

196 : 
Œ“
(
fœ¡
, 
Ï¡
, 
kcf
, 
®loc
)

200 
	gšlše
 ~
bŒ“_muÉim­
()

204 
sw­
(
£lf_ty³
& 
äom
)

206 
	g¡d
::
sw­
(
Œ“
, 
äom
.tree);

209 
	gpublic
:

213 
šlše
 
key_com·»
 
key_comp
() const

215  
Œ“
.
key_comp
();

220 
šlše
 
v®ue_com·»
 
v®ue_comp
() const

222  
	gŒ“
.
v®ue_comp
();

225 
	gpublic
:

229 
®loÿtÜ_ty³
 
g‘_®loÿtÜ
() const

231  
Œ“
.
g‘_®loÿtÜ
();

234 
	gpublic
:

238 
ş—r
()

240 
Œ“
.
ş—r
();

243 
	gpublic
:

248 
šlše
 
™”©Ü
 
begš
()

250  
Œ“
.
begš
();

255 
šlše
 
™”©Ü
 
’d
()

257  
	gŒ“
.
’d
();

262 
šlše
 
cÚ¡_™”©Ü
 
begš
() const

264  
	gŒ“
.
begš
();

269 
šlše
 
cÚ¡_™”©Ü
 
’d
() const

271  
	gŒ“
.
’d
();

276 
šlše
 
»v”£_™”©Ü
 
rbegš
()

278  
	gŒ“
.
rbegš
();

283 
šlše
 
»v”£_™”©Ü
 
»nd
()

285  
	gŒ“
.
»nd
();

290 
šlše
 
cÚ¡_»v”£_™”©Ü
 
rbegš
() const

292  
	gŒ“
.
rbegš
();

297 
šlše
 
cÚ¡_»v”£_™”©Ü
 
»nd
() const

299  
	gŒ“
.
»nd
();

302 
	gpublic
:

306 
šlše
 
size_ty³
 
size
() const

308  
Œ“
.
size
();

312 
šlše
 
boŞ
 
em±y
() const

314  
	gŒ“
.
em±y
();

319 
šlše
 
size_ty³
 
max_size
() const

321  
	gŒ“
.
max_size
();

325 
šlše
 cÚ¡ 
	gŒ“_¡©s
 & 
g‘_¡©s
() const

327  
	gŒ“
.
g‘_¡©s
();

330 
	gpublic
:

335 
boŞ
 
exi¡s
(cÚ¡ 
key_ty³
& 
key
) const

337  
Œ“
.
exi¡s
(
key
);

342 
™”©Ü
 
fšd
(cÚ¡ 
key_ty³
& 
key
)

344  
	gŒ“
.
fšd
(
key
);

349 
cÚ¡_™”©Ü
 
fšd
(cÚ¡ 
key_ty³
& 
key
) const

351  
	gŒ“
.
fšd
(
key
);

356 
size_ty³
 
couÁ
(cÚ¡ 
key_ty³
& 
key
) const

358  
	gŒ“
.
couÁ
(
key
);

363 
™”©Ü
 
low”_bound
(cÚ¡ 
key_ty³
& 
key
)

365  
	gŒ“
.
low”_bound
(
key
);

371 
cÚ¡_™”©Ü
 
low”_bound
(cÚ¡ 
key_ty³
& 
key
) const

373  
	gŒ“
.
low”_bound
(
key
);

378 
™”©Ü
 
uµ”_bound
(cÚ¡ 
key_ty³
& 
key
)

380  
	gŒ“
.
uµ”_bound
(
key
);

386 
cÚ¡_™”©Ü
 
uµ”_bound
(cÚ¡ 
key_ty³
& 
key
) const

388  
	gŒ“
.
uµ”_bound
(
key
);

392 
šlše
 
	g¡d
::
·œ
<
™”©Ü
, 
	g™”©Ü
> 
equ®_¿nge
(cÚ¡ 
key_ty³
& 
key
)

394  
	gŒ“
.
equ®_¿nge
(
key
);

398 
šlše
 
	g¡d
::
·œ
<
cÚ¡_™”©Ü
, 
	gcÚ¡_™”©Ü
> 
equ®_¿nge
(cÚ¡ 
key_ty³
& 
key
) const

400  
	gŒ“
.
equ®_¿nge
(
key
);

403 
	gpublic
:

409 
šlše
 
boŞ
 
İ”©Ü
 =ğ(cÚ¡ 
£lf_ty³
& 
Ùh”
) const

411  (
Œ“
 =ğ
Ùh”
.tree);

415 
šlše
 
boŞ
 
	gİ”©Ü
 !ğ(cÚ¡ 
£lf_ty³
& 
Ùh”
) const

417  (
Œ“
 !ğ
Ùh”
.tree);

422 
šlše
 
boŞ
 
	gİ”©Ü
 < (cÚ¡ 
	g£lf_ty³
& 
	gÙh”
) const

424  (
	gŒ“
 < 
	gÙh”
.tree);

428 
šlše
 
boŞ
 
	gİ”©Ü
 > (cÚ¡ 
	g£lf_ty³
& 
	gÙh”
) const

430  (
	gŒ“
 > 
	gÙh”
.tree);

434 
šlše
 
boŞ
 
	gİ”©Ü
 <ğ(cÚ¡ 
£lf_ty³
& 
Ùh”
) const

436  (
Œ“
 <ğ
Ùh”
.tree);

440 
šlše
 
boŞ
 
	gİ”©Ü
 >ğ(cÚ¡ 
£lf_ty³
& 
Ùh”
) const

442  (
Œ“
 >ğ
Ùh”
.tree);

445 
	gpublic
:

449 
šlše
 
£lf_ty³
& 
İ”©Ü
 = (cÚ¡ s–f_ty³& 
Ùh”
)

451 ià(
this
 !ğ&
Ùh”
)

453 
Œ“
 = 
Ùh”
.tree;

455  *
	gthis
;

460 
šlše
 
bŒ“_muÉim­
(cÚ¡ bŒ“_muÉim­& 
Ùh”
)

461 : 
Œ“
(
Ùh”
.tree)

464 
public
:

469 
šlše
 
™”©Ü
 
š£¹
(cÚ¡ 
v®ue_ty³
& 
x
)

471  
Œ“
.
š£¹2
(
x
.
fœ¡
, x.
£cÚd
).
	gfœ¡
;

477 
šlše
 
™”©Ü
 
š£¹
(cÚ¡ 
key_ty³
& 
key
, cÚ¡ 
d©a_ty³
& 
d©a
)

479  
	gŒ“
.
š£¹2
(
key
, 
d©a
).
	gfœ¡
;

486 
šlše
 
™”©Ü
 
š£¹2
(cÚ¡ 
key_ty³
& 
key
, cÚ¡ 
d©a_ty³
& 
d©a
)

488  
	gŒ“
.
š£¹2
(
key
, 
d©a
).
	gfœ¡
;

493 
šlše
 
™”©Ü
 
š£¹
(™”©Ü 
hšt
, cÚ¡ 
v®ue_ty³
& 
x
)

495  
	gŒ“
.
š£¹2
(
hšt
, 
x
.
fœ¡
, x.
£cÚd
);

500 
šlše
 
™”©Ü
 
š£¹2
(™”©Ü 
hšt
, cÚ¡ 
key_ty³
& 
key
, cÚ¡ 
d©a_ty³
& 
d©a
)

502  
	gŒ“
.
š£¹2
(
hšt
, 
key
, 
d©a
);

507 
	g‹m¶©e
 <
ty³Çme
 
	gIÅutI‹¿tÜ
>

508 
šlše
 
š£¹
(
IÅutI‹¿tÜ
 
fœ¡
, IÅutI‹¿tÜ 
Ï¡
)

510  
	gŒ“
.
š£¹
(
fœ¡
, 
Ï¡
);

516 
	g‹m¶©e
 <
ty³Çme
 
	gI‹¿tÜ
>

517 
šlše
 
bulk_lßd
(
I‹¿tÜ
 
fœ¡
, I‹¿tÜ 
Ï¡
)

519  
	gŒ“
.
bulk_lßd
(
fœ¡
, 
Ï¡
);

522 
	gpublic
:

527 
boŞ
 
”a£_Úe
(cÚ¡ 
key_ty³
& 
key
)

529  
Œ“
.
”a£_Úe
(
key
);

534 
size_ty³
 
”a£
(cÚ¡ 
key_ty³
& 
key
)

536  
	gŒ“
.
”a£
(
key
);

540 
”a£
(
™”©Ü
 
™”
)

542  
	gŒ“
.
”a£
(
™”
);

545 #ifdeà
BTREE_TODO


548 
”a£
(
™”©Ü
 , iterator )

550 
abÜt
();

554 #ifdeà
BTREE_DEBUG


556 
	gpublic
:

562 
´št
(
¡d
::
o¡»am
& 
os
) const

564 
Œ“
.
´št
(
os
);

568 
´št_Ëaves
(
¡d
::
o¡»am
& 
os
) const

570 
Œ“
.
´št_Ëaves
(
os
);

574 
	gpublic
:

579 
v”ify
() const

581 
Œ“
.
v”ify
();

584 
	gpublic
:

589 
dump
(
¡d
::
o¡»am
& 
os
) const

591 
Œ“
.
dump
(
os
);

598 
boŞ
 
»¡Üe
(
¡d
::
i¡»am
& 
is
)

600  
Œ“
.
»¡Üe
(
is
);

	@const_hweight.h

1 #iâdeà
_ASM_GENERIC_BITOPS_CONST_HWEIGHT_H_


2 
	#_ASM_GENERIC_BITOPS_CONST_HWEIGHT_H_


	)

7 
	#__cÚ¡_hweight8
(
w
) \

9 ((!!((
w
) & (1ULL << 0))) + \

10 (!!((
w
) & (1ULL << 1))) + \

11 (!!((
w
) & (1ULL << 2))) + \

12 (!!((
w
) & (1ULL << 3))) + \

13 (!!((
w
) & (1ULL << 4))) + \

14 (!!((
w
) & (1ULL << 5))) + \

15 (!!((
w
) & (1ULL << 6))) + \

16 (!!((
w
è& (1ULL << 7)))))

	)

18 
	#__cÚ¡_hweight16
(
w
è(
	`__cÚ¡_hweight8
(wè+ __cÚ¡_hweight8((wè>> 8 ))

	)

19 
	#__cÚ¡_hweight32
(
w
è(
	`__cÚ¡_hweight16
(wè+ __cÚ¡_hweight16((wè>> 16))

	)

20 
	#__cÚ¡_hweight64
(
w
è(
	`__cÚ¡_hweight32
(wè+ __cÚ¡_hweight32((wè>> 32))

	)

25 
	#hweight8
(
w
è(
	`__butš_cÚ¡ªt_p
(wè? 
	`__cÚ¡_hweight8
(wè: 
	`__¬ch_hweight8
(w))

	)

26 
	#hweight16
(
w
è(
	`__butš_cÚ¡ªt_p
(wè? 
	`__cÚ¡_hweight16
(wè: 
	`__¬ch_hweight16
(w))

	)

27 
	#hweight32
(
w
è(
	`__butš_cÚ¡ªt_p
(wè? 
	`__cÚ¡_hweight32
(wè: 
	`__¬ch_hweight32
(w))

	)

28 
	#hweight64
(
w
è(
	`__butš_cÚ¡ªt_p
(wè? 
	`__cÚ¡_hweight64
(wè: 
	`__¬ch_hweight64
(w))

	)

33 
	#HWEIGHT8
(
w
è(
	`BUILD_BUG_ON_ZERO
(!
	`__butš_cÚ¡ªt_p
(w)è+ 
	`__cÚ¡_hweight8
(w))

	)

34 
	#HWEIGHT16
(
w
è(
	`BUILD_BUG_ON_ZERO
(!
	`__butš_cÚ¡ªt_p
(w)è+ 
	`__cÚ¡_hweight16
(w))

	)

35 
	#HWEIGHT32
(
w
è(
	`BUILD_BUG_ON_ZERO
(!
	`__butš_cÚ¡ªt_p
(w)è+ 
	`__cÚ¡_hweight32
(w))

	)

36 
	#HWEIGHT64
(
w
è(
	`BUILD_BUG_ON_ZERO
(!
	`__butš_cÚ¡ªt_p
(w)è+ 
	`__cÚ¡_hweight64
(w))

	)

41 
	#HWEIGHT
(
w
è
	`HWEIGHT64
((
u64
)w)

	)

	@nv_backend.h

1 #iâdeà
_NV_BACKEND_H


2 
	#_NV_BACKEND_H


	)

3 
	#USING_NVRAM


	)

4 
	~<sys/mmª.h
>

5 
	~<¡dio.h
>

6 
	~<¡dšt.h
>

7 
	~<c¡ršg
>

8 
	~<libvmem.h
>

9 
	~<libpmem.h
>

12 
usšg
 
Çme¥aû
 
	g¡d
;

14 
	#mb
(è
asm
 vŞ©e("mãnû" ::: "memÜy")

	)

15 
	#rmb
(è
asm
 vŞ©e("lãnû" ::: "memÜy")

	)

16 
	#wmb
(è
asm
 vŞ©e("sãnû" ::: "memÜy")

	)

17 
	#_mm_şwb
(
addr
)\

18 
asm
 vŞ©e(".by‹ 0x66; x§veİˆ%0" : "+m" (*(vŞ©*)
addr
));

	)

20 
VMEM
 *
	$nv_ü—‹
(cÚ¡ *
dœ
, 
size_t
 
size
){

21 
VMEM
 *
vmp
 = 
NULL
;

22 if((
vmp
 = 
	`vmem_ü—‹
(
dœ
,
size
)è=ğ
NULL
) {

23 
cout
 << "vmem c»©”rÜ" << 
’dl
;

24 
	`ex™
(1);

26  
vmp
;

27 
	}
}

29 
šlše
 
	$şæush
(vŞ©*
p
)

31 
asm
 vŞ©e("şæush (%0)" ::"r"(
p
));

32 
	}
}

34 *
	$nv_m®loc
(
size_t
 
Ëngth
, 
VMEM
 *
vmp
 = 
NULL
) {

35 #ifdeà
USING_NVRAM


36 *
±r
;

37 
±r
 = 
	`vmem_m®loc
(
vmp
, 
Ëngth
);

38 if(
±r
 =ğ
NULL
) {

39 
cout
 << "vmem_®loø”rÜ " << 
’dl
;

41  
±r
;

43  
	`m®loc
(
Ëngth
);

45 
	}
}

47 
	$nv_æush
(*
±r
, 
size_t
 
size
) {

48 #ifdeà
USING_NVRAM


49 
	`pmem_³rsi¡
(
±r
, 
size
);

51 
	`mb
();

52 
	`şæush
(
m
);

54 
	}
}

56 *
	$nv_memıy
(*
de¡
, cÚ¡ *
¤c
, 
size_t
 
num
)

58 #ifdeà
USING_NVRAM


59  
	`memıy
(
de¡
, 
¤c
, 
num
);

61  
	`memıy
(
de¡
, 
¤c
, 
num
);

63 
	}
}

65 
	$nv_ä“
(
VMEM
 *
vmp
, *
±r
)

67 #ifdeà
USING_NVRAM


68 
	`vmem_ä“
(
vmp
, 
±r
);

70 
	`ä“
(
m
);

72 
	}
}

74 
	$nv_de¡roy
(
VMEM
 *
vmp
)

76 
	`vmem_d–‘e
(
vmp
);

77 
	}
}

	@skiplist.h

1 #iâdeà
STX_SKIPLIST_HEADER


2 
	#STX_SKIPLIST_HEADER


	)

3 
	~<®gÜ™hm
>

4 
	~<funùiÚ®
>

5 
	~<i¡»am
>

6 
	~<o¡»am
>

7 
	~<memÜy
>

8 
	~<¡dlib.h
>

9 
	~<as£¹.h
>

10 
	~<immšŒš.h
>

11 
	~<b™£t
>

12 
	~<şim™s
>

13 
	~<£t
>

14 
	~<unÜd”ed_m­
>

15 
	~"nv_back’d.h
"

16 
	~"b™m­.h
"

17 
	~<libvmem.h
>

18 
	~<libpmem.h
>

19 
	#PROBILITY
 0

	)

20 
	#SPAN_TH
 3

	)

23 
	#EXPECT_TRUE
(
x
è
	`__butš_ex³ù
(!!(x), 1)

	)

24 
	#EXPECT_FALSE
(
x
è
	`__butš_ex³ù
(!!(x), 0)

	)

26 
	#CAS_EXPECT_DOES_NOT_EXIST
 (0)

	)

27 
	#CAS_EXPECT_EXISTS
 (-1)

	)

28 
	#CAS_EXPECT_WHATEVER
 (-2)

	)

29 
	#SYNC_SWAP
(
addr
, 
x
è
	`__sync_lock_‹¡_ªd_£t
×ddr, x)

	)

30 
	#SYNC_CAS
(
addr
, 
Şd
, 
x
è
	`__sync_v®_com·»_ªd_sw­
×ddr, old, x)

	)

31 
	#SYNC_ADD
(
addr
, 
n
è
	`__sync_add_ªd_ãtch
×ddr,‚)

	)

32 
	#SYNC_FETCH_AND_OR
 
	`__sync_ãtch_ªd_Ü
(
addr
, 
x
)

	)

34 
	#MAX_LEVELS
 10

	)

35 
	#HEAD_COUNT
 63

	)

36 
	#TAG_VALUE
(
v
, 
g
è((vè|ag)

	)

37 
	#IS_TAGGED
(
v
, 
g
è((vè&ag)

	)

38 
	#STRIP_TAG
(
v
, 
g
è((vè& ~g)

	)

40 
	#PMEM_LEN
 1.999 * 1024 * 1024 * 1024

	)

42 
usšg
 
Çme¥aû
 
	g¡d
;

43 
size_t
 
	tm¬kabË_t
;

46 
	#MARK_NODE
(
x
è
	`TAG_VALUE
(
»š‹½»t_ÿ¡
<
m¬kabË_t
>(x), 0x1)

	)

47 
	#HAS_MARK
(
x
è(
	`IS_TAGGED
((x), 0x1è=ğ0x1)

	)

48 
	#GET_NODE
(
x
è(
»š‹½»t_ÿ¡
<
dnode_t
 *>(x))

	)

49 
	#STRIP_MARK
(
x
è(
»š‹½»t_ÿ¡
<
dnode_t
 *>(
	`STRIP_TAG
((x), 0x1)))

	)

51 
	euÆšk
 {

52 
	mFORCE_UNLINK
,

53 
	mASSIST_UNLINK
,

54 
	mDONT_UNLINK


57 
Çme¥aû
 
	g¡x
 {

58 
	g‹m¶©e
 <
ty³Çme
 
	g_Key
>

59 şas 
	cskli¡_deçuÉ_£t_Œa™s


61 cÚ¡ 
boŞ
 
	g£lfv”ify
 = 
çl£
;

62 cÚ¡ 
boŞ
 
	gdebug
 = 
çl£
;

63 cÚ¡ 
	gËaf¦Ùs
 = 256;

66 
	g‹m¶©e
 <
ty³Çme
 
	g_Key
,y³Çm
	g_V®ue
,y³Çm
	g_T¿™s
 = 
skli¡_deçuÉ_£t_Œa™s
<
_Key
> >

67 şas 
	cskli¡


69 
public
:

71 
_Key
 
	tkey_ty³
;

73 
_V®ue
 
	tv®ue_ty³
;

75 
_T¿™s
 
	tŒa™s
;

77 
	sd©©y³
 {

78 }
	gd©©y³_t
;

80 
	gpublic
:

83 
size_t
 
	tsize_ty³
;

85 
	g¡d
::
	t·œ
<
	tkey_ty³
, 
	tv®ue_ty³
> 
	t·œ_ty³
;

86 
	gpublic
:

89 cÚ¡ 
Ëaf¦Ùmax
 = 
Œa™s
::
Ëaf¦Ùs
;

91 
	g´iv©e
:

92 cÚ¡ 
rs
 = 12345678;

94 
	gpublic
:

95 
	skv_’Œy


97 
key_ty³
 
key
;

98 
v®ue_ty³
 
	gv®ue
;

99 }
	t’Œy_t
;

101 
	snv¿m_node
 {

102 
	gbs
[
BITS_TO_LONGS
(
Ëaf¦Ùmax
)] ;

103 
’Œy_t
 
	g¦Ù’Œy
[
Ëaf¦Ùmax
];

104 
nv¿m_node
 *
	gÃxt
;

106 
»£t
()

108 
mem£t
(
bs
, 0x0, 
BITS_TO_LONGS
(
Ëaf¦Ùmax
) * ());

111 
šlše
 
couÁ
() const

113  
hweight_lÚg
(*
bs
);

117 
šlše
 
boŞ
 
isfuÎ
() const

119  (
couÁ
(è=ğ
Ëaf¦Ùmax
è? 
Œue
 : 
çl£
;

123 
šlše
 
b™m­_£t
(
šdex
)

125 
__£t_b™
(
šdex
, 
bs
);

129 
šlše
 
b™m­_g‘
(
šdex
)

131  
cÚ¡_‹¡_b™
(
šdex
, 
bs
);

135 
šlše
 
b™m­_ş—r
(
šdex
)

137 
__ş—r_b™
(
šdex
, 
bs
);

141 
šlše
 
g‘_fœ¡_£t_b™
()

143  
__ffs
(*
bs
);

147 
šlše
 
g‘_Ï¡_£t_b™
()

149  
__æs
(*
bs
);

154 
šlše
 
g‘_fœ¡_ä“_b™
()

156  
__ffz
(*
bs
);

159 
šlše
 
£t
(
key_ty³
 
key
, 
v®ue_ty³
 
v®ue
) {

160 
	gšdex
 = 
g‘_fœ¡_ä“_b™
();

161 
	g¦Ù’Œy
[
šdex
].
	gkey
 = 
key
;

162 
	g¦Ù’Œy
[
šdex
].
	gv®ue
 = 
v®ue
;

163  
	gšdex
;

166 
v®ue_ty³
 
g‘
(
key_ty³
 
key
) {

167 
	gËaf¦Ùsu£d
 = 
couÁ
();

168 
	gi
 = 
Ëaf¦Ùsu£d
 - 1; i >= 0; i--) {

169 if(
b™m­_g‘
(
i
)){

170 if(
	g¦Ù’Œy
[
i
].
	gkey
 =ğ
key
){

171  
¦Ù’Œy
[
i
].
v®ue
;

178 }
	tnvnode_t
;

180 
	sd¿m_node
 {

181 
key_ty³
 
	gsum
;

182 
key_ty³
 
	gmš
;

183 
key_ty³
 
	gmax
;

184 
boŞ
 
	gis_h—d
;

185 
	gnum_Ëv–s
;

186 
nvnode_t
 *
	gnv_node
;

187 
d¿m_node
 *
	gÃxt
[
MAX_LEVELS
];

188 } 
	tdnode_t
;

190 
	s¦
 {

191 
dnode_t
 *
	gh—ds
[
HEAD_COUNT
];

192 cÚ¡ 
d©©y³_t
 *
	gty³
;

193 
	gcu¼’t_Ëv–s
[
HEAD_COUNT
];

194 *
	gdnodes_poŞ
;

195 
VMEM
 *
	gvmp
;

196 } 
	tskli¡_t
 ;

198 
	s¦_™”
 {

199 
dnode_t
 *
	gÃxt
;

202 
	gpublic
:

203 
nvnode_t
 *
nvnode_®loc
(
skli¡_t
 *
¦
){

204 
nvnode_t
 *
™em
 = 
»š‹½»t_ÿ¡
<nvnode_ˆ*>(
nv_m®loc
(Òvnode_t), 
¦
->
vmp
));

205 
	g™em
->
»£t
();

206 
	g™em
->
	gÃxt
 = 
NULL
;

207  
	g™em
;

210 
nvnode_æush
(
nvnode_t
 *
nv_node
)

212 
size_t
 
	gsz
 = (
nvnode_t
);

213 
nv_æush
((*)
nv_node
, 
sz
);

217 
dnode_š™
(
dnode_t
 *
™em
, 
num_Ëv–s
, 
key_ty³
 
max
 = 0, key_ty³ 
mš
 = 
ULLONG_MAX
, key_ty³ 
sum
 = 0, 
nvnode_t
 *
Ëaf
ğ
NULL
){

219 
as£¹
(
num_Ëv–s
 >ğ0 &&‚um_Ëv– <ğ
MAX_LEVELS
);

220 
	g™em
->
	gmax
 = 
max
;

221 if(
	gmš
 =ğ
ULLONG_MAX
)

222 
™em
->
mš
 = 
max
;

224 
	g™em
->
	gmš
 = 
mš
;

225 
	g™em
->
	gnum_Ëv–s
 = 
num_Ëv–s
;

226 
	g™em
->
	gsum
 = 
sum
;

227 
	g™em
->
	gnv_node
 = 
Ëaf
;

230 
dnodes_pŞl_®loc
(
skli¡_t
 *
¦
)

232 
	g¦
->
	gdnodes_poŞ
 = 
»š‹½»t_ÿ¡
<*>(
ÿÎoc
(1, 600000 * (
dnode_t
)));

235 
dnode_t
 *
g‘_dnode
(
skli¡_t
 *
¦
)

237 
dnode_t
 *
	gšode
 = 
»š‹½»t_ÿ¡
<dnode_ˆ*>(
¦
->
dnodes_poŞ
);

238 
	g¦
->
	gdnodes_poŞ
 +ğ(*
šode
);

239  
	gšode
;

242 
skli¡_t
 *
¦_®loc
 (cÚ¡ 
d©©y³_t
 *
ty³
) {

243 
skli¡_t
 *
	g¦
 = 
¡©ic_ÿ¡
<skli¡_ˆ*>(
m®loc
((skiplist_t)));

244 
	g¦
->
	gty³
 = 
ty³
;

245 
	g¦
->
	gvmp
 = 
nv_ü—‹
("/mÁ/nv¿m0", 
PMEM_LEN
);

246 if(
	g¦
->
	gvmp
 =ğ
NULL
){

247 
cout
 << "‚v_ü—‹ faed " << 
’dl
;

249 
dnodes_pŞl_®loc
(
¦
);

250 
	gi
;

251 
	gi
 = 0; i < 
	gHEAD_COUNT
; i++){

252 
nvnode_t
 *
	gËaf
 = 
nvnode_®loc
(
¦
);

253 
	g¦
->
	gh—ds
[
i
] = 
g‘_dnode
(
¦
);

254 
	g¦
->
	gcu¼’t_Ëv–s
[
i
] = 1;

255 
dnode_š™
(
¦
->
h—ds
[
i
], 
MAX_LEVELS
, 0, 0, 0, 
Ëaf
);

256 
mem£t
(
¦
->
h—ds
[
i
]->
Ãxt
, 0x0, 
MAX_LEVELS
 * (
dnode_t
 *));

257 
	g¦
->
	gh—ds
[
i
]->
	gis_h—d
 = 
Œue
;

258 if(
	gi
 > 0) {

259 
	gj
 = 0; j< 
	gMAX_LEVELS
; j++) {

260 
	g¦
->
	gh—ds
[
i
 - 1]->
	gÃxt
[
j
] = 
¦
->
h—ds
[i];

262 
	g¦
->
	gh—ds
[
i
-1]->
	gnv_node
->
	gÃxt
 = 
¦
->
h—ds
[i]->
nv_node
;

263 
nvnode_æush
(
¦
->
h—ds
[
i
-1]->
nv_node
);

266  
	g¦
;

269 
¦_de¡roy
(
skli¡_t
 *
¦
)

271 
nv_de¡roy
(
¦
->
vmp
);

274 
nvnode_t
 *
¥l™_Ëaf_node
(
skli¡_t
 *
¦
, 
key_ty³
 *
max_key
, key_ty³ *
mš_key
,

275 cÚ¡ 
key_ty³
 
rg‘_key
, 
nvnode_t
 *
Şd_nvnode
,‚vnode_ˆ*
Üig_nvnode
,

276 
key_ty³
 *
Ãw_sum
, key_ty³ *
Üig_sum
) {

277 
nvnode_t
 *
	gÃw_nvnode
 = 
nvnode_®loc
(
¦
);

278 
	gšdex
 = 
Şd_nvnode
->
couÁ
() - 1; index >= 0; index--){

279 if(
	gŞd_nvnode
->
b™m­_g‘
(
šdex
) != 1)

281 
key_ty³
 
	g‹mp_key
 = 
Şd_nvnode
->
¦Ù’Œy
[
šdex
].
key
;

282 
key_ty³
 
	g‹mp_v®ue
 = 
Şd_nvnode
->
¦Ù’Œy
[
šdex
].
v®ue
;

283 if(
	g‹mp_key
 <ğ
rg‘_key
 ) {

284 
ix
 = 
Ãw_nvnode
->
£t
(
‹mp_key
, 
‹mp_v®ue
);

285 
	gÃw_nvnode
->
b™m­_£t
(
ix
);

286 if(
	g‹mp_key
 >ğ*
max_key
){

287 *
max_key
 = 
‹mp_key
;

289 *
	gÃw_sum
 +ğ
‹mp_key
;

291 
	gix
 = 
Üig_nvnode
->
£t
(
‹mp_key
, 
‹mp_v®ue
);

292 
	gÜig_nvnode
->
b™m­_£t
(
ix
);

293 if(
	g‹mp_key
 <ğ*
mš_key
){

294 *
mš_key
 = 
‹mp_key
;

296 *
	gÜig_sum
 +ğ
‹mp_key
;

299  
	gÃw_nvnode
;

302 
šlše
 
key_ty³
 
g‘_¥l™_key
(
dnode_t
 *
šdex_node
)

304 
key_ty³
 
	grg‘
;

305 
	grg‘
 = (
šdex_node
->
sum
 - index_node->
mš
 - index_node->
max
è/ (
Ëaf¦Ùmax
 - 2);

306  
	grg‘
;

309 
¦_ä“
 (
skli¡_t
 *
¦
) {

310 
size_t
 
	gcouÁ
 = 0;

311 
dnode_t
 *
	g™em
 = 
¦
->
h—ds
[0]->
Ãxt
[0];

312 
	g™em
) {

313 
nv_ä“
(
¦
->
vmp
, (*)(
™em
->
nv_node
));

314 
	gcouÁ
++;

315 
	g™em
 = 
™em
->
Ãxt
[0];

317  
	gcouÁ
;

321 
dnode_t
 *
fšd_šdex_node_lookup
(
skli¡_t
 *
¦
, 
key_ty³
 
key
) {

322 
	gno_h—d
 = 
key
 / 34375000;

323 
dnode_t
 *
	g´ed
 = 
¦
->
h—ds
[
no_h—d
];

324 
dnode_t
 * 
	g™em
 = 
NULL
;

325 
	gËv–
 = 
¦
->
cu¼’t_Ëv–s
[
no_h—d
] - 1;†evel >= 0; --level) {

326 
dnode_t
 *
	g™em
 = 
´ed
->
Ãxt
[
Ëv–
];

327 
	g™em
 !ğ
NULL
 && 
™em
->
is_h—d
 !ğ
Œue
) {

328 if(
key
 > 
™em
->
max
) {

329 
´ed
 = 
™em
;

330 
	g™em
 = 
™em
->
Ãxt
[
Ëv–
];

331 }if(
	gkey
 < 
	g™em
->
	gmš
) {

335  
	g™em
;

339  
	gNULL
;

342 
dnode_t
 *
fšd_šode_bud
(dnode_ˆ**
´eds
, 
boŞ
 *
is_fuÎ
, 
skli¡_t
 *
¦
, 
key_ty³
 
key
) {

343 
	gno_h—d
 = 
key
 / 34375000;

344 
dnode_t
 *
	g´ed
 = 
¦
->
h—ds
[
no_h—d
];

345 
dnode_t
 *
	g™em
 = 
NULL
;

346 
	gËv–
 = 
¦
->
cu¼’t_Ëv–s
[
no_h—d
] - 1;†evel >= 0; --level) {

347 
dnode_t
 *
	g¡¬‹r
 = 
´ed
;

348 
	g™em
 = 
´ed
->
Ãxt
[
Ëv–
];

349 
	g¥ª
 = 0;

350 
	g™em
 !ğ
NULL
 && 
™em
->
is_h—d
 !ğ
Œue
) {

351 if(
key
 > 
™em
->
max
) {

352 if(
¥ª
 >ğ
SPAN_TH
 && 
Ëv–
 =ğ
™em
->
num_Ëv–s
 - 1) {

353 
™em
->
num_Ëv–s
 += 1;

354 if(
	g™em
->
	gnum_Ëv–s
 > 
	gMAX_LEVELS
)

355 
	g™em
->
	gnum_Ëv–s
 = 
MAX_LEVELS
;

356 if(
	g™em
->
	gnum_Ëv–s
 > 
	g¦
->
	gcu¼’t_Ëv–s
[
no_h—d
])

357 
	g¦
->
	gcu¼’t_Ëv–s
[
no_h—d
] = 
™em
->
num_Ëv–s
;

358 
	g™em
->
	gÃxt
[
Ëv–
 + 1] = 
¡¬‹r
->
Ãxt
[level + 1];

359 
	g¡¬‹r
->
	gÃxt
[
Ëv–
 + 1] = 
™em
;

360 
	g¥ª
 = 0;

362 
	g´ed
 = 
™em
;

363 
	g™em
 = 
™em
->
Ãxt
[
Ëv–
];

364 
	g¥ª
++;

365 }if(
	gkey
 < 
	g™em
->
	gmš
) {

366 if(
	g¥ª
 =ğ0 && 
¡¬‹r
->
Ãxt
[
Ëv–
 + 1] =ğ
™em
 &&†ev– =ğ™em->
num_Ëv–s
 - 2) {

367 
™em
->
num_Ëv–s
 -= 1;

368 
	g¡¬‹r
->
	gÃxt
[
Ëv–
 + 1] = 
™em
->
Ãxt
[level + 1];

369 
	g™em
->
	gÃxt
[
Ëv–
 + 1] = 
NULL
;

373 if(!
	g™em
->
	gnv_node
->
isfuÎ
()) {

374  
	g™em
;

380 if(
	g´eds
 !ğ
NULL
)

381 
´eds
[
Ëv–
] = 
´ed
;

383 if(
	g´eds
[0]->
	gÃxt
[0] &&…»ds[0]->Ãxt[0]->
	gis_h—d
 !ğ
Œue
){

384 
™em
 = 
´eds
[0]->
Ãxt
[0];

385 if(
	g™em
->
	gnv_node
->
isfuÎ
()) {

386 *
	gis_fuÎ
 = 
Œue
;

388  
	g™em
;

390 
	g™em
 = 
´eds
[0];

391 if(
	g™em
 =ğ
¦
->
h—ds
[
no_h—d
]){

392  
NULL
;

394 if(
	g™em
->
	gnv_node
->
isfuÎ
()) {

395  
	gNULL
;

398  
	g™em
;

403 
v®ue_ty³
 
¦_lookup
(
skli¡_t
 *
¦
, 
key_ty³
 
key
) {

404 
dnode_t
 *
	gšode
 = 
NULL
;

405 if(!
	gšode
) {

406 
	gšode
 = 
fšd_šdex_node_lookup
(
¦
, 
key
);

409 
	gfound
;

411 
	gfound
:

413 
nvnode_t
 *
	gnv_node
 =
NULL
;

414 if(
	gšode
)

415 
	gnv_node
 = 
šode
->
nv_node
;

417 
	gnÙ_found
;

419 if(
	gnv_node
) {

420  
	gnv_node
->
g‘
(
key
);

422 
	gnÙ_found
;

423 
	gnÙ_found
:

424 
cout
 << " s1 sl_lookup:‚Ù found key " << 
key
 << " iÀskli¡ "<< 
’dl
;

428 
key_ty³
 
¦_mš_key
 (
skli¡_t
 *
¦
) {

429 
dnode_t
 *
	g™em
 = 
GET_NODE
(
¦
->
h—d
->
Ãxt
[0]);

430 
	g™em
 !ğ
NULL
) {

431 
m¬kabË_t
 
Ãxt
 = 
™em
->next[0];

432 if(!
HAS_MARK
(
Ãxt
))

433  
	g™em
->
	gmax
;

434 
	g™em
 = 
STRIP_MARK
(
Ãxt
);

436  
	gNULL
;

439 
´št_height
(
skli¡_t
 *
¦
)

441 
dnode_t
 *
	g´ed
 = 
¦
->
h—d
;

442 
dnode_t
 *
	g™em
 = 
NULL
;

443 
	g™em
 = 
´ed
->
Ãxt
[0];

444 
	g™em
 !ğ
NULL
)

446 
cout
 << 
™em
->
num_Ëv–s
 << 
’dl
;

447 
	g™em
 = 
™em
->
Ãxt
[0];

451 
v®ue_ty³
 
¦_š£¹
(
skli¡_t
 *
¦
, 
key_ty³
 
Ãw_key
, v®ue_ty³ 
Ãw_v®
, 
nvnode_t
 *
nv_node
 = 
NULL
)

453 
dnode_t
 *
´eds
[
MAX_LEVELS
];

454 
boŞ
 
	gis_fuÎ
 = 
çl£
;

458 
dnode_t
 * 
	gšode
 = 
fšd_šode_bud
(
´eds
, &
is_fuÎ
, 
¦
, 
Ãw_key
);

465 ià(
	gšode
) {

466 
	gnv_node
 = 
šode
->
nv_node
;

467 if(!
	gis_fuÎ
) {

468 
	gix
 = 
nv_node
->
£t
(
Ãw_key
, 
Ãw_v®
);

469 
nv_æush
((*)(
nv_node
->
¦Ù’Œy
+
ix
), (
’Œy_t
));

470 
	gb™m­_sz
 = 
BITS_TO_LONGS
(
Ëaf¦Ùmax
) * ();

472 *
	gshadow_bs
 = 
»š‹½»t_ÿ¡
<*>(
nv_m®loc
(
b™m­_sz
, 
¦
->
vmp
));

473 
memıy
(
shadow_bs
, 
nv_node
->
bs
, 
b™m­_sz
);

474 
nv_æush
((*)
shadow_bs
, 
b™m­_sz
);

476 
	gnv_node
->
b™m­_£t
(
ix
);

477 
nv_æush
((*)&(
nv_node
->
bs
), 
b™m­_sz
);

482 if(
	gÃw_key
 < 
	gšode
->
	gmš
)

483 
	gšode
->
	gmš
 = 
Ãw_key
;

484 if(
	gÃw_key
 > 
	gšode
->
	gmax
)

485 
	gšode
->
	gmax
 = 
Ãw_key
;

486 
	gšode
->
	gsum
 +ğ
Ãw_key
;

488 
key_ty³
 
	gmš_key
 = 
ULLONG_MAX
;

489 
key_ty³
 
	gmax_key
 = 0;

490 
key_ty³
 
	gÜig_sum
 = 0;

491 
key_ty³
 
	gÃw_sum
 = 0;

492 
key_ty³
 
	grg‘_key
 = 0;

495 
	grg‘_key
 = 
g‘_¥l™_key
(
šode
);

496 
nvnode_t
 *
	gÜig_nvnode
 = 
nvnode_®loc
(
¦
);

497 
nvnode_t
 *
	gÃw_nvnode
 = 
¥l™_Ëaf_node
(
¦
, &
max_key
, &
mš_key
, 
rg‘_key
, 
nv_node
, 
Üig_nvnode
, &
Ãw_sum
, &
Üig_sum
);

502 if(
	gÃw_key
 < 
	gmš_key
) {

503 if(
	gÃw_key
 >ğ
max_key
)

504 
max_key
 = 
Ãw_key
;

505 
	gix
 = 
Ãw_nvnode
->
£t
(
Ãw_key
, 
Ãw_v®
);

506 
	gÃw_nvnode
->
b™m­_£t
(
ix
);

507 
	gÃw_sum
 +ğ
Ãw_key
;

509 
	gix
 = 
Üig_nvnode
->
£t
(
Ãw_key
, 
Ãw_v®
);

510 
	gÜig_nvnode
->
b™m­_£t
(
ix
);

511 
	gÜig_sum
 +ğ
Ãw_key
;

517 
	gÜig_nvnode
->
	gÃxt
 = 
nv_node
->
Ãxt
;

518 
	gÃw_nvnode
->
	gÃxt
 = 
Üig_nvnode
;

522 
nvnode_æush
(
Üig_nvnode
);

523 
nvnode_æush
(
Ãw_nvnode
);

525 #ifdeà
DEBUG


526 
	gcout
 << "aá” s¶™…»ds[0] i " << 
	g´eds
[0] << 
	g’dl
;

528 
SYNC_CAS
(&
´eds
[0]->
nv_node
->
Ãxt
,‚v_node, 
Ãw_nvnode
);

529 
nv_ä“
(
¦
->
vmp
, (*)
nv_node
);

533 
dnode_t
 *
	gÃw_šode
 = 
g‘_dnode
(
¦
);

534 
dnode_š™
(
Ãw_šode
, 1, 
max_key
, 
mš
(
šode
->mš, 
Ãw_key
), 
Ãw_sum
, 
Ãw_nvnode
);

535 
	gšode
->
	gmš
 = 
mš_key
;

536 
	gšode
->
	gsum
 = 
Üig_sum
;

537 
	gËv–
 = 0;†ev– < 
	gÃw_šode
->
	gnum_Ëv–s
;†evel++){

538 
dnode_t
 *
	g´ed
 = 
´eds
[
Ëv–
];

539 
	gÃw_šode
->
	gÃxt
[
Ëv–
] = 
´ed
->
Ãxt
[level];

540 
	g´ed
->
	gÃxt
[
Ëv–
] = 
Ãw_šode
;

543 
	gšode
->
	gnv_node
 = 
Üig_nvnode
;

552 
as£¹
(
´eds
[0]);

553 
nvnode_t
 *
	gnv_node
 = 
nvnode_®loc
(
¦
);

554 
dnode_t
 *
	gÃw_šode
 = 
g‘_dnode
(
¦
);

555 
dnode_š™
(
Ãw_šode
, 1, 
Ãw_key
, 
ULLONG_MAX
, 0, 
nv_node
);

556 if(!
	gnv_node
->
isfuÎ
()) {

557 
	gix
 = 
nv_node
->
£t
(
Ãw_key
, 
Ãw_v®
);

558 
nv_æush
((*)(
nv_node
->
¦Ù’Œy
+
ix
), (
’Œy_t
));

559 
	gb™m­_sz
 = 
BITS_TO_LONGS
(
Ëaf¦Ùmax
) * ();

560 
	gnv_node
->
b™m­_£t
(
ix
);

561 
nv_æush
((*)&(
nv_node
->
bs
), 
b™m­_sz
);

562 
	gÃw_šode
->
	gsum
 +ğ
Ãw_key
;

565 
dnode_t
 *
	g´ed
 = 
´eds
[0];

566 
SYNC_CAS
(&
´ed
->
nv_node
->
Ãxt
, 0,‚v_node);

568 
	gËv–
 = 0;†ev– < 
	gÃw_šode
->
	gnum_Ëv–s
; ++level) {

569 
dnode_t
 *
	g´ed
 = 
´eds
[
Ëv–
];

570 
	gÃw_šode
->
	gÃxt
[
Ëv–
] = 
´ed
->
Ãxt
[level];

571 
	g´ed
->
	gÃxt
[
Ëv–
] = 
Ãw_šode
;

573 
	gÃw_šode
->
	gnv_node
 = 
nv_node
;

583 
v®ue_ty³
 
¦_»move
 (
skli¡_t
 *
¦
, 
key_ty³
 
key
) {

584 #ifdeà
DEBUG


585 
	gcout
 << "s1 sl_»move:„emovšg i‹m w™h key " << 
	gkey
 << " from skli¡ " << 
	g¦
 << 
	g’dl
;

587 
dnode_t
 *
	g´eds
[
MAX_LEVELS
];

588 
dnode_t
 *
	g™em
 = 
fšd_´eds_šdex
(
´eds
, 
NULL
, 
¦
->
high_w©”
, sl, 
key
, 
ASSIST_UNLINK
);

589 if(
	g™em
 =ğ
NULL
) {

590 #ifdeà
DEBUG


591 
cout
 << "s3 sl_»move:„emovçed,‡À™em w™h‡ m©chšg key dÛ nÙƒxi¡ iÀthskli¡" << 
’dl
;

593  
	gNULL
;

599 
m¬kabË_t
 
	gŞd_Ãxt
 = 0;

600 
	gËv–
 = 
™em
->
num_Ëv–s
 - 1;†evel >= 0; --level) {

601 
m¬kabË_t
 
	gÃxt
;

602 
	gŞd_Ãxt
 = 
™em
->
Ãxt
[
Ëv–
];

604 #ifdeà
DEBUG


605 
	gcout
 << "s3 sl_»move: m¬kšg i‹m‡ˆËv– " << 
	gËv–
 << "Ãxˆ" << 
	gŞd_Ãxt
 << 
	g’dl
;

607 
	gÃxt
 = 
Şd_Ãxt
;

608 
	gŞd_Ãxt
 = 
SYNC_CAS
(&
™em
->
Ãxt
[
Ëv–
],‚ext, 
MARK_NODE
(
¡©ic_ÿ¡
<
dnode_t
 *>(next)));

609 if(
HAS_MARK
(
Şd_Ãxt
)) {

610 #ifdeà
DEBUG


611 
	gcout
 << " s2 sl_»move: " << 
	g™em
 << " i ®»ady m¬ked fÜ„emovby‡nÙh”h»ad‚exˆ" << 
	gŞd_Ãxt
 << 
	g’dl
;

613 if(
	gËv–
 == 0)

614  
NULL
;

617 }
	gÃxt
 !ğ
Şd_Ãxt
);

622 
v®ue_ty³
 
	gv®
 = 
SYNC_SWAP
(&
™em
->
mš
, 
NULL
);

623 #ifdeà
DEBUG


624 
	gcout
 << " sw sl_»move:„•Ïûd i‹m " << 
	g™em
 << " ' v®uwh™ NULL " << 
	g’dl
;

627 
fšd_´eds_šdex
(
NULL
, NULL, 0, 
¦
, 
key
, 
FORCE_UNLINK
);

630 if(
	g¦
->
	gty³
 !=
NULL
) {

631 
ä“
(
¡©ic_ÿ¡
<*>(
™em
->
max
));

633 
ä“
(
™em
);

635  
	gv®
;

638 
¦_™”
 * 
¦_™”_begš
(
skli¡_t
 *
¦
, 
key_ty³
 
key
) {

639 
¦_™”
 *
	g™”
 = 
¡©ic_ÿ¡
<¦_™” *>(
m®loc
((sl_iter)));

640 if(
	gkey
 !ğ
NULL
) {

641 
fšd_´eds_šdex
(
NULL
, &
™”
->
Ãxt
, 1, 
¦
, 
key
 ,
DONT_UNLINK
);

643 
	g™”
->
	gÃxt
 = 
GET_NODE
(
¦
->
h—d
->
Ãxt
[0]);

645  
	g™”
;

648 
v®ue_ty³
 
¦_™”_Ãxt
(
¦_™”
 *
™”
, 
key_ty³
 * 
key_±r
) {

649 
dnode_t
 *
	g™em
 = 
™”
->
Ãxt
;

650  
	g™em
 !ğ
NULL
 && 
HAS_MARK
(
™em
->
Ãxt
[0])) {

651 
™em
 = 
STRIP_MARK
(™em->
Ãxt
[0]);

653 if(
	g™em
 =ğ
NULL
) {

654 
™”
->
Ãxt
 = 
NULL
;

655  
	gNULL
;

658 
	g™”
->
	gÃxt
 = 
STRIP_MARK
(
™em
->
Ãxt
[0]);

659 iàĞ
	gkey_±r
 !ğ
NULL
) {

660 *
key_±r
 = 
™em
->
max
;

662  
	g™em
->
	gmš
;

665 
¦_™”_ä“
 ( 
¦_™”
 *
™”
) {

666 
ä“
(
™”
);

	@skiplist_multimap.h

1 #iâdeà
STX_STX_SKIPLIST_MULTIMAP_H_HEADER


2 
	#STX_STX_SKIPLIST_MULTIMAP_H_HEADER


	)

4 
	~"skli¡.h
"

6 
Çme¥aû
 
	g¡x
{

7 
	g‹m¶©e
 <
ty³Çme
 
	g_Key
,y³Çm
	g_V®ue
,

8 
ty³Çme
 
	g_Com·»
 = 
¡d
::
Ëss
<
_Key
>,

9 
ty³Çme
 
	g_T¿™s
 = 
skli¡_deçuÉ_£t_Œa™s
<
_Key
>,

10 
ty³Çme
 
	g_AÎoc
 = 
¡d
::
®loÿtÜ
<
_Key
> >

11 şas 
	cskli¡_muÉim­


13 
public
:

14 
_Key
 
	tkey_ty³
;

15 
_V®ue
 
	tv®ue_ty³
;

16 
_Com·»
 
	tkey_com·»
;

17 
_T¿™s
 
	tŒa™s
;

18 
_AÎoc
 
	t®loÿtÜ_ty³
;

19 
	g´iv©e
:

20 
	sem±y_¡ruù


22 
	gpublic
:

23 
em±y_¡ruù
 
	tem±y_ty³
;

25 
	g¡d
::
	t·œ
<
	tkey_ty³
, 
	tv®ue_ty³
> 
	td©a_ty³
;

27 
	gskli¡_muÉim­
<
	tkey_ty³
, 
	tv®ue_ty³
, 
	tkey_com·»
, 
	tŒa™s
, 
	t®loÿtÜ_ty³
> 
	t£lf_ty³
;

29 
	g¡x
::
	tskli¡
<
	tkey_ty³
, 
	tv®ue_ty³
, 
	tŒa™s
> 
	tskli¡_im¶
;

31 
ty³Çme
 
	tskli¡_im¶
::
	t¦_™”
 
	t™”©Ü
;

33 
ty³Çme
 
	tskli¡_im¶
::
	tskli¡_t
 
	t¦
;

34 
¦
 * 
	g¦i¡
;

36 
	g´iv©e
:

37 
skli¡_im¶
 
li¡
;

38 
	gpublic
:

39 
skli¡_muÉim­
()

41 
¦i¡
 = 
li¡
.
¦_®loc
(
NULL
);

44 ~
skli¡_muÉim­
()

46 #ifdeà
PROFILING


47 
	gcout
 << "‚v’Œy_couÁ "<<
	gli¡
.
	gnv’Œy_couÁ
 << "‚vb™m­_couÁ " <<†i¡.
	gnvb™m­_couÁ
 << "‚vnode_couÁ " <<†i¡.
	gnvnode_couÁ
 << " s¶™_couÁ " <<†i¡.
	g¥l™_couÁ
<<
	g’dl
;

49 
	gcout
 << "†ev– 10 " << 
	gli¡
.
	gËv–10_h™
 << 
	g’dl
;

50 
	gcout
 << "†ev– 9 " << 
	gli¡
.
	gËv–9_h™
 << 
	g’dl
;

51 
	gcout
 << "†ev– 8 " << 
	gli¡
.
	gËv–8_h™
 << 
	g’dl
;

52 
	gcout
 << "†ev– 7 " << 
	gli¡
.
	gËv–7_h™
 << 
	g’dl
;

53 
	gcout
 << "†ev– 6 " << 
	gli¡
.
	gËv–6_h™
 << 
	g’dl
;

54 
	gcout
 << "†ev– 5 " << 
	gli¡
.
	gËv–5_h™
 << 
	g’dl
;

55 
	gcout
 << "†ev– 4 " << 
	gli¡
.
	gËv–4_h™
 << 
	g’dl
;

56 
	gcout
 << "†ev– 3 " << 
	gli¡
.
	gËv–3_h™
 << 
	g’dl
;

57 
	gcout
 << "†ev– 2 " << 
	gli¡
.
	gËv–2_h™
 << 
	g’dl
;

58 
	gcout
 << "†ev– 1 " << 
	gli¡
.
	gËv–1_h™
 << 
	g’dl
;

59 
	gcout
 << "†ev– 0 " << 
	gli¡
.
	gËv–0_h™
 << 
	g’dl
;

61 
	gËaf_couÁ
 = 
li¡
.
¦_ä“
(
¦i¡
);

63 
	gli¡
.
¦_de¡roy
(
¦i¡
);

66 
	gpublic
:

67 
šlše
 
v®ue_ty³
 
š£¹
(cÚ¡ 
key_ty³
 &
key
, cÚ¡ v®ue_ty³ &
v®ue
)

69  
	gli¡
.
¦_š£¹
(
¦i¡
, 
key
, 
v®ue
);

72 
šlše
 
v®ue_ty³
 
š£¹
(cÚ¡ 
d©a_ty³
& 
x
)

74  
š£¹
(
x
.
fœ¡
, x.
£cÚd
);

77 
šlše
 
v®ue_ty³
 
fšd
(cÚ¡ 
key_ty³
 &
key
)

79  
	gli¡
.
¦_lookup
(
¦i¡
, 
key
);

82 
šlše
 
»Ügniz©iÚ
()

	@speedtest.cc

14 
	~<sys/time.h
>

15 
	~<f¡»am
>

16 
	~<io¡»am
>

17 
	~<iomª
>

18 
	~<¡ršg
>

19 
	~<c¡dlib
>

20 
	~<ÿs£¹
>

22 
	~<£t
>

23 
	~<ext/hash_£t
>

26 
	~<m­
>

27 
	~<ext/hash_m­
>

29 
	~"bŒ“_muÉim­.h
"

31 
	~"skli¡_muÉim­.h
"

32 
	~<uni¡d.h
>

33 
	~"nv_back’d.h
"

34 
	~<time.h
>

37 cÚ¡ 
	gmax¦Ù
 = 64;

44 cÚ¡ 
	gmš™ems
 = 5120000 * 5 ;

51 cÚ¡ 
	gmax™ems
 = 5120000 * 5;

53 cÚ¡ 
	g¿nd£ed
 = 34234235;

56 cÚ¡ 
	gmš_node¦Ùs
 = 4;

57 cÚ¡ 
	gmax_node¦Ùs
 = 256;

60 
šlše
 
	$time¡amp
()

62 
timev®
 
tv
;

63 
	`g‘timeofday
(&
tv
, 
NULL
);

64  
tv
.
tv_£c
 +v.
tv_u£c
 * 0.000001;

65 
	}
}

68 
	g‹m¶©e
 <
	g_šÃr¦Ùs
, 
	g_Ëaf¦Ùs
>

69 
şass
 
	gbŒ“_Œa™s_¥“d
 : 
¡x
::
bŒ“_deçuÉ_£t_Œa™s
<>

71 
public
: cÚ¡ 
boŞ
 
£lfv”ify
 = 
çl£
;

72 cÚ¡ 
boŞ
 
	gdebug
 = 
çl£
;

74 cÚ¡ 
	gËaf¦Ùs
 = 
_šÃr¦Ùs
;

75 cÚ¡ 
	gšÃr¦Ùs
 = 
_Ëaf¦Ùs
;

77 cÚ¡ 
size_t
 
	gbš£¬ch_th»shŞd
 = 256 * 1024 * 1024;

80 
	g‹m¶©e
 <
	g_Ëaf¦Ùs
>

81 
şass
 
	gskli¡_Œa™s_¥“d
 : 
¡x
::
skli¡_deçuÉ_£t_Œa™s
<>

83 
public
:

84 cÚ¡ 
Ëaf¦Ùs
 = 
_Ëaf¦Ùs
;

90 
	g‹m¶©e
 <
ty³Çme
 
	gS‘Ty³
>

91 şas 
	cTe¡_S‘_In£¹


93 
	mpublic
:

94 
ex¶ic™
 
	$Te¡_S‘_In£¹
() { }

96 
	$run
(
™ems
)

98 
S‘Ty³
 
£t
;

100 
	`¤ªd
(
¿nd£ed
);

101 
i
 = 0; i < 
™ems
; i++)

102 
£t
.
	`š£¹
(
	`¿nd
());

103 
	`as£¹
(
£t
.
	`size
(è=ğ
™ems
);

104 
	}
}

108 
	g‹m¶©e
 <
ty³Çme
 
	gS‘Ty³
>

109 şas 
	cTe¡_S‘_In£¹FšdD–‘e


111 
	mpublic
:

112 
ex¶ic™
 
	$Te¡_S‘_In£¹FšdD–‘e
() { }

114 
	$run
(
™ems
)

116 
S‘Ty³
 
£t
;

118 
	`¤ªd
(
¿nd£ed
);

119 
i
 = 0; i < 
™ems
; i++)

120 
£t
.
	`š£¹
(
	`¿nd
());

122 
	`as£¹
(
£t
.
	`size
(è=ğ
™ems
);

124 
	`¤ªd
(
¿nd£ed
);

125 
i
 = 0; i < 
™ems
; i++)

126 
£t
.
	`fšd
(
	`¿nd
());

128 
	`¤ªd
(
¿nd£ed
);

129 
i
 = 0; i < 
™ems
; i++)

130 
£t
.
	`”a£
(£t.
	`fšd
(
	`¿nd
()));

132 
	`as£¹
(
£t
.
	`em±y
());

133 
	}
}

137 
	g‹m¶©e
 <
ty³Çme
 
	gS‘Ty³
>

138 şas 
	cTe¡_S‘_Fšd


140 
	mpublic
:

141 
S‘Ty³
 
£t
;

143 
ex¶ic™
 
	$Te¡_S‘_Fšd
(
™ems
)

145 
	`¤ªd
(
¿nd£ed
);

146 
i
 = 0; i < 
™ems
; i++)

147 
£t
.
	`š£¹
(
	`¿nd
());

149 
	`as£¹
(
£t
.
	`size
(è=ğ
™ems
);

152 
	$run
(
™ems
)

154 
	`¤ªd
(
¿nd£ed
);

155 
i
 = 0; i < 
™ems
; i++)

156 
£t
.
	`fšd
(
	`¿nd
());

157 
	}
}

161 
	g‹m¶©e
 <‹m¶©<
ty³Çme
 
	gS‘Ty³
> 
şass
 
	gTe¡CÏss
>

162 şas 
	cTe¡FaùÜy_S‘


164 
	mpublic
:

166 
Te¡CÏss
<
	t¡d
::
	tmuÉi£t
<> > 
	tStdS‘
;

169 
	mTe¡CÏss
<
	t__gnu_cxx
::
	thash_muÉi£t
<> > 
	tHashS‘
;

175 
	m‹m¶©e
 <
	mSlÙs
>

176 
şass
 
	mBŒ“S‘


177 : 
public
 
Te¡CÏss
<

178 
¡x
::
bŒ“_muÉi£t
<, 
	m¡d
::
Ëss
<>,

179 
	mbŒ“_Œa™s_¥“d
<
	mSlÙs
, Slots> > >

181 
	mpublic
:

182 
ex¶ic™
 
BŒ“S‘
(
n
)

183 : 
Te¡CÏss
<

184 
¡x
::
bŒ“_muÉi£t
<, 
	m¡d
::
Ëss
<>,

185 
	mbŒ“_Œa™s_¥“d
<
	mSlÙs
, SlÙs> > >(
	mn
)

191 
şass
 
	gTŒ“S‘
 : 
public
 
Te¡CÏss
<
¡x
::
‰»e_£t
<, 
	g¡d
::
Ëss
<> > >

193 
public
:

194 
ex¶ic™
 
TŒ“S‘
(
n
)

195 : 
Te¡CÏss
<

196 
¡x
::
‰»e_£t
<, 
	g¡d
::
Ëss
<> > >(
n
)

201 
ÿÎ_‹¡ruÂ”
(
¡d
::
o¡»am
& 
os
, 
™ems
);

207 
	g‹m¶©e
 <
ty³Çme
 
	gM­Ty³
>

208 şas 
	cTe¡_M­_In£¹


210 
	mpublic
:

211 
ex¶ic™
 
	$Te¡_M­_In£¹
() { }

213 
	$run
(
™ems
)

215 
M­Ty³
 
m­
;

217 
	`¤ªd
(()
	`time
(
NULL
));

218 
i
 = 0; i < 
™ems
; i++) {

220 
r
 = 
	`¿nd
();

221 
m­
.
	`š£¹
(
¡d
::
	`make_·œ
(
r
,„));

223 
	}
}

227 
	g‹m¶©e
 <
ty³Çme
 
	gM­Ty³
>

228 şas 
	cTe¡_M­_In£¹FšdD–‘e


230 
	mpublic
:

231 
ex¶ic™
 
	$Te¡_M­_In£¹FšdD–‘e
() { }

233 
	$run
(
™ems
)

235 
M­Ty³
 
m­
;

238 
i
 = 0; i < 
™ems
; i++) {

239 
r
 = 
	`¿nd
();

240 
m­
.
	`š£¹
(
¡d
::
	`make_·œ
(
r
,„));

245 
	`¤ªd
(
¿nd£ed
);

246 
i
 = 0; i < 
™ems
; i++)

247 
m­
.
	`fšd
(
	`¿nd
());

249 
	`¤ªd
(
¿nd£ed
);

251 
i
 = 0; i < 
™ems
; i++)

252 
m­
.
	`”a£
(m­.
	`fšd
(
	`¿nd
()));

254 
	`as£¹
(
m­
.
	`em±y
());

256 
	}
}

260 
	g‹m¶©e
 <
ty³Çme
 
	gM­Ty³
>

261 şas 
	cTe¡_M­_Fšd


263 
	mpublic
:

264 
M­Ty³
 
m­
;

265 
	mveùÜ
<> 
	mvec
;

266 
ex¶ic™
 
	$Te¡_M­_Fšd
(
™ems
)

269 
	`¤ªd
(()
	`time
(
NULL
));

270 
i
 = 0; i < 
™ems
; i++) {

271 
r
 = 
	`¿nd
() ;

273 
m­
.
	`š£¹
(
¡d
::
	`make_·œ
(
r
,„));

274 
vec
.
	`push_back
(
r
);

276 
cout
 << "ch¬l›»w™h " << 
™ems
 << " ha b“Àbuˆ" << 
’dl
;

279 
	$run
(
™ems
)

282 
veùÜ
<>:: 
™”©Ü
 
™
;

283 
™
 = 
vec
.
	`begš
(); it!ğvec.
	`’d
(); ++it) {

285 if(
m­
.
	`fšd
(*
™
) != *it){

294 
i
 = 0; i < 
™ems
; i++) {

295 
r
 = 
	`¿nd
() ;

297 if(
m­
.
	`fšd
(
r
).
	`d©a
() !=„){

299 
cout
 << "thi i ¨looku°”rÜ " << 
’dl
;

304 
	}
}

308 
	g‹m¶©e
 <‹m¶©<
ty³Çme
 
	gM­Ty³
> 
şass
 
	gTe¡CÏss
>

309 şas 
	cTe¡FaùÜy_M­


311 
	mpublic
:

313 
Te¡CÏss
<
	t¡d
::
	tmuÉim­
<, > > 
	tStdM­
;

316 
	mTe¡CÏss
<
	t__gnu_cxx
::
	thash_muÉim­
<, > > 
	tHashM­
;

323 
	m‹m¶©e
 <
	mSlÙs
>

324 
şass
 
	mBŒ“M­


325 : 
public
 
Te¡CÏss
<

326 
¡x
::
bŒ“_muÉim­
<, ,

327 
	m¡d
::
Ëss
<>,

328 
	mbŒ“_Œa™s_¥“d
<
	mSlÙs
, Slots> > >

330 
	mpublic
:

331 
ex¶ic™
 
BŒ“M­
(
n
)

332 : 
Te¡CÏss
<

333 
¡x
::
bŒ“_muÉim­
<, ,

334 
	m¡d
::
Ëss
<>,

335 
	mbŒ“_Œa™s_¥“d
<
	mSlÙs
, SlÙs> > >(
	mn
)

339 
şass
 
	gTŒ“M­
: 
public
 
Te¡CÏss
<
¡x
::
‰»e_muÉim­
<, , 
	g¡d
::
Ëss
<> > >

341 
public
:

342 
ex¶ic™
 
TŒ“M­
(
n
)

343 :
Te¡CÏss
<

344 
¡x
::
‰»e_muÉim­
<, , 
	g¡d
::
Ëss
<> > >(
n
)

348 
	g‹m¶©e
 <
	gSlÙs
>

349 
şass
 
	gSkli¡M­


350 : 
public
 
Te¡CÏss
<

351 
¡x
::
skli¡_muÉim­
<, , 
	g¡d
::
Ëss
<>,

352 
	gskli¡_Œa™s_¥“d
<
	gSlÙs
> > >

354 
	gpublic
:

355 
ex¶ic™
 
Skli¡M­
(
n
)

356 :
Te¡CÏss
<

357 
¡x
::
skli¡_muÉim­
<, , 
	g¡d
::
Ëss
<>,

358 
	gskli¡_Œa™s_¥“d
<
	gSlÙs
> > >(
	gn
)

363 
ÿÎ_‹¡ruÂ”
(
¡d
::
o¡»am
& 
os
, 
™ems
);

368 
	g»³©uÁ
;

371 
	g‹m¶©e
 <
ty³Çme
 
	gTe¡CÏss
>

372 
	$‹¡ruÂ”_loİ
(
¡d
::
o¡»am
& 
os
, 
™ems
)

374 
runs
 = 0;

375 
ts1
, 
ts2
;

379 
runs
 = 0;

383 
Te¡CÏss
 
	`‹¡
(
™ems
);

386 
ts1
 = 
	`time¡amp
();

388 
tÙ®‹¡s
 = 0;

389 
tÙ®‹¡s
 <ğ
»³©uÁ
;Ù®‹¡ +ğ
™ems
)

391 
‹¡
.
	`run
(
™ems
);

392 ++
runs
;

395 
ts2
 = 
	`time¡amp
();

398 ià((
ts2
 - 
ts1
è< 1.0è
»³©uÁ
 *= 2;

399 }(
ts2
 - 
ts1
) < 1.0);

401 
¡d
::
û¼
 << "dØ" << 
™ems
 << "„•—ˆ" << (
»³©uÁ
 / items)

402 << "im" << (
ts2
 - 
ts1
) << "\n";

404 
os
 << 
¡d
::
fixed
 << std::
	`£»cisiÚ
(10)

405 << ((
ts2
 - 
ts1
è/ 
runs
è<< " " << 
¡d
::
æush
;

406 
	}
}

410 
	g‹m¶©e
 <‹m¶©<
	gSlÙs
> 
şass
 
	gfunùiÚ®
, 
	gLow
, 
	gHigh
>

411 şas 
	cbŒ“_¿nge


413 
	mpublic
:

414 
	$İ”©Ü
 (è(
¡d
::
o¡»am
& 
os
, 
™ems
)

416 
‹¡ruÂ”_loİ
<
funùiÚ®
<
Low
> >(
os
, 
™ems
);

417 
bŒ“_¿nge
<
funùiÚ®
, 
Low
 + 2, 
High
>()(
os
, 
™ems
);

419 
	}
};

421 
	g‹m¶©e
 <‹m¶©<
	gSlÙs
> 
şass
 
	gfunùiÚ®
, 
	gLow
>

422 
şass
 
	gbŒ“_¿nge
<
	gfunùiÚ®
, 
	gLow
, Low>

424 
	gpublic
:

425 
İ”©Ü
 (è(
¡d
::
o¡»am
& 
os
, 
	g™ems
)

427 
	g‹¡ruÂ”_loİ
<
	gfunùiÚ®
<
	gLow
> >(
	gos
, 
	g™ems
);

431 
	g‹m¶©e
 <‹m¶©<
ty³Çme
 
	gTy³
> 
şass
 
	gTe¡CÏss
>

432 
	gTe¡FaùÜy_S‘
<
	gTe¡CÏss
>::
	$ÿÎ_‹¡ruÂ”
(

433 
¡d
::
o¡»am
& 
os
, 
™ems
)

435 
os
 << 
™ems
 << " " << 
¡d
::
æush
;

436 
cout
 << "Te¡FaùÜy_S‘ c®l_‹¡ruÂ”: i‹m i " << 
™ems
 << 
’dl
;

438 
cout
 << "StdS‘ " << 
’dl
;

439 
‹¡ruÂ”_loİ
<
StdS‘
>(
os
, 
™ems
);

440 
cout
 << "HashS‘ " << 
’dl
;

441 
‹¡ruÂ”_loİ
<
HashS‘
>(
os
, 
™ems
);

446 
cout
 << "BŒ“S‘ " << 
’dl
;

449 
‹¡ruÂ”_loİ
<
BŒ“S‘
<4> >(
os
, 
™ems
);

450 
i
 = 6; i < 8; i +ğ2è
os
 << "0 ";

451 
‹¡ruÂ”_loİ
<
BŒ“S‘
<8> >(
os
, 
™ems
);

452 
i
 = 10; i < 16; i +ğ2è
os
 << "0 ";

453 
‹¡ruÂ”_loİ
<
BŒ“S‘
<16> >(
os
, 
™ems
);

454 
i
 = 18; i < 32; i +ğ2è
os
 << "0 ";

455 
‹¡ruÂ”_loİ
<
BŒ“S‘
<32> >(
os
, 
™ems
);

456 
i
 = 34; i < 64; i +ğ2è
os
 << "0 ";

457 
‹¡ruÂ”_loİ
<
BŒ“S‘
<64> >(
os
, 
™ems
);

458 
i
 = 66; i < 128; i +ğ2è
os
 << "0 ";

459 
‹¡ruÂ”_loİ
<
BŒ“S‘
<128> >(
os
, 
™ems
);

460 
i
 = 130; i < 256; i +ğ2è
os
 << "0 ";

461 
‹¡ruÂ”_loİ
<
BŒ“S‘
<256> >(
os
, 
™ems
);

464 
os
 << "\n" << 
¡d
::
æush
;

465 
	}
}

467 
	g‹m¶©e
 <‹m¶©<
ty³Çme
 
	gTy³
> 
şass
 
	gTe¡CÏss
>

468 
	gTe¡FaùÜy_M­
<
	gTe¡CÏss
>::
	$ÿÎ_‹¡ruÂ”
(

469 
¡d
::
o¡»am
& 
os
, 
™ems
)

471 
os
 << 
™ems
 << " " << 
¡d
::
æush
;

473 
cout
 << " StdM­ " << 
’dl
;

474 
‹¡ruÂ”_loİ
<
StdM­
>(
os
, 
™ems
);

477 
cout
 << " HashM­ " << 
’dl
;

478 
‹¡ruÂ”_loİ
<
HashM­
>(
os
, 
™ems
);

481 
cout
 << " UnÜd”ed " << 
’dl
;

482 
‹¡ruÂ”_loİ
<
UnÜd”edM­
>(
os
, 
™ems
);

485 
cout
 << " BŒ“M­ " <<
’dl
;

486 
‹¡ruÂ”_loİ
<
BŒ“M­
<
max¦Ù
> >(
os
, 
™ems
);

489 
cout
 << "Skli¡M­" << 
’dl
;

490 
‹¡ruÂ”_loİ
<
Skli¡M­
<
max¦Ù
> >(
os
, 
™ems
);

494 
cout
 << " TŒ“M­ " <<
’dl
;

495 
‹¡ruÂ”_loİ
<
TŒ“M­
>(
os
, 
™ems
);

501 
‹¡ruÂ”_loİ
<
BŒ“M­
<4> >(
os
, 
™ems
);

502 
i
 = 6; i < 8; i +ğ2è
os
 << "0 ";

503 
‹¡ruÂ”_loİ
<
BŒ“M­
<8> >(
os
, 
™ems
);

504 
i
 = 10; i < 16; i +ğ2è
os
 << "0 ";

505 
‹¡ruÂ”_loİ
<
BŒ“M­
<16> >(
os
, 
™ems
);

506 
i
 = 18; i < 32; i +ğ2è
os
 << "0 ";

507 
‹¡ruÂ”_loİ
<
BŒ“M­
<32> >(
os
, 
™ems
);

508 
i
 = 34; i < 64; i +ğ2è
os
 << "0 ";

509 
‹¡ruÂ”_loİ
<
BŒ“M­
<64> >(
os
, 
™ems
);

510 
i
 = 66; i < 128; i +ğ2è
os
 << "0 ";

511 
‹¡ruÂ”_loİ
<
BŒ“M­
<128> >(
os
, 
™ems
);

512 
i
 = 130; i < 256; i +ğ2è
os
 << "0 ";

513 
‹¡ruÂ”_loİ
<
BŒ“M­
<256> >(
os
, 
™ems
);

516 
os
 << "\n" << 
¡d
::
æush
; 
	}
}

519 
	$maš
()

523 
¡d
::
of¡»am
 
	`os
("speed-set-insert.txt");

525 
»³©uÁ
 = 
mš™ems
;

527 
™ems
 = 
mš™ems
; i‹m <ğ
max™ems
; items *= 2)

529 
¡d
::
û¼
 << "£t: in£¹ " << 
™ems
 << "\n";

530 
Te¡FaùÜy_S‘
<
Te¡_S‘_In£¹
>().
	`ÿÎ_‹¡ruÂ”
(
os
, 
™ems
);

536 
¡d
::
of¡»am
 
	`os
("speed-set-all.txt");

538 
»³©uÁ
 = 
mš™ems
;

540 
™ems
 = 
mš™ems
; i‹m <ğ
max™ems
; items *= 2)

542 
¡d
::
û¼
 << "£t: in£¹, fšd, d–‘" << 
™ems
 << "\n";

543 
Te¡FaùÜy_S‘
<
Te¡_S‘_In£¹FšdD–‘e
>().
	`ÿÎ_‹¡ruÂ”
(
os
, 
™ems
);

549 
¡d
::
of¡»am
 
	`os
("speed-set-find.txt");

551 
»³©uÁ
 = 
mš™ems
;

553 
™ems
 = 
mš™ems
; i‹m <ğ
max™ems
; items *= 2)

555 
¡d
::
û¼
 << "£t: fšd " << 
™ems
 << "\n";

556 
Te¡FaùÜy_S‘
<
Te¡_S‘_Fšd
>().
	`ÿÎ_‹¡ruÂ”
(
os
, 
™ems
);

562 
¡d
::
of¡»am
 
	`os
("speed-map-insert.txt");

564 
»³©uÁ
 = 
mš™ems
;

566 
™ems
 = 
mš™ems
; i‹m <ğ
max™ems
; items *= 2)

568 
¡d
::
û¼
 << "m­: in£¹ " << 
™ems
 << "\n";

569 
Te¡FaùÜy_M­
<
Te¡_M­_In£¹
>().
	`ÿÎ_‹¡ruÂ”
(
os
, 
™ems
);

575 
¡d
::
of¡»am
 
	`os
("speed-map-all.txt");

577 
»³©uÁ
 = 
mš™ems
;

579 
™ems
 = 
mš™ems
; i‹m <ğ
max™ems
; items *= 2)

581 
¡d
::
û¼
 << "m­: in£¹, fšd, d–‘" << 
™ems
 << "\n";

582 
Te¡FaùÜy_M­
<
Te¡_M­_In£¹FšdD–‘e
>().
	`ÿÎ_‹¡ruÂ”
(
os
, 
™ems
);

588 
¡d
::
of¡»am
 
	`os
("speed-map-find.txt");

590 
»³©uÁ
 = 
mš™ems
;

592 
™ems
 = 
mš™ems
; i‹m <ğ
max™ems
; items *= 2)

594 
¡d
::
û¼
 << "m­: fšd " << 
™ems
 << "\n";

595 
Te¡FaùÜy_M­
<
Te¡_M­_Fšd
>().
	`ÿÎ_‹¡ruÂ”
(
os
, 
™ems
);

600 
	}
}

	@/usr/include/assert.h

22 #ifdef 
_ASSERT_H


24 #undeà
_ASSERT_H


25 #undeà
as£¹


26 #undeà
__ASSERT_VOID_CAST


28 #ifdef 
__USE_GNU


29 #undeà
as£¹_³¼Ü


34 
	#_ASSERT_H
 1

	)

35 
	~<ã©u»s.h
>

37 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,95)

38 
	#__ASSERT_VOID_CAST
 
¡©ic_ÿ¡
<>

	)

40 
	#__ASSERT_VOID_CAST
 ()

	)

48 #ifdef 
NDEBUG


50 
	#as£¹
(
ex´
è(
	`__ASSERT_VOID_CAST
 (0))

	)

58 #ifdef 
__USE_GNU


59 
	#as£¹_³¼Ü
(
”ºum
è(
	`__ASSERT_VOID_CAST
 (0))

	)

64 #iâdeà
_ASSERT_H_DECLS


65 
	#_ASSERT_H_DECLS


	)

66 
__BEGIN_DECLS


69 
	$__as£¹_ç
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
,

70 
__lše
, cÚ¡ *
__funùiÚ
)

71 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

74 
	$__as£¹_³¼Ü_ç
 (
__”ºum
, cÚ¡ *
__fe
,

75 
__lše
, cÚ¡ *
__funùiÚ
)

76 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

81 
	$__as£¹
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
, 
__lše
)

82 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

85 
__END_DECLS


88 
	#as£¹
(
ex´
) \

89 ((
ex´
) \

90 ? 
	`__ASSERT_VOID_CAST
 (0) \

91 : 
	`__as£¹_ç
 (
	`__STRING
(
ex´
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

93 #ifdef 
__USE_GNU


94 
	#as£¹_³¼Ü
(
”ºum
) \

95 (!(
”ºum
) \

96 ? 
	`__ASSERT_VOID_CAST
 (0) \

97 : 
	`__as£¹_³¼Ü_ç
 ((
”ºum
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

105 #ià
defšed
 
__ılu¥lus
 ? 
	`__GNUC_PREREQ
 (2, 6) : __GNUC_PREREQ (2, 4)

106 
	#__ASSERT_FUNCTION
 
__PRETTY_FUNCTION__


	)

108 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

109 
	#__ASSERT_FUNCTION
 
__func__


	)

111 
	#__ASSERT_FUNCTION
 ((cÚ¡ *è0)

	)

118 #ià
defšed
 
__USE_ISOC11
 && !defšed 
__ılu¥lus


120 #undeà
¡©ic_as£¹


121 
	#¡©ic_as£¹
 
_Stic_as£¹


	)

	@/usr/include/stdint.h

22 #iâdeà
_STDINT_H


23 
	#_STDINT_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	~<b™s/wch¬.h
>

27 
	~<b™s/wÜdsize.h
>

34 #iâdeà
__št8_t_defšed


35 
	#__št8_t_defšed


	)

36 sigÃd 
	tšt8_t
;

37 
	tšt16_t
;

38 
	tšt32_t
;

39 #ià
__WORDSIZE
 == 64

40 
	tšt64_t
;

42 
__ex‹nsiÚ__


43 
	tšt64_t
;

48 
	tušt8_t
;

49 
	tušt16_t
;

50 #iâdeà
__ušt32_t_defšed


51 
	tušt32_t
;

52 
	#__ušt32_t_defšed


	)

54 #ià
__WORDSIZE
 == 64

55 
	tušt64_t
;

57 
__ex‹nsiÚ__


58 
	tušt64_t
;

65 sigÃd 
	tšt_Ëa¡8_t
;

66 
	tšt_Ëa¡16_t
;

67 
	tšt_Ëa¡32_t
;

68 #ià
__WORDSIZE
 == 64

69 
	tšt_Ëa¡64_t
;

71 
__ex‹nsiÚ__


72 
	tšt_Ëa¡64_t
;

76 
	tušt_Ëa¡8_t
;

77 
	tušt_Ëa¡16_t
;

78 
	tušt_Ëa¡32_t
;

79 #ià
__WORDSIZE
 == 64

80 
	tušt_Ëa¡64_t
;

82 
__ex‹nsiÚ__


83 
	tušt_Ëa¡64_t
;

90 sigÃd 
	tšt_ç¡8_t
;

91 #ià
__WORDSIZE
 == 64

92 
	tšt_ç¡16_t
;

93 
	tšt_ç¡32_t
;

94 
	tšt_ç¡64_t
;

96 
	tšt_ç¡16_t
;

97 
	tšt_ç¡32_t
;

98 
__ex‹nsiÚ__


99 
	tšt_ç¡64_t
;

103 
	tušt_ç¡8_t
;

104 #ià
__WORDSIZE
 == 64

105 
	tušt_ç¡16_t
;

106 
	tušt_ç¡32_t
;

107 
	tušt_ç¡64_t
;

109 
	tušt_ç¡16_t
;

110 
	tušt_ç¡32_t
;

111 
__ex‹nsiÚ__


112 
	tušt_ç¡64_t
;

117 #ià
__WORDSIZE
 == 64

118 #iâdeà
__šŒ_t_defšed


119 
	tšŒ_t
;

120 
	#__šŒ_t_defšed


	)

122 
	tušŒ_t
;

124 #iâdeà
__šŒ_t_defšed


125 
	tšŒ_t
;

126 
	#__šŒ_t_defšed


	)

128 
	tušŒ_t
;

133 #ià
__WORDSIZE
 == 64

134 
	tštmax_t
;

135 
	tuštmax_t
;

137 
__ex‹nsiÚ__


138 
	tštmax_t
;

139 
__ex‹nsiÚ__


140 
	tuštmax_t
;

144 #ià
__WORDSIZE
 == 64

145 
	#__INT64_C
(
c
èø## 
L


	)

146 
	#__UINT64_C
(
c
èø## 
UL


	)

148 
	#__INT64_C
(
c
èø## 
LL


	)

149 
	#__UINT64_C
(
c
èø## 
ULL


	)

155 
	#INT8_MIN
 (-128)

	)

156 
	#INT16_MIN
 (-32767-1)

	)

157 
	#INT32_MIN
 (-2147483647-1)

	)

158 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

160 
	#INT8_MAX
 (127)

	)

161 
	#INT16_MAX
 (32767)

	)

162 
	#INT32_MAX
 (2147483647)

	)

163 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

166 
	#UINT8_MAX
 (255)

	)

167 
	#UINT16_MAX
 (65535)

	)

168 
	#UINT32_MAX
 (4294967295U)

	)

169 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

173 
	#INT_LEAST8_MIN
 (-128)

	)

174 
	#INT_LEAST16_MIN
 (-32767-1)

	)

175 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

176 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

178 
	#INT_LEAST8_MAX
 (127)

	)

179 
	#INT_LEAST16_MAX
 (32767)

	)

180 
	#INT_LEAST32_MAX
 (2147483647)

	)

181 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

184 
	#UINT_LEAST8_MAX
 (255)

	)

185 
	#UINT_LEAST16_MAX
 (65535)

	)

186 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

187 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

191 
	#INT_FAST8_MIN
 (-128)

	)

192 #ià
__WORDSIZE
 == 64

193 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

194 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

196 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

197 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

199 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

201 
	#INT_FAST8_MAX
 (127)

	)

202 #ià
__WORDSIZE
 == 64

203 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

204 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

206 
	#INT_FAST16_MAX
 (2147483647)

	)

207 
	#INT_FAST32_MAX
 (2147483647)

	)

209 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

212 
	#UINT_FAST8_MAX
 (255)

	)

213 #ià
__WORDSIZE
 == 64

214 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

215 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

217 
	#UINT_FAST16_MAX
 (4294967295U)

	)

218 
	#UINT_FAST32_MAX
 (4294967295U)

	)

220 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

224 #ià
__WORDSIZE
 == 64

225 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

226 
	#INTPTR_MAX
 (9223372036854775807L)

	)

227 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

229 
	#INTPTR_MIN
 (-2147483647-1)

	)

230 
	#INTPTR_MAX
 (2147483647)

	)

231 
	#UINTPTR_MAX
 (4294967295U)

	)

236 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

238 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

241 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

247 #ià
__WORDSIZE
 == 64

248 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

249 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

251 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

252 
	#PTRDIFF_MAX
 (2147483647)

	)

256 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

257 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

260 #ià
__WORDSIZE
 == 64

261 
	#SIZE_MAX
 (18446744073709551615UL)

	)

263 
	#SIZE_MAX
 (4294967295U)

	)

267 #iâdeà
WCHAR_MIN


269 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

270 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

274 
	#WINT_MIN
 (0u)

	)

275 
	#WINT_MAX
 (4294967295u)

	)

278 
	#INT8_C
(
c
è
	)
c

279 
	#INT16_C
(
c
è
	)
c

280 
	#INT32_C
(
c
è
	)
c

281 #ià
__WORDSIZE
 == 64

282 
	#INT64_C
(
c
èø## 
L


	)

284 
	#INT64_C
(
c
èø## 
LL


	)

288 
	#UINT8_C
(
c
è
	)
c

289 
	#UINT16_C
(
c
è
	)
c

290 
	#UINT32_C
(
c
èø## 
U


	)

291 #ià
__WORDSIZE
 == 64

292 
	#UINT64_C
(
c
èø## 
UL


	)

294 
	#UINT64_C
(
c
èø## 
ULL


	)

298 #ià
__WORDSIZE
 == 64

299 
	#INTMAX_C
(
c
èø## 
L


	)

300 
	#UINTMAX_C
(
c
èø## 
UL


	)

302 
	#INTMAX_C
(
c
èø## 
LL


	)

303 
	#UINTMAX_C
(
c
èø## 
ULL


	)

	@/usr/include/stdio.h

23 #iâdeà
_STDIO_H


25 #ià!
defšed
 
__Ãed_FILE
 && !defšed 
__Ãed___FILE


26 
	#_STDIO_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


31 
	#__Ãed_size_t


	)

32 
	#__Ãed_NULL


	)

33 
	~<¡ddef.h
>

35 
	~<b™s/ty³s.h
>

36 
	#__Ãed_FILE


	)

37 
	#__Ãed___FILE


	)

41 #ià!
defšed
 
__FILE_defšed
 && defšed 
__Ãed_FILE


44 
	g_IO_FILE
;

46 
__BEGIN_NAMESPACE_STD


48 
_IO_FILE
 
	tFILE
;

49 
	g__END_NAMESPACE_STD


50 #ià
defšed
 
__USE_LARGEFILE64
 || defšed 
__USE_SVID
 || defšed 
__USE_POSIX
 \

51 || 
defšed
 
	g__USE_BSD
 || defšed 
	g__USE_ISOC99
 || defšed 
	g__USE_XOPEN
 \

52 || 
defšed
 
__USE_POSIX2


53 
	$__USING_NAMESPACE_STD
(
FILE
)

56 
	#__FILE_defšed
 1

	)

58 #undeà
__Ãed_FILE


61 #ià!
defšed
 
____FILE_defšed
 && defšed 
__Ãed___FILE


64 
_IO_FILE
 
	t__FILE
;

66 
	#____FILE_defšed
 1

	)

68 #undeà
__Ãed___FILE


71 #ifdef 
_STDIO_H


72 
	#_STDIO_USES_IOSTREAM


	)

74 
	~<libio.h
>

76 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


77 #ifdeà
__GNUC__


78 #iâdeà
_VA_LIST_DEFINED


79 
_G_va_li¡
 
	tva_li¡
;

80 
	#_VA_LIST_DEFINED


	)

83 
	~<¡d¬g.h
>

87 #ifdeà
__USE_XOPEN2K8


88 #iâdeà
__off_t_defšed


89 #iâdeà
__USE_FILE_OFFSET64


90 
__off_t
 
	toff_t
;

92 
__off64_t
 
	toff_t
;

94 
	#__off_t_defšed


	)

96 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


97 
__off64_t
 
	toff64_t
;

98 
	#__off64_t_defšed


	)

101 #iâdeà
__ssize_t_defšed


102 
__ssize_t
 
	tssize_t
;

103 
	#__ssize_t_defšed


	)

108 
__BEGIN_NAMESPACE_STD


109 #iâdeà
__USE_FILE_OFFSET64


110 
_G_åos_t
 
	tåos_t
;

112 
_G_åos64_t
 
	tåos_t
;

114 
__END_NAMESPACE_STD


115 #ifdeà
__USE_LARGEFILE64


116 
_G_åos64_t
 
	tåos64_t
;

120 
	#_IOFBF
 0

	)

121 
	#_IOLBF
 1

	)

122 
	#_IONBF
 2

	)

126 #iâdeà
BUFSIZ


127 
	#BUFSIZ
 
_IO_BUFSIZ


	)

133 #iâdeà
EOF


134 
	#EOF
 (-1)

	)

140 
	#SEEK_SET
 0

	)

141 
	#SEEK_CUR
 1

	)

142 
	#SEEK_END
 2

	)

143 #ifdeà
__USE_GNU


144 
	#SEEK_DATA
 3

	)

145 
	#SEEK_HOLE
 4

	)

149 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


151 
	#P_tmpdœ
 "/tmp"

	)

164 
	~<b™s/¡dio_lim.h
>

168 
_IO_FILE
 *
¡dš
;

169 
_IO_FILE
 *
¡dout
;

170 
_IO_FILE
 *
¡d”r
;

172 
	#¡dš
 
¡dš


	)

173 
	#¡dout
 
¡dout


	)

174 
	#¡d”r
 
¡d”r


	)

176 
__BEGIN_NAMESPACE_STD


178 
	$»move
 (cÚ¡ *
__f’ame
è
__THROW
;

180 
	$»Çme
 (cÚ¡ *
__Şd
, cÚ¡ *
__Ãw
è
__THROW
;

181 
__END_NAMESPACE_STD


183 #ifdeà
__USE_ATFILE


185 
	$»Çm—t
 (
__Şdfd
, cÚ¡ *
__Şd
, 
__Ãwfd
,

186 cÚ¡ *
__Ãw
è
__THROW
;

189 
__BEGIN_NAMESPACE_STD


194 #iâdeà
__USE_FILE_OFFSET64


195 
FILE
 *
	$tmpfe
 (è
__wur
;

197 #ifdeà
__REDIRECT


198 
FILE
 *
	`__REDIRECT
 (
tmpfe
, (), 
tmpfe64
è
__wur
;

200 
	#tmpfe
 
tmpfe64


	)

204 #ifdeà
__USE_LARGEFILE64


205 
FILE
 *
	$tmpfe64
 (è
__wur
;

209 *
	$tm²am
 (*
__s
è
__THROW
 
__wur
;

210 
__END_NAMESPACE_STD


212 #ifdeà
__USE_MISC


215 *
	$tm²am_r
 (*
__s
è
__THROW
 
__wur
;

219 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


227 *
	$‹m²am
 (cÚ¡ *
__dœ
, cÚ¡ *
__pfx
)

228 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

232 
__BEGIN_NAMESPACE_STD


237 
	`fşo£
 (
FILE
 *
__¡»am
);

242 
	`fæush
 (
FILE
 *
__¡»am
);

243 
__END_NAMESPACE_STD


245 #ifdeà
__USE_MISC


252 
	`fæush_uÆocked
 (
FILE
 *
__¡»am
);

255 #ifdeà
__USE_GNU


262 
	`fşo£®l
 ();

266 
__BEGIN_NAMESPACE_STD


267 #iâdeà
__USE_FILE_OFFSET64


272 
FILE
 *
	$fİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

273 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

278 
FILE
 *
	$äeİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

279 cÚ¡ *
__»¡riù
 
__modes
,

280 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

282 #ifdeà
__REDIRECT


283 
FILE
 *
	`__REDIRECT
 (
fİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

284 cÚ¡ *
__»¡riù
 
__modes
), 
fİ’64
)

285 
__wur
;

286 
FILE
 *
	`__REDIRECT
 (
äeİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

287 cÚ¡ *
__»¡riù
 
__modes
,

288 
FILE
 *
__»¡riù
 
__¡»am
), 
äeİ’64
)

289 
__wur
;

291 
	#fİ’
 
fİ’64


	)

292 
	#äeİ’
 
äeİ’64


	)

295 
__END_NAMESPACE_STD


296 #ifdeà
__USE_LARGEFILE64


297 
FILE
 *
	$fİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

298 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

299 
FILE
 *
	$äeİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

300 cÚ¡ *
__»¡riù
 
__modes
,

301 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

304 #ifdef 
__USE_POSIX


306 
FILE
 *
	$fdİ’
 (
__fd
, cÚ¡ *
__modes
è
__THROW
 
__wur
;

309 #ifdef 
__USE_GNU


312 
FILE
 *
	$fİ’cook›
 (*
__»¡riù
 
__magic_cook›
,

313 cÚ¡ *
__»¡riù
 
__modes
,

314 
_IO_cook›_io_funùiÚs_t
 
__io_funcs
è
__THROW
 
__wur
;

317 #ifdeà
__USE_XOPEN2K8


319 
FILE
 *
	$fmemİ’
 (*
__s
, 
size_t
 
__Ën
, cÚ¡ *
__modes
)

320 
__THROW
 
__wur
;

325 
FILE
 *
	$İ’_mem¡»am
 (**
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
 
__wur
;

329 
__BEGIN_NAMESPACE_STD


332 
	$£tbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
è
__THROW
;

336 
	$£tvbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

337 
__modes
, 
size_t
 
__n
è
__THROW
;

338 
__END_NAMESPACE_STD


340 #ifdef 
__USE_BSD


343 
	$£tbufãr
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

344 
size_t
 
__size
è
__THROW
;

347 
	$£šebuf
 (
FILE
 *
__¡»am
è
__THROW
;

351 
__BEGIN_NAMESPACE_STD


356 
	`årštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

357 cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

362 
	`´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

364 
	$¥rštf
 (*
__»¡riù
 
__s
,

365 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROWNL
;

371 
	`vårštf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

372 
_G_va_li¡
 
__¬g
);

377 
	`v´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
);

379 
	$v¥rštf
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

380 
_G_va_li¡
 
__¬g
è
__THROWNL
;

381 
__END_NAMESPACE_STD


383 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


384 
__BEGIN_NAMESPACE_C99


386 
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

387 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

388 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

390 
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

391 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

392 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

393 
__END_NAMESPACE_C99


396 #ifdeà
__USE_GNU


399 
	$va¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__f
,

400 
_G_va_li¡
 
__¬g
)

401 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 0))è
__wur
;

402 
	$__a¥rštf
 (**
__»¡riù
 
__±r
,

403 cÚ¡ *
__»¡riù
 
__fmt
, ...)

404 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

405 
	$a¥rštf
 (**
__»¡riù
 
__±r
,

406 cÚ¡ *
__»¡riù
 
__fmt
, ...)

407 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

410 #ifdeà
__USE_XOPEN2K8


412 
	$vd´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
,

413 
_G_va_li¡
 
__¬g
)

414 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

415 
	$d´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
, ...)

416 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

420 
__BEGIN_NAMESPACE_STD


425 
	$fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

426 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

431 
	$sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

433 
	$ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

434 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

436 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

437 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

438 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

439 #ifdeà
__REDIRECT


443 
	`__REDIRECT
 (
fsÿnf
, (
FILE
 *
__»¡riù
 
__¡»am
,

444 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

445 
__isoc99_fsÿnf
è
__wur
;

446 
	`__REDIRECT
 (
sÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

447 
__isoc99_sÿnf
è
__wur
;

448 
	`__REDIRECT_NTH
 (
ssÿnf
, (cÚ¡ *
__»¡riù
 
__s
,

449 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

450 
__isoc99_ssÿnf
);

452 
	$__isoc99_fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

453 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

454 
	$__isoc99_sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

455 
	$__isoc99_ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

456 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

457 
	#fsÿnf
 
__isoc99_fsÿnf


	)

458 
	#sÿnf
 
__isoc99_sÿnf


	)

459 
	#ssÿnf
 
__isoc99_ssÿnf


	)

463 
__END_NAMESPACE_STD


465 #ifdef 
__USE_ISOC99


466 
__BEGIN_NAMESPACE_C99


471 
	$vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

472 
_G_va_li¡
 
__¬g
)

473 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

479 
	$vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

480 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

483 
	$vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

484 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

485 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

487 #ià!
defšed
 
__USE_GNU
 \

488 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

489 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

490 #ifdeà
__REDIRECT


494 
	`__REDIRECT
 (
vfsÿnf
,

495 (
FILE
 *
__»¡riù
 
__s
,

496 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
),

497 
__isoc99_vfsÿnf
)

498 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

499 
	`__REDIRECT
 (
vsÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
,

500 
_G_va_li¡
 
__¬g
), 
__isoc99_vsÿnf
)

501 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

502 
	`__REDIRECT_NTH
 (
vssÿnf
,

503 (cÚ¡ *
__»¡riù
 
__s
,

504 cÚ¡ *
__»¡riù
 
__fÜm©
,

505 
_G_va_li¡
 
__¬g
), 
__isoc99_vssÿnf
)

506 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

508 
	$__isoc99_vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
,

509 cÚ¡ *
__»¡riù
 
__fÜm©
,

510 
_G_va_li¡
 
__¬g
è
__wur
;

511 
	$__isoc99_vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
,

512 
_G_va_li¡
 
__¬g
è
__wur
;

513 
	$__isoc99_vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

514 cÚ¡ *
__»¡riù
 
__fÜm©
,

515 
_G_va_li¡
 
__¬g
è
__THROW
;

516 
	#vfsÿnf
 
__isoc99_vfsÿnf


	)

517 
	#vsÿnf
 
__isoc99_vsÿnf


	)

518 
	#vssÿnf
 
__isoc99_vssÿnf


	)

522 
__END_NAMESPACE_C99


526 
__BEGIN_NAMESPACE_STD


531 
	`fg‘c
 (
FILE
 *
__¡»am
);

532 
	`g‘c
 (
FILE
 *
__¡»am
);

538 
	`g‘ch¬
 ();

539 
__END_NAMESPACE_STD


543 
	#g‘c
(
_å
è
	`_IO_g‘c
 (_å)

	)

545 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


550 
	`g‘c_uÆocked
 (
FILE
 *
__¡»am
);

551 
	`g‘ch¬_uÆocked
 ();

554 #ifdeà
__USE_MISC


561 
	`fg‘c_uÆocked
 (
FILE
 *
__¡»am
);

565 
__BEGIN_NAMESPACE_STD


573 
	`åutc
 (
__c
, 
FILE
 *
__¡»am
);

574 
	`putc
 (
__c
, 
FILE
 *
__¡»am
);

580 
	`putch¬
 (
__c
);

581 
__END_NAMESPACE_STD


585 
	#putc
(
_ch
, 
_å
è
	`_IO_putc
 (_ch, _å)

	)

587 #ifdeà
__USE_MISC


594 
	`åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

597 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


602 
	`putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

603 
	`putch¬_uÆocked
 (
__c
);

607 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 \

608 || (
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

610 
	`g‘w
 (
FILE
 *
__¡»am
);

613 
	`putw
 (
__w
, 
FILE
 *
__¡»am
);

617 
__BEGIN_NAMESPACE_STD


622 *
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

623 
__wur
;

625 #ià!
defšed
 
__USE_ISOC11
 \

626 || (
defšed
 
__ılu¥lus
 && __cplusplus <= 201103L)

638 *
	$g‘s
 (*
__s
è
__wur
 
__©Œibu‹_d•»ÿ‹d__
;

640 
__END_NAMESPACE_STD


642 #ifdeà
__USE_GNU


649 *
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
,

650 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

654 #ifdef 
__USE_XOPEN2K8


665 
_IO_ssize_t
 
	$__g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

666 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

667 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

668 
_IO_ssize_t
 
	$g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

669 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

670 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

678 
_IO_ssize_t
 
	$g‘lše
 (**
__»¡riù
 
__lš•Œ
,

679 
size_t
 *
__»¡riù
 
__n
,

680 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

684 
__BEGIN_NAMESPACE_STD


689 
	`åuts
 (cÚ¡ *
__»¡riù
 
__s
, 
FILE
 *__»¡riù 
__¡»am
);

695 
	`puts
 (cÚ¡ *
__s
);

702 
	`ung‘c
 (
__c
, 
FILE
 *
__¡»am
);

709 
size_t
 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

710 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

715 
size_t
 
	`fwr™e
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

716 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__s
);

717 
__END_NAMESPACE_STD


719 #ifdeà
__USE_GNU


726 
	`åuts_uÆocked
 (cÚ¡ *
__»¡riù
 
__s
,

727 
FILE
 *
__»¡riù
 
__¡»am
);

730 #ifdeà
__USE_MISC


737 
size_t
 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

738 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

739 
size_t
 
	`fwr™e_uÆocked
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

740 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
);

744 
__BEGIN_NAMESPACE_STD


749 
	`f£ek
 (
FILE
 *
__¡»am
, 
__off
, 
__wh’û
);

754 
	$á–l
 (
FILE
 *
__¡»am
è
__wur
;

759 
	`»wšd
 (
FILE
 *
__¡»am
);

760 
__END_NAMESPACE_STD


767 #ià
defšed
 
__USE_LARGEFILE
 || defšed 
__USE_XOPEN2K


768 #iâdeà
__USE_FILE_OFFSET64


773 
	`f£eko
 (
FILE
 *
__¡»am
, 
__off_t
 
__off
, 
__wh’û
);

778 
__off_t
 
	$á–lo
 (
FILE
 *
__¡»am
è
__wur
;

780 #ifdeà
__REDIRECT


781 
	`__REDIRECT
 (
f£eko
,

782 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
),

783 
f£eko64
);

784 
__off64_t
 
	`__REDIRECT
 (
á–lo
, (
FILE
 *
__¡»am
), 
á–lo64
);

786 
	#f£eko
 
f£eko64


	)

787 
	#á–lo
 
á–lo64


	)

792 
__BEGIN_NAMESPACE_STD


793 #iâdeà
__USE_FILE_OFFSET64


798 
	`fg‘pos
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos_t
 *__»¡riù 
__pos
);

803 
	`f£os
 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
);

805 #ifdeà
__REDIRECT


806 
	`__REDIRECT
 (
fg‘pos
, (
FILE
 *
__»¡riù
 
__¡»am
,

807 
åos_t
 *
__»¡riù
 
__pos
), 
fg‘pos64
);

808 
	`__REDIRECT
 (
f£os
,

809 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
), 
f£os64
);

811 
	#fg‘pos
 
fg‘pos64


	)

812 
	#f£os
 
f£os64


	)

815 
__END_NAMESPACE_STD


817 #ifdeà
__USE_LARGEFILE64


818 
	`f£eko64
 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
);

819 
__off64_t
 
	$á–lo64
 (
FILE
 *
__¡»am
è
__wur
;

820 
	`fg‘pos64
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos64_t
 *__»¡riù 
__pos
);

821 
	`f£os64
 (
FILE
 *
__¡»am
, cÚ¡ 
åos64_t
 *
__pos
);

824 
__BEGIN_NAMESPACE_STD


826 
	$ş—»¼
 (
FILE
 *
__¡»am
è
__THROW
;

828 
	$ãof
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

830 
	$ã¼Ü
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

831 
__END_NAMESPACE_STD


833 #ifdeà
__USE_MISC


835 
	$ş—»¼_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
;

836 
	$ãof_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

837 
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

841 
__BEGIN_NAMESPACE_STD


846 
	`³¼Ü
 (cÚ¡ *
__s
);

847 
__END_NAMESPACE_STD


853 
	~<b™s/sys_”¾i¡.h
>

856 #ifdef 
__USE_POSIX


858 
	$f’o
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

861 #ifdeà
__USE_MISC


863 
	$f’o_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

867 #ià(
defšed
 
__USE_POSIX2
 || defšed 
__USE_SVID
 || defšed 
__USE_BSD
 || \

868 
defšed
 
__USE_MISC
)

873 
FILE
 *
	$pİ’
 (cÚ¡ *
__commªd
, cÚ¡ *
__modes
è
__wur
;

879 
	`pşo£
 (
FILE
 *
__¡»am
);

883 #ifdef 
__USE_POSIX


885 *
	$ù”mid
 (*
__s
è
__THROW
;

889 #ifdeà
__USE_XOPEN


891 *
	`cu£rid
 (*
__s
);

895 #ifdef 
__USE_GNU


896 
ob¡ack
;

899 
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

900 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

901 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

902 
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

903 cÚ¡ *
__»¡riù
 
__fÜm©
,

904 
_G_va_li¡
 
__¬gs
)

905 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

909 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


913 
	$æockfe
 (
FILE
 *
__¡»am
è
__THROW
;

917 
	$árylockfe
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

920 
	$fuÆockfe
 (
FILE
 *
__¡»am
è
__THROW
;

923 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


927 
	#__Ãed_g‘İt


	)

928 
	~<g‘İt.h
>

933 #ifdeà
__USE_EXTERN_INLINES


934 
	~<b™s/¡dio.h
>

936 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


937 
	~<b™s/¡dio2.h
>

939 #ifdeà
__LDBL_COMPAT


940 
	~<b™s/¡dio-ldbl.h
>

943 
__END_DECLS


	@/usr/include/stdlib.h

22 #iâdef 
_STDLIB_H


24 
	~<ã©u»s.h
>

27 
	#__Ãed_size_t


	)

28 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


29 
	#__Ãed_wch¬_t


	)

30 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

34 
	g__BEGIN_DECLS


36 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


37 
	#_STDLIB_H
 1

	)

39 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
è&& !defšed 
_SYS_WAIT_H


41 
	~<b™s/wa™æags.h
>

42 
	~<b™s/wa™¡©us.h
>

44 #ifdeà
__USE_BSD


49 #ià
defšed
 
__GNUC__
 && !defšed 
__ılu¥lus


50 
	#__WAIT_INT
(
¡©us
) \

51 (
	`__ex‹nsiÚ__
 (((uniÚ { 
	`__ty³of
(
¡©us
è
__š
; 
__i
; }) \

52 { .
__š
 = (
¡©us
è}).
__i
))

	)

54 
	#__WAIT_INT
(
¡©us
è(*(*è&(¡©us))

	)

62 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2 || defšed 
__ılu¥lus


63 
	#__WAIT_STATUS
 *

	)

64 
	#__WAIT_STATUS_DEFN
 *

	)

69 
wa™
 *
	m__u±r
;

70 *
	m__Œ
;

71 } 
	t__WAIT_STATUS
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

72 
	#__WAIT_STATUS_DEFN
 *

	)

77 
	#__WAIT_INT
(
¡©us
è(¡©us)

	)

78 
	#__WAIT_STATUS
 *

	)

79 
	#__WAIT_STATUS_DEFN
 *

	)

84 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (¡©us))

	)

85 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (
	`__WAIT_INT
 (¡©us))

	)

86 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (
	`__WAIT_INT
 (¡©us))

	)

87 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (
	`__WAIT_INT
 (¡©us))

	)

88 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (¡©us))

	)

89 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (¡©us))

	)

90 #ifdeà
__WIFCONTINUED


91 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (¡©us))

	)

95 
__BEGIN_NAMESPACE_STD


99 
	mquÙ
;

100 
	m»m
;

101 } 
	tdiv_t
;

104 #iâdeà
__ldiv_t_defšed


107 
	mquÙ
;

108 
	m»m
;

109 } 
	tldiv_t
;

110 
	#__ldiv_t_defšed
 1

	)

112 
	g__END_NAMESPACE_STD


114 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__Îdiv_t_defšed


115 
__BEGIN_NAMESPACE_C99


117 
__ex‹nsiÚ__
 struct

119 
	mquÙ
;

120 
	m»m
;

121 } 
	tÎdiv_t
;

122 
	#__Îdiv_t_defšed
 1

	)

123 
	g__END_NAMESPACE_C99


128 
	#RAND_MAX
 2147483647

	)

133 
	#EXIT_FAILURE
 1

	)

134 
	#EXIT_SUCCESS
 0

	)

138 
	#MB_CUR_MAX
 (
	`__ùy³_g‘_mb_cur_max
 ())

	)

139 
size_t
 
	$__ùy³_g‘_mb_cur_max
 (è
__THROW
 
__wur
;

142 
__BEGIN_NAMESPACE_STD


144 
	$©of
 (cÚ¡ *
__ÅŒ
)

145 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

147 
	$©oi
 (cÚ¡ *
__ÅŒ
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

150 
	$©Ş
 (cÚ¡ *
__ÅŒ
)

151 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

152 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_MISC


155 
__BEGIN_NAMESPACE_C99


157 
__ex‹nsiÚ__
 
	$©Şl
 (cÚ¡ *
__ÅŒ
)

158 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

159 
__END_NAMESPACE_C99


162 
__BEGIN_NAMESPACE_STD


164 
	$¡¹od
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

165 **
__»¡riù
 
__’d±r
)

166 
__THROW
 
	`__nÚnuÎ
 ((1));

167 
__END_NAMESPACE_STD


169 #ifdef 
__USE_ISOC99


170 
__BEGIN_NAMESPACE_C99


172 
	$¡¹of
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

173 **
__»¡riù
 
__’d±r
è
__THROW
 
	`__nÚnuÎ
 ((1));

175 
	$¡¹Şd
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

176 **
__»¡riù
 
__’d±r
)

177 
__THROW
 
	`__nÚnuÎ
 ((1));

178 
__END_NAMESPACE_C99


181 
__BEGIN_NAMESPACE_STD


183 
	$¡¹Ş
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

184 **
__»¡riù
 
__’d±r
, 
__ba£
)

185 
__THROW
 
	`__nÚnuÎ
 ((1));

187 
	$¡¹oul
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

188 **
__»¡riù
 
__’d±r
, 
__ba£
)

189 
__THROW
 
	`__nÚnuÎ
 ((1));

190 
__END_NAMESPACE_STD


192 #ifdeà
__USE_BSD


194 
__ex‹nsiÚ__


195 
	$¡¹oq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

196 **
__»¡riù
 
__’d±r
, 
__ba£
)

197 
__THROW
 
	`__nÚnuÎ
 ((1));

199 
__ex‹nsiÚ__


200 
	$¡¹ouq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

201 **
__»¡riù
 
__’d±r
, 
__ba£
)

202 
__THROW
 
	`__nÚnuÎ
 ((1));

205 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_MISC


206 
__BEGIN_NAMESPACE_C99


208 
__ex‹nsiÚ__


209 
	$¡¹Şl
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

210 **
__»¡riù
 
__’d±r
, 
__ba£
)

211 
__THROW
 
	`__nÚnuÎ
 ((1));

213 
__ex‹nsiÚ__


214 
	$¡¹ouÎ
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

215 **
__»¡riù
 
__’d±r
, 
__ba£
)

216 
__THROW
 
	`__nÚnuÎ
 ((1));

217 
__END_NAMESPACE_C99


221 #ifdeà
__USE_GNU


235 
	~<xloÿË.h
>

239 
	$¡¹Ş_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

240 **
__»¡riù
 
__’d±r
, 
__ba£
,

241 
__loÿË_t
 
__loc
è
__THROW
 
	`__nÚnuÎ
 ((1, 4));

243 
	$¡¹oul_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

244 **
__»¡riù
 
__’d±r
,

245 
__ba£
, 
__loÿË_t
 
__loc
)

246 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

248 
__ex‹nsiÚ__


249 
	$¡¹Şl_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

250 **
__»¡riù
 
__’d±r
, 
__ba£
,

251 
__loÿË_t
 
__loc
)

252 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

254 
__ex‹nsiÚ__


255 
	$¡¹ouÎ_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

256 **
__»¡riù
 
__’d±r
,

257 
__ba£
, 
__loÿË_t
 
__loc
)

258 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

260 
	$¡¹od_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

261 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

262 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

264 
	$¡¹of_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

265 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

266 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

268 
	$¡¹Şd_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

269 **
__»¡riù
 
__’d±r
,

270 
__loÿË_t
 
__loc
)

271 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

275 #ifdeà
__USE_EXTERN_INLINES


276 
__BEGIN_NAMESPACE_STD


277 
__ex‹º_šlše
 

278 
	`__NTH
 (
	$©oi
 (cÚ¡ *
__ÅŒ
))

280  (è
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

281 
	}
}

282 
__ex‹º_šlše
 

283 
__NTH
 (
	$©Ş
 (cÚ¡ *
__ÅŒ
))

285  
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

286 
	}
}

287 
	g__END_NAMESPACE_STD


289 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


290 
__BEGIN_NAMESPACE_C99


291 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

292 
__NTH
 (
	$©Şl
 (cÚ¡ *
__ÅŒ
))

294  
	`¡¹Şl
 (
__ÅŒ
, (**è
NULL
, 10);

295 
	}
}

296 
	g__END_NAMESPACE_C99


301 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED


305 *
	$l64a
 (
__n
è
__THROW
 
__wur
;

308 
	$a64l
 (cÚ¡ *
__s
)

309 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

313 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_BSD


314 
	~<sys/ty³s.h
>

321 
	$¿ndom
 (è
__THROW
;

324 
	$¤ªdom
 (
__£ed
è
__THROW
;

330 *
	$š™¡©e
 (
__£ed
, *
__¡©ebuf
,

331 
size_t
 
__¡©–’
è
__THROW
 
	`__nÚnuÎ
 ((2));

335 *
	$£t¡©e
 (*
__¡©ebuf
è
__THROW
 
	`__nÚnuÎ
 ((1));

338 #ifdeà
__USE_MISC


343 
	s¿ndom_d©a


345 
št32_t
 *
åŒ
;

346 
št32_t
 *
½Œ
;

347 
št32_t
 *
¡©e
;

348 
¿nd_ty³
;

349 
¿nd_deg
;

350 
¿nd_£p
;

351 
št32_t
 *
’d_±r
;

354 
	$¿ndom_r
 (
¿ndom_d©a
 *
__»¡riù
 
__buf
,

355 
št32_t
 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

357 
	$¤ªdom_r
 (
__£ed
, 
¿ndom_d©a
 *
__buf
)

358 
__THROW
 
	`__nÚnuÎ
 ((2));

360 
	$š™¡©e_r
 (
__£ed
, *
__»¡riù
 
__¡©ebuf
,

361 
size_t
 
__¡©–’
,

362 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

363 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

365 
	$£t¡©e_r
 (*
__»¡riù
 
__¡©ebuf
,

366 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

367 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

372 
__BEGIN_NAMESPACE_STD


374 
	$¿nd
 (è
__THROW
;

376 
	$¤ªd
 (
__£ed
è
__THROW
;

377 
__END_NAMESPACE_STD


379 #ifdeà
__USE_POSIX


381 
	$¿nd_r
 (*
__£ed
è
__THROW
;

385 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


389 
	$d¿nd48
 (è
__THROW
;

390 
	$”ªd48
 (
__xsubi
[3]è
__THROW
 
	`__nÚnuÎ
 ((1));

393 
	$Ìªd48
 (è
__THROW
;

394 
	$Äªd48
 (
__xsubi
[3])

395 
__THROW
 
	`__nÚnuÎ
 ((1));

398 
	$m¿nd48
 (è
__THROW
;

399 
	$j¿nd48
 (
__xsubi
[3])

400 
__THROW
 
	`__nÚnuÎ
 ((1));

403 
	$¤ªd48
 (
__£edv®
è
__THROW
;

404 *
	$£ed48
 (
__£ed16v
[3])

405 
__THROW
 
	`__nÚnuÎ
 ((1));

406 
	$lcÚg48
 (
__·¿m
[7]è
__THROW
 
	`__nÚnuÎ
 ((1));

408 #ifdeà
__USE_MISC


412 
	sd¿nd48_d©a


414 
__x
[3];

415 
__Şd_x
[3];

416 
__c
;

417 
__š™
;

418 
__ex‹nsiÚ__
 
__a
;

423 
	$d¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

424 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

425 
	$”ªd48_r
 (
__xsubi
[3],

426 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

427 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

430 
	$Ìªd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

431 *
__»¡riù
 
__»suÉ
)

432 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

433 
	$Äªd48_r
 (
__xsubi
[3],

434 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

435 *
__»¡riù
 
__»suÉ
)

436 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

439 
	$m¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

440 *
__»¡riù
 
__»suÉ
)

441 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

442 
	$j¿nd48_r
 (
__xsubi
[3],

443 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

444 *
__»¡riù
 
__»suÉ
)

445 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

448 
	$¤ªd48_r
 (
__£edv®
, 
d¿nd48_d©a
 *
__bufãr
)

449 
__THROW
 
	`__nÚnuÎ
 ((2));

451 
	$£ed48_r
 (
__£ed16v
[3],

452 
d¿nd48_d©a
 *
__bufãr
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

454 
	$lcÚg48_r
 (
__·¿m
[7],

455 
d¿nd48_d©a
 *
__bufãr
)

456 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

462 #iâdeà
__m®loc_ªd_ÿÎoc_defšed


463 
	#__m®loc_ªd_ÿÎoc_defšed


	)

464 
__BEGIN_NAMESPACE_STD


466 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

468 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

469 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

470 
__END_NAMESPACE_STD


473 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


474 
__BEGIN_NAMESPACE_STD


480 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

481 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

483 
	$ä“
 (*
__±r
è
__THROW
;

484 
__END_NAMESPACE_STD


486 #ifdef 
__USE_MISC


488 
	$cä“
 (*
__±r
è
__THROW
;

491 #ià
defšed
 
__USE_GNU
 || defšed 
__USE_BSD
 || defšed 
__USE_MISC


492 
	~<®loÿ.h
>

495 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

496 || 
defšed
 
__USE_BSD


498 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

501 #ifdeà
__USE_XOPEN2K


503 
	$posix_mem®ign
 (**
__mem±r
, 
size_t
 
__®ignm’t
, size_ˆ
__size
)

504 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

507 #ifdeà
__USE_ISOC11


509 *
	$®igÃd_®loc
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

510 
__THROW
 
__©Œibu‹_m®loc__
 
	`__©Œibu‹_®loc_size__
 ((2)è
__wur
;

513 
__BEGIN_NAMESPACE_STD


515 
	$abÜt
 (è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

519 
	`©ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

521 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


523 #ifdeà
__ılu¥lus


524 "C++" 
	`©_quick_ex™
 ((*
__func
) ())

525 
__THROW
 
	`__asm
 ("©_quick_ex™"è
	`__nÚnuÎ
 ((1));

527 
	`©_quick_ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

530 
__END_NAMESPACE_STD


532 #ifdef 
__USE_MISC


535 
	`Ú_ex™
 ((*
__func
è(
__¡©us
, *
__¬g
), *__arg)

536 
__THROW
 
	`__nÚnuÎ
 ((1));

539 
__BEGIN_NAMESPACE_STD


543 
	$ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

545 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


549 
	$quick_ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

551 
__END_NAMESPACE_STD


553 #ifdeà
__USE_ISOC99


554 
__BEGIN_NAMESPACE_C99


557 
	$_Ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

558 
__END_NAMESPACE_C99


562 
__BEGIN_NAMESPACE_STD


564 *
	$g‘’v
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

565 
__END_NAMESPACE_STD


567 #ifdeà
__USE_GNU


570 *
	$£cu»_g‘’v
 (cÚ¡ *
__Çme
)

571 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

574 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


578 
	$pu‹nv
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

581 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


584 
	$£‹nv
 (cÚ¡ *
__Çme
, cÚ¡ *
__v®ue
, 
__»¶aû
)

585 
__THROW
 
	`__nÚnuÎ
 ((2));

588 
	$un£‹nv
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

591 #ifdef 
__USE_MISC


595 
	$ş—»nv
 (è
__THROW
;

599 #ià
defšed
 
__USE_MISC
 \

600 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
)

606 *
	$mk‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1));

609 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 \

610 || 
defšed
 
__USE_XOPEN2K8


619 #iâdeà
__USE_FILE_OFFSET64


620 
	$mk¡emp
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

622 #ifdeà
__REDIRECT


623 
	`__REDIRECT
 (
mk¡emp
, (*
__‹m¶©e
), 
mk¡emp64
)

624 
	`__nÚnuÎ
 ((1)è
__wur
;

626 
	#mk¡emp
 
mk¡emp64


	)

629 #ifdeà
__USE_LARGEFILE64


630 
	$mk¡emp64
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

634 #ifdeà
__USE_MISC


641 #iâdeà
__USE_FILE_OFFSET64


642 
	$mk¡emps
 (*
__‹m¶©e
, 
__suffixËn
è
	`__nÚnuÎ
 ((1)è
__wur
;

644 #ifdeà
__REDIRECT


645 
	`__REDIRECT
 (
mk¡emps
, (*
__‹m¶©e
, 
__suffixËn
),

646 
mk¡emps64
è
	`__nÚnuÎ
 ((1)è
__wur
;

648 
	#mk¡emps
 
mk¡emps64


	)

651 #ifdeà
__USE_LARGEFILE64


652 
	$mk¡emps64
 (*
__‹m¶©e
, 
__suffixËn
)

653 
	`__nÚnuÎ
 ((1)è
__wur
;

657 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K8


663 *
	$mkd‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

666 #ifdeà
__USE_GNU


673 #iâdeà
__USE_FILE_OFFSET64


674 
	$mko¡emp
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

676 #ifdeà
__REDIRECT


677 
	`__REDIRECT
 (
mko¡emp
, (*
__‹m¶©e
, 
__æags
), 
mko¡emp64
)

678 
	`__nÚnuÎ
 ((1)è
__wur
;

680 
	#mko¡emp
 
mko¡emp64


	)

683 #ifdeà
__USE_LARGEFILE64


684 
	$mko¡emp64
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

693 #iâdeà
__USE_FILE_OFFSET64


694 
	$mko¡emps
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

695 
	`__nÚnuÎ
 ((1)è
__wur
;

697 #ifdeà
__REDIRECT


698 
	`__REDIRECT
 (
mko¡emps
, (*
__‹m¶©e
, 
__suffixËn
,

699 
__æags
), 
mko¡emps64
)

700 
	`__nÚnuÎ
 ((1)è
__wur
;

702 
	#mko¡emps
 
mko¡emps64


	)

705 #ifdeà
__USE_LARGEFILE64


706 
	$mko¡emps64
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

707 
	`__nÚnuÎ
 ((1)è
__wur
;

712 
__BEGIN_NAMESPACE_STD


717 
	$sy¡em
 (cÚ¡ *
__commªd
è
__wur
;

718 
__END_NAMESPACE_STD


721 #ifdef 
__USE_GNU


724 *
	$ÿnÚiÿlize_fe_Çme
 (cÚ¡ *
__Çme
)

725 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

728 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


734 *
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
,

735 *
__»¡riù
 
__»sŞved
è
__THROW
 
__wur
;

740 #iâdeà
__COMPAR_FN_T


741 
	#__COMPAR_FN_T


	)

742 (*
	t__com·r_â_t
) (const *, const *);

744 #ifdef 
__USE_GNU


745 
__com·r_â_t
 
	tcom·risÚ_â_t
;

748 #ifdeà
__USE_GNU


749 (*
	t__com·r_d_â_t
) (const *, const *, *);

752 
__BEGIN_NAMESPACE_STD


755 *
	$b£¬ch
 (cÚ¡ *
__key
, cÚ¡ *
__ba£
,

756 
size_t
 
__nmemb
, size_ˆ
__size
, 
__com·r_â_t
 
__com·r
)

757 
	`__nÚnuÎ
 ((1, 2, 5)è
__wur
;

759 #ifdeà
__USE_EXTERN_INLINES


760 
	~<b™s/¡dlib-b£¬ch.h
>

765 
	$qsÜt
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

766 
__com·r_â_t
 
__com·r
è
	`__nÚnuÎ
 ((1, 4));

767 #ifdeà
__USE_GNU


768 
	$qsÜt_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

769 
__com·r_d_â_t
 
__com·r
, *
__¬g
)

770 
	`__nÚnuÎ
 ((1, 4));

775 
	$abs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

776 
	$Ïbs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

777 
__END_NAMESPACE_STD


779 #ifdeà
__USE_ISOC99


780 
__ex‹nsiÚ__
 
	$Îabs
 (
__x
)

781 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

785 
__BEGIN_NAMESPACE_STD


789 
div_t
 
	$div
 (
__num”
, 
__d’om
)

790 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

791 
ldiv_t
 
	$ldiv
 (
__num”
, 
__d’om
)

792 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

793 
__END_NAMESPACE_STD


795 #ifdeà
__USE_ISOC99


796 
__BEGIN_NAMESPACE_C99


797 
__ex‹nsiÚ__
 
Îdiv_t
 
	$Îdiv
 (
__num”
,

798 
__d’om
)

799 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

800 
__END_NAMESPACE_C99


804 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

805 || 
defšed
 
__USE_SVID


812 *
	$ecvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

813 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

818 *
	$fcvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

819 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

824 *
	$gcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

825 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

828 #ifdeà
__USE_MISC


830 *
	$qecvt
 (
__v®ue
, 
__ndig™
,

831 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

832 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

833 *
	$qfcvt
 (
__v®ue
, 
__ndig™
,

834 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

835 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

836 *
	$qgcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

837 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

842 
	$ecvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

843 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

844 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

845 
	$fcvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

846 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

847 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

849 
	$qecvt_r
 (
__v®ue
, 
__ndig™
,

850 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

851 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

852 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

853 
	$qfcvt_r
 (
__v®ue
, 
__ndig™
,

854 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

855 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

856 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

860 
__BEGIN_NAMESPACE_STD


863 
	$mbËn
 (cÚ¡ *
__s
, 
size_t
 
__n
è
__THROW
;

866 
	$mbtowc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

867 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

870 
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
è
__THROW
;

874 
size_t
 
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__pwcs
,

875 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

877 
size_t
 
	$wc¡ombs
 (*
__»¡riù
 
__s
,

878 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__pwcs
, 
size_t
 
__n
)

879 
__THROW
;

880 
__END_NAMESPACE_STD


883 #ifdeà
__USE_SVID


888 
	$½m©ch
 (cÚ¡ *
__»¥Ú£
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

892 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


899 
	$g‘subİt
 (**
__»¡riù
 
__İtiÚp
,

900 *cÚ¡ *
__»¡riù
 
__tok’s
,

901 **
__»¡riù
 
__v®u•
)

902 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3)è
__wur
;

906 #ifdeà
__USE_XOPEN


908 
	$£tkey
 (cÚ¡ *
__key
è
__THROW
 
	`__nÚnuÎ
 ((1));

914 #ifdeà
__USE_XOPEN2KXSI


916 
	$posix_İ’±
 (
__oæag
è
__wur
;

919 #ifdeà
__USE_XOPEN


924 
	$g¿Á±
 (
__fd
è
__THROW
;

928 
	$uÆock±
 (
__fd
è
__THROW
;

933 *
	$±¢ame
 (
__fd
è
__THROW
 
__wur
;

936 #ifdeà
__USE_GNU


940 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

941 
__THROW
 
	`__nÚnuÎ
 ((2));

944 
	`g‘±
 ();

947 #ifdeà
__USE_BSD


951 
	$g‘lßdavg
 (
__lßdavg
[], 
__ÃËm
)

952 
__THROW
 
	`__nÚnuÎ
 ((1));

955 
	~<b™s/¡dlib-æßt.h
>

958 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


959 
	~<b™s/¡dlib.h
>

961 #ifdeà
__LDBL_COMPAT


962 
	~<b™s/¡dlib-ldbl.h
>

966 #undeà
__Ãed_m®loc_ªd_ÿÎoc


968 
__END_DECLS


	@/usr/include/time.h

22 #iâdef 
_TIME_H


24 #ià(! 
defšed
 
__Ãed_time_t
 && !defšed 
__Ãed_şock_t
 && \

25 ! 
defšed
 
	g__Ãed_time¥ec
)

26 
	#_TIME_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__Ãed_size_t


	)

36 
	#__Ãed_NULL


	)

37 
	~<¡ddef.h
>

41 
	~<b™s/time.h
>

44 #ià!
defšed
 
__STRICT_ANSI__
 && !defšed 
__USE_XOPEN2K


45 #iâdeà
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #ià!
defšed
 
__şock_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_şock_t
)

53 
	#__şock_t_defšed
 1

	)

55 
	~<b™s/ty³s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__şock_t
 
	tşock_t
;

60 
	g__END_NAMESPACE_STD


61 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


62 
	$__USING_NAMESPACE_STD
(
şock_t
)

66 #undeà
__Ãed_şock_t


68 #ià!
defšed
 
__time_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_time_t
)

69 
	#__time_t_defšed
 1

	)

71 
	~<b™s/ty³s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC
 || defšed 
__USE_SVID


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #undeà
__Ãed_time_t


84 #ià!
defšed
 
__şockid_t_defšed
 && \

85 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_şockid_t
)

86 
	#__şockid_t_defšed
 1

	)

88 
	~<b™s/ty³s.h
>

91 
__şockid_t
 
	tşockid_t
;

94 #undeà
__şockid_time_t


96 #ià!
defšed
 
__tim”_t_defšed
 && \

97 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_tim”_t
)

98 
	#__tim”_t_defšed
 1

	)

100 
	~<b™s/ty³s.h
>

103 
__tim”_t
 
	ttim”_t
;

106 #undeà
__Ãed_tim”_t


109 #ià(!
defšed
 
__time¥ec_defšed
 \

110 && ((
defšed
 
_TIME_H
 \

111 && (
defšed
 
__USE_POSIX199309
 || defšed 
__USE_MISC
 \

112 || 
defšed
 
__USE_ISOC11
)) \

113 || 
defšed
 
__Ãed_time¥ec
))

114 
	#__time¥ec_defšed
 1

	)

116 
	~<b™s/ty³s.h
>

120 
	stime¥ec


122 
__time_t
 
tv_£c
;

123 
__sysÿÎ_¦Úg_t
 
tv_n£c
;

127 #undeà
__Ãed_time¥ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mš
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_mÚ
;

140 
tm_y—r
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd¡
;

145 #ifdef 
__USE_BSD


146 
tm_gmtoff
;

147 cÚ¡ *
tm_zÚe
;

149 
__tm_gmtoff
;

150 cÚ¡ *
__tm_zÚe
;

153 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifdeà
__USE_POSIX199309


161 
	s™im”¥ec


163 
time¥ec
 
™_š‹rv®
;

164 
time¥ec
 
™_v®ue
;

168 
sigev’t
;

172 #ifdeà
__USE_XOPEN2K


173 #iâdeà
__pid_t_defšed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_defšed


	)

180 #ifdeà
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
şock_t
 
	$şock
 (è
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__tim”
è
__THROW
;

195 
	$difáime
 (
time_t
 
__time1
,ime_ˆ
__time0
)

196 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

199 
time_t
 
	$mktime
 (
tm
 *
__
è
__THROW
;

205 
size_t
 
	$¡ráime
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

206 cÚ¡ *
__»¡riù
 
__fÜm©
,

207 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifdeà
__USE_XOPEN


213 *
	$¡½time
 (cÚ¡ *
__»¡riù
 
__s
,

214 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
)

215 
__THROW
;

218 #ifdeà
__USE_XOPEN2K8


221 
	~<xloÿË.h
>

223 
size_t
 
	$¡ráime_l
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

224 cÚ¡ *
__»¡riù
 
__fÜm©
,

225 cÚ¡ 
tm
 *
__»¡riù
 
__
,

226 
__loÿË_t
 
__loc
è
__THROW
;

229 #ifdeà
__USE_GNU


230 *
	$¡½time_l
 (cÚ¡ *
__»¡riù
 
__s
,

231 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
,

232 
__loÿË_t
 
__loc
è
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

243 
tm
 *
	$loÿÉime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

244 
__END_NAMESPACE_STD


246 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


249 
tm
 *
	$gmtime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

250 
tm
 *
__»¡riù
 
__
è
__THROW
;

254 
tm
 *
	$loÿÉime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

255 
tm
 *
__»¡riù
 
__
è
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$asùime
 (cÚ¡ 
tm
 *
__
è
__THROW
;

264 *
	$ùime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

265 
__END_NAMESPACE_STD


267 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


272 *
	$asùime_r
 (cÚ¡ 
tm
 *
__»¡riù
 
__
,

273 *
__»¡riù
 
__buf
è
__THROW
;

276 *
	$ùime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

277 *
__»¡riù
 
__buf
è
__THROW
;

282 *
__tzÇme
[2];

283 
__daylight
;

284 
__timezÚe
;

287 #ifdef 
__USE_POSIX


289 *
tzÇme
[2];

293 
	$tz£t
 (è
__THROW
;

296 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


297 
daylight
;

298 
timezÚe
;

301 #ifdeà
__USE_SVID


304 
	$¡ime
 (cÚ¡ 
time_t
 *
__wh’
è
__THROW
;

310 
	#__i¦—p
(
y—r
) \

311 ((
y—r
è% 4 =ğ0 && ((y—rè% 100 !ğ0 || (y—rè% 400 =ğ0))

	)

314 #ifdeà
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__
è
__THROW
;

322 
time_t
 
	$tim–oÿl
 (
tm
 *
__
è
__THROW
;

325 
	$dysize
 (
__y—r
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

329 #ifdeà
__USE_POSIX199309


334 
	`Çno¦“p
 (cÚ¡ 
time¥ec
 *
__»que¡ed_time
,

335 
time¥ec
 *
__»maššg
);

339 
	$şock_g‘»s
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__»s
è
__THROW
;

342 
	$şock_g‘time
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__
è
__THROW
;

345 
	$şock_£‰ime
 (
şockid_t
 
__şock_id
, cÚ¡ 
time¥ec
 *
__
)

346 
__THROW
;

348 #ifdeà
__USE_XOPEN2K


353 
	`şock_Çno¦“p
 (
şockid_t
 
__şock_id
, 
__æags
,

354 cÚ¡ 
time¥ec
 *
__»q
,

355 
time¥ec
 *
__»m
);

358 
	$şock_g‘ıuşockid
 (
pid_t
 
__pid
, 
şockid_t
 *
__şock_id
è
__THROW
;

363 
	$tim”_ü—‹
 (
şockid_t
 
__şock_id
,

364 
sigev’t
 *
__»¡riù
 
__evp
,

365 
tim”_t
 *
__»¡riù
 
__tim”id
è
__THROW
;

368 
	$tim”_d–‘e
 (
tim”_t
 
__tim”id
è
__THROW
;

371 
	$tim”_£‰ime
 (
tim”_t
 
__tim”id
, 
__æags
,

372 cÚ¡ 
™im”¥ec
 *
__»¡riù
 
__v®ue
,

373 
™im”¥ec
 *
__»¡riù
 
__ov®ue
è
__THROW
;

376 
	$tim”_g‘time
 (
tim”_t
 
__tim”id
, 
™im”¥ec
 *
__v®ue
)

377 
__THROW
;

380 
	$tim”_g‘ov”run
 (
tim”_t
 
__tim”id
è
__THROW
;

384 #ifdeà
__USE_ISOC11


386 
	$time¥ec_g‘
 (
time¥ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__nÚnuÎ
 ((1));

391 #ifdeà
__USE_XOPEN_EXTENDED


403 
g‘d©e_”r
;

412 
tm
 *
	`g‘d©e
 (cÚ¡ *
__¡ršg
);

415 #ifdeà
__USE_GNU


426 
	`g‘d©e_r
 (cÚ¡ *
__»¡riù
 
__¡ršg
,

427 
tm
 *
__»¡riù
 
__»sbuå
);

430 
__END_DECLS


	@/usr/include/unistd.h

22 #iâdef 
_UNISTD_H


23 
	#_UNISTD_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


32 #ifdeà
__USE_XOPEN2K8


34 
	#_POSIX_VERSION
 200809L

	)

35 #–ià
defšed
 
__USE_XOPEN2K


37 
	#_POSIX_VERSION
 200112L

	)

38 #–ià
defšed
 
__USE_POSIX199506


40 
	#_POSIX_VERSION
 199506L

	)

41 #–ià
defšed
 
__USE_POSIX199309


43 
	#_POSIX_VERSION
 199309L

	)

46 
	#_POSIX_VERSION
 199009L

	)

52 #ifdeà
__USE_XOPEN2K8


53 
	#__POSIX2_THIS_VERSION
 200809L

	)

55 #–ià
defšed
 
__USE_XOPEN2K


57 
	#__POSIX2_THIS_VERSION
 200112L

	)

58 #–ià
defšed
 
__USE_POSIX199506


60 
	#__POSIX2_THIS_VERSION
 199506L

	)

63 
	#__POSIX2_THIS_VERSION
 199209L

	)

67 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

71 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

75 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

79 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

83 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

86 #ifdeà
__USE_XOPEN2K8


87 
	#_XOPEN_VERSION
 700

	)

88 #–ià
defšed
 
__USE_XOPEN2K


89 
	#_XOPEN_VERSION
 600

	)

90 #–ià
defšed
 
__USE_UNIX98


91 
	#_XOPEN_VERSION
 500

	)

93 
	#_XOPEN_VERSION
 4

	)

97 
	#_XOPEN_XCU_VERSION
 4

	)

100 
	#_XOPEN_XPG2
 1

	)

101 
	#_XOPEN_XPG3
 1

	)

102 
	#_XOPEN_XPG4
 1

	)

105 
	#_XOPEN_UNIX
 1

	)

108 
	#_XOPEN_CRYPT
 1

	)

112 
	#_XOPEN_ENH_I18N
 1

	)

115 
	#_XOPEN_LEGACY
 1

	)

202 
	~<b™s/posix_İt.h
>

205 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


206 
	~<b™s/’vœÚm’ts.h
>

210 
	#STDIN_FILENO
 0

	)

211 
	#STDOUT_FILENO
 1

	)

212 
	#STDERR_FILENO
 2

	)

217 
	~<b™s/ty³s.h
>

219 #iâdef 
__ssize_t_defšed


220 
__ssize_t
 
	tssize_t
;

221 
	#__ssize_t_defšed


	)

224 
	#__Ãed_size_t


	)

225 
	#__Ãed_NULL


	)

226 
	~<¡ddef.h
>

228 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


231 #iâdeà
__gid_t_defšed


232 
__gid_t
 
	tgid_t
;

233 
	#__gid_t_defšed


	)

236 #iâdeà
__uid_t_defšed


237 
__uid_t
 
	tuid_t
;

238 
	#__uid_t_defšed


	)

241 #iâdeà
__off_t_defšed


242 #iâdeà
__USE_FILE_OFFSET64


243 
__off_t
 
	toff_t
;

245 
__off64_t
 
	toff_t
;

247 
	#__off_t_defšed


	)

249 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


250 
__off64_t
 
	toff64_t
;

251 
	#__off64_t_defšed


	)

254 #iâdeà
__u£cÚds_t_defšed


255 
__u£cÚds_t
 
	tu£cÚds_t
;

256 
	#__u£cÚds_t_defšed


	)

259 #iâdeà
__pid_t_defšed


260 
__pid_t
 
	tpid_t
;

261 
	#__pid_t_defšed


	)

265 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


266 #iâdeà
__šŒ_t_defšed


267 
__šŒ_t
 
	tšŒ_t
;

268 
	#__šŒ_t_defšed


	)

272 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


273 #iâdeà
__sockËn_t_defšed


274 
__sockËn_t
 
	tsockËn_t
;

275 
	#__sockËn_t_defšed


	)

281 
	#R_OK
 4

	)

282 
	#W_OK
 2

	)

283 
	#X_OK
 1

	)

284 
	#F_OK
 0

	)

287 
	$acûss
 (cÚ¡ *
__Çme
, 
__ty³
è
__THROW
 
	`__nÚnuÎ
 ((1));

289 #ifdeà
__USE_GNU


292 
	$euidacûss
 (cÚ¡ *
__Çme
, 
__ty³
)

293 
__THROW
 
	`__nÚnuÎ
 ((1));

296 
	$—cûss
 (cÚ¡ *
__Çme
, 
__ty³
)

297 
__THROW
 
	`__nÚnuÎ
 ((1));

300 #ifdeà
__USE_ATFILE


304 
	$çcûs§t
 (
__fd
, cÚ¡ *
__fe
, 
__ty³
, 
__æag
)

305 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

310 #iâdef 
_STDIO_H


311 
	#SEEK_SET
 0

	)

312 
	#SEEK_CUR
 1

	)

313 
	#SEEK_END
 2

	)

314 #ifdeà
__USE_GNU


315 
	#SEEK_DATA
 3

	)

316 
	#SEEK_HOLE
 4

	)

320 #ià
defšed
 
__USE_BSD
 && !defšed 
L_SET


322 
	#L_SET
 
SEEK_SET


	)

323 
	#L_INCR
 
SEEK_CUR


	)

324 
	#L_XTND
 
SEEK_END


	)

333 #iâdeà
__USE_FILE_OFFSET64


334 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__wh’û
è
__THROW
;

336 #ifdeà
__REDIRECT_NTH


337 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

338 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
),

339 
l£ek64
);

341 
	#l£ek
 
l£ek64


	)

344 #ifdeà
__USE_LARGEFILE64


345 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
)

346 
__THROW
;

353 
	`şo£
 (
__fd
);

360 
ssize_t
 
	$»ad
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
è
__wur
;

366 
ssize_t
 
	$wr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
è
__wur
;

368 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


369 #iâdeà
__USE_FILE_OFFSET64


376 
ssize_t
 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

377 
__off_t
 
__off£t
è
__wur
;

384 
ssize_t
 
	$pwr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

385 
__off_t
 
__off£t
è
__wur
;

387 #ifdeà
__REDIRECT


388 
ssize_t
 
	`__REDIRECT
 (
´—d
, (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

389 
__off64_t
 
__off£t
),

390 
´—d64
è
__wur
;

391 
ssize_t
 
	`__REDIRECT
 (
pwr™e
, (
__fd
, cÚ¡ *
__buf
,

392 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
),

393 
pwr™e64
è
__wur
;

395 
	#´—d
 
´—d64


	)

396 
	#pwr™e
 
pwr™e64


	)

400 #ifdeà
__USE_LARGEFILE64


404 
ssize_t
 
	$´—d64
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

405 
__off64_t
 
__off£t
è
__wur
;

408 
ssize_t
 
	$pwr™e64
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

409 
__off64_t
 
__off£t
è
__wur
;

417 
	$pe
 (
__pedes
[2]è
__THROW
 
__wur
;

419 #ifdeà
__USE_GNU


422 
	$pe2
 (
__pedes
[2], 
__æags
è
__THROW
 
__wur
;

432 
	$®¬m
 (
__£cÚds
è
__THROW
;

444 
	`¦“p
 (
__£cÚds
);

446 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

447 || 
defšed
 
__USE_BSD


452 
__u£cÚds_t
 
	$u®¬m
 (
__u£cÚds_t
 
__v®ue
, __u£cÚds_ˆ
__š‹rv®
)

453 
__THROW
;

460 
	`u¦“p
 (
__u£cÚds_t
 
__u£cÚds
);

469 
	`·u£
 ();

473 
	$chown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

474 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

476 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


478 
	$fchown
 (
__fd
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
è
__THROW
 
__wur
;

483 
	$lchown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

484 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

488 #ifdeà
__USE_ATFILE


491 
	$fchowÇt
 (
__fd
, cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
,

492 
__gid_t
 
__group
, 
__æag
)

493 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

497 
	$chdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

499 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


501 
	$fchdœ
 (
__fd
è
__THROW
 
__wur
;

511 *
	$g‘cwd
 (*
__buf
, 
size_t
 
__size
è
__THROW
 
__wur
;

513 #ifdef 
__USE_GNU


517 *
	$g‘_cu¼’t_dœ_Çme
 (è
__THROW
;

520 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

521 || 
defšed
 
__USE_BSD


525 *
	$g‘wd
 (*
__buf
)

526 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
 
__wur
;

531 
	$dup
 (
__fd
è
__THROW
 
__wur
;

534 
	$dup2
 (
__fd
, 
__fd2
è
__THROW
;

536 #ifdeà
__USE_GNU


539 
	$dup3
 (
__fd
, 
__fd2
, 
__æags
è
__THROW
;

543 **
__’vœÚ
;

544 #ifdeà
__USE_GNU


545 **
’vœÚ
;

551 
	$execve
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[],

552 *cÚ¡ 
__’vp
[]è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

554 #ifdeà
__USE_XOPEN2K8


557 
	$ãxecve
 (
__fd
, *cÚ¡ 
__¬gv
[], *cÚ¡ 
__’vp
[])

558 
__THROW
 
	`__nÚnuÎ
 ((2));

563 
	$execv
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[])

564 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

568 
	$exeşe
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

569 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

573 
	$exeş
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

574 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

578 
	$execvp
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[])

579 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

584 
	$exeşp
 (cÚ¡ *
__fe
, cÚ¡ *
__¬g
, ...)

585 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

587 #ifdeà
__USE_GNU


590 
	$execv³
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[],

591 *cÚ¡ 
__’vp
[])

592 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

596 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


598 
	$niû
 (
__šc
è
__THROW
 
__wur
;

603 
	$_ex™
 (
__¡©us
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

609 
	~<b™s/cÚâame.h
>

612 
	$·thcÚf
 (cÚ¡ *
__·th
, 
__Çme
)

613 
__THROW
 
	`__nÚnuÎ
 ((1));

616 
	$å©hcÚf
 (
__fd
, 
__Çme
è
__THROW
;

619 
	$syscÚf
 (
__Çme
è
__THROW
;

621 #ifdef 
__USE_POSIX2


623 
size_t
 
	$cÚf¡r
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
è
__THROW
;

628 
__pid_t
 
	$g‘pid
 (è
__THROW
;

631 
__pid_t
 
	$g‘µid
 (è
__THROW
;

634 
__pid_t
 
	$g‘pg½
 (è
__THROW
;

637 
__pid_t
 
	$__g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

638 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


639 
__pid_t
 
	$g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

646 
	$£gid
 (
__pid_t
 
__pid
, __pid_ˆ
__pgid
è
__THROW
;

648 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


660 
	$£g½
 (è
__THROW
;

667 
__pid_t
 
	$£tsid
 (è
__THROW
;

669 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


671 
__pid_t
 
	$g‘sid
 (
__pid_t
 
__pid
è
__THROW
;

675 
__uid_t
 
	$g‘uid
 (è
__THROW
;

678 
__uid_t
 
	$g‘euid
 (è
__THROW
;

681 
__gid_t
 
	$g‘gid
 (è
__THROW
;

684 
__gid_t
 
	$g‘egid
 (è
__THROW
;

689 
	$g‘groups
 (
__size
, 
__gid_t
 
__li¡
[]è
__THROW
 
__wur
;

691 #ifdef 
__USE_GNU


693 
	$group_memb”
 (
__gid_t
 
__gid
è
__THROW
;

700 
	$£tuid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

702 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


705 
	$£Œeuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
è
__THROW
 
__wur
;

708 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


710 
	$£‹uid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

717 
	$£tgid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

719 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


722 
	$£Œegid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
è
__THROW
 
__wur
;

725 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


727 
	$£‹gid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

730 #ifdeà
__USE_GNU


733 
	$g‘»suid
 (
__uid_t
 *
__ruid
, __uid_ˆ*
__euid
, __uid_ˆ*
__suid
)

734 
__THROW
;

738 
	$g‘»sgid
 (
__gid_t
 *
__rgid
, __gid_ˆ*
__egid
, __gid_ˆ*
__sgid
)

739 
__THROW
;

743 
	$£Œesuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
, __uid_ˆ
__suid
)

744 
__THROW
 
__wur
;

748 
	$£Œesgid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
, __gid_ˆ
__sgid
)

749 
__THROW
 
__wur
;

756 
__pid_t
 
	$fÜk
 (è
__THROWNL
;

758 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

759 || 
defšed
 
__USE_BSD


764 
__pid_t
 
	$vfÜk
 (è
__THROW
;

770 *
	$‰yÇme
 (
__fd
è
__THROW
;

774 
	$‰yÇme_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

775 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

779 
	$i§‰y
 (
__fd
è
__THROW
;

781 #ià
defšed
 
__USE_BSD
 \

782 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_UNIX98
)

785 
	$‰y¦Ù
 (è
__THROW
;

790 
	$lšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

791 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

793 #ifdeà
__USE_ATFILE


796 
	$lšk©
 (
__äomfd
, cÚ¡ *
__äom
, 
__tofd
,

797 cÚ¡ *
__to
, 
__æags
)

798 
__THROW
 
	`__nÚnuÎ
 ((2, 4)è
__wur
;

801 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


803 
	$symlšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

804 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

809 
ssize_t
 
	$»adlšk
 (cÚ¡ *
__»¡riù
 
__·th
,

810 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

811 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

814 #ifdeà
__USE_ATFILE


816 
	$symlšk©
 (cÚ¡ *
__äom
, 
__tofd
,

817 cÚ¡ *
__to
è
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

820 
ssize_t
 
	$»adlšk©
 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

821 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

822 
__THROW
 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

826 
	$uÆšk
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

828 #ifdeà
__USE_ATFILE


830 
	$uÆšk©
 (
__fd
, cÚ¡ *
__Çme
, 
__æag
)

831 
__THROW
 
	`__nÚnuÎ
 ((2));

835 
	$rmdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1));

839 
__pid_t
 
	$tcg‘pg½
 (
__fd
è
__THROW
;

842 
	$tc£g½
 (
__fd
, 
__pid_t
 
__pg½_id
è
__THROW
;

849 *
	`g‘logš
 ();

850 #ià
defšed
 
__USE_REENTRANT
 || defšed 
__USE_POSIX199506


857 
	$g‘logš_r
 (*
__Çme
, 
size_t
 
__Çme_Ën
è
	`__nÚnuÎ
 ((1));

860 #ifdef 
__USE_BSD


862 
	$£ogš
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

866 #ifdef 
__USE_POSIX2


870 
	#__Ãed_g‘İt


	)

871 
	~<g‘İt.h
>

875 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


879 
	$g‘ho¡Çme
 (*
__Çme
, 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((1));

883 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_UNIX98
)

886 
	$£tho¡Çme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

887 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

891 
	$£tho¡id
 (
__id
è
__THROW
 
__wur
;

897 
	$g‘domašÇme
 (*
__Çme
, 
size_t
 
__Ën
)

898 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

899 
	$£tdomašÇme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

900 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

906 
	$vhªgup
 (è
__THROW
;

909 
	$»voke
 (cÚ¡ *
__fe
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

917 
	$´of
 (*
__§m¶e_bufãr
, 
size_t
 
__size
,

918 
size_t
 
__off£t
, 
__sÿË
)

919 
__THROW
 
	`__nÚnuÎ
 ((1));

925 
	$acù
 (cÚ¡ *
__Çme
è
__THROW
;

929 *
	$g‘u£rsh–l
 (è
__THROW
;

930 
	$’du£rsh–l
 (è
__THROW
;

931 
	$£tu£rsh–l
 (è
__THROW
;

937 
	$d«mÚ
 (
__nochdœ
, 
__noşo£
è
__THROW
 
__wur
;

941 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

944 
	$chroÙ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

948 *
	$g‘·ss
 (cÚ¡ *
__´om±
è
	`__nÚnuÎ
 ((1));

956 
	`fsync
 (
__fd
);

959 #ifdeà
__USE_GNU


962 
	$syncfs
 (
__fd
è
__THROW
;

966 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


969 
	`g‘ho¡id
 ();

972 
	$sync
 (è
__THROW
;

975 #ià
defšed
 
__USE_BSD
 || !defšed 
__USE_XOPEN2K


978 
	$g‘·gesize
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

983 
	$g‘dbËsize
 (è
__THROW
;

989 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


992 #iâdeà
__USE_FILE_OFFSET64


993 
	$Œunÿ‹
 (cÚ¡ *
__fe
, 
__off_t
 
__Ëngth
)

994 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

996 #ifdeà
__REDIRECT_NTH


997 
	`__REDIRECT_NTH
 (
Œunÿ‹
,

998 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
),

999 
Œunÿ‹64
è
	`__nÚnuÎ
 ((1)è
__wur
;

1001 
	#Œunÿ‹
 
Œunÿ‹64


	)

1004 #ifdeà
__USE_LARGEFILE64


1005 
	$Œunÿ‹64
 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
)

1006 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

1011 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_POSIX199309
 \

1012 || 
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


1015 #iâdeà
__USE_FILE_OFFSET64


1016 
	$árunÿ‹
 (
__fd
, 
__off_t
 
__Ëngth
è
__THROW
 
__wur
;

1018 #ifdeà
__REDIRECT_NTH


1019 
	`__REDIRECT_NTH
 (
árunÿ‹
, (
__fd
, 
__off64_t
 
__Ëngth
),

1020 
árunÿ‹64
è
__wur
;

1022 
	#árunÿ‹
 
árunÿ‹64


	)

1025 #ifdeà
__USE_LARGEFILE64


1026 
	$árunÿ‹64
 (
__fd
, 
__off64_t
 
__Ëngth
è
__THROW
 
__wur
;

1032 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

1033 || 
defšed
 
__USE_MISC


1037 
	$brk
 (*
__addr
è
__THROW
 
__wur
;

1043 *
	$sbrk
 (
šŒ_t
 
__d–
è
__THROW
;

1047 #ifdeà
__USE_MISC


1058 
	$sysÿÎ
 (
__sy¢o
, ...è
__THROW
;

1063 #ià(
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
è&& !defšed 
F_LOCK


1075 
	#F_ULOCK
 0

	)

1076 
	#F_LOCK
 1

	)

1077 
	#F_TLOCK
 2

	)

1078 
	#F_TEST
 3

	)

1080 #iâdeà
__USE_FILE_OFFSET64


1081 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Ën
è
__wur
;

1083 #ifdeà
__REDIRECT


1084 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
),

1085 
lockf64
è
__wur
;

1087 
	#lockf
 
lockf64


	)

1090 #ifdeà
__USE_LARGEFILE64


1091 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
è
__wur
;

1096 #ifdeà
__USE_GNU


1101 
	#TEMP_FAILURE_RETRY
(
ex´essiÚ
) \

1102 (
__ex‹nsiÚ__
 \

1103 ({ 
__»suÉ
; \

1104 dØ
__»suÉ
 = (è(
ex´essiÚ
); \

1105 
__»suÉ
 =ğ-1L && 
”ºo
 =ğ
EINTR
); \

1106 
__»suÉ
; 
	}
}))

	)

1109 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_UNIX98


1112 
fd©async
 (
__fdes
);

1118 #ifdef 
__USE_XOPEN


1120 *
	$üy±
 (cÚ¡ *
__key
, cÚ¡ *
__§É
)

1121 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1125 
	$’üy±
 (*
__glibc_block
, 
__edæag
)

1126 
__THROW
 
	`__nÚnuÎ
 ((1));

1133 
	$swab
 (cÚ¡ *
__»¡riù
 
__äom
, *__»¡riù 
__to
,

1134 
ssize_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1140 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K


1142 *
	$ù”mid
 (*
__s
è
__THROW
;

1147 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


1148 
	~<b™s/uni¡d.h
>

1151 
__END_DECLS


	@/usr/include/alloca.h

18 #iâdef 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<ã©u»s.h
>

23 
	#__Ãed_size_t


	)

24 
	~<¡ddef.h
>

26 
	g__BEGIN_DECLS


29 #undeà
®loÿ


32 *
	$®loÿ
 (
size_t
 
__size
è
__THROW
;

34 #ifdef 
__GNUC__


35 
	#®loÿ
(
size
è
	`__butš_®loÿ
 (size)

	)

38 
__END_DECLS


	@/usr/include/features.h

18 #iâdef 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

101 #undeà
__USE_ISOC11


102 #undeà
__USE_ISOC99


103 #undeà
__USE_ISOC95


104 #undeà
__USE_ISOCXX11


105 #undeà
__USE_POSIX


106 #undeà
__USE_POSIX2


107 #undeà
__USE_POSIX199309


108 #undeà
__USE_POSIX199506


109 #undeà
__USE_XOPEN


110 #undeà
__USE_XOPEN_EXTENDED


111 #undeà
__USE_UNIX98


112 #undeà
__USE_XOPEN2K


113 #undeà
__USE_XOPEN2KXSI


114 #undeà
__USE_XOPEN2K8


115 #undeà
__USE_XOPEN2K8XSI


116 #undeà
__USE_LARGEFILE


117 #undeà
__USE_LARGEFILE64


118 #undeà
__USE_FILE_OFFSET64


119 #undeà
__USE_BSD


120 #undeà
__USE_SVID


121 #undeà
__USE_MISC


122 #undeà
__USE_ATFILE


123 #undeà
__USE_GNU


124 #undeà
__USE_REENTRANT


125 #undeà
__USE_FORTIFY_LEVEL


126 #undeà
__KERNEL_STRICT_NAMES


130 #iâdeà
_LOOSE_KERNEL_NAMES


131 
	#__KERNEL_STRICT_NAMES


	)

141 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


142 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

143 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

145 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

150 #ifdeà
_GNU_SOURCE


151 #undeà
_ISOC95_SOURCE


152 
	#_ISOC95_SOURCE
 1

	)

153 #undeà
_ISOC99_SOURCE


154 
	#_ISOC99_SOURCE
 1

	)

155 #undeà
_ISOC11_SOURCE


156 
	#_ISOC11_SOURCE
 1

	)

157 #undeà
_POSIX_SOURCE


158 
	#_POSIX_SOURCE
 1

	)

159 #undeà
_POSIX_C_SOURCE


160 
	#_POSIX_C_SOURCE
 200809L

	)

161 #undeà
_XOPEN_SOURCE


162 
	#_XOPEN_SOURCE
 700

	)

163 #undeà
_XOPEN_SOURCE_EXTENDED


164 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

165 #undeà
_LARGEFILE64_SOURCE


166 
	#_LARGEFILE64_SOURCE
 1

	)

167 #undeà
_DEFAULT_SOURCE


168 
	#_DEFAULT_SOURCE
 1

	)

169 #undeà
_BSD_SOURCE


170 
	#_BSD_SOURCE
 1

	)

171 #undeà
_SVID_SOURCE


172 
	#_SVID_SOURCE
 1

	)

173 #undeà
_ATFILE_SOURCE


174 
	#_ATFILE_SOURCE
 1

	)

179 #ià(
defšed
 
_DEFAULT_SOURCE
 \

180 || (!
defšed
 
	g__STRICT_ANSI__
 \

181 && !
defšed
 
	g_ISOC99_SOURCE
 \

182 && !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 \

183 && !
defšed
 
	g_XOPEN_SOURCE
 \

184 && !
defšed
 
	g_BSD_SOURCE
 && !defšed 
	g_SVID_SOURCE
))

185 #undeà
_DEFAULT_SOURCE


186 
	#_DEFAULT_SOURCE
 1

	)

187 #undeà
_BSD_SOURCE


188 
	#_BSD_SOURCE
 1

	)

189 #undeà
_SVID_SOURCE


190 
	#_SVID_SOURCE
 1

	)

194 #ià(
defšed
 
_ISOC11_SOURCE
 \

195 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

196 
	#__USE_ISOC11
 1

	)

200 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

201 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

202 
	#__USE_ISOC99
 1

	)

206 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

207 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

208 
	#__USE_ISOC95
 1

	)

215 #ià((
defšed
 
__ılu¥lus
 && __cplusplus >= 201103L) \

216 || 
defšed
 
__GXX_EXPERIMENTAL_CXX0X__
)

217 
	#__USE_ISOCXX11
 1

	)

223 #ifdeà
_DEFAULT_SOURCE


224 #ià!
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE


225 
	#__USE_POSIX_IMPLICITLY
 1

	)

227 #undeà
_POSIX_SOURCE


228 
	#_POSIX_SOURCE
 1

	)

229 #undeà
_POSIX_C_SOURCE


230 
	#_POSIX_C_SOURCE
 200809L

	)

232 #ià((!
defšed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

233 !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

234 
	#_POSIX_SOURCE
 1

	)

235 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

236 
	#_POSIX_C_SOURCE
 2

	)

237 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

238 
	#_POSIX_C_SOURCE
 199506L

	)

239 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

240 
	#_POSIX_C_SOURCE
 200112L

	)

242 
	#_POSIX_C_SOURCE
 200809L

	)

244 
	#__USE_POSIX_IMPLICITLY
 1

	)

247 #ià
defšed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >ğ1 || defšed 
_XOPEN_SOURCE


248 
	#__USE_POSIX
 1

	)

251 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


252 
	#__USE_POSIX2
 1

	)

255 #ià(
_POSIX_C_SOURCE
 - 0) >= 199309L

256 
	#__USE_POSIX199309
 1

	)

259 #ià(
_POSIX_C_SOURCE
 - 0) >= 199506L

260 
	#__USE_POSIX199506
 1

	)

263 #ià(
_POSIX_C_SOURCE
 - 0) >= 200112L

264 
	#__USE_XOPEN2K
 1

	)

265 #undeà
__USE_ISOC95


266 
	#__USE_ISOC95
 1

	)

267 #undeà
__USE_ISOC99


268 
	#__USE_ISOC99
 1

	)

271 #ià(
_POSIX_C_SOURCE
 - 0) >= 200809L

272 
	#__USE_XOPEN2K8
 1

	)

273 #undeà
_ATFILE_SOURCE


274 
	#_ATFILE_SOURCE
 1

	)

277 #ifdef 
_XOPEN_SOURCE


278 
	#__USE_XOPEN
 1

	)

279 #ià(
_XOPEN_SOURCE
 - 0) >= 500

280 
	#__USE_XOPEN_EXTENDED
 1

	)

281 
	#__USE_UNIX98
 1

	)

282 #undeà
_LARGEFILE_SOURCE


283 
	#_LARGEFILE_SOURCE
 1

	)

284 #ià(
_XOPEN_SOURCE
 - 0) >= 600

285 #ià(
_XOPEN_SOURCE
 - 0) >= 700

286 
	#__USE_XOPEN2K8
 1

	)

287 
	#__USE_XOPEN2K8XSI
 1

	)

289 
	#__USE_XOPEN2K
 1

	)

290 
	#__USE_XOPEN2KXSI
 1

	)

291 #undeà
__USE_ISOC95


292 
	#__USE_ISOC95
 1

	)

293 #undeà
__USE_ISOC99


294 
	#__USE_ISOC99
 1

	)

297 #ifdeà
_XOPEN_SOURCE_EXTENDED


298 
	#__USE_XOPEN_EXTENDED
 1

	)

303 #ifdeà
_LARGEFILE_SOURCE


304 
	#__USE_LARGEFILE
 1

	)

307 #ifdeà
_LARGEFILE64_SOURCE


308 
	#__USE_LARGEFILE64
 1

	)

311 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

312 
	#__USE_FILE_OFFSET64
 1

	)

315 #ià
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE


316 
	#__USE_MISC
 1

	)

319 #ifdef 
_BSD_SOURCE


320 
	#__USE_BSD
 1

	)

323 #ifdef 
_SVID_SOURCE


324 
	#__USE_SVID
 1

	)

327 #ifdef 
_ATFILE_SOURCE


328 
	#__USE_ATFILE
 1

	)

331 #ifdef 
_GNU_SOURCE


332 
	#__USE_GNU
 1

	)

335 #ià
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE


336 
	#__USE_REENTRANT
 1

	)

339 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

340 && 
__GNUC_PREREQ
 (4, 1è&& 
defšed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

341 #ià
_FORTIFY_SOURCE
 > 1

342 
	#__USE_FORTIFY_LEVEL
 2

	)

344 
	#__USE_FORTIFY_LEVEL
 1

	)

347 
	#__USE_FORTIFY_LEVEL
 0

	)

352 
	~<¡dc-´edef.h
>

360 #undeà
__GNU_LIBRARY__


361 
	#__GNU_LIBRARY__
 6

	)

365 
	#__GLIBC__
 2

	)

366 
	#__GLIBC_MINOR__
 19

	)

368 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

369 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

372 #iâdeà
__ASSEMBLER__


373 #iâdeà
_SYS_CDEFS_H


374 
	~<sys/cdefs.h
>

379 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


380 
	#__USE_LARGEFILE
 1

	)

381 
	#__USE_LARGEFILE64
 1

	)

387 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

388 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

389 && 
defšed
 
	g__ex‹º_šlše


390 
	#__USE_EXTERN_INLINES
 1

	)

398 
	~<gnu/¡ubs.h
>

	@/usr/include/getopt.h

19 #iâdeà
_GETOPT_H


21 #iâdeà
__Ãed_g‘İt


22 
	#_GETOPT_H
 1

	)

32 #ià!
defšed
 
__GNU_LIBRARY__


33 
	~<ùy³.h
>

36 #iâdeà
__THROW


37 #iâdeà
__GNUC_PREREQ


38 
	#__GNUC_PREREQ
(
maj
, 
mš
è(0)

	)

40 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

41 
	#__THROW
 
	`throw
 ()

	)

43 
	#__THROW


	)

47 #ifdef 
__ılu¥lus


57 *
İrg
;

71 
İtšd
;

76 
İ‹¼
;

80 
İtİt
;

82 #iâdeà
__Ãed_g‘İt


104 
	sİtiÚ


106 cÚ¡ *
	gÇme
;

109 
	ghas_¬g
;

110 *
	gæag
;

111 
	gv®
;

116 
	#no_¬gum’t
 0

	)

117 
	#»quœed_¬gum’t
 1

	)

118 
	#İtiÚ®_¬gum’t
 2

	)

146 #ifdeà
__GNU_LIBRARY__


150 
g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
, cÚ¡ *
__shÜtİts
)

151 
__THROW
;

153 #ià
defšed
 
__Ãed_g‘İt
 && defšed 
__USE_POSIX2
 \

154 && !
defšed
 
	g__USE_POSIX_IMPLICITLY
 && !defšed 
	g__USE_GNU


158 #ifdeà
__REDIRECT


159 
__REDIRECT_NTH
 (
g‘İt
, (
___¬gc
, *cÚ¡ *
___¬gv
,

160 cÚ¡ *
__shÜtİts
),

161 
__posix_g‘İt
);

163 
__posix_g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
,

164 cÚ¡ *
__shÜtİts
è
__THROW
;

165 
	#g‘İt
 
__posix_g‘İt


	)

169 
g‘İt
 ();

172 #iâdeà
__Ãed_g‘İt


173 
g‘İt_lÚg
 (
___¬gc
, *cÚ¡ *
___¬gv
,

174 cÚ¡ *
__shÜtİts
,

175 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

176 
__THROW
;

177 
g‘İt_lÚg_Úly
 (
___¬gc
, *cÚ¡ *
___¬gv
,

178 cÚ¡ *
__shÜtİts
,

179 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

180 
__THROW
;

184 #ifdef 
__ılu¥lus


189 #undeà
__Ãed_g‘İt


	@/usr/include/libio.h

28 #iâdeà
_IO_STDIO_H


29 
	#_IO_STDIO_H


	)

31 
	~<_G_cÚfig.h
>

33 
	#_IO_åos_t
 
_G_åos_t


	)

34 
	#_IO_åos64_t
 
_G_åos64_t


	)

35 
	#_IO_size_t
 
size_t


	)

36 
	#_IO_ssize_t
 
__ssize_t


	)

37 
	#_IO_off_t
 
__off_t


	)

38 
	#_IO_off64_t
 
__off64_t


	)

39 
	#_IO_pid_t
 
__pid_t


	)

40 
	#_IO_uid_t
 
__uid_t


	)

41 
	#_IO_icÚv_t
 
_G_icÚv_t


	)

42 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

43 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

44 
	#_IO_va_li¡
 
_G_va_li¡


	)

45 
	#_IO_wšt_t
 
wšt_t


	)

48 
	#__Ãed___va_li¡


	)

49 
	~<¡d¬g.h
>

50 #ifdeà
__GNUC_VA_LIST


51 #undeà
_IO_va_li¡


52 
	#_IO_va_li¡
 
__gnuc_va_li¡


	)

55 #iâdeà
__P


56 
	~<sys/cdefs.h
>

59 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

61 #iâdeà
EOF


62 
	#EOF
 (-1)

	)

64 #iâdeà
NULL


65 #ià
defšed
 
__GNUG__
 && \

66 (
	g__GNUC__
 > 2 || (__GNUC__ =ğ2 && 
__GNUC_MINOR__
 >= 8))

67 
	#NULL
 (
__nuÎ
)

	)

69 #ià!
defšed
(
__ılu¥lus
)

70 
	#NULL
 ((*)0)

	)

72 
	#NULL
 (0)

	)

77 
	#_IOS_INPUT
 1

	)

78 
	#_IOS_OUTPUT
 2

	)

79 
	#_IOS_ATEND
 4

	)

80 
	#_IOS_APPEND
 8

	)

81 
	#_IOS_TRUNC
 16

	)

82 
	#_IOS_NOCREATE
 32

	)

83 
	#_IOS_NOREPLACE
 64

	)

84 
	#_IOS_BIN
 128

	)

92 
	#_IO_MAGIC
 0xFBAD0000

	)

93 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

94 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

95 
	#_IO_USER_BUF
 1

	)

96 
	#_IO_UNBUFFERED
 2

	)

97 
	#_IO_NO_READS
 4

	)

98 
	#_IO_NO_WRITES
 8

	)

99 
	#_IO_EOF_SEEN
 0x10

	)

100 
	#_IO_ERR_SEEN
 0x20

	)

101 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

102 
	#_IO_LINKED
 0x80

	)

103 
	#_IO_IN_BACKUP
 0x100

	)

104 
	#_IO_LINE_BUF
 0x200

	)

105 
	#_IO_TIED_PUT_GET
 0x400

	)

106 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

107 
	#_IO_IS_APPENDING
 0x1000

	)

108 
	#_IO_IS_FILEBUF
 0x2000

	)

109 
	#_IO_BAD_SEEN
 0x4000

	)

110 
	#_IO_USER_LOCK
 0x8000

	)

112 
	#_IO_FLAGS2_MMAP
 1

	)

113 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

114 #ifdeà
_LIBC


115 
	#_IO_FLAGS2_FORTIFY
 4

	)

117 
	#_IO_FLAGS2_USER_WBUF
 8

	)

118 #ifdeà
_LIBC


119 
	#_IO_FLAGS2_SCANF_STD
 16

	)

120 
	#_IO_FLAGS2_NOCLOSE
 32

	)

121 
	#_IO_FLAGS2_CLOEXEC
 64

	)

125 
	#_IO_SKIPWS
 01

	)

126 
	#_IO_LEFT
 02

	)

127 
	#_IO_RIGHT
 04

	)

128 
	#_IO_INTERNAL
 010

	)

129 
	#_IO_DEC
 020

	)

130 
	#_IO_OCT
 040

	)

131 
	#_IO_HEX
 0100

	)

132 
	#_IO_SHOWBASE
 0200

	)

133 
	#_IO_SHOWPOINT
 0400

	)

134 
	#_IO_UPPERCASE
 01000

	)

135 
	#_IO_SHOWPOS
 02000

	)

136 
	#_IO_SCIENTIFIC
 04000

	)

137 
	#_IO_FIXED
 010000

	)

138 
	#_IO_UNITBUF
 020000

	)

139 
	#_IO_STDIO
 040000

	)

140 
	#_IO_DONT_CLOSE
 0100000

	)

141 
	#_IO_BOOLALPHA
 0200000

	)

144 
_IO_jump_t
; 
	g_IO_FILE
;

147 #ifdeà
_IO_MTSAFE_IO


148 #ià
defšed
 
__GLIBC__
 && __GLIBC__ >= 2

149 
	~<b™s/¡dio-lock.h
>

154 
	t_IO_lock_t
;

160 
	s_IO_m¬k”
 {

161 
_IO_m¬k”
 *
	m_Ãxt
;

162 
_IO_FILE
 *
	m_sbuf
;

166 
	m_pos
;

168 
£t_¡»ampos
(
¡»ampos
 
¥
è{ 
	m_¥os
 = sp; }

169 
£t_off£t
(
off£t
è{ 
	m_pos
 = off£t; 
	m_¥os
 = (
¡»ampos
)(-2); }

170 
	mpublic
:

171 
¡»amm¬k”
(
¡»ambuf
 *
sb
);

172 ~
¡»amm¬k”
();

173 
§všg
(è{  
	m_¥os
 == -2; }

174 
d–
(
¡»amm¬k”
&);

175 
d–
();

180 
	e__codecvt_»suÉ


182 
	m__codecvt_ok
,

183 
	m__codecvt_·¹Ÿl
,

184 
	m__codecvt_”rÜ
,

185 
	m__codecvt_nocÚv


188 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


191 
	s_IO_codecvt


193 (*
	m__codecvt_de¡r
è(
	m_IO_codecvt
 *);

194 
__codecvt_»suÉ
 (*
__codecvt_do_out
è(
	m_IO_codecvt
 *,

195 
	m__mb¡©e_t
 *,

196 cÚ¡ 
	mwch¬_t
 *,

197 cÚ¡ 
	mwch¬_t
 *,

198 cÚ¡ 
	mwch¬_t
 **, *,

200 
__codecvt_»suÉ
 (*
__codecvt_do_unshiá
è(
	m_IO_codecvt
 *,

201 
	m__mb¡©e_t
 *, *,

203 
__codecvt_»suÉ
 (*
__codecvt_do_š
è(
	m_IO_codecvt
 *,

204 
	m__mb¡©e_t
 *,

206 cÚ¡ **, 
	mwch¬_t
 *,

207 
	mwch¬_t
 *, wchar_t **);

208 (*
	m__codecvt_do_’codšg
è(
	m_IO_codecvt
 *);

209 (*
	m__codecvt_do_®ways_nocÚv
è(
	m_IO_codecvt
 *);

210 (*
	m__codecvt_do_Ëngth
è(
	m_IO_codecvt
 *, 
	m__mb¡©e_t
 *,

211 cÚ¡ *, cÚ¡ *, 
	m_IO_size_t
);

212 (*
	m__codecvt_do_max_Ëngth
è(
	m_IO_codecvt
 *);

214 
_IO_icÚv_t
 
	m__cd_š
;

215 
_IO_icÚv_t
 
	m__cd_out
;

219 
	s_IO_wide_d©a


221 
wch¬_t
 *
	m_IO_»ad_±r
;

222 
wch¬_t
 *
	m_IO_»ad_’d
;

223 
wch¬_t
 *
	m_IO_»ad_ba£
;

224 
wch¬_t
 *
	m_IO_wr™e_ba£
;

225 
wch¬_t
 *
	m_IO_wr™e_±r
;

226 
wch¬_t
 *
	m_IO_wr™e_’d
;

227 
wch¬_t
 *
	m_IO_buf_ba£
;

228 
wch¬_t
 *
	m_IO_buf_’d
;

230 
wch¬_t
 *
	m_IO_§ve_ba£
;

231 
wch¬_t
 *
	m_IO_backup_ba£
;

233 
wch¬_t
 *
	m_IO_§ve_’d
;

235 
__mb¡©e_t
 
	m_IO_¡©e
;

236 
__mb¡©e_t
 
	m_IO_Ï¡_¡©e
;

237 
_IO_codecvt
 
	m_codecvt
;

239 
wch¬_t
 
	m_shÜtbuf
[1];

241 cÚ¡ 
_IO_jump_t
 *
	m_wide_vbË
;

245 
	s_IO_FILE
 {

246 
	m_æags
;

247 
	#_IO_fe_æags
 
_æags


	)

251 * 
	m_IO_»ad_±r
;

252 * 
	m_IO_»ad_’d
;

253 * 
	m_IO_»ad_ba£
;

254 * 
	m_IO_wr™e_ba£
;

255 * 
	m_IO_wr™e_±r
;

256 * 
	m_IO_wr™e_’d
;

257 * 
	m_IO_buf_ba£
;

258 * 
	m_IO_buf_’d
;

260 *
	m_IO_§ve_ba£
;

261 *
	m_IO_backup_ba£
;

262 *
	m_IO_§ve_’d
;

264 
_IO_m¬k”
 *
	m_m¬k”s
;

266 
_IO_FILE
 *
	m_chaš
;

268 
	m_f’o
;

270 
	m_blksize
;

272 
	m_æags2
;

274 
_IO_off_t
 
	m_Şd_off£t
;

276 
	#__HAVE_COLUMN


	)

278 
	m_cur_cŞumn
;

279 sigÃd 
	m_vbË_off£t
;

280 
	m_shÜtbuf
[1];

284 
_IO_lock_t
 *
	m_lock
;

285 #ifdeà
_IO_USE_OLD_IO_FILE


288 
	s_IO_FILE_com¶‘e


290 
_IO_FILE
 
	m_fe
;

292 #ià
defšed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

293 
_IO_off64_t
 
	m_off£t
;

294 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


296 
_IO_codecvt
 *
	m_codecvt
;

297 
_IO_wide_d©a
 *
	m_wide_d©a
;

298 
_IO_FILE
 *
	m_ä“»s_li¡
;

299 *
	m_ä“»s_buf
;

300 
size_t
 
	m_ä“»s_size
;

302 *
	m__·d1
;

303 *
	m__·d2
;

304 *
	m__·d3
;

305 *
	m__·d4
;

306 
size_t
 
	m__·d5
;

308 
	m_mode
;

310 
	m_unu£d2
[15 *  (è- 4 *  (*è-  (
size_t
)];

314 #iâdeà
__ılu¥lus


315 
_IO_FILE
 
	t_IO_FILE
;

318 
	g_IO_FILE_¶us
;

320 
_IO_FILE_¶us
 
_IO_2_1_¡dš_
;

321 
_IO_FILE_¶us
 
_IO_2_1_¡dout_
;

322 
_IO_FILE_¶us
 
_IO_2_1_¡d”r_
;

323 #iâdeà
_LIBC


324 
	#_IO_¡dš
 ((
_IO_FILE
*)(&
_IO_2_1_¡dš_
))

	)

325 
	#_IO_¡dout
 ((
_IO_FILE
*)(&
_IO_2_1_¡dout_
))

	)

326 
	#_IO_¡d”r
 ((
_IO_FILE
*)(&
_IO_2_1_¡d”r_
))

	)

328 
_IO_FILE
 *
_IO_¡dš
 
©Œibu‹_hidd’
;

329 
_IO_FILE
 *
_IO_¡dout
 
©Œibu‹_hidd’
;

330 
_IO_FILE
 *
_IO_¡d”r
 
©Œibu‹_hidd’
;

338 
__ssize_t
 
	t__io_»ad_â
 (*
	t__cook›
, *
	t__buf
, 
	tsize_t
 
	t__nby‹s
);

346 
__ssize_t
 
	t__io_wr™e_â
 (*
	t__cook›
, cÚ¡ *
	t__buf
,

347 
	tsize_t
 
	t__n
);

355 
	t__io_£ek_â
 (*
	t__cook›
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

358 
	t__io_şo£_â
 (*
	t__cook›
);

361 #ifdeà
_GNU_SOURCE


363 
__io_»ad_â
 
	tcook›_»ad_funùiÚ_t
;

364 
__io_wr™e_â
 
	tcook›_wr™e_funùiÚ_t
;

365 
__io_£ek_â
 
	tcook›_£ek_funùiÚ_t
;

366 
__io_şo£_â
 
	tcook›_şo£_funùiÚ_t
;

371 
__io_»ad_â
 *
	m»ad
;

372 
__io_wr™e_â
 *
	mwr™e
;

373 
__io_£ek_â
 *
	m£ek
;

374 
__io_şo£_â
 *
	mşo£
;

375 } 
	t_IO_cook›_io_funùiÚs_t
;

376 
_IO_cook›_io_funùiÚs_t
 
	tcook›_io_funùiÚs_t
;

378 
	g_IO_cook›_fe
;

381 
_IO_cook›_š™
 (
_IO_cook›_fe
 *
__cfe
, 
__»ad_wr™e
,

382 *
__cook›
, 
_IO_cook›_io_funùiÚs_t
 
__âs
);

386 #ifdeà
__ılu¥lus


390 
__und”æow
 (
_IO_FILE
 *);

391 
__uæow
 (
_IO_FILE
 *);

392 
__ov”æow
 (
_IO_FILE
 *, );

393 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


394 
_IO_wšt_t
 
__wund”æow
 (
_IO_FILE
 *);

395 
_IO_wšt_t
 
__wuæow
 (
_IO_FILE
 *);

396 
_IO_wšt_t
 
__wov”æow
 (
_IO_FILE
 *, _IO_wint_t);

399 #ià 
__GNUC__
 >= 3

400 
	#_IO_BE
(
ex´
, 
»s
è
	`__butš_ex³ù
 (Óx´),„es)

	)

402 
	#_IO_BE
(
ex´
, 
»s
èÓx´)

	)

405 
	#_IO_g‘c_uÆocked
(
_å
) \

406 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

407 ? 
	`__uæow
 (
_å
è: *(*è(_å)->
_IO_»ad_±r
++)

	)

408 
	#_IO_³ekc_uÆocked
(
_å
) \

409 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

410 && 
	`__und”æow
 (
_å
è=ğ
EOF
 ? EOF \

411 : *(*è(
_å
)->
_IO_»ad_±r
)

	)

412 
	#_IO_putc_uÆocked
(
_ch
, 
_å
) \

413 (
	`_IO_BE
 ((
_å
)->
_IO_wr™e_±r
 >ğ(_å)->
_IO_wr™e_’d
, 0) \

414 ? 
	`__ov”æow
 (
_å
, (è(
_ch
)) \

415 : (è(*(
_å
)->
_IO_wr™e_±r
++ = (
_ch
)))

	)

417 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


418 
	#_IO_g‘wc_uÆocked
(
_å
) \

419 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

420 || ((
_å
)->
_wide_d©a
->
_IO_»ad_±r
 \

421 >ğ(
_å
)->
_wide_d©a
->
_IO_»ad_’d
), 0) \

422 ? 
	`__wuæow
 (
_å
è: (
_IO_wšt_t
è*(_å)->
_wide_d©a
->
_IO_»ad_±r
++)

	)

423 
	#_IO_putwc_uÆocked
(
_wch
, 
_å
) \

424 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

425 || ((
_å
)->
_wide_d©a
->
_IO_wr™e_±r
 \

426 >ğ(
_å
)->
_wide_d©a
->
_IO_wr™e_’d
), 0) \

427 ? 
	`__wov”æow
 (
_å
, 
_wch
) \

428 : (
_IO_wšt_t
è(*(
_å
)->
_wide_d©a
->
_IO_wr™e_±r
++ = (
_wch
)))

	)

431 
	#_IO_ãof_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_EOF_SEEN
è!ğ0)

	)

432 
	#_IO_ã¼Ü_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_ERR_SEEN
è!ğ0)

	)

434 
_IO_g‘c
 (
_IO_FILE
 *
__å
);

435 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__å
);

436 
_IO_ãof
 (
_IO_FILE
 *
__å
è
__THROW
;

437 
_IO_ã¼Ü
 (
_IO_FILE
 *
__å
è
__THROW
;

439 
_IO_³ekc_locked
 (
_IO_FILE
 *
__å
);

442 
	#_IO_PENDING_OUTPUT_COUNT
(
_å
) \

443 ((
_å
)->
_IO_wr™e_±r
 - (_å)->
_IO_wr™e_ba£
)

	)

445 
_IO_æockfe
 (
_IO_FILE
 *è
__THROW
;

446 
_IO_fuÆockfe
 (
_IO_FILE
 *è
__THROW
;

447 
_IO_árylockfe
 (
_IO_FILE
 *è
__THROW
;

449 #ifdeà
_IO_MTSAFE_IO


450 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_locked
 (_å)

	)

451 
	#_IO_æockfe
(
_å
) \

452 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_æockfe
 (_å)

	)

453 
	#_IO_fuÆockfe
(
_å
) \

454 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_fuÆockfe
 (_å)

	)

456 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_uÆocked
 (_å)

	)

457 
	#_IO_æockfe
(
_å
è

	)

458 
	#_IO_fuÆockfe
(
_å
è

	)

459 
	#_IO_árylockfe
(
_å
è

	)

460 
	#_IO_ş—nup_»giÚ_¡¬t
(
_fù
, 
_å
è

	)

461 
	#_IO_ş—nup_»giÚ_’d
(
_Do™
è

	)

464 
_IO_vfsÿnf
 (
_IO_FILE
 * 
__»¡riù
, const * __restrict,

465 
_IO_va_li¡
, *
__»¡riù
);

466 
_IO_vårštf
 (
_IO_FILE
 *
__»¡riù
, const *__restrict,

467 
_IO_va_li¡
);

468 
_IO_ssize_t
 
_IO_·dn
 (
_IO_FILE
 *, , _IO_ssize_t);

469 
_IO_size_t
 
_IO_sg‘n
 (
_IO_FILE
 *, *, _IO_size_t);

471 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

472 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

474 
_IO_ä“_backup_¬—
 (
_IO_FILE
 *è
__THROW
;

476 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


477 
_IO_wšt_t
 
_IO_g‘wc
 (
_IO_FILE
 *
__å
);

478 
_IO_wšt_t
 
_IO_putwc
 (
wch¬_t
 
__wc
, 
_IO_FILE
 *
__å
);

479 
_IO_fwide
 (
_IO_FILE
 *
__å
, 
__mode
è
__THROW
;

480 #ià
__GNUC__
 >= 2

483 #ià
defšed
 
_LIBC
 && defšed 
SHARED


484 
	~<shlib-com·t.h
>

485 #ià
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

486 
	#_IO_fwide_maybe_šcom·tibË
 \

487 (
	`__butš_ex³ù
 (&
_IO_¡dš_u£d
 =ğ
NULL
, 0))

	)

488 cÚ¡ 
_IO_¡dš_u£d
;

489 
w—k_ex‹º
 (
_IO_¡dš_u£d
);

492 #iâdeà
_IO_fwide_maybe_šcom·tibË


493 
	#_IO_fwide_maybe_šcom·tibË
 (0)

	)

497 
	#_IO_fwide
(
__å
, 
__mode
) \

498 ({ 
__»suÉ
 = (
__mode
); \

499 ià(
__»suÉ
 < 0 && ! 
_IO_fwide_maybe_šcom·tibË
) \

501 ià((
__å
)->
_mode
 == 0) \

503 (
__å
)->
_mode
 = -1; \

504 
__»suÉ
 = (
__å
)->
_mode
; \

506 ià(
	`__butš_cÚ¡ªt_p
 (
__mode
) && (__mode) == 0) \

507 
__»suÉ
 = 
_IO_fwide_maybe_šcom·tibË
 ? -1 : (
__å
)->
_mode
; \

509 
__»suÉ
 = 
	`_IO_fwide
 (
__å
, __result); \

510 
__»suÉ
; })

	)

513 
_IO_vfwsÿnf
 (
_IO_FILE
 * 
__»¡riù
, cÚ¡ 
wch¬_t
 * __restrict,

514 
_IO_va_li¡
, *
__»¡riù
);

515 
_IO_vfw´štf
 (
_IO_FILE
 *
__»¡riù
, cÚ¡ 
wch¬_t
 *__restrict,

516 
_IO_va_li¡
);

517 
_IO_ssize_t
 
_IO_w·dn
 (
_IO_FILE
 *, 
wšt_t
, _IO_ssize_t);

518 
_IO_ä“_wbackup_¬—
 (
_IO_FILE
 *è
__THROW
;

521 #ifdeà
__LDBL_COMPAT


522 
	~<b™s/libio-ldbl.h
>

525 #ifdeà
__ılu¥lus


	@/usr/include/xlocale.h

20 #iâdeà
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loÿË_¡ruù


30 
__loÿË_d©a
 *
	m__loÿËs
[13];

33 cÚ¡ *
	m__ùy³_b
;

34 cÚ¡ *
	m__ùy³_tŞow”
;

35 cÚ¡ *
	m__ùy³_touµ”
;

38 cÚ¡ *
	m__Çmes
[13];

39 } *
	t__loÿË_t
;

42 
__loÿË_t
 
	tloÿË_t
;

	@/usr/include/_G_config.h

4 #iâdeà
_G_cÚfig_h


5 
	#_G_cÚfig_h
 1

	)

9 
	~<b™s/ty³s.h
>

10 
	#__Ãed_size_t


	)

11 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


12 
	#__Ãed_wch¬_t


	)

14 
	#__Ãed_NULL


	)

15 
	~<¡ddef.h
>

16 
	#__Ãed_mb¡©e_t


	)

17 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


18 
	#__Ãed_wšt_t


	)

20 
	~<wch¬.h
>

23 
__off_t
 
	m__pos
;

24 
__mb¡©e_t
 
	m__¡©e
;

25 } 
	t_G_åos_t
;

28 
__off64_t
 
	m__pos
;

29 
__mb¡©e_t
 
	m__¡©e
;

30 } 
	t_G_åos64_t
;

31 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


32 
	~<gcÚv.h
>

35 
__gcÚv_šfo
 
	m__cd
;

38 
__gcÚv_šfo
 
	m__cd
;

39 
__gcÚv_¡•_d©a
 
	m__d©a
;

40 } 
	m__combšed
;

41 } 
	t_G_icÚv_t
;

46 
	#_G_va_li¡
 
__gnuc_va_li¡


	)

48 
	#_G_HAVE_MMAP
 1

	)

49 
	#_G_HAVE_MREMAP
 1

	)

51 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

54 
	#_G_HAVE_ST_BLKSIZE
 
	`defšed
 (
_STATBUF_ST_BLKSIZE
)

	)

56 
	#_G_BUFSIZ
 8192

	)

	@/usr/include/ctype.h

22 #iâdef 
_CTYPE_H


23 
	#_CTYPE_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 
	g__BEGIN_DECLS


30 #iâdeà
_ISb™


39 
	~<’dŸn.h
>

40 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


41 
	#_ISb™
(
b™
è(1 << (b™))

	)

43 
	#_ISb™
(
b™
è((b™è< 8 ? ((1 << (b™)è<< 8è: ((1 << (b™)è>> 8))

	)

48 
	m_ISuµ”
 = 
_ISb™
 (0),

49 
	m_ISlow”
 = 
_ISb™
 (1),

50 
	m_IS®pha
 = 
_ISb™
 (2),

51 
	m_ISdig™
 = 
_ISb™
 (3),

52 
	m_ISxdig™
 = 
_ISb™
 (4),

53 
	m_IS¥aû
 = 
_ISb™
 (5),

54 
	m_IS´št
 = 
_ISb™
 (6),

55 
	m_ISg¿ph
 = 
_ISb™
 (7),

56 
	m_ISbÏnk
 = 
_ISb™
 (8),

57 
	m_ISúŒl
 = 
_ISb™
 (9),

58 
	m_ISpunù
 = 
_ISb™
 (10),

59 
	m_IS®num
 = 
_ISb™
 (11)

79 cÚ¡ **
	$__ùy³_b_loc
 ()

80 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

81 cÚ¡ 
__št32_t
 **
	$__ùy³_tŞow”_loc
 ()

82 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

83 cÚ¡ 
__št32_t
 **
	$__ùy³_touµ”_loc
 ()

84 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

87 #iâdeà
__ılu¥lus


88 
	#__isùy³
(
c
, 
ty³
) \

89 ((*
	`__ùy³_b_loc
 ())[(è(
c
)] & (è
ty³
)

	)

90 #–ià
defšed
 
__USE_EXTERN_INLINES


91 
	#__isùy³_f
(
ty³
) \

92 
__ex‹º_šlše
 \

93 
is
##
	`ty³
 (
__c
è
__THROW
 \

95  (*
	`__ùy³_b_loc
 ())[(è(
__c
)] & (è
_IS
##
ty³
; \

96 
	}

	)
}

99 
	#__i§scii
(
c
è(((cè& ~0x7fè=ğ0è

	)

100 
	#__tßscii
(
c
è((cè& 0x7fè

	)

102 
	#__exùy³
(
Çme
è
	`Çme
 (è
__THROW


	)

104 
__BEGIN_NAMESPACE_STD


110 
__exùy³
 (
i§Êum
);

111 
__exùy³
 (
i§Íha
);

112 
__exùy³
 (
isúŒl
);

113 
__exùy³
 (
isdig™
);

114 
__exùy³
 (
i¦ow”
);

115 
__exùy³
 (
isg¿ph
);

116 
__exùy³
 (
i¥ršt
);

117 
__exùy³
 (
i¥unù
);

118 
__exùy³
 (
is¥aû
);

119 
__exùy³
 (
isuµ”
);

120 
__exùy³
 (
isxdig™
);

124 
	$tŞow”
 (
__c
è
__THROW
;

127 
	$touµ”
 (
__c
è
__THROW
;

129 
__END_NAMESPACE_STD


133 #ifdef 
__USE_ISOC99


134 
__BEGIN_NAMESPACE_C99


136 
	`__exùy³
 (
isbÏnk
);

138 
__END_NAMESPACE_C99


141 #ifdeà
__USE_GNU


143 
	$isùy³
 (
__c
, 
__mask
è
__THROW
;

146 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


150 
	$i§scii
 (
__c
è
__THROW
;

154 
	$tßscii
 (
__c
è
__THROW
;

158 
	`__exùy³
 (
_touµ”
);

159 
	`__exùy³
 (
_tŞow”
);

163 
	#__tobody
(
c
, 
f
, 
a
, 
¬gs
) \

164 (
__ex‹nsiÚ__
 \

165 ({ 
__»s
; \

166 ià( (
c
) > 1) \

168 ià(
	`__butš_cÚ¡ªt_p
 (
c
)) \

170 
__c
 = (
c
); \

171 
__»s
 = 
__c
 < -128 || __ø> 255 ? __ø: (
a
)[__c]; \

174 
__»s
 = 
f
 
¬gs
; \

177 
__»s
 = (
a
)[(è(
c
)]; \

178 
__»s
; 
	}
}))

	)

180 #ià!
defšed
 
__NO_CTYPE


181 #ifdeà
__isùy³_f


182 
	$__isùy³_f
 (
®num
)

183 
	$__isùy³_f
 (
®pha
)

184 
	$__isùy³_f
 (
úŒl
)

185 
	$__isùy³_f
 (
dig™
)

186 
	$__isùy³_f
 (
low”
)

187 
	$__isùy³_f
 (
g¿ph
)

188 
	$__isùy³_f
 (
´št
)

189 
	$__isùy³_f
 (
punù
)

190 
	$__isùy³_f
 (
¥aû
)

191 
	$__isùy³_f
 (
uµ”
)

192 
	$__isùy³_f
 (
xdig™
)

193 #ifdeà
__USE_ISOC99


194 
	$__isùy³_f
 (
bÏnk
)

196 #–ià
defšed
 
__isùy³


197 
	#i§Êum
(
c
è
	`__isùy³
((c), 
_IS®num
)

	)

198 
	#i§Íha
(
c
è
	`__isùy³
((c), 
_IS®pha
)

	)

199 
	#isúŒl
(
c
è
	`__isùy³
((c), 
_ISúŒl
)

	)

200 
	#isdig™
(
c
è
	`__isùy³
((c), 
_ISdig™
)

	)

201 
	#i¦ow”
(
c
è
	`__isùy³
((c), 
_ISlow”
)

	)

202 
	#isg¿ph
(
c
è
	`__isùy³
((c), 
_ISg¿ph
)

	)

203 
	#i¥ršt
(
c
è
	`__isùy³
((c), 
_IS´št
)

	)

204 
	#i¥unù
(
c
è
	`__isùy³
((c), 
_ISpunù
)

	)

205 
	#is¥aû
(
c
è
	`__isùy³
((c), 
_IS¥aû
)

	)

206 
	#isuµ”
(
c
è
	`__isùy³
((c), 
_ISuµ”
)

	)

207 
	#isxdig™
(
c
è
	`__isùy³
((c), 
_ISxdig™
)

	)

208 #ifdeà
__USE_ISOC99


209 
	#isbÏnk
(
c
è
	`__isùy³
((c), 
_ISbÏnk
)

	)

213 #ifdeà
__USE_EXTERN_INLINES


214 
__ex‹º_šlše
 

215 
	`__NTH
 (
	$tŞow”
 (
__c
))

217  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_tŞow”_loc
 ())[__c] : __c;

218 
	}
}

220 
__ex‹º_šlše
 

221 
__NTH
 (
	$touµ”
 (
__c
))

223  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_touµ”_loc
 ())[__c] : __c;

224 
	}
}

227 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


228 
	#tŞow”
(
c
è
	`__tobody
 (c, 
tŞow”
, *
	`__ùy³_tŞow”_loc
 (), (c))

	)

229 
	#touµ”
(
c
è
	`__tobody
 (c, 
touµ”
, *
	`__ùy³_touµ”_loc
 (), (c))

	)

232 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


233 
	#i§scii
(
c
è
	`__i§scii
 (c)

	)

234 
	#tßscii
(
c
è
	`__tßscii
 (c)

	)

236 
	#_tŞow”
(
c
è((è(*
	`__ùy³_tŞow”_loc
 ())[(è(c)])

	)

237 
	#_touµ”
(
c
è((è(*
	`__ùy³_touµ”_loc
 ())[(è(c)])

	)

243 #ifdeà
__USE_XOPEN2K8


257 
	~<xloÿË.h
>

261 
	#__isùy³_l
(
c
, 
ty³
, 
loÿË
) \

262 ((
loÿË
)->
__ùy³_b
[(è(
c
)] & (è
ty³
)

	)

264 
	#__exùy³_l
(
Çme
) \

265 
	`Çme
 (, 
__loÿË_t
è
__THROW


	)

271 
__exùy³_l
 (
i§Êum_l
);

272 
__exùy³_l
 (
i§Íha_l
);

273 
__exùy³_l
 (
isúŒl_l
);

274 
__exùy³_l
 (
isdig™_l
);

275 
__exùy³_l
 (
i¦ow”_l
);

276 
__exùy³_l
 (
isg¿ph_l
);

277 
__exùy³_l
 (
i¥ršt_l
);

278 
__exùy³_l
 (
i¥unù_l
);

279 
__exùy³_l
 (
is¥aû_l
);

280 
__exùy³_l
 (
isuµ”_l
);

281 
__exùy³_l
 (
isxdig™_l
);

283 
__exùy³_l
 (
isbÏnk_l
);

287 
	$__tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

288 
	$tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

291 
	$__touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

292 
	$touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

294 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


295 
	#__tŞow”_l
(
c
, 
loÿË
) \

296 
	`__tobody
 (
c
, 
__tŞow”_l
, (
loÿË
)->
__ùy³_tŞow”
, (c,†oÿË))

	)

297 
	#__touµ”_l
(
c
, 
loÿË
) \

298 
	`__tobody
 (
c
, 
__touµ”_l
, (
loÿË
)->
__ùy³_touµ”
, (c,†oÿË))

	)

299 
	#tŞow”_l
(
c
, 
loÿË
è
	`__tŞow”_l
 ((c), (loÿË))

	)

300 
	#touµ”_l
(
c
, 
loÿË
è
	`__touµ”_l
 ((c), (loÿË))

	)

304 #iâdeà
__NO_CTYPE


305 
	#__i§Êum_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®num
, (l))

	)

306 
	#__i§Íha_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®pha
, (l))

	)

307 
	#__isúŒl_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISúŒl
, (l))

	)

308 
	#__isdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISdig™
, (l))

	)

309 
	#__i¦ow”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISlow”
, (l))

	)

310 
	#__isg¿ph_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISg¿ph
, (l))

	)

311 
	#__i¥ršt_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS´št
, (l))

	)

312 
	#__i¥unù_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISpunù
, (l))

	)

313 
	#__is¥aû_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS¥aû
, (l))

	)

314 
	#__isuµ”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISuµ”
, (l))

	)

315 
	#__isxdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISxdig™
, (l))

	)

317 
	#__isbÏnk_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISbÏnk
, (l))

	)

319 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


320 
	#__i§scii_l
(
c
,
l
è(Ö), 
	`__i§scii
 (c))

	)

321 
	#__tßscii_l
(
c
,
l
è(Ö), 
	`__tßscii
 (c))

	)

324 
	#i§Êum_l
(
c
,
l
è
	`__i§Êum_l
 ((c), (l))

	)

325 
	#i§Íha_l
(
c
,
l
è
	`__i§Íha_l
 ((c), (l))

	)

326 
	#isúŒl_l
(
c
,
l
è
	`__isúŒl_l
 ((c), (l))

	)

327 
	#isdig™_l
(
c
,
l
è
	`__isdig™_l
 ((c), (l))

	)

328 
	#i¦ow”_l
(
c
,
l
è
	`__i¦ow”_l
 ((c), (l))

	)

329 
	#isg¿ph_l
(
c
,
l
è
	`__isg¿ph_l
 ((c), (l))

	)

330 
	#i¥ršt_l
(
c
,
l
è
	`__i¥ršt_l
 ((c), (l))

	)

331 
	#i¥unù_l
(
c
,
l
è
	`__i¥unù_l
 ((c), (l))

	)

332 
	#is¥aû_l
(
c
,
l
è
	`__is¥aû_l
 ((c), (l))

	)

333 
	#isuµ”_l
(
c
,
l
è
	`__isuµ”_l
 ((c), (l))

	)

334 
	#isxdig™_l
(
c
,
l
è
	`__isxdig™_l
 ((c), (l))

	)

336 
	#isbÏnk_l
(
c
,
l
è
	`__isbÏnk_l
 ((c), (l))

	)

338 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


339 
	#i§scii_l
(
c
,
l
è
	`__i§scii_l
 ((c), (l))

	)

340 
	#tßscii_l
(
c
,
l
è
	`__tßscii_l
 ((c), (l))

	)

347 
__END_DECLS


	@/usr/include/stdc-predef.h

18 #iâdef 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifdeà
__GCC_IEC_559


37 #ià
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifdeà
__GCC_IEC_559_COMPLEX


45 #ià
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

54 
	#__STDC_ISO_10646__
 201103L

	)

57 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/endian.h

18 #iâdef 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<ã©u»s.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<b™s/’dŸn.h
>

40 #iâdeà
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_BSD


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èLO, 
	)
HI

53 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èHI, 
	)
LO

58 #ià
defšed
 
__USE_BSD
 && !defšed 
__ASSEMBLER__


60 
	~<b™s/by‹sw­.h
>

62 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


63 
	#htobe16
(
x
è
	`__bsw­_16
 (x)

	)

64 
	#htŞe16
(
x
è(x)

	)

65 
	#be16toh
(
x
è
	`__bsw­_16
 (x)

	)

66 
	#Ë16toh
(
x
è(x)

	)

68 
	#htobe32
(
x
è
	`__bsw­_32
 (x)

	)

69 
	#htŞe32
(
x
è(x)

	)

70 
	#be32toh
(
x
è
	`__bsw­_32
 (x)

	)

71 
	#Ë32toh
(
x
è(x)

	)

73 
	#htobe64
(
x
è
	`__bsw­_64
 (x)

	)

74 
	#htŞe64
(
x
è(x)

	)

75 
	#be64toh
(
x
è
	`__bsw­_64
 (x)

	)

76 
	#Ë64toh
(
x
è(x)

	)

79 
	#htobe16
(
x
è(x)

	)

80 
	#htŞe16
(
x
è
	`__bsw­_16
 (x)

	)

81 
	#be16toh
(
x
è(x)

	)

82 
	#Ë16toh
(
x
è
	`__bsw­_16
 (x)

	)

84 
	#htobe32
(
x
è(x)

	)

85 
	#htŞe32
(
x
è
	`__bsw­_32
 (x)

	)

86 
	#be32toh
(
x
è(x)

	)

87 
	#Ë32toh
(
x
è
	`__bsw­_32
 (x)

	)

89 
	#htobe64
(
x
è(x)

	)

90 
	#htŞe64
(
x
è
	`__bsw­_64
 (x)

	)

91 
	#be64toh
(
x
è(x)

	)

92 
	#Ë64toh
(
x
è
	`__bsw­_64
 (x)

	)

	@/usr/include/gconv.h

22 #iâdeà
_GCONV_H


23 
	#_GCONV_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	#__Ãed_mb¡©e_t


	)

27 
	#__Ãed_wšt_t


	)

28 
	~<wch¬.h
>

29 
	#__Ãed_size_t


	)

30 
	#__Ãed_wch¬_t


	)

31 
	~<¡ddef.h
>

34 
	#__UNKNOWN_10646_CHAR
 ((
wch¬_t
è0xfffd)

	)

39 
	m__GCONV_OK
 = 0,

40 
	m__GCONV_NOCONV
,

41 
	m__GCONV_NODB
,

42 
	m__GCONV_NOMEM
,

44 
	m__GCONV_EMPTY_INPUT
,

45 
	m__GCONV_FULL_OUTPUT
,

46 
	m__GCONV_ILLEGAL_INPUT
,

47 
	m__GCONV_INCOMPLETE_INPUT
,

49 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

50 
	m__GCONV_INTERNAL_ERROR


57 
	m__GCONV_IS_LAST
 = 0x0001,

58 
	m__GCONV_IGNORE_ERRORS
 = 0x0002,

59 
	m__GCONV_SWAP
 = 0x0004

64 
	g__gcÚv_¡•
;

65 
	g__gcÚv_¡•_d©a
;

66 
	g__gcÚv_lßded_objeù
;

67 
	g__gcÚv_Œªs_d©a
;

71 (*
	t__gcÚv_fù
è(
	t__gcÚv_¡•
 *, 
	t__gcÚv_¡•_d©a
 *,

73 **, 
	tsize_t
 *, , );

76 
	$wšt_t
 (*
	t__gcÚv_btowc_fù
è(
	t__gcÚv_¡•
 *, );

79 (*
	t__gcÚv_š™_fù
è(
	t__gcÚv_¡•
 *);

80 (*
	t__gcÚv_’d_fù
è(
	t__gcÚv_¡•
 *);

84 (*
	t__gcÚv_Œªs_fù
è(
	t__gcÚv_¡•
 *,

85 
	t__gcÚv_¡•_d©a
 *, *,

89 
	tsize_t
 *);

92 (*
	t__gcÚv_Œªs_cÚ‹xt_fù
) (*, const *,

97 (*
	t__gcÚv_Œªs_qu”y_fù
) (const *, const ***,

98 
	tsize_t
 *);

101 (*
	t__gcÚv_Œªs_š™_fù
) (**, const *);

102 (*
	t__gcÚv_Œªs_’d_fù
) (*);

104 
	s__gcÚv_Œªs_d©a


107 
__gcÚv_Œªs_fù
 
__Œªs_fù
;

108 
__gcÚv_Œªs_cÚ‹xt_fù
 
__Œªs_cÚ‹xt_fù
;

109 
__gcÚv_Œªs_’d_fù
 
__Œªs_’d_fù
;

110 *
__d©a
;

111 
__gcÚv_Œªs_d©a
 *
__Ãxt
;

116 
	s__gcÚv_¡•


118 
__gcÚv_lßded_objeù
 *
__shlib_hªdË
;

119 cÚ¡ *
__modÇme
;

121 
__couÁ”
;

123 *
__äom_Çme
;

124 *
__to_Çme
;

126 
__gcÚv_fù
 
__fù
;

127 
__gcÚv_btowc_fù
 
__btowc_fù
;

128 
__gcÚv_š™_fù
 
__š™_fù
;

129 
__gcÚv_’d_fù
 
__’d_fù
;

133 
__mš_Ãeded_äom
;

134 
__max_Ãeded_äom
;

135 
__mš_Ãeded_to
;

136 
__max_Ãeded_to
;

139 
__¡©eful
;

141 *
__d©a
;

146 
	s__gcÚv_¡•_d©a


148 *
__outbuf
;

149 *
__outbuãnd
;

153 
__æags
;

157 
__švoÿtiÚ_couÁ”
;

161 
__š‹º®_u£
;

163 
__mb¡©e_t
 *
__¡©•
;

164 
__mb¡©e_t
 
__¡©e
;

168 
__gcÚv_Œªs_d©a
 *
__Œªs
;

173 
	s__gcÚv_šfo


175 
size_t
 
__n¡•s
;

176 
__gcÚv_¡•
 *
__¡•s
;

177 
__ex‹nsiÚ__
 
__gcÚv_¡•_d©a
 
__d©a
 
__æex¬r
;

178 } *
	t__gcÚv_t
;

	@/usr/include/wchar.h

23 #iâdeà
_WCHAR_H


25 #ià!
defšed
 
__Ãed_mb¡©e_t
 && !defšed 
__Ãed_wšt_t


26 
	#_WCHAR_H
 1

	)

27 
	~<ã©u»s.h
>

30 #ifdeà
_WCHAR_H


32 
	#__Ãed___FILE


	)

33 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


34 
	#__Ãed_FILE


	)

36 
	~<¡dio.h
>

38 
	#__Ãed___va_li¡


	)

39 
	~<¡d¬g.h
>

41 
	~<b™s/wch¬.h
>

44 
	#__Ãed_size_t


	)

45 
	#__Ãed_wch¬_t


	)

46 
	#__Ãed_NULL


	)

48 #ià
defšed
 
_WCHAR_H
 || defšed 
__Ãed_wšt_t
 || !defšed 
__WINT_TYPE__


49 #undeà
__Ãed_wšt_t


50 
	#__Ãed_wšt_t


	)

51 
	~<¡ddef.h
>

55 #iâdeà
_WINT_T


60 
	#_WINT_T


	)

61 
	twšt_t
;

65 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES
 \

66 && 
defšed
 
__WINT_TYPE__


67 
__BEGIN_NAMESPACE_STD


68 
__WINT_TYPE__
 
	twšt_t
;

69 
	g__END_NAMESPACE_STD


74 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

75 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

79 #ià(
defšed
 
_WCHAR_H
 || defšed 
__Ãed_mb¡©e_t
è&& !defšed 
____mb¡©e_t_defšed


80 
	#____mb¡©e_t_defšed
 1

	)

84 
	m__couÁ
;

87 #ifdeà
__WINT_TYPE__


88 
__WINT_TYPE__
 
	m__wch
;

90 
wšt_t
 
	m__wch
;

92 
	m__wchb
[4];

93 } 
	m__v®ue
;

94 } 
	t__mb¡©e_t
;

96 #undeà
__Ãed_mb¡©e_t


101 #ifdeà
_WCHAR_H


103 #iâdeà
__mb¡©e_t_defšed


104 
__BEGIN_NAMESPACE_C99


106 
__mb¡©e_t
 
	tmb¡©e_t
;

107 
	g__END_NAMESPACE_C99


108 
	#__mb¡©e_t_defšed
 1

	)

111 #ifdeà
__USE_GNU


112 
	$__USING_NAMESPACE_C99
(
mb¡©e_t
)

115 #iâdeà
WCHAR_MIN


117 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

118 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

121 #iâdeà
WEOF


122 
	#WEOF
 (0xffffffffu)

	)

127 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_UNIX98


128 
	~<wùy³.h
>

132 
__BEGIN_DECLS


134 
__BEGIN_NAMESPACE_STD


137 
tm
;

138 
__END_NAMESPACE_STD


142 
	$__USING_NAMESPACE_STD
(
tm
)

145 
__BEGIN_NAMESPACE_STD


147 
wch¬_t
 *
	$wcsıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

148 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

150 
wch¬_t
 *
	$wc¢ıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

151 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

152 
__THROW
;

155 
wch¬_t
 *
	$wcsÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

156 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

158 
wch¬_t
 *
	$wc¢ÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

159 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

160 
__THROW
;

163 
	$wcscmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
)

164 
__THROW
 
__©Œibu‹_pu»__
;

166 
	$wc¢cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

167 
__THROW
 
__©Œibu‹_pu»__
;

168 
__END_NAMESPACE_STD


170 #ifdeà
__USE_XOPEN2K8


172 
	$wcsÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

175 
	$wc¢ÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

176 
size_t
 
__n
è
__THROW
;

180 
	~<xloÿË.h
>

182 
	$wcsÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

183 
__loÿË_t
 
__loc
è
__THROW
;

185 
	$wc¢ÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

186 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

189 
__BEGIN_NAMESPACE_STD


192 
	$wcscŞl
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

196 
size_t
 
	$wcsxäm
 (
wch¬_t
 *
__»¡riù
 
__s1
,

197 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

198 
__END_NAMESPACE_STD


200 #ifdeà
__USE_XOPEN2K8


206 
	$wcscŞl_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

207 
__loÿË_t
 
__loc
è
__THROW
;

212 
size_t
 
	$wcsxäm_l
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

213 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

216 
wch¬_t
 *
	$wcsdup
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_m®loc__
;

219 
__BEGIN_NAMESPACE_STD


221 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


222 "C++" 
wch¬_t
 *
	$wcschr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

223 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

224 "C++" cÚ¡ 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

225 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

227 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

228 
__THROW
 
__©Œibu‹_pu»__
;

231 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


232 "C++" 
wch¬_t
 *
	$wc¤chr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

233 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

234 "C++" cÚ¡ 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

235 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

237 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

238 
__THROW
 
__©Œibu‹_pu»__
;

240 
__END_NAMESPACE_STD


242 #ifdeà
__USE_GNU


245 
wch¬_t
 *
	$wcschºul
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__wc
)

246 
__THROW
 
__©Œibu‹_pu»__
;

249 
__BEGIN_NAMESPACE_STD


252 
size_t
 
	$wcsc¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__»jeù
)

253 
__THROW
 
__©Œibu‹_pu»__
;

256 
size_t
 
	$wcs¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

257 
__THROW
 
__©Œibu‹_pu»__
;

259 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


260 "C++" 
wch¬_t
 *
	$wc¥brk
 (
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

261 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

262 "C++" cÚ¡ 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
,

263 cÚ¡ 
wch¬_t
 *
__acû±
)

264 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

266 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

267 
__THROW
 
__©Œibu‹_pu»__
;

270 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


271 "C++" 
wch¬_t
 *
	$wcs¡r
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

272 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

273 "C++" cÚ¡ 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

274 cÚ¡ 
wch¬_t
 *
__ÃedË
)

275 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

277 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

278 
__THROW
 
__©Œibu‹_pu»__
;

282 
wch¬_t
 *
	$wc¡ok
 (
wch¬_t
 *
__»¡riù
 
__s
,

283 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__d–im
,

284 
wch¬_t
 **
__»¡riù
 
__±r
è
__THROW
;

287 
size_t
 
	$wc¦’
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_pu»__
;

288 
__END_NAMESPACE_STD


290 #ifdeà
__USE_XOPEN


292 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


293 "C++" 
wch¬_t
 *
	$wcswcs
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

294 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

295 "C++" cÚ¡ 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

296 cÚ¡ 
wch¬_t
 *
__ÃedË
)

297 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

299 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

300 
__THROW
 
__©Œibu‹_pu»__
;

304 #ifdeà
__USE_XOPEN2K8


306 
size_t
 
	$wc¢Ën
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__maxËn
)

307 
__THROW
 
__©Œibu‹_pu»__
;

311 
__BEGIN_NAMESPACE_STD


313 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


314 "C++" 
wch¬_t
 *
	$wmemchr
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

315 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

316 "C++" cÚ¡ 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
,

317 
size_t
 
__n
)

318 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

320 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

321 
__THROW
 
__©Œibu‹_pu»__
;

325 
	$wmemcmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

326 
__THROW
 
__©Œibu‹_pu»__
;

329 
wch¬_t
 *
	$wmemıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

330 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

334 
wch¬_t
 *
	$wmemmove
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

335 
__THROW
;

338 
wch¬_t
 *
	$wmem£t
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
è
__THROW
;

339 
__END_NAMESPACE_STD


341 #ifdeà
__USE_GNU


344 
wch¬_t
 *
	$wmempıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

345 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
)

346 
__THROW
;

350 
__BEGIN_NAMESPACE_STD


353 
wšt_t
 
	$btowc
 (
__c
è
__THROW
;

357 
	$wùob
 (
wšt_t
 
__c
è
__THROW
;

361 
	$mbsš™
 (cÚ¡ 
mb¡©e_t
 *
__ps
è
__THROW
 
__©Œibu‹_pu»__
;

365 
size_t
 
	$mb¹owc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

366 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

367 
mb¡©e_t
 *
__»¡riù
 
__p
è
__THROW
;

370 
size_t
 
	$wütomb
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wc
,

371 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

374 
size_t
 
	$__mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

375 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

376 
size_t
 
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

377 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

378 
__END_NAMESPACE_STD


380 #ifdeà
__USE_EXTERN_INLINES


386 
wšt_t
 
	$__btowc_®Ÿs
 (
__c
è
	`__asm
 ("btowc");

387 
__ex‹º_šlše
 
wšt_t


388 
	`__NTH
 (
	$btowc
 (
__c
))

389 {  (
	`__butš_cÚ¡ªt_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

390 ? (
wšt_t
è
__c
 : 
	`__btowc_®Ÿs
 (__c)); 
	}
}

392 
	$__wùob_®Ÿs
 (
wšt_t
 
__c
è
	`__asm
 ("wctob");

393 
__ex‹º_šlše
 

394 
	`__NTH
 (
	$wùob
 (
wšt_t
 
__wc
))

395 {  (
	`__butš_cÚ¡ªt_p
 (
__wc
è&& __wø>ğ
L
'\0' && __wc <= L'\x7f'

396 ? (è
__wc
 : 
	`__wùob_®Ÿs
 (__wc)); 
	}
}

398 
__ex‹º_šlše
 
size_t


399 
__NTH
 (
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

400 
mb¡©e_t
 *
__»¡riù
 
__ps
))

401 {  (
__ps
 !ğ
NULL


402 ? 
	`mb¹owc
 (
NULL
, 
__s
, 
__n
, 
__ps
è: 
	`__mb¾’
 (__s, __n, NULL)); 
	}
}

405 
__BEGIN_NAMESPACE_STD


408 
size_t
 
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

409 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

410 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

414 
size_t
 
	$wc¤tombs
 (*
__»¡riù
 
__d¡
,

415 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

416 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

417 
__END_NAMESPACE_STD


420 #ifdef 
__USE_XOPEN2K8


423 
size_t
 
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

424 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

425 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

429 
size_t
 
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
,

430 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

431 
size_t
 
__nwc
, size_ˆ
__Ën
,

432 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

437 #ifdeà
__USE_XOPEN


439 
	$wcwidth
 (
wch¬_t
 
__c
è
__THROW
;

443 
	$wcswidth
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__n
è
__THROW
;

447 
__BEGIN_NAMESPACE_STD


450 
	$wc¡od
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

451 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

452 
__END_NAMESPACE_STD


454 #ifdeà
__USE_ISOC99


455 
__BEGIN_NAMESPACE_C99


457 
	$wc¡of
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

458 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

459 
	$wc¡Şd
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

460 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

461 
__END_NAMESPACE_C99


465 
__BEGIN_NAMESPACE_STD


468 
	$wc¡Ş
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

469 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

473 
	$wc¡oul
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

474 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

475 
__THROW
;

476 
__END_NAMESPACE_STD


478 #ifdeà
__USE_ISOC99


479 
__BEGIN_NAMESPACE_C99


482 
__ex‹nsiÚ__


483 
	$wc¡Şl
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

484 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

485 
__THROW
;

489 
__ex‹nsiÚ__


490 
	$wc¡ouÎ
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

491 
wch¬_t
 **
__»¡riù
 
__’d±r
,

492 
__ba£
è
__THROW
;

493 
__END_NAMESPACE_C99


496 #ifdeà
__USE_GNU


499 
__ex‹nsiÚ__


500 
	$wc¡oq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

501 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

502 
__THROW
;

506 
__ex‹nsiÚ__


507 
	$wc¡ouq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

508 
wch¬_t
 **
__»¡riù
 
__’d±r
,

509 
__ba£
è
__THROW
;

512 #ifdeà
__USE_GNU


526 
	~<xloÿË.h
>

530 
	$wc¡Ş_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

531 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
,

532 
__loÿË_t
 
__loc
è
__THROW
;

534 
	$wc¡oul_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

535 
wch¬_t
 **
__»¡riù
 
__’d±r
,

536 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

538 
__ex‹nsiÚ__


539 
	$wc¡Şl_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

540 
wch¬_t
 **
__»¡riù
 
__’d±r
,

541 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

543 
__ex‹nsiÚ__


544 
	$wc¡ouÎ_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

545 
wch¬_t
 **
__»¡riù
 
__’d±r
,

546 
__ba£
, 
__loÿË_t
 
__loc
)

547 
__THROW
;

549 
	$wc¡od_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

550 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

551 
__THROW
;

553 
	$wc¡of_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

554 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

555 
__THROW
;

557 
	$wc¡Şd_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

558 
wch¬_t
 **
__»¡riù
 
__’d±r
,

559 
__loÿË_t
 
__loc
è
__THROW
;

563 #ifdeà
__USE_XOPEN2K8


566 
wch¬_t
 *
	$wııy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

567 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

571 
wch¬_t
 *
	$wınıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

572 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

573 
__THROW
;

580 
__FILE
 *
	$İ’_wmem¡»am
 (
wch¬_t
 **
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
;

583 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


584 
__BEGIN_NAMESPACE_STD


587 
	$fwide
 (
__FILE
 *
__å
, 
__mode
è
__THROW
;

594 
	`fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

595 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

601 
	`w´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

604 
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

605 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

606 
__THROW
 ;

612 
	`vfw´štf
 (
__FILE
 *
__»¡riù
 
__s
,

613 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

614 
__gnuc_va_li¡
 
__¬g
)

620 
	`vw´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

621 
__gnuc_va_li¡
 
__¬g
)

625 
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

626 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

627 
__gnuc_va_li¡
 
__¬g
)

628 
__THROW
 ;

635 
	`fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

636 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

642 
	`wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

645 
	$swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

646 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

647 
__THROW
 ;

649 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

650 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

651 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

652 #ifdeà
__REDIRECT


656 
	`__REDIRECT
 (
fwsÿnf
, (
__FILE
 *
__»¡riù
 
__¡»am
,

657 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

658 
__isoc99_fwsÿnf
)

660 
	`__REDIRECT
 (
wsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

661 
__isoc99_wsÿnf
)

663 
	`__REDIRECT_NTH
 (
swsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

664 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

665 ...), 
__isoc99_swsÿnf
)

668 
	`__isoc99_fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

669 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

670 
	`__isoc99_wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

671 
	$__isoc99_swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

672 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

673 
__THROW
;

674 
	#fwsÿnf
 
__isoc99_fwsÿnf


	)

675 
	#wsÿnf
 
__isoc99_wsÿnf


	)

676 
	#swsÿnf
 
__isoc99_swsÿnf


	)

680 
__END_NAMESPACE_STD


683 #ifdeà
__USE_ISOC99


684 
__BEGIN_NAMESPACE_C99


689 
	`vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

690 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

691 
__gnuc_va_li¡
 
__¬g
)

697 
	`vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

698 
__gnuc_va_li¡
 
__¬g
)

701 
	$vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

702 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

703 
__gnuc_va_li¡
 
__¬g
)

704 
__THROW
 ;

706 #ià!
defšed
 
__USE_GNU
 \

707 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

708 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

709 #ifdeà
__REDIRECT


710 
	`__REDIRECT
 (
vfwsÿnf
, (
__FILE
 *
__»¡riù
 
__s
,

711 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

712 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vfwsÿnf
)

714 
	`__REDIRECT
 (
vwsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

715 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vwsÿnf
)

717 
	`__REDIRECT_NTH
 (
vswsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

718 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

719 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vswsÿnf
)

722 
	`__isoc99_vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

723 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

724 
__gnuc_va_li¡
 
__¬g
);

725 
	`__isoc99_vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

726 
__gnuc_va_li¡
 
__¬g
);

727 
	$__isoc99_vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

728 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

729 
__gnuc_va_li¡
 
__¬g
è
__THROW
;

730 
	#vfwsÿnf
 
__isoc99_vfwsÿnf


	)

731 
	#vwsÿnf
 
__isoc99_vwsÿnf


	)

732 
	#vswsÿnf
 
__isoc99_vswsÿnf


	)

736 
__END_NAMESPACE_C99


740 
__BEGIN_NAMESPACE_STD


745 
wšt_t
 
	`fg‘wc
 (
__FILE
 *
__¡»am
);

746 
wšt_t
 
	`g‘wc
 (
__FILE
 *
__¡»am
);

752 
wšt_t
 
	`g‘wch¬
 ();

759 
wšt_t
 
	`åutwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

760 
wšt_t
 
	`putwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

766 
wšt_t
 
	`putwch¬
 (
wch¬_t
 
__wc
);

774 
wch¬_t
 *
	`fg‘ws
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

775 
__FILE
 *
__»¡riù
 
__¡»am
);

781 
	`åutws
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

782 
__FILE
 *
__»¡riù
 
__¡»am
);

789 
wšt_t
 
	`ung‘wc
 (wšt_ˆ
__wc
, 
__FILE
 *
__¡»am
);

790 
__END_NAMESPACE_STD


793 #ifdeà
__USE_GNU


801 
wšt_t
 
	`g‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

802 
wšt_t
 
	`g‘wch¬_uÆocked
 ();

810 
wšt_t
 
	`fg‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

818 
wšt_t
 
	`åutwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

827 
wšt_t
 
	`putwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

828 
wšt_t
 
	`putwch¬_uÆocked
 (
wch¬_t
 
__wc
);

837 
wch¬_t
 *
	`fg‘ws_uÆocked
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

838 
__FILE
 *
__»¡riù
 
__¡»am
);

846 
	`åutws_uÆocked
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

847 
__FILE
 *
__»¡riù
 
__¡»am
);

851 
__BEGIN_NAMESPACE_C99


855 
size_t
 
	$wcsáime
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

856 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

857 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

858 
__END_NAMESPACE_C99


860 #ifdeà
__USE_GNU


861 
	~<xloÿË.h
>

865 
size_t
 
	$wcsáime_l
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

866 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

867 cÚ¡ 
tm
 *
__»¡riù
 
__
,

868 
__loÿË_t
 
__loc
è
__THROW
;

877 #ià
defšed
 
__USE_UNIX98
 && !defšed 
__USE_GNU


878 
	#__Ãed_iswxxx


	)

879 
	~<wùy³.h
>

883 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


884 
	~<b™s/wch¬2.h
>

887 #ifdeà
__LDBL_COMPAT


888 
	~<b™s/wch¬-ldbl.h
>

891 
__END_DECLS


899 #undeà
__Ãed_mb¡©e_t


900 #undeà
__Ãed_wšt_t


	@/usr/include/wctype.h

23 #iâdeà
_WCTYPE_H


25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 #iâdeà
__Ãed_iswxxx


29 
	#_WCTYPE_H
 1

	)

32 
	#__Ãed_wšt_t


	)

33 
	~<wch¬.h
>

37 #iâdeà
WEOF


38 
	#WEOF
 (0xffffffffu)

	)

41 #undeà
__Ãed_iswxxx


46 #iâdeà
__iswxxx_defšed


47 
	#__iswxxx_defšed
 1

	)

49 
__BEGIN_NAMESPACE_C99


52 
	twùy³_t
;

53 
	g__END_NAMESPACE_C99


55 #iâdeà
_ISwb™


60 
	~<’dŸn.h
>

61 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


62 
	#_ISwb™
(
b™
è(1 << (b™))

	)

64 
	#_ISwb™
(
b™
) \

65 ((
b™
) < 8 ? () ((1UL << (bit)) << 24) \

66 : ((
b™
) < 16 ? () ((1UL << (bit)) << 8) \

67 : ((
b™
) < 24 ? () ((1UL << (bit)) >> 8) \

68 : (è((1UL << (
b™
)è>> 24))))

	)

73 
	m__ISwuµ”
 = 0,

74 
	m__ISwlow”
 = 1,

75 
	m__ISw®pha
 = 2,

76 
	m__ISwdig™
 = 3,

77 
	m__ISwxdig™
 = 4,

78 
	m__ISw¥aû
 = 5,

79 
	m__ISw´št
 = 6,

80 
	m__ISwg¿ph
 = 7,

81 
	m__ISwbÏnk
 = 8,

82 
	m__ISwúŒl
 = 9,

83 
	m__ISwpunù
 = 10,

84 
	m__ISw®num
 = 11,

86 
	m_ISwuµ”
 = 
_ISwb™
 (
__ISwuµ”
),

87 
	m_ISwlow”
 = 
_ISwb™
 (
__ISwlow”
),

88 
	m_ISw®pha
 = 
_ISwb™
 (
__ISw®pha
),

89 
	m_ISwdig™
 = 
_ISwb™
 (
__ISwdig™
),

90 
	m_ISwxdig™
 = 
_ISwb™
 (
__ISwxdig™
),

91 
	m_ISw¥aû
 = 
_ISwb™
 (
__ISw¥aû
),

92 
	m_ISw´št
 = 
_ISwb™
 (
__ISw´št
),

93 
	m_ISwg¿ph
 = 
_ISwb™
 (
__ISwg¿ph
),

94 
	m_ISwbÏnk
 = 
_ISwb™
 (
__ISwbÏnk
),

95 
	m_ISwúŒl
 = 
_ISwb™
 (
__ISwúŒl
),

96 
	m_ISwpunù
 = 
_ISwb™
 (
__ISwpunù
),

97 
	m_ISw®num
 = 
_ISwb™
 (
__ISw®num
)

102 
__BEGIN_DECLS


104 
__BEGIN_NAMESPACE_C99


111 
	$isw®num
 (
wšt_t
 
__wc
è
__THROW
;

117 
	$isw®pha
 (
wšt_t
 
__wc
è
__THROW
;

120 
	$iswúŒl
 (
wšt_t
 
__wc
è
__THROW
;

124 
	$iswdig™
 (
wšt_t
 
__wc
è
__THROW
;

128 
	$iswg¿ph
 (
wšt_t
 
__wc
è
__THROW
;

133 
	$iswlow”
 (
wšt_t
 
__wc
è
__THROW
;

136 
	$isw´št
 (
wšt_t
 
__wc
è
__THROW
;

141 
	$iswpunù
 (
wšt_t
 
__wc
è
__THROW
;

146 
	$isw¥aû
 (
wšt_t
 
__wc
è
__THROW
;

151 
	$iswuµ”
 (
wšt_t
 
__wc
è
__THROW
;

156 
	$iswxdig™
 (
wšt_t
 
__wc
è
__THROW
;

161 #ifdeà
__USE_ISOC99


162 
	$iswbÏnk
 (
wšt_t
 
__wc
è
__THROW
;

171 
wùy³_t
 
	$wùy³
 (cÚ¡ *
__´İ”ty
è
__THROW
;

175 
	$iswùy³
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
è
__THROW
;

176 
__END_NAMESPACE_C99


183 
__BEGIN_NAMESPACE_C99


186 cÚ¡ 
	t__št32_t
 *
	twù¿ns_t
;

187 
__END_NAMESPACE_C99


188 #ifdeà
__USE_GNU


189 
	$__USING_NAMESPACE_C99
(
wù¿ns_t
)

192 
__BEGIN_NAMESPACE_C99


194 
wšt_t
 
	$towlow”
 (
wšt_t
 
__wc
è
__THROW
;

197 
wšt_t
 
	$towuµ”
 (
wšt_t
 
__wc
è
__THROW
;

198 
__END_NAMESPACE_C99


200 
__END_DECLS


207 #ifdeà
_WCTYPE_H


213 
__BEGIN_DECLS


215 
__BEGIN_NAMESPACE_C99


218 
wù¿ns_t
 
	$wù¿ns
 (cÚ¡ *
__´İ”ty
è
__THROW
;

221 
wšt_t
 
	$towù¿ns
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
è
__THROW
;

222 
__END_NAMESPACE_C99


224 #ifdeà
__USE_XOPEN2K8


226 
	~<xloÿË.h
>

230 
	$isw®num_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

236 
	$isw®pha_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

239 
	$iswúŒl_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

243 
	$iswdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

247 
	$iswg¿ph_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

252 
	$iswlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

255 
	$isw´št_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

260 
	$iswpunù_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

265 
	$isw¥aû_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

270 
	$iswuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

275 
	$iswxdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

280 
	$iswbÏnk_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

284 
wùy³_t
 
	$wùy³_l
 (cÚ¡ *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

285 
__THROW
;

289 
	$iswùy³_l
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
, 
__loÿË_t
 
__loÿË
)

290 
__THROW
;

298 
wšt_t
 
	$towlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

301 
wšt_t
 
	$towuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

305 
wù¿ns_t
 
	$wù¿ns_l
 (cÚ¡ *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

306 
__THROW
;

309 
wšt_t
 
	$towù¿ns_l
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
,

310 
__loÿË_t
 
__loÿË
è
__THROW
;

314 
__END_DECLS


	@
1
.
1
/usr/include
29
573
bitmap.h
btree.h
btree_bitmap.h
btree_bitmap_noslotuse.h
btree_bitmap_outoforder.h
btree_multimap.h
const_hweight.h
nv_backend.h
skiplist.h
skiplist_multimap.h
speedtest.cc
/usr/include/assert.h
/usr/include/stdint.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/time.h
/usr/include/unistd.h
/usr/include/alloca.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/libio.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/ctype.h
/usr/include/stdc-predef.h
/usr/include/endian.h
/usr/include/gconv.h
/usr/include/wchar.h
/usr/include/wctype.h
